(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[51554],{102022:(t,e,i)=>{"use strict";i.d(e,{K:()=>c,Z:()=>g});var s=i(173381),n=i(29217),o=i(611256),r=i(591358),a=i(421915),l=i(613002);class h extends n.Z{constructor(t,e,i,s,n,r,a){super(t,e,i,o.Z.IDLE),this.src_=s,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.context_=a,this.unlisten_=null,this.state=o.Z.IDLE,this.imageLoadFunction_=r}getImage(){if(this.state==o.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const t=this.context_.canvas;t.width=this.image_.width,t.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=o.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,a.Cr)(this.extent)/this.image_.height),this.state=o.Z.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=o.Z.IDLE&&this.state!=o.Z.ERROR||(this.state=o.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=c(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=(0,a.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function c(t,e,i){const n=t;let o=!0,a=!1,h=!1;const c=[(0,l.Vx)(n,s.Z.LOAD,(function(){h=!0,a||e()}))];return n.src&&r.Tp?(a=!0,n.decode().then((function(){o&&e()})).catch((function(t){o&&(h?e():i())}))):c.push((0,l.Vx)(n,s.Z.ERROR,i)),function(){o=!1,c.forEach(l.bN)}}const g=h},29217:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var s=i(66575),n=i(173381),o=i(949179);class r extends s.Z{constructor(t,e,i,s){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=s}changed(){this.dispatchEvent(n.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,o.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,o.O3)()}}const a=r},611256:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},208913:(t,e,i)=>{"use strict";i.d(e,{XC:()=>a,mL:()=>h,_2:()=>c,BB:()=>_,e1:()=>d});var s=i(438906),n=i(921882);const o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,r=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:_(t)}function l(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const h=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let i=0;for(const s in t)3&i++||(delete t[s],--e)}n=function(t){let e,i,n,a,h;if(r.exec(t)&&(t=l(t)),o.exec(t)){const s=t.length-1;let o;o=s<=4?1:2;const r=4===s||8===s;e=parseInt(t.substr(1+0*o,o),16),i=parseInt(t.substr(1+1*o,o),16),n=parseInt(t.substr(1+2*o,o),16),a=r?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,r&&(a=(a<<4)+a)),h=[e,i,n,a/255]}else t.startsWith("rgba(")?(h=t.slice(5,-1).split(",").map(Number),g(h)):t.startsWith("rgb(")?(h=t.slice(4,-1).split(",").map(Number),h.push(1),g(h)):(0,s.h)(!1,14);return h}(i),t[i]=n,++e}return n}}();function c(t){return Array.isArray(t)?t:h(t)}function g(t){return t[0]=(0,n.uZ)(t[0]+.5|0,0,255),t[1]=(0,n.uZ)(t[1]+.5|0,0,255),t[2]=(0,n.uZ)(t[2]+.5|0,0,255),t[3]=(0,n.uZ)(t[3],0,1),t}function _(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let s=t[2];return s!=(0|s)&&(s=s+.5|0),"rgba("+e+","+i+","+s+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function d(t){return r.test(t)&&(t=l(t)),o.test(t)||t.startsWith("rgba(")||t.startsWith("rgb(")}},545120:(t,e,i)=>{"use strict";i.d(e,{y:()=>n});var s=i(208913);function n(t){return Array.isArray(t)?(0,s.BB)(t):t}},267644:(t,e,i)=>{"use strict";i.d(e,{oj:()=>s,$A:()=>n,XV:()=>o,hg:()=>r,hN:()=>a,p:()=>c});const s="ol-hidden",n="ol-selectable",o="ol-unselectable",r="ol-control",a="ol-collapsed",l=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),h=["style","variant","weight","size","lineHeight","family"],c=function(t){const e=t.match(l);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,s=h.length;t<s;++t){const s=e[t+1];void 0!==s&&(i[h[t]]=s)}return i.families=i.family.split(/,\s?/),i}},85386:(t,e,i)=>{"use strict";i.d(e,{E4:()=>n,jy:()=>o,iO:()=>r,Pb:()=>a,$H:()=>l,ZF:()=>h,ep:()=>c,hF:()=>g});var s=i(591358);function n(t,e,i,n){let o;return o=i&&i.length?i.shift():s.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",n)}function o(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function r(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function a(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function l(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function h(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function c(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function g(t,e){const i=t.childNodes;for(let s=0;;++s){const n=i[s],o=e[s];if(!n&&!o)break;n!==o&&(n?o?t.insertBefore(o,n):(t.removeChild(n),--s):t.appendChild(o))}}},764889:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=class{drawCustom(t,e,i,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},968509:(t,e,i)=>{"use strict";i.d(e,{Df:()=>l,bL:()=>h,mb:()=>c,X9:()=>g,He:()=>_,rc:()=>d,V4:()=>u,Tx:()=>f,PH:()=>m,ru:()=>x,oB:()=>S,yC:()=>p,sG:()=>y,Qx:()=>I,Kd:()=>D,Zw:()=>L,_f:()=>A});var s=i(558493),n=i(591358),o=i(913580),r=i(85386),a=i(267644);const l="10px sans-serif",h="#000",c="round",g=[],_=0,d="round",u=10,f="#000",m="center",x="middle",S=[0,0,0,0],p=1,y=new s.Z;let v,w=null;const k={},I=function(){const t="32px ",e=["monospace","serif"],i=e.length,s="wmytzilWMYTZIL@#/&?$%10";let n,r;function l(n,o,a){let l=!0;for(let h=0;h<i;++h){const i=e[h];if(r=T(n+" "+o+" "+t+i,s),a!=i){const e=T(n+" "+o+" "+t+a+","+i,s);l=l&&e!=r}}return!!l}function h(){let t=!0;const e=y.getKeys();for(let i=0,s=e.length;i<s;++i){const s=e[i];y.get(s)<100&&(l.apply(this,s.split("\n"))?((0,o.Z)(k),w=null,v=void 0,y.set(s,100)):(y.set(s,y.get(s)+1,!0),t=!1))}t&&(clearInterval(n),n=void 0)}return function(t){const e=(0,a.p)(t);if(!e)return;const i=e.families;for(let t=0,s=i.length;t<s;++t){const s=i[t],o=e.style+"\n"+e.weight+"\n"+s;void 0===y.get(o)&&(y.set(o,100,!0),l(e.style,e.weight,s)||(y.set(o,0,!0),void 0===n&&(n=setInterval(h,32))))}}}(),O=function(){let t;return function(e){let i=k[e];if(null==i){if(n.Id){const t=(0,a.p)(e),s=C(e,"Žg");i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);k[e]=i}return i}}();function C(t,e){return w||(w=(0,r.E4)(1,1)),t!=v&&(w.font=t,v=w.font),w.measureText(e)}function T(t,e){return C(t,e).width}function D(t,e,i){if(e in i)return i[e];const s=e.split("\n").reduce(((e,i)=>Math.max(e,T(t,i))),0);return i[e]=s,s}function L(t,e){const i=[],s=[],n=[];let o=0,r=0,a=0,l=0;for(let h=0,c=e.length;h<=c;h+=2){const g=e[h];if("\n"===g||h===c){o=Math.max(o,r),n.push(r),r=0,a+=l;continue}const _=e[h+1]||t.font,d=T(_,g);i.push(d),r+=d;const u=O(_);s.push(u),l=Math.max(l,u)}return{width:o,height:a,widths:i,heights:s,lineWidths:n}}function A(t,e,i,s,n,o,r,a,l,h,c){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),s.contextInstructions?(t.translate(l,h),t.scale(c[0],c[1]),function(t,e){const i=t.contextInstructions;for(let t=0,s=i.length;t<s;t+=2)Array.isArray(i[t+1])?e[i[t]].apply(e,i[t+1]):e[i[t]]=i[t+1]}(s,t)):c[0]<0||c[1]<0?(t.translate(l,h),t.scale(c[0],c[1]),t.drawImage(s,n,o,r,a,0,0,r,a)):t.drawImage(s,n,o,r,a,l,h,r*c[0],a*c[1]),t.restore()}},576798:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var s=i(764889),n=i(545120),o=i(782359),r=i(968509),a=i(179682),l=i(421915),h=i(921882),c=i(517882),g=i(432538);class _ extends s.Z{constructor(t,e,i,s,n,r,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=s,this.transformRotation_=s?(0,h.FH)(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=n,this.squaredTolerance_=r,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,o.Ue)()}drawImages_(t,e,i,s){if(!this.image_)return;const n=(0,c.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_),r=this.context_,a=this.tmpLocalTransform_,l=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let t=0,e=n.length;t<e;t+=2){const e=n[t]-this.imageAnchorX_,i=n[t+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,s=i+this.imageAnchorY_;(0,o.qC)(a,t,s,1,1,h,-t,-s),r.setTransform.apply(r,a),r.translate(t,s),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.setTransform(1,0,0,1,0,0)}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=l)}drawText_(t,e,i,s){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const n=(0,c.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let r=this.textRotation_;for(0===this.transformRotation_&&(r-=this.viewRotation_),this.textRotateWithView_&&(r+=this.viewRotation_);e<i;e+=s){const t=n[e]+this.textOffsetX_,i=n[e+1]+this.textOffsetY_;0!==r||1!=this.textScale_[0]||1!=this.textScale_[1]?(o.translate(t-this.textOffsetX_,i-this.textOffsetY_),o.rotate(r),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,s,n){const o=this.context_,r=(0,c.vT)(t,e,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(r[0],r[1]);let a=r.length;n&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(r[t],r[t+1]);return n&&o.closePath(),i}drawRings_(t,e,i,s){for(let n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],s,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,g.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],s=e[3]-e[1],n=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,l.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let s=0;const n=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t)s=this.moveToLineTo_(i,s,n[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let s=0;const n=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=n.length;t<e;++t){const e=n[t];s=this.drawRings_(i,s,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,a.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,s=t.textAlign?t.textAlign:r.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=s&&(i.textAlign=s,e.textAlign=s),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=s,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:s,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,n.y)(e||r.bL)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=s||r.X9;this.strokeState_={lineCap:void 0!==i?i:r.mb,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(o||r.He)*this.pixelRatio_,lineJoin:void 0!==a?a:r.rc,lineWidth:(void 0!==l?l:r.yC)*this.pixelRatio_,miterLimit:void 0!==h?h:r.V4,strokeStyle:(0,n.y)(t||r.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),s=t.getAnchor(),n=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,n.y)(t||r.bL)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),s=i.getLineDash(),o=i.getLineDashOffset(),a=i.getLineJoin(),l=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:r.mb,lineDash:s||r.X9,lineDashOffset:o||r.He,lineJoin:void 0!==a?a:r.rc,lineWidth:void 0!==l?l:r.yC,miterLimit:void 0!==h?h:r.V4,strokeStyle:(0,n.y)(t||r.Tx)}}else this.textStrokeState_=null;const s=t.getFont(),o=t.getOffsetX(),a=t.getOffsetY(),l=t.getRotateWithView(),h=t.getRotation(),c=t.getScaleArray(),g=t.getText(),_=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==s?s:r.Df,textAlign:void 0!==_?_:r.PH,textBaseline:void 0!==d?d:r.ru},this.text_=void 0!==g?Array.isArray(g)?g.reduce(((t,e,i)=>t+(i%2?" ":e)),""):g:"",this.textOffsetX_=void 0!==o?this.pixelRatio_*o:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const d=_},243631:(t,e,i)=>{"use strict";i.d(e,{eR:()=>a,se:()=>l,Qz:()=>h,Pn:()=>c});var s=i(611256),n=i(949179);const o=.5,r={Point:function(t,e,i,n,o){const r=i.getImage(),a=i.getText();let l;if(r){if(r.getImageState()!=s.Z.LOADED)return;let h=t;if(o){const s=r.getDeclutterMode();if("none"!==s)if(h=o,"obstacle"===s){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(r,l),s.drawPoint(e,n)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(r,l),c.drawPoint(e,n)}if(a&&a.getText()){let s=t;o&&(s=o);const r=s.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,l),r.drawText(e,n)}},LineString:function(t,e,i,s,n){const o=i.getStroke();if(o){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,o),n.drawLineString(e,s)}const r=i.getText();if(r&&r.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,s)}},Polygon:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(o||r){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(o,r),n.drawPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}},MultiPoint:function(t,e,i,n,o){const r=i.getImage(),a=i.getText();let l;if(r){if(r.getImageState()!=s.Z.LOADED)return;let h=t;if(o){const s=r.getDeclutterMode();if("none"!==s)if(h=o,"obstacle"===s){const s=t.getBuilder(i.getZIndex(),"Image");s.setImageStyle(r,l),s.drawMultiPoint(e,n)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(r,l),c.drawMultiPoint(e,n)}if(a&&a.getText()){let s=t;o&&(s=o);const r=s.getBuilder(i.getZIndex(),"Text");r.setTextStyle(a,l),r.drawText(e,n)}},MultiLineString:function(t,e,i,s,n){const o=i.getStroke();if(o){const n=t.getBuilder(i.getZIndex(),"LineString");n.setFillStrokeStyle(null,o),n.drawMultiLineString(e,s)}const r=i.getText();if(r&&r.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(r),o.drawText(e,s)}},MultiPolygon:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(r||o){const n=t.getBuilder(i.getZIndex(),"Polygon");n.setFillStrokeStyle(o,r),n.drawMultiPolygon(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}},GeometryCollection:function(t,e,i,s,n){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a)(0,r[o[a].getType()])(t,o[a],i,s,n)},Circle:function(t,e,i,s,n){const o=i.getFill(),r=i.getStroke();if(o||r){const n=t.getBuilder(i.getZIndex(),"Circle");n.setFillStrokeStyle(o,r),n.drawCircle(e,s)}const a=i.getText();if(a&&a.getText()){const o=(n||t).getBuilder(i.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,s)}}};function a(t,e){return parseInt((0,n.sq)(t),10)-parseInt((0,n.sq)(e),10)}function l(t,e){const i=h(t,e);return i*i}function h(t,e){return o*t/e}function c(t,e,i,n,o,a,l){let h=!1;const c=i.getImage();if(c){const t=c.getImageState();t==s.Z.LOADED||t==s.Z.ERROR?c.unlistenImageChange(o):(t==s.Z.IDLE&&c.load(),c.listenImageChange(o),h=!0)}return function(t,e,i,s,n,o){const a=i.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(s,n);i.getRenderer()?g(t,l,i,e):(0,r[l.getType()])(t,l,i,e,o)}(t,e,i,n,a,l),h}function g(t,e,i,s){if("GeometryCollection"!=e.getType())t.getBuilder(i.getZIndex(),"Default").drawCustom(e,s,i.getRenderer(),i.getHitDetectionRenderer());else{const n=e.getGeometries();for(let e=0,o=n.length;e<o;++e)g(t,n[e],i,s)}}},450596:(t,e,i)=>{"use strict";function s(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function n(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function r(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{f3:()=>s,py:()=>n,bA:()=>o,Pq:()=>r})},409371:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(218663);class n extends s.Z{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const o=n},898185:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class s{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new s({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const n=s},639166:(t,e,i)=>{"use strict";i.d(e,{Z:()=>x});var s=i(173381),n=i(611256),o=i(548039),r=i(208913),a=i(438906),l=i(66575),h=i(85386),c=i(516250),g=i(102022);let _=null;class d extends l.Z{constructor(t,e,i,s,n,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=s,this.canvas_={},this.color_=o,this.unlisten_=null,this.imageState_=n,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===n.Z.LOADED){_||(_=(0,h.E4)(1,1,void 0,{willReadFrequently:!0})),_.drawImage(this.image_,0,0);try{_.getImageData(0,0,1,1),this.tainted_=!1}catch(t){_=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(s.Z.CHANGE)}handleImageError_(){this.imageState_=n.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=n.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,h.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===n.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=n.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,g.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==n.Z.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const s=i.getContext("2d");s.scale(t,t),s.drawImage(e,0,0),s.globalCompositeOperation="multiply",s.fillStyle=(0,r.XC)(this.color_),s.fillRect(0,0,i.width/t,i.height/t),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var u=i(949179);function f(t,e,i,s){return void 0!==i&&void 0!==s?[i/t,s/e]:void 0!==i?i/t:void 0!==s?s/e:1}class m extends o.Z{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,s=void 0!==t.scale?t.scale:1,o=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:s,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const l=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let h=t.src;(0,a.h)(!(void 0!==h&&l),4),(0,a.h)(!l||l&&this.imgSize_,5),void 0!==h&&0!==h.length||!l||(h=l.src||(0,u.sq)(l)),(0,a.h)(void 0!==h&&h.length>0,6),(0,a.h)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),69);const g=void 0!==t.src?n.Z.IDLE:n.Z.LOADED;if(this.color_=void 0!==t.color?(0,r._2)(t.color):null,this.iconImage_=function(t,e,i,s,n,o){let r=c.c.get(e,s,o);return r||(r=new d(t,e,i,s,n,o),c.c.set(e,s,o,r)),r}(l,h,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,g,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{const s=this.getImage(1);if(!(s instanceof HTMLCanvasElement||s.src&&s.complete)){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(f(i[0],i[1],t.width,t.height))};return void this.listenImageChange(e)}e=s.width,i=s.height}void 0!==e&&this.setScale(f(e,i,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new m({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==n.Z.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==n.Z.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(s.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(s.Z.CHANGE,t)}}const x=m},516250:(t,e,i)=>{"use strict";i.d(e,{c:()=>o});var s=i(208913);function n(t,e,i){return e+":"+t+":"+(i?(0,s.XC)(i):"null")}const o=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];3&t++||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const s=n(t,e,i);return s in this.cache_?this.cache_[s]:null}set(t,e,i,s){const o=n(t,e,i);this.cache_[o]=s,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}},548039:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(949179),n=i(450596);class o{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,n.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new o({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,s.O3)()}getImage(t){return(0,s.O3)()}getHitDetectionImage(){return(0,s.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,s.O3)()}getImageSize(){return(0,s.O3)()}getOrigin(){return(0,s.O3)()}getSize(){return(0,s.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,n.Pq)(t)}listenImageChange(t){(0,s.O3)()}load(){(0,s.O3)()}unlistenImageChange(t){(0,s.O3)()}}const r=o},218663:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var s=i(611256),n=i(548039),o=i(208913),r=i(545120),a=i(85386),l=i(968509);class h extends n.Z{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new h({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,s=(0,a.E4)(i.size*t,i.size*t);this.draw_(i,s,t),e=s.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return s.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let s=this.radius_,n=void 0===this.radius2_?s:this.radius2_;if(s<n){const t=s;s=n,n=t}const o=void 0===this.radius2_?this.points_:2*this.points_,r=2*Math.PI/o,a=n*Math.sin(r),l=s-Math.sqrt(n*n-a*a),h=Math.sqrt(a*a+l*l),c=h/a;if("miter"===t&&c<=i)return c*e;const g=e/2/c,_=e/2*(l/h),d=Math.sqrt((s+g)*(s+g)+_*_)-s;if(void 0===this.radius2_||"bevel"===t)return 2*d;const u=s*Math.sin(r),f=n-Math.sqrt(s*s-u*u),m=Math.sqrt(u*u+f*f)/u;if(m<=i){const t=m*e/2-n-s;return 2*Math.max(d,t)}return 2*d}createRenderOptions(){let t,e=l.rc,i=0,s=null,n=0,o=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=l.Tx),t=(0,r.y)(t),o=this.stroke_.getWidth(),void 0===o&&(o=l.yC),s=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=l.rc),i=this.stroke_.getMiterLimit(),void 0===i&&(i=l.V4));const a=this.calculateLineJoinSize_(e,o,i),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:o,size:Math.ceil(2*h+a),lineDash:s,lineDashOffset:n,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.bL),e.fillStyle=(0,r.y)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=(0,o._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const s=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const n=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let r=0;r<e;r++){const e=n+r*o,a=r%2==0?i:s;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const c=h},120767:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class s{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new s({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const n=s},831219:(t,e,i)=>{"use strict";i.d(e,{J$:()=>l,yF:()=>c,Ly:()=>g,ZP:()=>d});var s=i(409371),n=i(898185),o=i(120767),r=i(438906);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=_,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=_,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:((0,r.h)("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i}}return e}let h=null;function c(t,e){if(!h){const t=new n.Z({color:"rgba(255,255,255,0.4)"}),e=new o.Z({color:"#3399CC",width:1.25});h=[new a({image:new s.Z({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return h}function g(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new a({fill:new n.Z({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new o.Z({color:e,width:5})}),new a({stroke:new o.Z({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new s.Z({radius:6,fill:new n.Z({color:i}),stroke:new o.Z({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function _(t){return t.getGeometry()}const d=a},315565:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(898185),n=i(450596);class o{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,n.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new s.Z({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new o({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,n.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const r=o}}]);