(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[66190],{134990:(t,e,r)=>{"use strict";r.d(e,{D7:()=>a,mN:()=>s,vb:()=>l,KT:()=>d,QK:()=>O,cc:()=>S,Gx:()=>E,XH:()=>p,lX:()=>y,tP:()=>f,Dq:()=>T,LE:()=>R,SW:()=>m,si:()=>v,i2:()=>g,IY:()=>G,Zf:()=>h,ij:()=>Y,Hb:()=>b,Mk:()=>_,c:()=>I,NZ:()=>C,Cx:()=>A,wb:()=>D,km:()=>P,un:()=>w,Ro:()=>L,jr:()=>N,ZY:()=>j,EQ:()=>U,W$:()=>k,mk:()=>M,U3:()=>V,aF:()=>W,IH:()=>q,rp:()=>F,D_:()=>Z,zJ:()=>B,wJ:()=>K,OS:()=>z,YP:()=>H,Ct:()=>X,Od:()=>x,y6:()=>Q,g5:()=>$,_e:()=>J,DF:()=>tt,GD:()=>et,K0:()=>rt,kB:()=>nt,Xn:()=>ot,G5:()=>ct,Vx:()=>it,RZ:()=>ut,pB:()=>at,$A:()=>st,m7:()=>lt,YM:()=>dt,o2:()=>Ot,ql:()=>St,c0:()=>Et,Fu:()=>pt,WE:()=>yt,fD:()=>ft,EE:()=>Tt});var n=r(747037),o=r.n(n),c=r(455877),i=r.n(c),u=r(192579),a="GEOSTORY:ADD",s="GEOSTORY:ADD_RESOURCE",l="GEOSTORY:CHANGE_MODE",d="GEOSTORY:CLEAR_SAVE_ERROR",O="GEOSTORY:EDIT_RESOURCE",S="GEOSTORY:EDIT_WEBPAGE",E="GEOSTORY:SCROLLING",p="GEOSTORY:LOAD_GEOSTORY",y="GEOSTORY:LOADING_GEOSTORY",f="GEOSTORY:MOVE",T="GEOSTORY:REMOVE",R="GEOSTORY:SAVE_STORY",m="GEOSTORY:SAVE_ERROR",v="GEOSTORY:STORY_SAVED",g="GEOSTORY:SELECT_CARD",G="GEOSTORY:SET_CONTROL",h="GEOSTORY:SET_RESOURCE",Y="GEOSTORY:SET_CURRENT_STORY",b="GEOSTORY:SET_WEBPAGE_URL",_="GEOSTORY:TOGGLE_CARD_PREVIEW",I="GEOSTORY:TOGGLE_SETTINGS_PANEL",C="GEOSTORY:TOGGLE_SETTING",A="GEOSTORY:TOGGLE_CONTENT_FOCUS",D="GEOSTORY:UPDATE",P="GEOSTORY:UPDATE_SETTING",w="GEOSTORY:UPDATE_CURRENT_PAGE",L="GEOSTORY:REMOVE_RESOURCE",N="GEOSTORY:SET_PENDING_CHANGES",j="GEOSTORY:SET_UPDATE_URL_SCROLL",U="GEOSTORY:UPDATE_MEDIA_EDITOR_SETTINGS",k="GEOSTORY:HIDE_CAROUSEL_ITEMS",M="GEOSTORY:ENABLE_DRAW",V="GEOSTORY:EXPORT",W="GEOSTORY:IMPORT",q=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t};return{type:a,id:r&&r.id||i()(),path:t,position:e,element:o()(r)&&(0,u.nq)(r,n)||r}},F=function(t,e,r){return{type:s,id:t,mediaType:e,data:r}},Z=function(t){return{type:l,mode:t?u.nl.EDIT:u.nl.VIEW}},B=function(t,e,r){return{type:O,id:t,mediaType:e,data:r}},K=function(t,e){return{type:p,id:t,options:e}},z=function(t){return{type:"GEOSTORY:GEOSTORY_LOADED",id:t}},H=function(){return{type:y,value:arguments.length>0&&void 0!==arguments[0]&&arguments[0],name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loading"}},X=function(t){return{type:"GEOSTORY:LOAD_GEOSTORY_ERROR",error:t}},x=function(t){return{type:T,path:t}},Q=function(t){return{type:m,error:t}},$=function(t,e){return{type:G,control:t,value:e}},J=function(t){return{type:g,card:t}},tt=function(t){return{type:h,resource:t}},et=function(t){return{type:v,id:t}},rt=function(t){return{type:Y,story:t}},nt=function(){return{type:_}},ot=function(t){return{type:C,option:t}},ct=function(){return{type:I,withSave:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},it=function(t,e){return{type:D,path:t,element:e,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace",options:arguments.length>3?arguments[3]:void 0}},ut=function(t){var e=t.sectionId,r=t.columnId;return{type:w,sectionId:e,columnId:r}},at=function(t,e,r){return{type:f,source:t,target:e,position:r}},st=function(t,e,r,n,o){return{type:A,status:t,target:e,selector:r,hideContent:n,path:o}},lt=function(t,e){return{type:P,prop:t,value:e}},dt=function(t){return{type:b,src:t}},Ot=function(t){var e=t.path;return{type:S,path:e,owner:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GEOSTORY"}},St=function(t,e){return{type:L,id:t,mediaType:e}},Et=function(t){return{type:N,value:t}},pt=function(t){return{type:U,mediaEditorSettings:t}},yt=function(t){return{type:E,status:t}},ft=function(t,e){return{type:k,sectionId:t,showContentId:e}},Tt=function(t){return{type:M,drawOptions:t}}},166190:(t,e,r)=>{"use strict";r.d(e,{Z:()=>P});var n=r(227361),o=r.n(n),c=r(747037),i=r.n(c),u=r(281763),a=r.n(u),s=r(630998),l=r.n(s),d=r(313311),O=r.n(d),S=r(968630),E=r.n(S),p=r(701469),y=r.n(p),f=r(984596),T=r.n(f),R=r(545578),m=r.n(R),v=r(761868),g=r(192579),G=r(134990);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _(t,e,r){var n;return n=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==h(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=function t(e,r,n){var o=n.contents,c=n.background,i=n.id,u=n.resourceId,a=[],s=r+'{"id": "'.concat(i,'"}]');return u===e?[s]:(c&&c.resourceId===e&&a.push(s+".background"),o?o.reduce((function(r,n){return[].concat(I(r),I(t(e,s+".contents[",n)))}),a):a)},D={mode:"view",isCollapsed:!1,focusedContent:{},currentPage:{},settings:{},oldSettings:{},updateUrlOnScroll:!1};const P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case G.D7:var r=e.id,n=e.path,c=e.position,u=e.element,s=(0,g.Ll)("currentStory.".concat(n),t),d=o()(t,s,[]),S=function(t,e){var r=t.length,n=0;return e||0===e||(n=r),i()(e)?n=l()(t,{id:e})+1:a()(e)&&(n=Math.min(e,t.length)),n}(d,c),p=d.slice();return p.splice(S,0,b({id:r},u)),(0,v.t8)(s,p,t);case G.mN:var f=e.id,R=e.mediaType,h=e.data;return(0,v.t8)("currentStory.resources",m()([{id:f,type:R,data:h}].concat(I(t.currentStory&&t.currentStory.resources||[])),"id"),t);case G.vb:return(0,v.t8)("mode",e.mode,t);case G.QK:var Y=e.id,C=e.mediaType,P=e.data,w=(0,v.cc)("currentStory.resources",{id:Y,type:C,data:P},{id:Y},t);return C===g.Tr.MAP&&t.currentStory.sections.filter((function(t){return t.type!==g.ID.CAROUSEL})).reduce((function(t,e){return[].concat(I(t),I(A(Y,"sections[",e)))}),[]).map((function(e){var r=(0,g.Ll)("currentStory.".concat(e,".map"),t);w=(0,v.t8)(r,void 0,w)})),w;case G.Ro:var L=e.id,N=e.mediaType,j=(0,v.z6)("currentStory.resources",{id:L},t);return t.currentStory.sections.reduce((function(t,e){return[].concat(I(t),I(A(L,"sections[",e)))}),[]).map((function(e){var r=(0,g.Ll)("currentStory.".concat(e,".resourceId"),t);if(j=(0,v.zN)(r,j),N===g.Tr.MAP){var n=(0,g.Ll)("currentStory.".concat(e,".map"),t);j=(0,v.zN)(n,j)}})),j;case G.lX:return(0,v.t8)("loading"===e.name?"loading":"loadFlags.".concat(e.name),e.value,(0,v.t8)("loading",e.value,t));case G.Dq:var U=e.path,k=(0,g.Ll)("currentStory.".concat(U),t),M=I(k),V=M.pop(),W=o()(t,M);return y()(W)?(i()(V)&&(V=parseInt(V,10)),(0,v.t8)(M,[].concat(I(W.slice(0,V)),I(W.slice(V+1))),t)):(0,v.zN)(k,t);case G.ij:var q,F,Z,B,K,z=t.defaultSettings||{},H=e.story.settings||z,X=(null===(q=H)||void 0===q||null===(F=q.theme)||void 0===F?void 0:F.fontFamilies)||[],x=null===(Z=t.currentStory)||void 0===Z||null===(B=Z.settings)||void 0===B||null===(K=B.theme)||void 0===K?void 0:K.fontFamilies;return x&&x.length>0&&(H=(0,v.t8)("theme.fontFamilies",m()([].concat(I(x),I(X)),"family"),H)),(0,v.t8)("currentStory",b(b({},e.story),{},{settings:H}),t);case G.i2:return(0,v.t8)("selectedCard",t.selectedCard===e.card?"":e.card,t);case G.IY:var Q=e.control,$=e.value;return(0,v.t8)("controls.".concat(Q),$,t);case G.Zf:var J=e.resource,tt=t.currentStory&&t.currentStory.settings||{};return(0,v.qC)((0,v.t8)("resource",J),(0,v.t8)("currentStory.settings.storyTitle",tt.storyTitle||J.name))(t);case G.si:case G.KT:return(0,v.zN)("errors.save",t);case G.SW:return(0,v.t8)("errors.save",T()(e.error),t);case G.Mk:return(0,v.t8)("isCollapsed",!t.isCollapsed,t);case G.NZ:var et=o()(t,"currentStory.settings.".concat(e.option));return(0,v.t8)("currentStory.settings.".concat(e.option),!et,t);case G.c:var rt=!t.isSettingsEnabled,nt=t.currentStory&&t.currentStory.settings||{};return(0,v.qC)((0,v.t8)("isSettingsEnabled",rt),(0,v.t8)("oldSettings",rt?nt:{}),(0,v.t8)("currentStory.settings",rt?b({},nt):e.withSave?nt:t.oldSettings))(t);case G.wb:var ot=e.path,ct=e.mode,it=e.options,ut=e.element,at=(0,g.Ll)("currentStory.".concat(ot),t),st=o()(t,at);return E()(st)&&E()(ut)&&"merge"===ct&&(ut=b(b({},st),ut)),y()(st)&&y()(ut)&&"merge"===ct&&(ut=null!=it&&it.uniqueByKey?m()([].concat(I(st),I(ut)),it.uniqueByKey):[].concat(I(st),I(ut))),(0,v.t8)(at,ut,t);case G.km:return(0,v.t8)("currentStory.settings.".concat(e.prop),e.value,t);case G.un:if(e.columnId){var lt=O()(t.currentStory.sections,(function(t){return O()(t.contents,{id:e.columnId})}));return lt&&O()(lt.contents,{id:e.columnId})?(0,v.t8)("currentPage",b(b({},t.currentPage),{},{columns:b(b({},t.currentPage.columns),{},_({},lt.id,e.columnId))}),t):t}return(0,v.t8)("currentPage",b(b({},t.currentPage),{},{sectionId:e.sectionId}),t);case G.Cx:var dt=e.status,Ot=e.target,St=e.selector,Et=void 0===St?"":St,pt=e.hideContent,yt=void 0!==pt&&pt,ft=e.path,Tt=dt?{target:Ot,selector:Et,hideContent:yt,path:ft}:void 0;return(0,v.t8)("focusedContent",Tt,t);case G.jr:return(0,v.t8)("pendingChanges",e.value,t);case G.ZY:return(0,v.t8)("updateUrlOnScroll",e.value,t);case G.EQ:return(0,v.t8)("mediaEditorSettings",e.mediaEditorSettings,t);case G.W$:if(e.sectionId){var Rt=O()(t.currentStory.sections,(function(t){return O()(t.contents,{id:e.showContentId})}));return Rt&&O()(Rt.contents,{id:e.showContentId})?(0,v.t8)("currentStory",b(b({},t.currentStory),{},{sections:(0,g.eI)(t.currentStory.sections,e)}),t):t}return t;case G.mk:return(0,v.t8)("drawOptions",e.drawOptions,t);default:return t}}}}]);