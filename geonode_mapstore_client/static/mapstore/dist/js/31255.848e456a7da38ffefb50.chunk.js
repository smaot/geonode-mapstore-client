(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[31255],{285148:(r,t,e)=>{"use strict";e.d(t,{Qw:()=>g,jo:()=>O,m$:()=>j,AF:()=>h,LS:()=>w,WT:()=>S,ns:()=>P,RP:()=>q,aK:()=>A,oP:()=>F});var n=e(675110),u=e(55237),o=e(22222),i=e(227361),f=e.n(i),a=e(313311),c=e.n(a);function l(r){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},l(r)}function y(r){return function(r){if(Array.isArray(r))return b(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||s(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,t){if(r){if("string"==typeof r)return b(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(r,t):void 0}}function b(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function m(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function d(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){p(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function p(r,t,e){var n;return n=function(r,t){if("object"!=l(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(t),(t="symbol"==l(n)?n:n+"")in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var g=function(r,t){return function(e){return f()(e,"dimension.data[".concat(t,"][").concat(r,"]"))}},v=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return c()(r.dimensions||[],{name:t})},O=function(r,t){return function(e){return g(r.id,t)(e)||v(r,t)}},j=function(r){return(0,n.l2)(r).reduce((function(t,e){var n=O(e,"time")(r);return n?d(d({},t),{},p({},e.id,n)):t}),{})},h=function(r){return(0,n.l2)(r).filter((function(r){return v(r,"time")}))},w=function(r){return(0,n.l2)(r).filter((function(r){return r.visibility&&v(r,"time")}))},S=function(r){var t=f()(r,"dimension.currentTime");return t&&t.split("/")[0]},P=function(r){return f()(r,"dimension.offsetTime")},q=function(r){return!!P(r)},A=((0,o.P1)(j,(function(r){return Object.keys(r).reduce((function(t,e){return[].concat(y(t),y(r[e]&&r[e].values||[]))}),[]).sort()||[]})),function(r){return function(t){return y(f()(O(r,"time")(t),"values",[])).sort()}}),F=function(r,t){var e=g(t,"time")(r),n=e&&e.domain&&e.domain.split("--");if(n&&2===n.length)return n&&{start:n[0],end:n[1]};var o,i,f=e&&e.domain&&e.domain.split(",");if(f&&f.length>0){var a=(o=(0,u.tz)(f),i=2,function(r){if(Array.isArray(r))return r}(o)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,u,o,i,f=[],a=!0,c=!1;try{if(o=(e=e.call(r)).next,0===t){if(Object(e)!==e)return;a=!1}else for(;!(a=(n=o.call(e)).done)&&(f.push(n.value),f.length!==t);a=!0);}catch(r){c=!0,u=r}finally{try{if(!a&&null!=e.return&&(i=e.return(),Object(i)!==i))return}finally{if(c)throw u}}return f}}(o,i)||s(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{start:a[0],end:a[1]}}return null}},731255:(r,t,e)=>{"use strict";e.d(t,{u$:()=>T,Xh:()=>D,_w:()=>I,eO:()=>k,kG:()=>C,P3:()=>L,bq:()=>M,LB:()=>_,b4:()=>R,M0:()=>K,Li:()=>x,Rd:()=>Q,g5:()=>U,Sj:()=>N,w3:()=>B,o:()=>V,eK:()=>W,jY:()=>H,ND:()=>X,OK:()=>Y,tU:()=>Z,ou:()=>J,DK:()=>rr,uz:()=>tr,Ci:()=>er,Ae:()=>nr,gz:()=>ur,He:()=>or,P4:()=>ir,kd:()=>fr,TC:()=>ar,nq:()=>cr,Vf:()=>lr,lg:()=>yr,qd:()=>sr,Kt:()=>br,zc:()=>mr});var n=e(91175),u=e.n(n),o=e(227361),i=e.n(o),f=e(513218),a=e.n(f),c=e(675110),l=e(378889),y=e(308316),s=e(552259),b=e(196958),m=e(285148),d=e(274621),p=e(93152),g=e(824260),v=e(784715),O=e(618446),j=e.n(O),h=e(800827),w=e(916651),S=e(898631);function P(r){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},P(r)}function q(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function A(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function F(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?A(Object(e),!0).forEach((function(t){var n,u,o,i;n=r,u=t,o=e[t],i=function(r,t){if("object"!=P(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(u),(u="symbol"==P(i)?i:i+"")in n?Object.defineProperty(n,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[u]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):A(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var E=c.CA,T=function(r){return i()(r,"featuregrid.selectedLayer")},D=function(r){return i()(r,"featuregrid.attributes")},I=function(r){return r&&r.featuregrid&&r.featuregrid.select},k=function(r){return r&&r.featuregrid&&r.featuregrid.changes},C=function(r){return r&&r.featuregrid&&r.featuregrid.newFeatures},L=function(r){return u()(I(r))},z=function(r){var t=(0,g.Qs)(r);if(t){var e=(0,l.findGeometryProperty)(t);return e&&e.localType}return null},G=["Geometry","GeometryCollection"],M=function(r){return!u()(G.filter((function(t){return z(r)===t})))},_=function(r){return k(r)&&k(r).length>0},R=function(r){return C(r)&&C(r).length>0},K=function(r){return r&&r.featuregrid&&r.featuregrid.filters},x=function(r){return E(r,T(r))},Q=function(r){return r&&r.featuregrid&&r.featuregrid.open},U=function(r,t){return i()(K(r),t)},N=function(r){var t=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.title||r.name}(E(r,T(r)));return a()(t)?t[(0,y.Pz)(r)]||t.default||"":t},$=[],B=function(r){var t=E(r,T(r));return i()(t,"fields",$)},V=function(r){return((0,g.L)(r)||[]).map((function(t){var e=function(r,t){return i()(r,"featuregrid.attributes[".concat(t.name||t.attribute,"]"))}(r,t);return e?F(F({},t),e):t}))},W=function(r){return r&&r.featuregrid&&r.featuregrid.mode},H=function(r){return(I(r)||[]).length},X=function(r){return(0,b.rK)(k(r))},Y=function(r){return function(r){var t=L(r);if(t){var e=(0,b.rK)(k(r));return!((!e[t.id]||null===e[t.id].geometry)&&(e[t.id]&&null===e[t.id].geometry||t._new&&u()(C(r))&&null===u()(C(r)).geometry||(!t._new||!u()(C(r))||null===u()(C(r)).geometry)&&null===t.geometry))}return!1}(r)},Z=function(r){return i()(r,"featuregrid.showAgain",!1)},J=function(r){if(i()(r,"featuregrid.showTimeSync",!1)){var t=T(r);return(0,m.jo)({id:t},"time")(r)}return null},rr=function(r){return i()(r,"featuregrid.timeSync",!1)},tr=function(r){return r&&r.featuregrid&&r.featuregrid.saving},er=function(r){return r&&r.featuregrid&&r.featuregrid.saved},nr=function(r){return r&&r.featuregrid&&r.featuregrid.drawing},ur=function(r){return i()(r,"featuregrid.multiselect",!1)},or=function(r){return(0,s.Zl)(z(r))},ir=function(r){return r.featuregrid&&r.featuregrid.dockSize},fr=function(r){var t=E(r,T(r));return t&&t.name||""},ar=function(r){var t=function(r){return i()(E(r,T(r)),"params")}(r);return{viewParams:t&&(t.VIEWPARAMS||t.viewParams||t.viewparams),cqlFilter:t&&(t.CQL_FILTER||t.cqlFilter||t.cql_filter)}},cr=function(r){var t=function(r){return i()(r,"featuregrid.editingAllowedRoles",["ADMIN"])}(r),e=function(r){return i()(r,"featuregrid.editingAllowedGroups",[])}(r),n=function(r){return r&&r.featuregrid&&r.featuregrid.canEdit}(r),u=(0,d.tv)({allowedRoles:t,allowedGroups:e})(r);return(n||u)&&!(0,p.c0)(r)},lr=function(r){return i()(r,"featuregrid.pagination")},yr=function(r){return i()(r,"featuregrid.useLayerFilter",!0)},sr=function(r){return i()(r,"featuregrid.viewportFilter",null)},br=function(r){return(0,p.$v)(r)!==S.Bk.CESIUM},mr=(0,v.oz)(j())(sr,h.pQ,h.uy,(function(r){return i()(r,"query.filterObj.spatialField")}),g.Qs,br,(function(r,t,e){var n,u,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,f=arguments.length>5?arguments[5]:void 0,a=null===(n=(0,l.findGeometryProperty)(i))||void 0===n?void 0:n.name,c=null!=o&&o.operation?[o]:o;return r&&f?{spatialField:[].concat((u=c,function(r){if(Array.isArray(r))return q(r)}(u)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(u)||function(r,t){if(r){if("string"==typeof r)return q(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?q(r,t):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{geometry:F(F({},(0,w.bboxToFeatureGeometry)(t.bounds)),{},{projection:e}),attribute:a,method:"Rectangle",operation:"INTERSECTS"}])}:{}}))},824260:(r,t,e)=>{"use strict";e.d(t,{qj:()=>v,Bu:()=>O,UM:()=>j,X1:()=>h,L:()=>w,HY:()=>S,Mz:()=>P,F0:()=>q,dc:()=>A,b0:()=>F,hk:()=>E,Qs:()=>T,gy:()=>D,M7:()=>I,VD:()=>k});var n=e(414293),u=e.n(n),o=e(227361),i=e.n(o),f=e(91175),a=e.n(f),c=e(701469),l=e.n(c),y=e(630998),s=e.n(y);function b(r){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},b(r)}function m(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function d(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?m(Object(e),!0).forEach((function(t){var n,u,o,i;n=r,u=t,o=e[t],i=function(r,t){if("object"!=b(r)||!r)return r;var e=r[Symbol.toPrimitive];if(void 0!==e){var n=e.call(r,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(u),(u="symbol"==b(i)?i:i+"")in n?Object.defineProperty(n,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[u]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):m(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}var p=function(r){return i()(r,"query.filterObj.featureTypeName")},g=function(r){return function(t){return i()(t,'query.featureTypes["'.concat(r,'"]'))}},v=function(r,t){return i()(g(t)(r),"original")},O=function(r){return r&&r.query&&r.query.searchUrl},j=function(r){return r&&r.query&&r.query.url},h=function(r){return r&&r.query&&r.query.filterObj},w=function(r){return i()(g(p(r))(r),"attributes")},S=function(r){return i()(r,"query.typeName")},P=function(r){return i()(r,"query.result.features")},q=function(r){var t=i()(r,"query.result");return d(d({},t),{},{features:(t&&t.features||[]).filter((function(r){return!u()(r.geometry)}))})},A=function(r,t){var e=r&&r.query&&r.query.result&&r.query.result.features;return a()(e.filter((function(r){return r.id===t})))},F={startIndex:function(r){return i()(r,"query.filterObj.pagination.startIndex")},maxFeatures:function(r){return i()(r,"query.filterObj.pagination.maxFeatures")},resultSize:function(r){return i()(r,"query.result.features.length")},totalFeatures:function(r){return i()(r,"query.result.totalFeatures")}},E=function(r,t){var e=g(t)(r);return!!(e&&e.attributes&&e.geometry&&e.original)},T=function(r){return v(r,p(r))},D=function(r){return i()(r,"query.featureLoading")},I=function(r){return i()(r,"query.syncWmsFilter",!1)},k=function(r){var t=i()(r,"query.filterObj.crossLayerFilter"),e=i()(r,"query.filterObj.spatialField"),n=i()(r,"query.filterObj.filterFields");return!!(n&&a()(n)||e&&(e.method&&e.operation&&e.geometry||l()(e)&&s()(e,(function(r){return r.method&&r.operation&&r.geometry}))>-1)||t&&t.collectGeometries&&t.operation)}}}]);