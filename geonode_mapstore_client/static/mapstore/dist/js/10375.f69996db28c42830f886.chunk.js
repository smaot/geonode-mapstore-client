(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[10375],{810375:(n,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>m});var r=e(845243),o=e.n(r),i=e(984596),l=e.n(i);function c(n){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c(n)}function u(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,y(r.key),r)}}function a(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function f(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?a(Object(e),!0).forEach((function(t){d(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):a(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function d(n,t,e){return(t=y(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function y(n){var t=function(n,t){if("object"!==c(n)||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===c(t)?t:String(t)}function s(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var v={Point:["Mark","Icon","Text"],MultiPoint:["Mark","Icon","Text"],LineString:["Line"],MultiLineString:["Line"],Polygon:["Fill"],MultiPolygon:["Fill"]};function p(n,t){var e,r=n.rules,i=void 0===r?[]:r,c=t.geoStylerStyleFilter,u=t.images,a=t.getImageIdFromSymbolizer,d=(e=i,function(n){if(Array.isArray(n))return s(n)}(e)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(e)||function(n,t){if(n){if("string"==typeof n)return s(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(n,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).reverse();return function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).opacity,t=void 0===n?1:n;return{filter:function(n){var t,e=null==n||null===(t=n.geometry)||void 0===t?void 0:t.type;if(0===d.length)return!1;var r=v[e]||[];return!!d.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return r.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))},pointToLayer:function(n,e){var r,i,f=null==n||null===(r=n.geometry)||void 0===r?void 0:r.type,y=v[f]||[],s=d.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return y.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))||{},p=(null==s||null===(i=s.symbolizers)||void 0===i?void 0:i.find((function(n){return y.includes(n.kind)})))||{};if("Mark"===p.kind){var m=u.find((function(n){return n.id===a(p)}))||{},b=m.image,g=m.src,h=m.width,S=m.height;if(b){var w=h/S,k=2*p.radius,O=k,j=O/w;return S>h&&(O=(j=k)*w),o().marker(e,{icon:o().icon({iconUrl:g,iconSize:[O,j],iconAnchor:[O/2,j/2]}),opacity:1*t})}}if("Icon"===p.kind){var I=u.find((function(n){return n.id===a(p)}))||{},P=I.image,z=I.src,F=I.width,x=I.height;if(P){var A=F/x,_=p.size,C=_/A;return x>F&&(_=(C=p.size)*A),o().marker(e,{icon:o().icon({iconUrl:z,iconSize:[_,C],iconAnchor:[_/2,C/2]}),opacity:p.opacity*t})}}if("Text"===p.kind){var M,T,E,L,D,W=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.properties?Object.keys(n.properties).reduce((function(t,e){var r,o=new RegExp("\\{\\{".concat(e,"\\}\\}"),"g");return t.replace(o,null!==(r=n.properties[e])&&void 0!==r?r:"")}),t):t}(n,p.label),U="\n                        -webkit-text-stroke-width:".concat(p.haloWidth,"px;\n                        -webkit-text-stroke-color:").concat(p.haloColor||"",";\n                    "),J=o().divIcon({html:'<div style="\n                            color:'.concat(p.color,";\n                            font-family: ").concat(l()(p.font||[]).join(", "),";\n                            font-style: ").concat(p.fontStyle||"normal",";\n                            font-weight: ").concat(p.fontWeight||"normal",";\n                            font-size: ").concat(p.size,"px;\n\n                            position: absolute;\n                            transform: translate(").concat(null!==(M=null==p||null===(T=p.offset)||void 0===T?void 0:T[0])&&void 0!==M?M:0,"px, ").concat(null!==(E=null==p||null===(L=p.offset)||void 0===L?void 0:L[1])&&void 0!==E?E:0,"px) rotateZ(").concat(null!==(D=null==p?void 0:p.rotate)&&void 0!==D?D:0,"deg);\n\n                            ").concat(p.haloWidth>0?U:"",'\n                        ">\n                            ').concat(W,"\n                            </div>"),className:""});return o().marker(e,{icon:J,opacity:1*t})}return null},style:function(n){var e,r,o,i,l=null==n||null===(e=n.geometry)||void 0===e?void 0:e.type,u=v[l]||[],a=d.find((function(t){var e;return(null==t||null===(e=t.symbolizers)||void 0===e?void 0:e.find((function(n){return u.includes(n.kind)})))&&(!t.filter||c(n,t.filter))}))||{},y=(null==a||null===(r=a.symbolizers)||void 0===r?void 0:r.find((function(n){return u.includes(n.kind)})))||{};return"Line"===y.kind?f(f(f({stroke:!0,fill:!1,color:y.color,opacity:y.opacity*t,weight:y.width},y.dasharray&&{dashArray:y.dasharray.join(" ")}),y.cap&&{lineCap:y.cap}),y.join&&{lineJoin:y.join}):"Fill"===y.kind?{fill:!0,stroke:!0,fillColor:y.color,fillOpacity:y.fillOpacity*t,color:y.outlineColor,opacity:(null!==(o=y.outlineOpacity)&&void 0!==o?o:0)*t,weight:null!==(i=y.outlineWidth)&&void 0!==i?i:0}:{stroke:!1,fill:!1}}}}}const m=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.drawIcons,r=t.getImageIdFromSymbolizer,o=t.geoStylerStyleFilter;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._drawIcons=e||function(){return Promise.resolve(null)},this._getImageIdFromSymbolizer=r||function(n){return n.symbolizerId},this._geoStylerStyleFilter=o||function(){return!0}}var t,e;return t=n,e=[{key:"readStyle",value:function(){return new Promise((function(n,t){try{n(null)}catch(n){t(n)}}))}},{key:"writeStyle",value:function(n){var t=this;return new Promise((function(e,r){try{t._drawIcons(n).then((function(){var r=p(n,{images:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],getImageIdFromSymbolizer:t._getImageIdFromSymbolizer,geoStylerStyleFilter:t._geoStylerStyleFilter});e(r)}))}catch(n){r(n)}}))}}],e&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),n}()}}]);