(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[96958],{196958:(e,t,r)=>{"use strict";r.d(t,{t3:()=>k,WQ:()=>M,dM:()=>E,rK:()=>R,Lo:()=>_,gP:()=>H,S9:()=>N,AV:()=>G,Sc:()=>Z,a3:()=>Q,IC:()=>J,wT:()=>K,cZ:()=>W,ek:()=>B,Qc:()=>L,Cf:()=>$,dJ:()=>q,DR:()=>X,f1:()=>ee,Pf:()=>te,_Q:()=>re,DC:()=>ne,fK:()=>ie,NJ:()=>ue,BF:()=>le});var n=r(406557),i=r.n(n),o=r(92742),u=r.n(o),l=r(819873),a=r.n(l),d=r(630998),c=r.n(d),f=r(227361),v=r.n(f),s=r(701469),p=r.n(s),g=r(414293),m=r.n(g),y=r(747037),b=r.n(y),h=r(968630),w=r.n(h),O=r(264721),F=r.n(O),P=r(378889),j=r(285547);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){var n;return n=function(e,t){if("object"!=S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==S(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e,t,r){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return c()(e,(function(e){return e<=r&&r<e+t}))}(t,r,e);return-1===n?n:n*r+e-t[n]},x={id:"empty_row",get:function(){}},M=function(e,t){return t[k(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3?arguments[3]:void 0)]||A({},x)},E=function(e,t){return t[e]},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p()(e)?e.reduce((function(e,t){return A(A({},e),{},T({},t.id,A(A({},e[t.id]),t.updated)))}),{}):{}},Y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=c()(t,r);return i>=0?t.map((function(e,t){return t===i?n:e})):[].concat(function(e){if(Array.isArray(e))return D(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n])},_=function(e){return((0,P.getFeatureTypeProperties)(e)||[]).filter((function(e){return!(0,P.isGeometryType)(e)}))},z=function(e){var t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map((function(n){return t<=n&&n<=r?0:Math.abs(n-e)})).reduce((function(e,t,r,n){return t>n[e]&&r||e}),0)},C=function(e,t){return t.filter((function(t,r){return r!==e}))},V=function(e,t,r){return e.filter((function(e,n){return n<t||n>=t+r}))},H=function(e,t,r,n){for(var i,o,u=e;u<=t&&void 0===i;u++)-1===k(u*n,r,n)&&(i=u);for(var l=t;l>=e&&void 0===o;l--)-1===k(l*n,r,n)&&(o=l);return[i,o].filter((function(e){return void 0!==e}))},N=function(e,t,r){var n=e.startPage,i=e.endPage,o=H(n,i,t,r),u=o[1]-o[0]+1;return{startIndex:o[0]*r,maxFeatures:u*r}},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.editable,o=void 0!==i&&i,u=n.sortable,l=void 0===u||u,a=n.resizable,d=void 0===a||a,c=n.filterable,f=void 0===c||c,v=n.defaultSize,s=void 0===v?200:v,p=n.options,g=void 0===p?[]:p,m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},y=m.getEditor,b=void 0===y?function(){}:y,h=m.getFilterRenderer,w=void 0===h?function(){}:h,O=m.getFormatter,F=void 0===O?function(){}:O,P=m.getHeaderRenderer,S=void 0===P?function(){}:P,D=m.isWithinAttrTbl,I=void 0!==D&&D;return _(e).filter((function(e){return!(t[e.name]&&t[e.name].hide)})).map((function(e){var n=g.find((function(t){return t.name===e.name})),i=r.find((function(t){return t.name===e.name})),u={sortable:l,key:e.name,width:t[e.name]&&t[e.name].width||s||void 0,name:t[e.name]&&t[e.name].label||e.name,description:(null==n?void 0:n.description)||"",title:(0,j.s8)((null==n?void 0:n.title)||(null==i?void 0:i.alias),e.name),headerRenderer:S(),showTitleTooltip:!(null==n||!n.description),resizable:d,editable:o,filterable:f,editor:b(e,i),formatter:F(e,i),filterRenderer:w(e,i)};return I&&(u.width=300),u}))},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=(0,P.findGeometryProperty)(r);return e.map((function(e){return A(A({},e),{},{events:e.events&&Object.keys(e.events).reduce((function(i,o){return A(A({},i),{},T({},o,(function(i,u){return e.events[o](t(u.rowIdx),u,r,n)})))}),{})},"geometry"===e.key&&o?{filterRenderer:i(A(A({},o),{},{localType:"geometry"}),o.name),filterable:!0,geometryPropName:o.name}:{})}))},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return Object.keys(e).reduce((function(o,u){return A(A({},o),{},T({},u,(function(){for(var o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return e[u].apply(e,l.concat([t,r,n,i]))})))}),{})},J=function(e,t){return!!(0,P.getPropertyDescriptor)(e,t)},K=function(e,t,r){return(0,P.isValidValueForPropertyName)(e,(i=r,"geometry"===(n=t)?function(e){return v()((0,P.findGeometryProperty)(e),"name")}(i):n),r);var n,i},W=function(){return"EPSG:4326"},B=function(e,t,r){return function(n){return t.length>0?n._new:!e||e&&!!r[n.id]}},L=function(e){return t=e,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})[e.id]||{},n=Object.keys(r).filter((function(e){return"geometry"!==e})).reduce((function(e,t){return A(A({},e),{},T({},t,r[t]))}),{}),i=Object.keys(r).filter((function(e){return"geometry"===e})).reduce((function(e,t){return A(A({},e),{},T({},t,r[t]))}),{}),A(A(A({},t),i),{},{properties:A(A({},t&&t.properties||{}),n)});var t,r,n,i},U=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?\s*(-?\d*\.?\d*)\s*/,$=function(e,t){if("string"===t)return{newVal:u()(e),operator:"ilike"};var r,n=U.exec(e),i="=";return n?("!=="===(i=n[1]||"=")|"!="===i?i="<>":"==="===i|"=="===i&&(i="="),r=parseFloat(n[2])):r=parseFloat(e,10),{newVal:r,operator:i}},q=function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.attribute,u=n.operator,l=n.value,a=n.type,d=n.filters,c=void 0===d?[]:d,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=(null===(e=f.groupFields)||void 0===e?void 0:e.filter((function(e){return o!==e.id&&1!==e.id})))||[];if(("string"===a||"number"===a)&&b()(l)&&-1!==(null==l?void 0:l.indexOf(","))){var s,g,y,h=(null==l?void 0:l.split(",").filter(i()))||[],w=(null===(s=f.filterFields)||void 0===s?void 0:s.filter((function(e){return o!==e.attribute})))||[];return A(A({},f),{},{groupFields:v.concat([{id:o,logic:"OR",groupId:1,index:0}]),filters:(null!==(g=null==f||null===(y=f.filters)||void 0===y?void 0:y.filter((function(e){return o!==(null==e?void 0:e.attribute)})))&&void 0!==g?g:[]).concat(c),filterFields:w.concat(h.map((function(e){var t=$(e,a),r=t.operator,n=t.newVal;return{attribute:o,rowId:Date.now(),type:a,groupId:o,operator:r,value:n}}))),spatialField:f.spatialField,spatialFieldOperator:f.spatialFieldOperator})}return A(A({},f),{},{groupFields:v.concat([{id:1,logic:"AND",groupId:1,index:0}]),filters:(null!==(t=null==f||null===(r=f.filters)||void 0===r?void 0:r.filter((function(e){return o!==(null==e?void 0:e.attribute)})))&&void 0!==t?t:[]).concat(c),filterFields:"geometry"===a?f.filterFields:m()(l)&&"isNull"!==u?(f.filterFields||[]).filter((function(e){return e.attribute!==o})):Y(f.filterFields||[],{attribute:o},{attribute:o,rowId:Date.now(),type:a,groupId:1,operator:u,value:l}),spatialField:"geometry"===a?l:f.spatialField,spatialFieldOperator:p()(l)?"OR":""})},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startIndex,r=void 0===t?0:t,n=e.maxFeatures,i=void 0===n?1:n,o=e.totalFeatures,u=void 0===o?0:o,l=e.resultSize;return{page:Math.ceil(r/i),resultSize:l,size:i,total:u,maxPages:Math.ceil(u/i)-1}},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.endPage,n=t.startPage,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.pages,u=i.features,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=l.size,c=l.maxStoredPages,f=l.startIndex,s=H(n,r,o,d),p=s[1]-s[0]+1,g=v()(e,"features",[]);g.length!==p*d&&(g=g.concat(a()(Array(p*d-g.length>0?p*d-g.length:g.length),!1)));var m=o,y=u,b=m.length+p-Math.max(c,r-n+1);if(b>0)for(var h=n*d,w=r*d,O=h+(w-h)/2,F=0;F<b;F++){var P=z(O,o,h,w),j=P*d;m=C(P,m),y=V(u,j,d)}for(var S=[],D=0;D<p;D++)S.push(f+d*D);return{pages:m.concat(S),features:y.concat(g)}},te=function(e,t){var r=void 0;return t&&e&&(r=e.filter((function(e){var r,n;return!(null!==(r=null===(n=t[e.attribute])||void 0===n?void 0:n.hide)&&void 0!==r&&r)})).map((function(e){return e.attribute}))).length===e.length&&(r=void 0),r},re=function(e){return null==e?void 0:e.map((function(e){return w()(e)?e.name:e}))},ne={DATE_TIME:"date-time",TIME:"time",DATE:"date"},ie={"date-time":"YYYY-MM-DDTHH:mm:ss[Z]",time:"HH:mm:ss[Z]",date:"YYYY-MM-DD[Z]"},oe=["wms","wfs"],ue=function(e){return F()(oe,null==e?void 0:e.type)},le=function(e){return!(null!=e&&e.disableFeaturesEditing)&&ue(e)}}}]);