/*! For license information please see 31273.848e456a7da38ffefb50.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[31273],{931273:(e,t,r)=>{"use strict";r.d(t,{WX:()=>c,r7:()=>l,V3:()=>s,HR:()=>f,xi:()=>p,ur:()=>v,vK:()=>d,nm:()=>m,QF:()=>y,zZ:()=>h,uN:()=>b,Bz:()=>O,im:()=>S,CO:()=>w,$X:()=>x,Mt:()=>A,Oq:()=>L,YO:()=>T,PR:()=>E,wI:()=>R,bv:()=>C,mh:()=>P,$Y:()=>G,eA:()=>_,UT:()=>D,cS:()=>M,l7:()=>j,l3:()=>I,Kz:()=>B,vg:()=>N,xM:()=>F,do:()=>k,lb:()=>W,yu:()=>q,Xp:()=>$,c$:()=>U,tt:()=>V,nX:()=>H,BG:()=>X,Rc:()=>Y,K4:()=>Z,Dw:()=>z,dL:()=>Q,In:()=>K,r1:()=>J,XW:()=>ee,L8:()=>te,i3:()=>re,XM:()=>ne,X7:()=>oe,M3:()=>ie,N3:()=>ae,SU:()=>ue,wo:()=>ce,ye:()=>le,m:()=>se,wl:()=>fe,bu:()=>pe,A4:()=>ve,vG:()=>de,Wf:()=>me,Ts:()=>ye,IT:()=>ge,XS:()=>he,tx:()=>be,We:()=>Oe,nx:()=>Se,kC:()=>we,E9:()=>xe,zX:()=>Ae,QT:()=>Le});var n=r(659551),o=r(501157),i=r(603475),a=r(932354),u=r(197395),c=(n.ZP,o.ZP,i.ZP,a.Z,"CATALOG:ADD_LAYERS_FROM_CATALOGS"),l="CATALOG:ADD_LAYER_AND_DESCRIBE",s="CATALOG:TEXT_SEARCH",f="CATALOG:RECORD_LIST_LOADED",p="CATALOG:RESET_CATALOG",v="CATALOG:CATALOG_CLOSE",d="CATALOG:RECORD_LIST_LOAD_ERROR",m="CATALOG:CHANGE_CATALOG_FORMAT",y="CATALOG:ADD_LAYER_ERROR",g="CATALOG:DESCRIBE_ERROR",h="CATALOG:CHANGE_SELECTED_SERVICE",b="CATALOG:CHANGE_CATALOG_MODE",O="CATALOG:CHANGE_METADATA_TEMPLATE",S="CATALOG:CHANGE_TITLE",w="CATALOG:CHANGE_TEXT",x="CATALOG:CHANGE_TYPE",A="CATALOG:CHANGE_SERVICE_PROPERTY",L="CATALOG:CHANGE_SERVICE_FORMAT",T="CATALOG:FOCUS_SERVICES_LIST",E="CATALOG:CHANGE_URL",R="CATALOG:ADD_CATALOG_SERVICE",C="CATALOG:DELETE_CATALOG_SERVICE",P="CATALOG:ADD_SERVICE",G="CATALOG:DELETE_SERVICE",_="CATALOG:SAVING_SERVICE",D="CATALOG:GET_METADATA_RECORD_BY_ID",M="CATALOG:SET_LOADING",j="CATALOG:SHOW_FORMAT_ERROR",I="CATALOG:TOGGLE_TEMPLATE",B="CATALOG:TOGGLE_THUMBNAIL",N="CATALOG:TOGGLE_ADVANCED_SETTINGS",F="CATALOG:FORMAT_OPTIONS_FETCH",k="CATALOG:FORMAT_OPTIONS_LOADING",W="CATALOG:SET_FORMAT_OPTIONS",q="CATALOG:NEW_SERVICE_STATUS",$="CATALOG:INIT_PLUGIN";function U(){return{type:c,layers:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],sources:arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],options:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]}}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,r=e.url,n=e.startPosition,o=e.maxRecords,i=e.text,a=e.options;return{type:s,format:t,url:r,startPosition:n,maxRecords:o,text:i,options:void 0===a?{}:a}}function H(e,t){return{type:f,searchOptions:e,result:t}}function X(e){return{type:m,format:e}}function Y(e){return{type:_,status:e}}function Z(){return{type:M,loading:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}function z(e){return{type:h,service:e}}function Q(e){return{type:T,status:e}}function K(e,t){return{type:b,mode:e,isNew:t}}function J(e){return{type:S,title:e}}function ee(e){return{type:w,text:e}}function te(e,t){return{type:A,property:e,value:t}}function re(e){return{type:L,format:e}}function ne(e){return{type:x,newType:e}}function oe(e){return{type:E,url:e}}function ie(e){return{type:P,options:e}}function ae(e){return{type:R,service:e}}function ue(e){return{type:C,service:e}}function ce(){return{type:G}}function le(){return{type:p}}function se(e){return{type:d,error:e}}function fe(){return{type:v}}function pe(e,t){return{type:g,layer:e,error:t}}var ve=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).zoomToLayer;return{type:l,layer:e,zoomToLayer:void 0!==t&&t}};function de(e){return{type:y,error:e}}var me=function(e){return{type:O,metadataTemplate:e}},ye=function(){return{type:N}},ge=function(){return{type:I}},he=function(){return{type:B}},be=function(e,t){return{type:F,url:e,force:t}},Oe=function(e){return{type:k,loading:e}},Se=function(e,t){return{type:W,formats:e,url:t}},we=function(e){return{type:j,status:e}};function xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,u.vU)({title:"catalog.notification.errorTitle",message:"catalog.notification.errorSearchingRecords",values:{records:e}})}var Ae=function(e){return{type:q,status:e}},Le=function(e){return{type:$,options:e}}},659551:(e,t,r)=>{"use strict";r.d(t,{_b:()=>I,kv:()=>W,ZP:()=>V});var n=r(472500),o=r.n(n),i=r(227361),a=r.n(i),u=r(91175),c=r.n(u),l=r(610928),s=r.n(l),f=r(941106),p=r.n(f),v=r(414293),d=r.n(v),m=r(984596),y=r.n(m),g=r(441609),h=r.n(g),b=r(727418),O=r.n(b),S=r(375875),w=r.n(S),x=r(737275),A=r(916651),L=r(501157),T=r(658918),E=r(611847);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function C(){C=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),u=new _(n||[]);return o(a,"_invoke",{value:T(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",v="suspendedYield",d="executing",m="completed",y={};function g(){}function h(){}function b(){}var O={};l(O,a,(function(){return this}));var S=Object.getPrototypeOf,w=S&&S(S(D([])));w&&w!==r&&n.call(w,a)&&(O=w);var x=b.prototype=g.prototype=Object.create(O);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,i,a,u){var c=f(e[o],e,i);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==R(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(s).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,u)}))}u(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=E(u,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var l=f(t,r,n);if("normal"===l.type){if(o=n.done?m:v,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=m,n.method="throw",n.arg=l.arg)}}}function E(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function G(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function D(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(R(t)+" is not iterable")}return h.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},A(L.prototype),l(L.prototype,u,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},A(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(G),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),G(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;G(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:D(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function P(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==R(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(e){var t=o().parse((0,E.eW)(e),!0);return o().format(O()({},t,{search:null},{query:O()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},I='<csw:GetRecords xmlns:csw="http://www.opengis.net/cat/csw/2.0.2" xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dct="http://purl.org/dc/terms/" xmlns:gmd="http://www.isotc211.org/2005/gmd" xmlns:gco="http://www.isotc211.org/2005/gco" xmlns:gmi="http://www.isotc211.org/2005/gmi" xmlns:ows="http://www.opengis.net/ows" service="CSW" version="2.0.2" resultType="results" startPosition="${startPosition}" maxRecords="${maxRecords}"> <csw:Query typeNames="csw:Record"> <csw:ElementSetName>full</csw:ElementSetName> <csw:Constraint version="1.1.0"> <ogc:Filter> ${filterXml} </ogc:Filter> </csw:Constraint> ${sortBy} </csw:Query> </csw:GetRecords>',B=function(e,t,r){if(!t.name)return null;switch(e){case"wms":var n=0!==t.value.indexOf("http")?(r&&r.catalogURL||"")+"/"+t.value:t.value;return{type:t.protocol||t.scheme,url:n,SRS:[],params:{name:t.name}};case"arcgis":return{type:"arcgis",url:t.value,SRS:[],params:{name:t.name}};default:return null}},N=[/^OGC:WMS-(.*)-http-get-map/g,/^OGC:WMS/g],F=/serviceType\/ogc\/wms/g,k=N.concat(F),W=function(e,t){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(null==e?void 0:e.URI)&&y()(e.URI);if(i){var a=c()(i.map((function(e){if(e.protocol){if(N.some((function(t){return e.protocol.match(t)})))return e;if(e.protocol.match(F))return function(e){var t=new Map(Array.from(new URLSearchParams(e.value)).map((function(e){var t=D(e,2),r=t[0],n=t[1];return[r.toLowerCase(),n]}))),r=t.get("layers"),n=t.get("version");return!!r&&_(_({},e),{},{protocol:"OGC:WMS",name:r,value:"".concat(e.value.match(/[^\?]+[\?]+/g),"SERVICE=WMS").concat(n&&"&VERSION=".concat(n))})}(e)}return!1})).filter((function(e){return e})));if(a)return B("wms",a,t)}if(null!=e&&null!==(r=e.references)&&void 0!==r&&r.length){var u=y()(e.references),l=c()(u.filter((function(e){return e.scheme&&N.some((function(t){return e.scheme.match(t)}))})));if(l){var s=o().parse((0,E.eW)(l.value),!0),f=s.query&&s.query.layers||e.alternative;return B("wms",_(_({},l),{},{value:o().format(s),name:f}),t)}if(n){var p=c()(u.filter((function(e){return e.scheme&&"WWW:DOWNLOAD-REST_MAP"===e.scheme})));if(p)return B("arcgis",_(_({},p),{},{name:e.alternative}),t)}}return null},q={},$=function(){var e,t=(e=C().mark((function e(t){var r,n,o,i;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",t);case 2:if(null==(r=t.records)||!r.length){e.next=10;break}return n=r.map((function(e){var t;if((null==e||null===(t=e.dc)||void 0===t?void 0:t.format)===T.X){var r,n,o=null===(r=e.dc)||void 0===r||null===(n=r.URI)||void 0===n?void 0:n.value;return(0,T.F)(o)}return Promise.resolve(null)})),e.next=7,Promise.all(n);case 7:return o=e.sent,i=r.map((function(e,t){var r,n,i=o[t];if(!i||null==i||null===(r=i.bbox)||void 0===r||!r.bounds||null==i||null===(n=i.bbox)||void 0===n||!n.crs)return e;var a=(0,A.getExtentFromNormalized)(i.bbox.bounds,i.bbox.crs);return _(_({},e),{},{boundingBox:{extent:a.extent,crs:i.bbox.crs}})})),e.abrupt("return",_(_({},t),{},{records:i}));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){P(i,n,o,a,u,"next",e)}function u(e){P(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}(),U={parseUrl:j,getRecordById:function(e){return new Promise((function(t){Promise.all([r.e(99942),r.e(66372)]).then(function(){t(w().get(e).then((function(e){if(e){var t=r(566372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var n=t.value.abstractRecord[0].value.dcElement;if(n){for(var o={references:[]},i=0;i<n.length;i++){var a=n[i],u=a.name.localPart,c={};c="references"===u&&a.value?{value:a.value.content&&(0,x.$F)(a.value.content[0])||a.value.content||a.value,scheme:a.value.scheme}:a.value.content&&a.value.content[0]||a.value.content||a.value,o[u]&&Array.isArray(o[u])?o[u].push(c):o[u]?o[u]=[o[u],c]:o[u]=c}return{dc:o}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,r)).catch(r.oe)}))},getRecords:function(e,t,n,o,i){return new Promise((function(u){Promise.all([r.e(99942),r.e(1269)]).then(function(){var l=r(566372),f=l.CSW,v=l.marshaller,m=l.unmarshaller,g=v.marshalString({name:"csw:GetRecords",value:f.getRecords(t,n,"string"!=typeof o&&o)});o&&"string"!=typeof o||(g=function(e,t,r){var n,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).options,i=(void 0===o?{}:o).service,a=null!=i?i:{},u=a.filter,c=a.sortBy,l=(null==u?void 0:u.staticFilter)||"<ogc:Or>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n            <ogc:PropertyIsEqualTo>\n                <ogc:PropertyName>dc:type</ogc:PropertyName>\n                <ogc:Literal>http://purl.org/dc/dcmitype/Dataset</ogc:Literal>\n            </ogc:PropertyIsEqualTo>\n       </ogc:Or>",s="<ogc:And>\n        ".concat(p()((null==u?void 0:u.dynamicFilter)||"<ogc:PropertyIsLike wildCard='%' singleChar='_' escapeChar='\\'><ogc:PropertyName>csw:AnyText</ogc:PropertyName> <ogc:Literal>%${searchText}%</ogc:Literal> </ogc:PropertyIsLike> ")({searchText:r}),"\n        ").concat(l,"\n    </ogc:And>"),f=null!=c&&c.name?p()("<ogc:SortBy><ogc:SortProperty><ogc:PropertyName>${name}</ogc:PropertyName><ogc:SortOrder>${order}</ogc:SortOrder></ogc:SortProperty></ogc:SortBy>")({name:null==c?void 0:c.name,order:null!==(n=null==c?void 0:c.order)&&void 0!==n?n:"ASC"}):"";return p()(I)({filterXml:r?s:l,startPosition:e,maxRecords:t,sortBy:f})}(t,n,o,i)),u(w().post(j(e),g,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=m.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var r,n=t.value,o=n.searchResults.abstractRecord||n.searchResults.any,u={numberOfRecordsMatched:n.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:n.searchResults.numberOfRecordsReturned,nextRecord:n.searchResults.nextRecord},l=[];if(o)for(var f=0;f<o.length;f++){var p=o[f].value,v={dateStamp:p.dateStamp&&p.dateStamp.date,fileIdentifier:p.fileIdentifier&&p.fileIdentifier.characterString&&p.fileIdentifier.characterString.value,identificationInfo:p.abstractMDIdentification&&p.abstractMDIdentification.value};if(p.boundingBox){var g,b=void 0;if((g=Array.isArray(p.boundingBox)?c()(p.boundingBox):p.boundingBox)&&g.value){var O,S,w,T,E=null!==(O=null===(S=g.value)||void 0===S?void 0:S.crs)&&void 0!==O?O:"",R=null===(w=E.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===w?void 0:w[0],C=(0,A.makeNumericEPSG)(null===(T=E.match(/EPSG:[0-9]+/))||void 0===T?void 0:T[0]),P=g.value.lowerCorner,G=g.value.upperCorner,M=C||(0,A.extractCrsFromURN)(R)||s()(E.split(":"));"EPSG:4326"===(M?"EPSG:"===M.slice(0,5)?(0,A.makeNumericEPSG)(M):(0,A.makeNumericEPSG)("EPSG:".concat(M)):"EPSG:4326")&&"CRS84"!==M&&"OGC:CRS84"!==M&&(P=[P[1],P[0]],G=[G[1],G[0]]),b=(0,A.makeBboxFromOWS)(P,G)}v.boundingBox={extent:b,crs:"EPSG:4326"}}var j=p.dcElement;if(j){for(var I={references:[]},B=0;B<j.length;B++){var N=j[B],F=N.name.localPart,$={};$="references"===F&&N.value?{value:N.value.content&&(0,x.$F)(N.value.content[0])||N.value.content||N.value,scheme:N.value.scheme}:N.value.content&&N.value.content[0]||N.value.content||N.value,I[F]&&Array.isArray(I[F])?I[F].push($):I[F]?I[F]=[I[F],$]:I[F]=$}var U=y()(I.references.length>0?I.references:I.URI);r=r?r.concat(U):U,v.dc=I}l.push(v)}return u.records=l,function(e,t,r){if(!a()(r,"options.service.autoSetVisibilityLimits",!1))return t;var n=((null==e?void 0:e.find((function(e){return k.some((function(t){var r,n;return(null==e||null===(r=e.scheme)||void 0===r?void 0:r.match(t))||(null==e||null===(n=e.protocol)||void 0===n?void 0:n.match(t))}))})))||{}).value,o=D(n&&n.split("?")||[],1)[0];if(!o)return _({},t);var i=q[o],u=!h()(i);return Promise.resolve(u?i:L.ZP.getCapabilities(o+"?version=").then((function(e){return L.ZP.flatLayers(e.Capability)})).catch((function(){return[]}))).then((function(e){var r;return u||(q[o]=e),_(_({},t),{},{records:null==t||null===(r=t.records)||void 0===r?void 0:r.map((function(t){var r=a()(W(null==t?void 0:t.dc,null,!1),"params.name",""),n=e.find((function(e){return e.Name===r}))||{},o=n.MinScaleDenominator,i=n.MaxScaleDenominator;return _(_({},t),(!d()(o)||!d()(i))&&{capabilities:{MaxScaleDenominator:i,MinScaleDenominator:o}})}))})}))}(r,u,i)}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})).then((function(e){return $(e)})))}.bind(null,r)).catch(r.oe)}))},textSearch:function(e,t,r,n,o){return new Promise((function(i){i(U.getRecords(e,t,r,n,o))}))},workspaceSearch:function(e,t,n,o,i){return new Promise((function(a){Promise.all([r.e(99942),r.e(1269)]).then(function(){var u=r(484454).Filter,c=i||"%",l=o&&"%"+o+"%"||"%",s=u.propertyIsLike("dc:identifier",c+":"+l),f=u.filter(s);a(U.getRecords(e,t,n,f))}.bind(null,r)).catch(r.oe)}))},reset:function(){}};const V=U},658918:(e,t,r)=>{"use strict";r.d(t,{F:()=>v,X:()=>d});var n=r(375875),o=r.n(n),i=r(916651),a=r(552259),u=r(598223);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=function(e){return o().get(e).then((function(e){var t,n=e.data;return(t=n,Promise.all([r.e(48764),r.e(29379),r.e(45477),r.e(82582)]).then(r.bind(r,545477)).then((function(e){var r,n,o,u,c=e,l=void 0!==(null==t||null===(r=t.asset)||void 0===r?void 0:r.version)?t.asset.version:"1.0",p=function(e,t){var r,n,o,u,c,l;if(null!=t&&null!==(r=t.root)&&void 0!==r&&null!==(n=r.boundingVolume)&&void 0!==n&&n.region){var s=f(t.root.boundingVolume.region,4),p=s[0],v=s[1],d=s[2],m=s[3];return{bounds:{minx:(0,i.convertRadianToDegrees)(p),miny:(0,i.convertRadianToDegrees)(v),maxx:(0,i.convertRadianToDegrees)(d),maxy:(0,i.convertRadianToDegrees)(m)},crs:"EPSG:4326"}}var y=e.Matrix4.fromArray(t.root.transform||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);if(null!=t&&null!==(o=t.root)&&void 0!==o&&null!==(u=o.boundingVolume)&&void 0!==u&&u.box){var g=f(t.root.boundingVolume.box,3),h=g[0],b=g[1],O=g[2],S=e.Matrix4.multiplyByPoint(y,new e.Cartesian3(h,b,O),new e.Cartesian3),w=e.Matrix4.getMatrix3(y,new e.Matrix4),x=e.Matrix3.multiply(w,e.Matrix3.fromArray(t.root.boundingVolume.box,3,new e.Matrix3),new e.Matrix3),A=e.BoundingSphere.fromOrientedBoundingBox(new e.OrientedBoundingBox(S,x)),L=e.Cartographic.fromCartesian(A.center);if(!L)return null;var T=(0,i.convertRadianToDegrees)(L.longitude),E=(0,i.convertRadianToDegrees)(L.latitude),R=A.radius/a.Wm.degrees;return{bounds:{minx:T-R,miny:E-R,maxx:T+R,maxy:E+R},crs:"EPSG:4326"}}if(null!=t&&null!==(c=t.root)&&void 0!==c&&null!==(l=c.boundingVolume)&&void 0!==l&&l.sphere){var C=f(t.root.boundingVolume.sphere,4),P=C[0],G=C[1],_=C[2],D=C[3],M=e.Matrix4.multiplyByPoint(y,new e.Cartesian3(P,G,_),new e.Cartesian3),j=e.Matrix4.getScale(y,new e.Matrix4),I=D*e.Cartesian3.maximumComponent(j)/a.Wm.degrees,B=e.Cartographic.fromCartesian(M);if(!B)return null;var N=(0,i.convertRadianToDegrees)(B.longitude),F=(0,i.convertRadianToDegrees)(B.latitude);return{bounds:{minx:N-I,miny:F-I,maxx:N+I,maxy:F+I},crs:"EPSG:4326"}}return null}(c,t),v=(u=((null==t||null===(n=t.root)||void 0===n||null===(o=n.content)||void 0===o?void 0:o.uri)||"").split(/\./g))[u.length-1],d=null==t?void 0:t.properties;return s(s({version:l},p&&{bbox:p}),{},{format:v,properties:d})}))).then((function(e){return s({tileset:n},e)}))})).catch((function(e){return(0,u.H)(e),{tileset:{}}}))},d="3D Tiles"},501157:(e,t,r)=>{"use strict";r.d(t,{ID:()=>L,en:()=>T,Xv:()=>R,FU:()=>P,gs:()=>_,tt:()=>D,jY:()=>M,T6:()=>j,ZP:()=>I});var n=r(472500),o=r.n(n),i=r(701469),a=r.n(i),u=r(984596),c=r.n(u),l=r(227361),s=r.n(l),f=r(505055),p=r.n(f),v=r(375875),d=r.n(v),m=r(737275),y=r(916651),g=r(577215);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==h(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={},A="1.3.0",L="1.1.1",T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{service:"WMS",version:A,request:"GetCapabilities"},r=arguments.length>2?arguments[2]:void 0,n=(a()(e)&&e||e.split(","))[0],i=o().parse(n,!0);return o().format(w(w({},i),{},{search:null,query:w(w(w({},t),i.query),(null==r?void 0:r.query)||{})}))},E=function(e){var t=e&&e.Title,r=e.LogoURL&&w(w({},s()(e,"LogoURL.$")||{}),{},{format:s()(e,"LogoURL.Format")}),n=s()(e,'OnlineResource.$["xlink:href"]');return{title:t,logo:r,imageUrl:s()(e,'LogoURL.OnlineResource.$["xlink:href"]'),link:n}},R=function e(t){var r,n,o=null!==(r=null==t?void 0:t.Layer)&&void 0!==r?r:null==t?void 0:t.layer,i=null!==(n=null==t?void 0:t.Name)&&void 0!==n?n:null==t?void 0:t.name;return o?c()(o).reduce((function(t,r){var n,o,i=null!==(n=r.Layer)&&void 0!==n?n:r.layer,a=null!==(o=r.Name)&&void 0!==o?o:r.name;return[].concat(b(t),b(e(r)),b(i&&a?[r]:[]))}),[]):i&&[t]||[]},C=function(){var e,t,r,n,o,i,u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,f=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,v=l.Capability,d=l.Service,m=(u=v).Request&&u.Request.GetMap&&u.Request.GetMap.DCPType&&u.Request.GetMap.DCPType.HTTP&&u.Request.GetMap.DCPType.HTTP.Get&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource&&u.Request.GetMap.DCPType.HTTP.Get.OnlineResource.$||void 0,y=v.Layer&&(null===(e=v.Layer.SRS||v.Layer.CRS)||void 0===e?void 0:e.map((function(e){return e.toUpperCase()})))||[],g=v.Layer&&v.Layer.Attribution&&E(v.Layer.Attribution),h=c()((null==v||null===(t=v.Request)||void 0===t||null===(r=t.GetMap)||void 0===r?void 0:r.Format)||[]),b=c()((null==v||null===(n=v.Request)||void 0===n||null===(o=n.GetFeatureInfo)||void 0===o?void 0:o.Format)||[]),O=R(v),S=(a()(O)?O:[O]).filter((function(e){return!p||-1!==e.Name.toLowerCase().indexOf(p.toLowerCase())||e.Title&&-1!==e.Title.toLowerCase().indexOf(p.toLowerCase())||e.Abstract&&-1!==e.Abstract.toLowerCase().indexOf(p.toLowerCase())}));return{numberOfRecordsMatched:S.length,numberOfRecordsReturned:Math.min(f,S.length),nextRecord:s+Math.min(f,S.length)+1,service:d,layerOptions:{version:(null==l||null===(i=l.$)||void 0===i?void 0:i.version)||A},records:S.filter((function(e,t){return t>=s-1&&t<s-1+f})).map((function(e){return w(w({},e),{},{getMapFormats:h,getFeatureInfoFormats:b,onlineResource:m,SRS:y,credits:e.Attribution?E(e.Attribution):g})}))}},P=function(e){return d().get(T(e,{service:"WMS",version:A,request:"GetCapabilities"})).then((function(e){var t;return p().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t.WMS_Capabilities||t.WMT_MS_Capabilities||{}}))},G=function(e,t,r,n){var o=x[e];return o&&(new Date).getTime()<o.timestamp+1e3*((0,m.u8)("cacheExpire")||60)?new Promise((function(e){e(C(o.data,t,r,n))})):P(e).then((function(o){return x[e]={timestamp:(new Date).getTime(),data:o},C(o,t,r,n)}))},_=function(e,t){return d().get(T(e,{service:"WMS",version:L,layers:t,request:"DescribeLayer"})).then((function(e){var t;return p().parseString(e.data,{explicitArray:!1},(function(e,r){t=r&&r.WMS_DescribeLayerResponse&&r.WMS_DescribeLayerResponse.LayerDescription})),(t=Array.isArray(t)?t:[t]).map((function(e){return w(w({},e&&e.$||{}),{},{layerName:e&&e.$&&e.$.name,query:w({},e&&e.query&&e.query.$||{})})}))}))},D=function(e,t,r,n){return G(e,t,r,n)},M=function(e,t){for(var r=e,n=r.EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,y.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;!n&&r.Layer&&r.Layer.length;)n=(r=r.Layer[0]).EX_GeographicBoundingBox||r.exGeographicBoundingBox||(0,y.getWMSBoundingBox)(r.BoundingBox)||r.LatLonBoundingBox&&r.LatLonBoundingBox.$||r.latLonBoundingBox;n||(n={westBoundLongitude:-180,southBoundLatitude:-90,eastBoundLongitude:180,northBoundLatitude:90});var o={extent:[n.westBoundLongitude||n.minx,n.southBoundLatitude||n.miny,n.eastBoundLongitude||n.maxx,n.northBoundLatitude||n.maxy],crs:"EPSG:4326"};return t?{crs:o.crs,bounds:{minx:o.extent[0],miny:o.extent[1],maxx:o.extent[2],maxy:o.extent[3]}}:o},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return P(e).then((function(e){var r,n,o,i,a=e.Capability,u=c()((null==a||null===(r=a.Request)||void 0===r||null===(n=r.GetMap)||void 0===n?void 0:n.Format)||[]).filter(g.F0);return t?{imageFormats:u,infoFormats:c()((null==a||null===(o=a.Request)||void 0===o||null===(i=o.GetFeatureInfo)||void 0===i?void 0:i.Format)||[]).filter(g.cP)}:u})).catch((function(){return t?{imageFormats:[],infoFormats:[]}:[]}))};const I={flatLayers:R,parseUrl:T,getDimensions:function(e){return c()(e.Dimension||e.dimension||[]).map((function(t,r){var n=e.Extent&&c()(e.Extent)[r]||e.extent&&c()(e.extent)[r];return{name:t.$.name,units:t.$.units,unitSymbol:t.$.unitSymbol,default:t.$.default||n&&n.$.default,values:t._&&t._.split(",")||n&&n._&&n._.split(",")}}))},getCapabilities:P,describeLayer:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return d().get(T(e,{service:"WMS",version:L,layers:t,request:"DescribeLayer"},r)).then((function(e){var t,r,n;p().parseString(e.data,{explicitArray:!1},(function(e,t){n=t}));var o=(null===(t=n)||void 0===t||null===(r=t.WMS_DescribeLayerResponse)||void 0===r?void 0:r.LayerDescription)&&c()(n.WMS_DescribeLayerResponse.LayerDescription)[0];return o&&w(w({},null==o?void 0:o.$),(null==o?void 0:o.Query)&&{query:c()(o.Query).map((function(e){return w({},null==e?void 0:e.$)}))})}))},getRecords:G,describeLayers:_,textSearch:D,parseLayerCapabilities:function(e,t){var r=e.Capability;return R(r).find((function(e){var r=e.Name;return 2===t.name.split(":").length&&r&&2===r.split(":").length?t.name===r&&e:r&&2===r.split(":").length?t.name===r.split(":")[1]&&e:2===t.name.split(":").length?t.name.split(":")[1]===r&&e:t.name===r&&e}))},getBBox:M,reset:function(){Object.keys(x).forEach((function(e){delete x[e]}))},getSupportedFormat:j}},603475:(e,t,r)=>{"use strict";r.d(t,{hn:()=>A,ZP:()=>L});var n=r(375875),o=r.n(n),i=r(737275),a=r(472500),u=r.n(a),c=r(727418),l=r.n(c),s=r(505055),f=r.n(s),p=r(984596),v=r.n(p),d=r(916651),m=r(611847),y=r(707294);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==g(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O={},S=function(e){var t=u().parse((0,m.eW)(e),!0);return u().format(l()({},t,{search:null},{query:l()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},w=function(e,t,r,n,o){for(var i=e.Capabilities.Contents,a=(0,y.G6)(e),u=(0,y.s5)(e),c=i.TileMatrixSet&&v()(i.TileMatrixSet)||[],s=[],f=c.length,p=0;p<f;p++)s.push((0,d.getEPSGCode)(c[p]["ows:SupportedCRS"]));var m=i.Layer,g=v()(m).filter((function(e){return!n||-1!==e["ows:Identifier"].toLowerCase().indexOf(n.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:g.length,numberOfRecordsReturned:Math.min(r,g.length),nextRecord:t+Math.min(r,g.length)+1,records:g.filter((function(e,n){return n>=t-1&&n<t-1+r})).map((function(e){return l()({},e,{SRS:s,TileMatrixSet:c,queryable:!!(0,y.b4)(a,"GetFeatureInfo","KVP"),requestEncoding:u,style:(0,y.EN)(e),format:(0,y.JY)(e),formats:v()(e.Format),GetTileURL:(0,y.b4)(a,"GetTile",u),capabilitiesURL:o})}))}},x={parseUrl:S,getRecords:function(e,t,r,n){var a=O[e];return a&&(new Date).getTime()<a.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(o){o(w(a.data,t,r,n,e))})):o().get(S(e)).then((function(o){var i;return f().parseString(o.data,{explicitArray:!1},(function(e,t){i=t})),O[e]={timestamp:(new Date).getTime(),data:i},w(i,t,r,n,e)}))},getCapabilities:function(e,t){null!=t&&t.force&&O[e]&&delete O[e];var r=O[e];return r&&(new Date).getTime()<r.timestamp+1e3*((0,i.u8)("cacheExpire")||60)?new Promise((function(e){e(r.data)})):o().get(S(e)).then((function(t){var r;return f().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),O[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,n){return x.getRecords(e,t,r,n)},reset:function(){Object.keys(O).forEach((function(e){delete O[e]}))}},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return x.getCapabilities(e,{force:null==r?void 0:r.force}).then((function(e){var r,n,o,i,a=t.split(":"),u=v()((null==e||null===(r=e.Capabilities)||void 0===r||null===(n=r.Contents)||void 0===n?void 0:n.Layer)||[]).find((function(e){return e["ows:Identifier"]===a[1]||e["ows:Identifier"]===t})),c=v()((null==u?void 0:u.TileMatrixSetLink)||[]).map((function(e){return e.TileMatrixSet})),l=v()((null==e||null===(o=e.Capabilities)||void 0===o||null===(i=o.Contents)||void 0===i?void 0:i.TileMatrixSet)||[]).filter((function(e){return c.includes(e["ows:Identifier"])})),s=l.map((function(e){var t=e.TileMatrix.map((function(e){return e.TopLeftCorner.split(" ").map(parseFloat)})),r=e.TileMatrix.map((function(e){return[parseFloat(e.TileWidth),parseFloat(e.TileHeight)]})),n=t[0],o=r[0],i=t.every((function(e){return n[0]===e[0]&&n[1]===e[1]})),a=r.every((function(e){return o[0]===e[0]&&o[1]===e[1]}));return b(b({id:e["ows:Identifier"],crs:(0,d.getEPSGCode)(e["ows:SupportedCRS"]),scales:e.TileMatrix.map((function(e){return parseFloat(e.ScaleDenominator)}))},i?{origin:n}:{origins:t}),a?{tileSize:o}:{tileSizes:r})}));return{tileMatrixSets:l,tileMatrixSetLinks:c,tileGrids:s,styles:v()((null==u?void 0:u.Style)||[]).map((function(e){return e["ows:Identifier"]})),formats:v()((null==u?void 0:u.Format)||[])}}))};const L=x},932354:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(227361),o=r.n(n),i=r(737275),a=function(e,t,r,n){var a=o()(i.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!n||e.title.indexOf(n)>-1})),u=a.filter((function(e,n){return n>=t-1&&n<r+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:a.length,numberOfRecordsReturned:u.length,records:u,service:{Name:"Background Provider"}})}))};const u={getRecords:a,reset:function(){},textSearch:function(e,t,r,n){return a(0,t,r,n)}}}}]);