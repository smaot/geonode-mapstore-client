(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[82803],{482803:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>X});var r=n(124852),o=n.n(r),i=n(480681),a=n(455877),l=n.n(a),u=n(606162),c=n.n(u),s=n(21090),f=n(406557),d=n.n(f),p=n(590937),m=n(38560),v=n(815135);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,v.Z)(m.Z),g=function(e){return e.replace(/\./g,"-")};const h=(0,p.Ej)("option",{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))((0,p.GR)("option",{drop:function(e){var t=e.onMoveEnd;(void 0===t?function(){}:t)()},hover:function(e,t){var n=t.getItem(),r=e.id,o=e.index,i=e.onMove,a=void 0===i?function(){}:i,l=document.querySelector("[data-id=item-".concat(g(r),"]"));if(null==l||!l.getBoundingClientRect)return null;var u=n.index,c=o;if(u===c)return null;var s=l.getBoundingClientRect(),f=(s.bottom-s.top)/2,d=t.getClientOffset().y-s.top;return u<c&&d<f||u>c&&d>f||(a(u,c),n.index=c),null}},(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver()}}))((function(e){var t,n,a=e.id,l=e.title,u=e.selected,c=e.onSelect,s=e.onRemove,f=e.isDragging,d=e.connectDragPreview,p=e.connectDropTarget,m=e.connectDragSource,v=e.isSortable,h=(0,r.useRef)(),w=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=w[0],O=w[1],S=f?0:1,j=v?m(o().createElement("div",{className:"grab-handle",onClick:function(e){return e.stopPropagation()}},o().createElement(i.gG,{glyph:"grab-handle"}))):null,P=o().createElement("li",{"data-id":"item-".concat(g(a)),className:"ms-map-views-item".concat(u?" selected":"").concat(E?" focus":""),style:{opacity:S},onClick:function(){var e;return null==h||null===(e=h.current)||void 0===e?void 0:e.click()},tabIndex:0},j,o().createElement("div",{className:"ms-map-views-item-title"},l),o().createElement("div",{onClick:function(e){return e.stopPropagation()}},o().createElement("button",{ref:h,style:{left:0,visibility:"hidden",position:"absolute",width:0,height:0,overflow:"hidden"},onClick:c,onFocus:function(){return O(!0)},onBlur:function(){return O(!1)}},"select ",l," item"),s&&o().createElement(b,{className:"square-button-md",bsStyle:u?"primary":"default",onClick:s,tooltipId:"mapViews.removeView"},o().createElement(i.gG,{glyph:"trash"}))));return v?d(p(P)):P}))),w=function(e){var t=e.views,n=e.selectedId,r=e.onSelect,i=e.onRemove,a=e.onMove,l=e.onMoveEnd,u=e.options,c=e.edit;return o().createElement("div",{className:"ms-map-views-list"},o().createElement("div",{className:"ms-map-views-list-header"},u),o().createElement("div",{className:"ms-map-views-list-body"},o().createElement("ul",null,t.map((function(e,t){return o().createElement(h,{key:e.id,id:e.id,selected:n===e.id,index:t,title:e.title,onSelect:function(){return r(e)},onRemove:c?function(){return i(e)}:void 0,isSortable:!!c,onMove:a,onMoveEnd:l})})))))};var E=["left","active"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}var S=(0,v.Z)((function(e){var t=e.left,n=e.active,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,E);return o().createElement("div",O({},r,{className:"ms-map-view-progress-tick".concat(n?" active":""),style:{left:t}}))}));const j=function(e){var t=e.play,n=e.progress,r=e.segments,i=e.totalLength,a=e.onSelect,l=e.currentIndex;return o().createElement("div",{className:"ms-map-view-progress-container".concat(t?" playing":"")},o().createElement("div",{className:"ms-map-view-progress-bar",style:{width:"".concat(n,"%")}}),null==r?void 0:r.map((function(e,t){var n=e.duration,r=e.view;return o().createElement(S,{key:t,tooltip:null==r?void 0:r.title,active:t<=l,tooltipPosition:"bottom",left:"".concat(Math.round(n/i*100),"%"),onClick:function(){return a(r)}})})))};var P=n(638445),T=n(379853),I=n(805346),N=n(532425),C=n(898631),V=["mapType","onSelectView","onUpdateViews","onUpdateResources","onUpdateServices","views","selectedId","defaultTitle","layers","locale","resources","services","selectedService","defaultServices","defaultSelectedService","edit","hide"];function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function D(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){var r;return r=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==k(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=(0,v.Z)(m.Z),F=Z(Z(Z({},C.Bk.LEAFLET,(0,r.lazy)((function(){return n.e(93004).then(n.bind(n,943289))}))),C.Bk.OPENLAYERS,(0,r.lazy)((function(){return n.e(93336).then(n.bind(n,177628))}))),C.Bk.CESIUM,(0,r.lazy)((function(){return Promise.all([n.e(65792),n.e(48764),n.e(29379),n.e(45477),n.e(50172),n.e(78384)]).then(n.bind(n,858979))}))),L=(0,r.lazy)((function(){return Promise.all([n.e(43129),n.e(82515),n.e(97227),n.e(92579),n.e(47712)]).then(n.bind(n,693601))})),_="UPDATE_VIEWS_STATE",B="UNDO_VIEWS_STATE",z="REDO_VIEWS_STATE",W=Z({},_,(function(e,t){return U(U({},e),t)})),$=(0,s.ZP)((function(e,t){return(W[t.type]||d())(e,t.payload)}),{limit:20,undoType:B,redoType:z,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),H=function(e){var t;return null!==(t=null==e?void 0:e.reduce((function(e,t){var n;return e+1e3*(null!==(n=null==t?void 0:t.duration)&&void 0!==n?n:T.Ih.DURATION)}),0))&&void 0!==t?t:0};const X=function(e){var t,n,a,u,s,f,d=e.mapType,p=e.onSelectView,m=void 0===p?function(){}:p,v=e.onUpdateViews,y=void 0===v?function(){}:v,b=e.onUpdateResources,g=void 0===b?function(){}:b,h=e.onUpdateServices,E=void 0===h?function(){}:h,O=e.views,S=void 0===O?[]:O,C=e.selectedId,k=e.defaultTitle,R=void 0===k?"Map View":k,G=e.layers,M=e.locale,Z=e.resources,W=void 0===Z?[]:Z,X=e.services,Y=e.selectedService,J=(e.defaultServices,e.defaultSelectedService),K=e.edit,Q=e.hide,ee=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,V),te=A((0,r.useReducer)($,{}),2),ne=te[0],re=te[1],oe=function(e){return re({type:_,payload:{views:e}})};(0,r.useEffect)((function(){var e;re({type:_,payload:{views:(e={views:S,resources:W}).views,resources:e.resources}})}),[]);var ie=A((0,r.useState)(0),2),ae=ie[0],le=ie[1],ue=A((0,r.useState)({}),2),ce=ue[0],se=ue[1];function fe(e){var t;e===B&&(t=null==ne?void 0:ne.past[(null==ne?void 0:ne.past.length)-1]),e===z&&(t=null==ne?void 0:ne.future[(null==ne?void 0:ne.future.length)-1]),re({type:e}),y(t.views),g(t.resources),le(ae+1)}var de=(null==ne?void 0:ne.present)||{},pe=de.views,me=void 0===pe?[]:pe,ve=de.resources,ye=void 0===ve?[]:ve,be=A((0,r.useState)(""),2),ge=be[0],he=be[1],we=A((0,r.useState)(!0),2),Ee=we[0],Oe=we[1],Se=A((0,r.useState)(!1),2),je=Se[0],Pe=Se[1],Te=A((0,r.useState)(!1),2),Ie=Te[0],Ne=Te[1],Ce=me.find((function(e){return e.id===C})),Ve=me.indexOf(Ce),ke=A((0,r.useState)(!1),2),xe=ke[0],De=ke[1],Ae=(0,r.useRef)();function Re(e){var t=me.length>0&&c()(me.map((function(e){var t,n=new RegExp("".concat(R," \\(([0-9]+)\\)")),r=null===(t=(e.title||"").match(n))||void 0===t?void 0:t[1];return r?parseFloat(r):void 0})).filter((function(e){return void 0!==e}))),n=t&&!isNaN(t)?t:0,r=U(U({duration:T.Ih.DURATION,flyTo:!0},e||Ae.current.getView()),{},{title:"".concat(R," (").concat(n+1,")"),id:l()()}),o=-1===Ve?[].concat(D(me),[r]):me.reduce((function(e,t,n){return[].concat(D(e),n===Ve?[t,r]:[t])}),[]);oe(o),m(r.id),y(o),X||0!==me.length||E(J)}function Ge(e,t){var n;e&&null!=Ae&&null!==(n=Ae.current)&&void 0!==n&&n.setView&&Ae.current.setView(t?e:U(U({},e),{},{flyTo:!1})),m(e.id)}var Me=(0,r.useRef)();Me.current=me;var Ue=(0,r.useCallback)((function(e,t){var n=D(Me.current);n.splice(e,1),n.splice(t,0,Me.current[e]),oe(n)}),[]);function Ze(e){me[Ve+e]&&Ge(me[Ve+e])}var qe=function(e){var t=e.currentIndex,n=e.views,o=e.onInit,i=e.onChangeView,a=A((0,r.useState)(!1),2),l=a[0],u=a[1],c=A((0,r.useState)(0),2),s=c[0],f=c[1],d=H(n),p=n.map((function(e,t){return{view:e,duration:H(n.filter((function(e,n){return n<t})))}}));return(0,r.useEffect)((function(){var e,n;l||f(Math.round((null!==(e=null==p||null===(n=p[t])||void 0===n?void 0:n.duration)&&void 0!==e?e:0)/d*100))}),[t,l]),(0,r.useEffect)((function(){function e(){"visible"!==document.visibilityState&&u(!1)}var r,a=!1;if(l){var c,s=Date.now(),m=-1===t?0:t,v=null==p||null===(c=p[m])||void 0===c?void 0:c.duration,y=s,b=n[m>=n.length?0:m];o(b),function e(){if(!a){var t,o;r=requestAnimationFrame(e);var l=Date.now(),u=l-s,c=1e3*(null!==(t=null===(o=b)||void 0===o?void 0:o.duration)&&void 0!==t?t:T.Ih.DURATION);if(u>=c){s=Date.now();var p=m>=n.length?0:m,g=p+1>=n.length?0:p+1,h=n[g];i(h),b=h,m=g}var w=l+v-y,E=Math.round(w/d*100);Math.round(u/c*100)%5==0&&f(E),w>=d&&(y=Date.now(),v=0)}}(),document.addEventListener("visibilitychange",e)}return function(){a=!0,r&&cancelAnimationFrame(r),l&&document.removeEventListener("visibilitychange",e)}}),[l]),{play:l,setPlay:u,navigationProgress:s,viewsTimeSegments:p,viewsTimeTotalLength:d}}({currentIndex:Ve,views:me,onInit:function(e){Ge(e),he("")},onChangeView:function(e){Ge(e,!0)}}),Fe=qe.play,Le=qe.setPlay,_e=qe.navigationProgress,Be=qe.viewsTimeSegments,ze=qe.viewsTimeTotalLength,We=(0,r.useRef)(!1);(0,r.useEffect)((function(){xe&&!We.current&&(We.current=!0,Ce&&setTimeout((function(){Ae.current.setView(U(U({},Ce),{},{flyTo:!1}))}),500))}),[xe]);var $e=F[d];return!$e||!K&&0===(null==me?void 0:me.length)||Q?null:o().createElement(o().Fragment,null,o().createElement(r.Suspense,{fallback:o().createElement("div",null)},o().createElement($e,x({},ee,{selectedId:C,views:me,apiRef:function(e){Ae.current=e,xe||De(!0)},showViewsGeometries:je,resources:ye,showClipGeometries:Ie}))),K&&0===(null==me?void 0:me.length)?o().createElement("div",{className:"ms-map-views"},o().createElement("div",{className:"ms-map-views-wrapper"},o().createElement("div",{className:"ms-map-views-header"},o().createElement("div",{className:"ms-map-views-title"},o().createElement(I.Z,{msgId:"mapViews.addInitialView"})),o().createElement(i.Si,null,o().createElement(i.hE,null,((null==ne||null===(t=ne.past)||void 0===t?void 0:t.length)||0)>0&&o().createElement(q,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(n=ne.past)||void 0===n?void 0:n.length)||0),onClick:function(){return fe(B)},tooltipId:"mapViews.undoChanges",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"undo"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",onClick:Re.bind(null,void 0),tooltipId:"mapViews.addNewView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"plus"}))))))):o().createElement("div",{className:"ms-map-views",onClick:function(e){return e.stopPropagation()}},o().createElement("div",{className:"ms-map-views-wrapper"},o().createElement(j,{play:Fe,currentIndex:Ve,progress:_e,segments:Be,totalLength:ze,onSelect:function(e){Fe&&Le(!1),Ge(e)}}),o().createElement("div",{className:"ms-map-views-header"},null!=Ce&&Ce.description&&!ge?o().createElement(q,{className:"square-button-md no-border",style:{borderRadius:"50%",marginRight:4},onClick:function(){return Oe(!Ee)},tooltipId:Ee?"mapViews.hideDescription":"mapViews.showDescription",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:Ee?"chevron-down":"chevron-right"})):null,o().createElement("div",{className:"ms-map-views-title"},"settings"===ge?o().createElement(P.Z,{key:"".concat(null==Ce?void 0:Ce.id,"-").concat(ae),value:null==Ce?void 0:Ce.title,onChange:function(e){return t={title:e},n=me.map((function(e){return e.id===Ce.id?U(U({},e),t):e})),oe(n),void y(n);var t,n}}):null==Ce?void 0:Ce.title),o().createElement(i.Si,null,!Fe&&o().createElement(i.hE,null,o().createElement(q,{bsStyle:"list"===ge?"success":"primary",className:"square-button-md",active:"list"===ge,onClick:function(){return he("list"!==ge?"list":"")},tooltipId:"list"===ge?"mapViews.hideViewsList":"mapViews.showViewsList",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"list"}))),!Fe&&K&&o().createElement(i.hE,null,o().createElement(q,{bsStyle:"primary",className:"square-button-md",disabled:"settings"===ge,onClick:Re.bind(null,void 0),tooltipId:Ce?"mapViews.addNewViewBelowSelected":"mapViews.addNewView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"plus"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",disabled:!Ce||"settings"===ge,onClick:Re.bind(null,Ce),tooltipId:"mapViews.copyCurrentView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"duplicate"})),o().createElement(q,{bsStyle:"settings"===ge?"success":"primary",className:"square-button-md",active:"settings"===ge,disabled:!Ce,onClick:function(){return he("settings"!==ge?"settings":"")},tooltipId:"settings"===ge?"mapViews.stopEdit":"mapViews.edit",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"pencil"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(a=ne.past)||void 0===a?void 0:a.length)||0),onClick:function(){return fe(B)},tooltipId:"mapViews.undoChanges",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"undo"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",disabled:0===((null==ne||null===(u=ne.future)||void 0===u?void 0:u.length)||0),onClick:function(){return fe(z)},tooltipId:"mapViews.redoChanges",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"redo"}))),o().createElement(i.hE,null,o().createElement(q,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ge(me[0])},disabled:0===Ve||Fe,tooltipId:"mapViews.gotToFirstView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"fast-backward"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ze(-1)},disabled:!me[Ve-1]||Fe,tooltipId:"mapViews.gotToPreviousView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"step-backward"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",active:!!Fe,disabled:1===(null==me?void 0:me.length),onClick:function(){return Le(!Fe)},tooltipId:Fe?"mapViews.pause":"mapViews.play",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:Fe?"pause":"play"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ze(1)},disabled:!me[Ve+1]||Fe,tooltipId:"mapViews.gotToNextView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"step-forward"})),o().createElement(q,{bsStyle:"primary",className:"square-button-md",onClick:function(){return Ge(me[(null==me?void 0:me.length)-1])},disabled:Ve===(null==me?void 0:me.length)-1||Fe,tooltipId:"mapViews.gotToLastView",tooltipPosition:"bottom"},o().createElement(i.gG,{glyph:"fast-forward"}))))),o().createElement("div",{className:"ms-map-views-body"},"list"===ge&&o().createElement(w,{views:me,edit:K,selectedId:null==Ce?void 0:Ce.id,onSelect:Ge,onMove:Ue,onMoveEnd:function(){y(me)},onRemove:function(e){var t=me.filter((function(t){return t.id!==e.id}));oe(t),y(t)},options:o().createElement(o().Fragment,null,(null===(s=Ae.current)||void 0===s||null===(f=s.options)||void 0===f?void 0:f.showClipGeometriesEnabled)&&o().createElement(i.XZ,{checked:je,onChange:function(){return Pe(!je)}},o().createElement(I.Z,{msgId:"mapViews.showViewsGeometries"})))}),"settings"===ge&&Ce&&o().createElement(r.Suspense,{fallback:o().createElement("div",{style:{display:"flex",justifyContent:"center",padding:8,width:"100%"}},o().createElement(N.Z,{size:30}))},o().createElement(L,{key:"".concat(Ce.id,"-").concat(ae),expandedSections:ce,onExpandSection:function(e){return se((function(t){return U(U({},t),e)}))},view:Ce,api:Ae.current,onChange:function(e){var t=me.map((function(t){return t.id===e.id?e:t}));oe(t),y(t)},onCaptureView:function(e){var t=me.map((function(t){return t.id===e.id?U(U({},e),Ae.current.getView()):t}));oe(t),y(t)},layers:G,locale:M,services:X,selectedService:Y,resources:ye,onUpdateResource:function(e,t){var n=ye.find((function(t){return t.id===e}))?ye.map((function(n){return n.id===e?{id:e,data:t}:n})):[].concat(D(ye),[{id:e,data:t}]);!function(e){re({type:_,payload:{resources:e}})}(n),g(n)},showClipGeometries:Ie,onShowClipGeometries:Ne})))),!ge&&Ee&&(null==Ce?void 0:Ce.description)&&o().createElement("div",{className:"ms-map-views-description"},o().createElement("div",{dangerouslySetInnerHTML:{__html:Ce.description}}))))}},638445:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(124852),o=n.n(r),i=n(480681),a=n(697111),l=n(993451),u=["debounceTime"],c=["fallbackValue"];function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=(0,a.Z)("onChange","value")((0,l.Z)("placeholder")((function(e){e.debounceTime;var t=p(e,u);return o().createElement(i.NI,d({},t,{onChange:function(e){return t.onChange(e.target.value)}}))})));const v=function(e){var t,n,i=e.fallbackValue,a=p(e,c),l=s((0,r.useState)(null!==(t=a.value)&&void 0!==t?t:i),2),u=l[0],f=l[1],v=s((0,r.useState)(null!==(n=a.value)&&void 0!==n?n:i),2),y=v[0],b=v[1],g=s((0,r.useState)(0),2),h=g[0],w=g[1],E=(0,r.useRef)(!1),O=(0,r.useRef)();function S(e){var t=!isNaN(parseFloat(e));return t&&void 0!==a.min&&e<a.min?{changed:!0,value:a.min}:t&&void 0!==a.max&&e>a.max?{changed:!0,value:a.max}:{changed:!1,value:t?parseFloat(e):e}}return O.current=u,(0,r.useEffect)((function(){var e;O.current!==a.value&&f(null!==(e=a.value)&&void 0!==e?e:i)}),[a.value]),o().createElement(m,d({},a,{key:h,value:u,onChange:function(e){if(E.current){var t=e,n=!0;if("number"===a.type){var r=S(t).changed;(""===t||r)&&(n=!1)}f(t),n&&a.onChange(t)}},onChangeNoDebounce:b,onBlur:function(){if("number"===a.type)if(""===y)a.onChange(void 0),f(i),w((function(e){return e+1}));else{var e=S(y).value;a.onChange(e),w((function(e){return e+1})),f(e)}E.current=!1},onFocus:function(){E.current=!0}}))}},993451:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(86638),o=n(285547),i=n(45697),a=n.n(i),l=n(984596),u=n.n(l),c=n(701469),s=n.n(c),f=n(414293),d=n.n(f),p=n(747037),m=n.n(p),v=n(867076),y=["messages","locale"];function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){var r;return r=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==b(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"msgId";return(0,v.compose)((0,v.getContext)({messages:a().object,locale:a().string}),(0,v.mapProps)((function(i){var a=i.messages,l=i.locale,c=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(i,y);return h(h({},c),u()(e).reduce(function(e,t,n){var i=t.messages,a=t.locale,l=t.mode;return function(){var t=arguments.length>1?arguments[1]:void 0;return h(h({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},w({},t,"msgId"===l?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(t))return t.map((function(o){var i=(0,r.S$)(e,o[n]||m()(o)&&o||"");return h(h({},o),{},w({},n,d()(i)?t:i))}));var o=t?(0,r.S$)(e,t):t;return d()(o)?t:o}(i,e[t],n):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(s()(e))return e.map((function(r){var i=(0,o.Z)(r[n]||m()(r)&&r||"",t);return h(h({},r),{},w({},n,d()(i)?e:i))}));var r=(0,o.Z)(e,t);return d()(r)?e:r}(e[t],a,n)))}}(c,{locale:l,messages:a,mode:n},t),{}))})))}},697111:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(23279),u=n.n(l);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){var r;return r=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==c(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const m=function(e,t){return function(n){function i(i){var a,l,c=(0,r.useRef)(),s=(a=(0,r.useState)(i[t]),l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(a,l)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=s[0],v=s[1],y=(0,r.useRef)();y.current=m,(0,r.useEffect)((function(){if(y.current!==i[t]){v(i[t]);var n=i["".concat(e,"NoDebounce")];n&&n(i[t])}}),[i[t]]),(0,r.useEffect)((function(){return c.current=u()((function(t){var n=t.newProps,r=t.newValue;n[e](r)}),i.debounceTime),function(){c.current.cancel()}}),[i.debounceTime]);var b=f(f({},i),{},d(d({},t,m),e,(function(t){v(t);var n=i["".concat(e,"NoDebounce")];n&&n(t),c.current&&(c.current.cancel(),c.current({newProps:i,newValue:t}))})));return o().createElement(n,b)}return i.propTypes={debounceTime:a().number},i.defaultProps={debounceTime:300},i.displayName=n.displayName+"WithDebounceOnCallback",i}}},753325:e=>{e.exports=function(e,t){return e>t}},23279:(e,t,n)=>{var r=n(513218),o=n(707771),i=n(14841),a=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,s,f,d,p,m=0,v=!1,y=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=u,r=c;return u=c=void 0,m=t,f=e.apply(r,n)}function h(e){var n=e-p;return void 0===p||n>=t||n<0||y&&e-m>=s}function w(){var e=o();if(h(e))return E(e);d=setTimeout(w,function(e){var n=t-(e-p);return y?l(n,s-(e-m)):n}(e))}function E(e){return d=void 0,b&&u?g(e):(u=c=void 0,f)}function O(){var e=o(),n=h(e);if(u=arguments,c=this,p=e,n){if(void 0===d)return function(e){return m=e,d=setTimeout(w,t),v?g(e):f}(p);if(y)return clearTimeout(d),d=setTimeout(w,t),g(p)}return void 0===d&&(d=setTimeout(w,t)),f}return t=i(t)||0,r(n)&&(v=!!n.leading,s=(y="maxWait"in n)?a(i(n.maxWait)||0,t):s,b="trailing"in n?!!n.trailing:b),O.cancel=function(){void 0!==d&&clearTimeout(d),m=0,u=p=c=d=void 0},O.flush=function(){return void 0===d?f:E(o())},O}},606162:(e,t,n)=>{var r=n(456029),o=n(753325),i=n(406557);e.exports=function(e){return e&&e.length?r(e,i,o):void 0}},707771:(e,t,n)=>{var r=n(555639);e.exports=function(){return r.Date.now()}},21090:(e,t)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.ZP=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r=t.debug;var l={initialState:t.initialState,initTypes:d(t.initTypes,["@@redux/INIT","@@INIT"]),limit:t.limit,filter:t.filter||function(){return!0},undoType:t.undoType||a.UNDO,redoType:t.redoType||a.REDO};return l.history=t.initialHistory||f(l.initialState),0===l.initTypes.length&&console.warn("redux-undo: supply at least one action type in initTypes to ensure initial state"),function(t,a){!function(e,t){if(r){var n=["action",e.type];console.group?(n.unshift("%credux-undo","font-style: italic"),console.groupCollapsed.apply(console,n),console.log("received",{state:t,action:e})):o.apply(void 0,n)}}(a,t);var d=void 0;switch(a.type){case l.undoType:return d=function(e){o("undo",{history:e});var t=e.past,n=e.present,r=e.future;return t.length<=0?e:{past:t.slice(0,t.length-1),present:t[t.length-1],future:[n].concat(r)}}(t),o("after undo",d),i(),d?s(t,d):t;case l.redoType:return d=function(e){o("redo",{history:e});var t=e.past,n=e.present,r=e.future;return r.length<=0?e:{future:r.slice(1,r.length),present:r[0],past:[].concat(t,[n])}}(t),o("after redo",d),i(),d?s(t,d):t;default:if(d=e(t&&t.present,a),l.initTypes.some((function(e){return e===a.type})))return o("reset history due to init action"),i(),c(n({},t,f(d)));if(l.filter&&"function"==typeof l.filter&&!l.filter(a,d,t&&t.present))return o("filter prevented action, not storing it"),i(),c(n({},t,{present:d}));var p=function(e,t,n){o("insert",{state:t,history:e,free:n-u(e)});var r=e.past,i=e.present,a=n&&u(e)>=n;return void 0===i?{past:[],present:t,future:[]}:{past:[].concat(r.slice(a?1:0),[i]),present:t,future:[]}}(t&&void 0!==t.present?t:l.history,d,l.limit);return o("after insert",{history:p,free:l.limit-u(p)}),i(),c(n({},t,p))}}};var r=void 0;function o(){if(r){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];console.group||t.unshift("%credux-undo","font-style: italic"),console.log.apply(console,t)}}function i(){if(r)return console.groupEnd&&console.groupEnd()}var a={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO"};t.MF=a;var l={undo:function(){return{type:a.UNDO}},redo:function(){return{type:a.REDO}}};function u(e){var t=e.past,n=e.future;return t.length+1+n.length}function c(e){return n({},e,{history:e})}function s(e,t){return c(n({},e,t))}function f(e){return{past:[],present:e,future:[]}}function d(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Array.isArray(e)?e:"string"==typeof e?[e]:t}t.zF=l}}]);