(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[50172],{550172:(e,o,r)=>{"use strict";r.d(o,{KF:()=>E,c4:()=>G,XI:()=>L,jy:()=>R,WX:()=>N,p9:()=>B,uN:()=>U,U2:()=>_,xB:()=>z,ir:()=>W});var t=r(35961),i=r(545477),n=r(156905),a=r(331097),l=r(935173),c=r(730617),d=r(44799),u=r(420171),p=r(759398),s=r(670594),f=r(816715),y=r(71880),m=r(660904),h=r(370271),v=r(6853),w=r(659635),g=r(720794),Z=r(341633),b=r(234871),P=r(65792),A=r.n(P),F=r(545578),O=r.n(F),j=r(976337),T=r(407578);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function S(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,o){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);o&&(t=t.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),r.push.apply(r,t)}return r}function x(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?C(Object(r),!0).forEach((function(o){var t,i,n,a;t=e,i=o,n=r[o],a=function(e,o){if("object"!=k(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=k(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==k(a)?a:a+"")in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))}))}return e}function M(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,n,a,l=[],c=!0,d=!1;try{if(n=(r=r.call(e)).next,0===o){if(Object(r)!==r)return;c=!1}else for(;!(c=(t=n.call(r)).done)&&(l.push(t.value),l.length!==o);c=!0);}catch(e){d=!0,i=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw i}}return l}}(e,o)||I(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,o){if(e){if("string"==typeof e)return D(e,o);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,o):void 0}}function D(e,o){(null==o||o>e.length)&&(o=e.length);for(var r=0,t=new Array(o);r<o;r++)t[r]=e[r];return t}var E=function(e){var o=e.color,r=e.opacity,i=M(A()(o).gl(),4),n=i[0],a=i[1],l=i[2],c=i[3];return void 0!==r?new t.Z(n,a,l,r):new t.Z(n,a,l,c)},G=function(e){var o=e.coordinates,r=e.width,t=void 0===r?4:r,p=e.color,s=void 0===p?"#ff00ff":p,f=e.opacity,y=void 0===f?1:f,m=e.depthFailColor,h=e.depthFailOpacity,v=e.dashLength,w=e.clampToGround,g=e.allowPicking,Z=void 0!==g&&g,b=e.geodesic,P=e.id,A=e.modelMatrix;return new i[w?"GroundPolylinePrimitive":"Primitive"](x(x({geometryInstances:new n.Z({id:P,geometry:w?new a.Z({positions:S(o),width:t}):new l.Z({positions:S(o),width:t,arcType:b?c.Z.GEODESIC:c.Z.NONE}),modelMatrix:A}),appearance:new d.Z({material:v?u.Z.fromType("PolylineDash",{color:E({color:s,opacity:y}),dashLength:v}):u.Z.fromType("Color",{color:E({color:s,opacity:y})})})},m&&{depthFailAppearance:new d.Z({material:v?u.Z.fromType("PolylineDash",{color:E({color:m,opacity:h}),dashLength:v}):u.Z.fromType("Color",{color:E({color:m,opacity:h})})})}),{},{allowPicking:Z,asynchronous:!1}))},L=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,d=e.depthFailOpacity,m=e.allowPicking,h=void 0!==m&&m,v=e.geodesic;return new p.Z(x(x({geometryInstances:new n.Z({id:o,geometry:new s.Z({polygonHierarchy:new f.Z(S(r)),perPositionHeight:!v})}),appearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:c,opacity:d})}),faceForward:!0})}),{},{allowPicking:h,asynchronous:!1}))},R=function(e){var o=e.width,r=void 0===o?4:o,t=e.coordinates,i=e.color,n=void 0===i?"#ff00ff":i,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,d=e.depthFailOpacity,u=e.dashLength,p=e.clampToGround,s=e.allowPicking,f=void 0!==s&&s,y=e.id,h=e.radius,v=e.semiMajorAxis,w=e.semiMinorAxis,g=e.geodesic,Z=j.Z.computeEllipsePositions({granularity:.02,semiMajorAxis:h||v,semiMinorAxis:h||w,rotation:0,center:t},!1,!0).outerPositions,b=m.Z.unpackArray(Z);return G({coordinates:[].concat(S(b),[b[0]]),width:r,color:n,opacity:l,depthFailColor:c,depthFailOpacity:d,dashLength:u,clampToGround:p,allowPicking:f,id:y,geodesic:g})},N=function(e){var o=e.id,r=e.coordinates,t=e.color,a=void 0===t?"#ff00ffAA":t,l=e.opacity,c=void 0===l?1:l,d=e.depthFailColor,p=e.depthFailOpacity,s=e.allowPicking,f=void 0!==s&&s,m=e.clampToGround,v=e.radius,w=e.semiMajorAxis,g=e.semiMinorAxis;return new i[m?"GroundPrimitive":"Primitive"](x(x({geometryInstances:new n.Z({id:o,geometry:new h.Z({center:r,semiMajorAxis:v||w,semiMinorAxis:v||g})}),appearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:a,opacity:c})}),faceForward:!0})},d&&{depthFailAppearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:d,opacity:p})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},B=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,a=e.opacity,l=void 0===a?1:a,c=e.depthFailColor,d=e.depthFailOpacity,s=e.allowPicking,f=void 0!==s&&s,h=e.length,Z=e.radius,b=e.topRadius,P=e.bottomRadius;return new p.Z(x(x({geometryInstances:new n.Z({id:o,geometry:new v.Z({length:null!=h?h:.1,topRadius:null!=b?b:Z,bottomRadius:null!=P?P:Z}),modelMatrix:w.Z.multiplyByTranslation(g.Z.eastNorthUpToFixedFrame(r),new m.Z(0,0,0),new w.Z)}),appearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:i,opacity:l})}),faceForward:!0})},c&&{depthFailAppearance:new y.Z({material:u.Z.fromType("Color",{color:E({color:c,opacity:d})}),faceForward:!0})}),{},{allowPicking:f,asynchronous:!1}))},U=function(e){var o=e.id,r=e.coordinates,t=e.color,i=void 0===t?"#ff00ffAA":t,n=e.opacity,a=void 0===n?1:n,l=e.depthFailColor,c=e.depthFailOpacity,d=e.allowPicking,u=void 0!==d&&d,p=e.length,s=e.radius,f=e.dashLength,y=e.clampToGround,h=e.geodesic,v=e.width,Z=e.slices,b=void 0===Z?128:Z,P=e.topRadius,A=e.bottomRadius,F=w.Z.multiplyByTranslation(g.Z.eastNorthUpToFixedFrame(r),new m.Z(0,0,0),new w.Z),O=T.Z.computePositions(null!=p?p:0,null!=P?P:s,null!=A?A:s,b,!1),j=m.Z.unpackArray(O);return G({coordinates:p?j:[].concat(S(j.splice(0,Math.ceil(j.length/2))),[j[0]]),width:v,color:i,opacity:a,depthFailColor:l,depthFailOpacity:c,dashLength:f,clampToGround:y,allowPicking:u,id:o,geodesic:h,modelMatrix:F})},_=function(e,o){var r;null!=e&&null!==(r=e.scene)&&void 0!==r&&r.primitives&&o&&!o.isDestroyed()&&(o.removeAll(),e.scene.primitives.remove(o))},z=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.stroke,t=o.strokeWidth,i=void 0===t?1:t,n=o.fill,a=void 0===n?"#ffffff":n,l=r?e+2*i:e,c=document.createElement("canvas");c.setAttribute("width",l),c.setAttribute("height",l);var d=c.getContext("2d");return d.beginPath(),a&&(d.fillStyle=a),r&&(d.strokeStyle=r,d.lineWidth=i),d.arc(l/2,l/2,e/2,0,2*Math.PI),a&&d.fill(),r&&d.stroke(),c},W=function(e,o,t){return r.e(29982).then(r.bind(r,729982)).then((function(i){var n,a,l=i.default,c=(t?e:l(e)).geometry;return(a=S((null==c||null===(n=c.coordinates)||void 0===n?void 0:n[0])||[]),r.e(29014).then(r.bind(r,529014)).then((function(e){return(0,e.default)({type:"Feature",geometry:{type:"LineString",coordinates:a},properties:{}})?a:S(a).reverse()}))).then((function(e){for(var r=O()(o?e:e.reverse(),(function(e){return"".concat(e[0]).concat(e[1])})).map((function(e){var o=M(e,3),r=o[0],t=o[1],i=o[2],n=void 0===i?0:i;return m.Z.fromDegrees(r,t,n)})),t=r.length,i=[],n=0;n<t;++n){var a=(n+1)%t,l=m.Z.add(r[n],r[a],new m.Z);l=m.Z.multiplyByScalar(l,.5,l);var c=m.Z.normalize(l,new m.Z),d=m.Z.subtract(r[a],l,new m.Z);d=m.Z.normalize(d,d);var u=m.Z.cross(d,c,new m.Z);u=m.Z.normalize(u,u);var p=new Z.Z(u,0),s=Z.Z.getPointDistance(p,l);i.push(new b.Z(u,s))}return i}))}))}}}]);