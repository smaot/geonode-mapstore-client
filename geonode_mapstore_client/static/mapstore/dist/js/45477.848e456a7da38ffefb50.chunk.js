/*! For license information please see 45477.848e456a7da38ffefb50.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[45477],{428709:(e,t,i)=>{"use strict";function n(e){this.proxy=e}i.d(t,{Z:()=>r}),n.prototype.getURL=function(e){const t=-1===this.proxy.indexOf("?")?"?":"";return this.proxy+t+encodeURIComponent(e)};const r=n},177418:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var n=i(949225),r=i(35961),o=i(11020),s=i(765153),a=i(205522),l=i(148483);function c(){this._cache={}}c.prototype.fromColor=function(e,t){if(!(0,o.Z)(e))throw new s.Z("color is required");if(!(0,o.Z)(t))throw new s.Z("size is required");return p(void 0,void 0,e,t,this._cache)},c.prototype.fromUrl=function(e,t,i){if(!(0,o.Z)(e))throw new s.Z("url is required");if(!(0,o.Z)(t))throw new s.Z("color is required");if(!(0,o.Z)(i))throw new s.Z("size is required");return p(e,void 0,t,i,this._cache)},c.prototype.fromMakiIconId=function(e,t,i){if(!(0,o.Z)(e))throw new s.Z("id is required");if(!(0,o.Z)(t))throw new s.Z("color is required");if(!(0,o.Z)(i))throw new s.Z("size is required");return p((0,n.Z)(`Assets/Textures/maki/${encodeURIComponent(e)}.png`),void 0,t,i,this._cache)},c.prototype.fromText=function(e,t,i){if(!(0,o.Z)(e))throw new s.Z("text is required");if(!(0,o.Z)(t))throw new s.Z("color is required");if(!(0,o.Z)(i))throw new s.Z("size is required");return p(void 0,e,t,i,this._cache)};const u=new r.Z;function d(e,t,i){const n=i/2.5;let o=n,s=n;t.width>t.height?s=n*(t.height/t.width):t.width<t.height&&(o=n*(t.width/t.height));const a=Math.round((i-o)/2),l=Math.round(7/24*i-s/2);e.globalCompositeOperation="destination-out",e.drawImage(t,a-1,l,o,s),e.drawImage(t,a,l-1,o,s),e.drawImage(t,a+1,l,o,s),e.drawImage(t,a,l+1,o,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.Z.BLACK.toCssColorString(),e.fillRect(a-1,l-1,o+2,s+2),e.globalCompositeOperation="destination-out",e.drawImage(t,a,l,o,s),e.globalCompositeOperation="destination-over",e.fillStyle=r.Z.WHITE.toCssColorString(),e.fillRect(a-1,l-2,o+2,s+2)}const h=new Array(4);function p(e,t,i,n,r){h[0]=e,h[1]=t,h[2]=i,h[3]=n;const s=JSON.stringify(h),c=r[s];if((0,o.Z)(c))return c;const p=document.createElement("canvas");p.width=n,p.height=n;const f=p.getContext("2d");if(function(e,t,i){e.save(),e.scale(i/24,i/24),e.fillStyle=t.toCssColorString(),e.strokeStyle=t.brighten(.6,u).toCssColorString(),e.lineWidth=.846,e.beginPath(),e.moveTo(6.72,.422),e.lineTo(17.28,.422),e.bezierCurveTo(18.553,.422,19.577,1.758,19.577,3.415),e.lineTo(19.577,10.973),e.bezierCurveTo(19.577,12.63,18.553,13.966,17.282,13.966),e.lineTo(14.386,14.008),e.lineTo(11.826,23.578),e.lineTo(9.614,14.008),e.lineTo(6.719,13.965),e.bezierCurveTo(5.446,13.983,4.422,12.629,4.422,10.972),e.lineTo(4.422,3.416),e.bezierCurveTo(4.423,1.76,5.447,.423,6.718,.423),e.closePath(),e.fill(),e.stroke(),e.restore()}(f,i,n),(0,o.Z)(e)){const t=a.Z.createIfNeeded(e).fetchImage().then((function(e){return d(f,e,n),r[s]=p,p}));return r[s]=t,t}if((0,o.Z)(t)){const e=(0,l.Z)(t,{font:`bold ${n}px sans-serif`});d(f,e,n)}return r[s]=p,p}const f=c},695805:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(354998),r=i(11020),o=i(765153);const s=function(e){if(!(0,r.Z)(e))throw new o.Z("uri is required.");const t=new n(e);t.normalize();let i=t.path();const s=i.lastIndexOf("/");return-1!==s&&(i=i.substr(s+1)),i}},745332:(e,t,i)=>{"use strict";i.d(t,{Z:()=>de});var n=i(730617),r=i(660904),o=i(35961),s=i(973384),a=i(865029),l=i(234146),c=i(11020),u=i(765153),d=i(282910),h=i(695805),p=i(177418),f=i(816715),m=i(205522),g=i(217066),_=i(990778),y=i(218157);function Z(e){return e}function v(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return b(e,t)}))}:b(e,t)}function b(e,t){var i=t.id,n=t.bbox,r=null==t.properties?{}:t.properties,o=function(e,t){var i=function(e){if(null==e)return Z;var t,i,n=e.scale[0],r=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,a){a||(t=i=0);var l=2,c=e.length,u=new Array(c);for(u[0]=(t+=e[0])*n+o,u[1]=(i+=e[1])*r+s;l<c;)u[l]=e[l],++l;return u}}(e.transform),n=e.arcs;function r(e,t){t.length&&t.pop();for(var r=n[e<0?~e:e],o=0,s=r.length;o<s;++o)t.push(i(r[o],o));e<0&&function(e,t){for(var i,n=e.length,r=n-t;r<--n;)i=e[r],e[r++]=e[n],e[n]=i}(t,s)}function o(e){return i(e)}function s(e){for(var t=[],i=0,n=e.length;i<n;++i)r(e[i],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(a)}return function e(t){var i,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(e)};case"Point":i=o(t.coordinates);break;case"MultiPoint":i=t.coordinates.map(o);break;case"LineString":i=s(t.arcs);break;case"MultiLineString":i=t.arcs.map(s);break;case"Polygon":i=l(t.arcs);break;case"MultiPolygon":i=t.arcs.map(l);break;default:return null}return{type:n,coordinates:i}}(t)}(e,t);return null==i&&null==n?{type:"Feature",properties:r,geometry:o}:null==n?{type:"Feature",id:i,properties:r,geometry:o}:{type:"Feature",id:i,bbox:n,properties:r,geometry:o}}var w=i(693100),x=i(484297),C=i(731458),S=i(303932),T=i(956568),A=i(728906),P=i(710299),E=i(628122),M=i(549227),k=i(470361);function I(e){return r.Z.fromDegrees(e[0],e[1],e[2])}const O={"urn:ogc:def:crs:OGC:1.3:CRS84":I,"EPSG:4326":I,"urn:ogc:def:crs:EPSG::4326":I},B={},R={};let F,D=48,L=o.Z.ROYALBLUE,V=o.Z.YELLOW,N=2,U=o.Z.fromBytes(255,255,0,100),G=!1;const z={small:24,medium:48,large:64},K=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function q(e,t){let i="";for(const n in e)if(e.hasOwnProperty(n)){if(n===t||-1!==K.indexOf(n))continue;const r=e[n];(0,c.Z)(r)&&(i+="object"==typeof r?`<tr><th>${n}</th><td>${q(r)}</td></tr>`:`<tr><th>${n}</th><td>${r}</td></tr>`)}return i.length>0&&(i=`<table class="cesium-infoBox-defaultTable"><tbody>${i}</tbody></table>`),i}function H(e,t){return new x.Z(function(e,t,i){let n;return function(r,o){return(0,c.Z)(n)||(n=e(t,i)),n}}(q,e,t),!0)}function W(e,t,i){let n=e.id;if((0,c.Z)(n)&&"Feature"===e.type){let e=2,i=n;for(;(0,c.Z)(t.getById(i));)i=`${n}_${e}`,e++;n=i}else n=(0,s.Z)();const r=t.getOrCreateEntity(n),o=e.properties;if((0,c.Z)(o)){let e;r.properties=o;const t=o.title;if((0,c.Z)(t))r.name=t,e="title";else{let t=Number.MAX_VALUE;for(const i in o)if(o.hasOwnProperty(i)&&o[i]){const n=i.toLowerCase();if(t>1&&"title"===n){t=1,e=i;break}t>2&&"name"===n?(t=2,e=i):t>3&&/title/i.test(i)?(t=3,e=i):t>4&&/name/i.test(i)&&(t=4,e=i)}(0,c.Z)(e)&&(r.name=o[e])}const n=o.description;null!==n&&(r.description=(0,c.Z)(n)?new T.Z(n):i(o,e))}return r}function j(e,t){const i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=t(e[n]);return i}const J={Feature:$,FeatureCollection:function(e,t,i,n,r){const o=t.features;for(let t=0,i=o.length;t<i;t++)$(e,o[t],0,n,r)},GeometryCollection:Y,LineString:ne,MultiLineString:re,MultiPoint:te,MultiPolygon:ae,Point:ee,Polygon:se,Topology:le},X={GeometryCollection:Y,LineString:ne,MultiLineString:re,MultiPoint:te,MultiPolygon:ae,Point:ee,Polygon:se,Topology:le};function $(e,t,i,n,r){if(null===t.geometry)return void W(t,e._entityCollection,r.describe);if(!(0,c.Z)(t.geometry))throw new g.Z("feature.geometry is required.");const o=t.geometry.type,s=X[o];if(!(0,c.Z)(s))throw new g.Z(`Unknown geometry type: ${o}`);s(e,t,t.geometry,n,r)}function Y(e,t,i,n,r){const o=i.geometries;for(let i=0,s=o.length;i<s;i++){const s=o[i],a=s.type,l=X[a];if(!(0,c.Z)(l))throw new g.Z(`Unknown geometry type: ${a}`);l(e,t,s,n,r)}}function Q(e,t,i,n,r){let s=r.markerSymbol,a=r.markerColor,u=r.markerSize;const d=t.properties;if((0,c.Z)(d)){const e=d["marker-color"];(0,c.Z)(e)&&(a=o.Z.fromCssColorString(e)),u=(0,l.Z)(z[d["marker-size"]],u);const t=d["marker-symbol"];(0,c.Z)(t)&&(s=t)}let h;h=(0,c.Z)(s)?1===s.length?e._pinBuilder.fromText(s.toUpperCase(),a,u):e._pinBuilder.fromMakiIconId(s,a,u):e._pinBuilder.fromColor(a,u);const p=new w.Z;p.verticalOrigin=new T.Z(y.Z.BOTTOM),2===n.length&&r.clampToGround&&(p.heightReference=_.Z.CLAMP_TO_GROUND);const f=W(t,e._entityCollection,r.describe);f.billboard=p,f.position=new S.Z(i(n));const m=Promise.resolve(h).then((function(e){p.image=new T.Z(e)})).catch((function(){p.image=new T.Z(e._pinBuilder.fromColor(a,u))}));e._promises.push(m)}function ee(e,t,i,n,r){Q(e,t,n,i.coordinates,r)}function te(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)Q(e,t,n,o[i],r)}function ie(e,t,i,r,s){let a=s.strokeMaterialProperty,l=s.strokeWidthProperty;const u=t.properties;if((0,c.Z)(u)){const e=u["stroke-width"];let t;(0,c.Z)(e)&&(l=new T.Z(e));const i=u.stroke;(0,c.Z)(i)&&(t=o.Z.fromCssColorString(i));const n=u["stroke-opacity"];(0,c.Z)(n)&&1!==n&&((0,c.Z)(t)||(t=a.color.getValue().clone()),t.alpha=n),(0,c.Z)(t)&&(a=new C.Z(t))}const d=W(t,e._entityCollection,s.describe),h=new k.Z;d.polyline=h,h.clampToGround=s.clampToGround,h.material=a,h.width=l,h.positions=new T.Z(j(r,i)),h.arcType=n.Z.RHUMB}function ne(e,t,i,n,r){ie(e,t,n,i.coordinates,r)}function re(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)ie(e,t,n,o[i],r)}function oe(e,t,i,r,s){if(0===r.length||0===r[0].length)return;let a=s.strokeMaterialProperty.color,l=s.fillMaterialProperty,u=s.strokeWidthProperty;const d=t.properties;if((0,c.Z)(d)){const e=d["stroke-width"];let t;(0,c.Z)(e)&&(u=new T.Z(e));const i=d.stroke;(0,c.Z)(i)&&(t=o.Z.fromCssColorString(i));let n,r=d["stroke-opacity"];(0,c.Z)(r)&&1!==r&&((0,c.Z)(t)||(t=a.getValue().clone()),t.alpha=r),(0,c.Z)(t)&&(a=new T.Z(t));const s=d.fill,h=l.color.getValue();(0,c.Z)(s)&&(n=o.Z.fromCssColorString(s),n.alpha=h.alpha),r=d["fill-opacity"],(0,c.Z)(r)&&r!==h.alpha&&((0,c.Z)(n)||(n=h.clone()),n.alpha=r),(0,c.Z)(n)&&(l=new C.Z(n))}const h=new M.Z;h.outline=new T.Z(!0),h.outlineColor=a,h.outlineWidth=u,h.material=l,h.arcType=n.Z.RHUMB;const p=[];for(let e=1,t=r.length;e<t;e++)p.push(new f.Z(j(r[e],i)));const m=r[0];h.hierarchy=new T.Z(new f.Z(j(m,i),p)),m[0].length>2?h.perPositionHeight=new T.Z(!0):s.clampToGround||(h.height=0),W(t,e._entityCollection,s.describe).polygon=h}function se(e,t,i,n,r){oe(e,t,n,i.coordinates,r)}function ae(e,t,i,n,r){const o=i.coordinates;for(let i=0;i<o.length;i++)oe(e,t,n,o[i],r)}function le(e,t,i,n,r){for(const t in i.objects)if(i.objects.hasOwnProperty(t)){const o=v(i,i.objects[t]);(0,J[o.type])(e,o,o,n,r)}}function ce(e){this._name=e,this._changed=new d.Z,this._error=new d.Z,this._isLoading=!1,this._loading=new d.Z,this._entityCollection=new E.Z(this),this._promises=[],this._pinBuilder=new p.Z,this._entityCluster=new P.Z,this._credit=void 0,this._resourceCredits=[]}function ue(e,t,i,n){if(!(0,c.Z)(t))throw new u.Z("data is required.");A.Z.setLoading(e,!0);let r=(i=(0,l.Z)(i,l.Z.EMPTY_OBJECT)).credit;"string"==typeof r&&(r=new a.Z(r)),e._credit=r;let o=t,s=i.sourceUri;if("string"==typeof t||t instanceof m.Z){o=(t=m.Z.createIfNeeded(t)).fetchJson(),s=(0,l.Z)(s,t.getUrlComponent());const i=e._resourceCredits,n=t.credits;if((0,c.Z)(n)){const e=n.length;for(let t=0;t<e;t++)i.push(n[t])}}return i={describe:(0,l.Z)(i.describe,H),markerSize:(0,l.Z)(i.markerSize,D),markerSymbol:(0,l.Z)(i.markerSymbol,F),markerColor:(0,l.Z)(i.markerColor,L),strokeWidthProperty:new T.Z((0,l.Z)(i.strokeWidth,N)),strokeMaterialProperty:new C.Z((0,l.Z)(i.stroke,V)),fillMaterialProperty:new C.Z((0,l.Z)(i.fill,U)),clampToGround:(0,l.Z)(i.clampToGround,G)},Promise.resolve(o).then((function(t){return function(e,t,i,n,r){let o;(0,c.Z)(n)&&(o=(0,h.Z)(n)),(0,c.Z)(o)&&e._name!==o&&(e._name=o,e._changed.raiseEvent(e));const s=J[t.type];if(!(0,c.Z)(s))throw new g.Z(`Unsupported GeoJSON object type: ${t.type}`);const a=t.crs;let l=null!==a?I:null;if((0,c.Z)(a)){if(!(0,c.Z)(a.properties))throw new g.Z("crs.properties is undefined.");const e=a.properties;if("name"===a.type){if(l=O[e.name],!(0,c.Z)(l))throw new g.Z(`Unknown crs name: ${e.name}`)}else if("link"===a.type){let t=B[e.href];if((0,c.Z)(t)||(t=R[e.type]),!(0,c.Z)(t))throw new g.Z(`Unable to resolve crs link: ${JSON.stringify(e)}`);l=t(e)}else{if("EPSG"!==a.type)throw new g.Z(`Unknown crs type: ${a.type}`);if(l=O[`EPSG:${e.code}`],!(0,c.Z)(l))throw new g.Z(`Unknown crs EPSG code: ${e.code}`)}}return Promise.resolve(l).then((function(n){return r&&e._entityCollection.removeAll(),null!==n&&s(e,t,t,n,i),Promise.all(e._promises).then((function(){return e._promises.length=0,A.Z.setLoading(e,!1),e}))}))}(e,t,i,s,n)})).catch((function(t){throw A.Z.setLoading(e,!1),e._error.raiseEvent(e,t),t}))}ce.load=function(e,t){return(new ce).load(e,t)},Object.defineProperties(ce,{markerSize:{get:function(){return D},set:function(e){D=e}},markerSymbol:{get:function(){return F},set:function(e){F=e}},markerColor:{get:function(){return L},set:function(e){L=e}},stroke:{get:function(){return V},set:function(e){V=e}},strokeWidth:{get:function(){return N},set:function(e){N=e}},fill:{get:function(){return U},set:function(e){U=e}},clampToGround:{get:function(){return G},set:function(e){G=e}},crsNames:{get:function(){return O}},crsLinkHrefs:{get:function(){return B}},crsLinkTypes:{get:function(){return R}}}),Object.defineProperties(ce.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,c.Z)(e))throw new u.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),ce.prototype.load=function(e,t){return ue(this,e,t,!0)},ce.prototype.process=function(e,t){return ue(this,e,t,!1)},ce.prototype.update=function(e){return!0};const de=ce},312763:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(35961),r=i(234146),o=i(11020),s=i(282910),a=i(830098),l=i(916269);const c=n.Z.WHITE,u=n.Z.TRANSPARENT;function d(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT),this._definitionChanged=new s.Z,this._color=void 0,this._colorSubscription=void 0,this._gapColor=void 0,this._gapColorSubscription=void 0,this._dashLength=void 0,this._dashLengthSubscription=void 0,this._dashPattern=void 0,this._dashPatternSubscription=void 0,this.color=e.color,this.gapColor=e.gapColor,this.dashLength=e.dashLength,this.dashPattern=e.dashPattern}Object.defineProperties(d.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._color)&&l.Z.isConstant(this._gapColor)&&l.Z.isConstant(this._dashLength)&&l.Z.isConstant(this._dashPattern)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,a.Z)("color"),gapColor:(0,a.Z)("gapColor"),dashLength:(0,a.Z)("dashLength"),dashPattern:(0,a.Z)("dashPattern")}),d.prototype.getType=function(e){return"PolylineDash"},d.prototype.getValue=function(e,t){return(0,o.Z)(t)||(t={}),t.color=l.Z.getValueOrClonedDefault(this._color,e,c,t.color),t.gapColor=l.Z.getValueOrClonedDefault(this._gapColor,e,u,t.gapColor),t.dashLength=l.Z.getValueOrDefault(this._dashLength,e,16,t.dashLength),t.dashPattern=l.Z.getValueOrDefault(this._dashPattern,e,255,t.dashPattern),t},d.prototype.equals=function(e){return this===e||e instanceof d&&l.Z.equals(this._color,e._color)&&l.Z.equals(this._gapColor,e._gapColor)&&l.Z.equals(this._dashLength,e._dashLength)&&l.Z.equals(this._dashPattern,e._dashPattern)};const h=d},14069:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(823438),r=i(234146),o=i(11020),s=i(765153),a=i(205522),l=i(354620),c=i(237646);function u(e){this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,function(e,t){t=(0,r.Z)((0,n.Z)(t,!0),e._style),e._style=t,e.show=t.show,e.color=t.color,e.pointSize=t.pointSize,e.pointOutlineColor=t.pointOutlineColor,e.pointOutlineWidth=t.pointOutlineWidth,e.labelColor=t.labelColor,e.labelOutlineColor=t.labelOutlineColor,e.labelOutlineWidth=t.labelOutlineWidth,e.labelStyle=t.labelStyle,e.font=t.font,e.labelText=t.labelText,e.backgroundColor=t.backgroundColor,e.backgroundPadding=t.backgroundPadding,e.backgroundEnabled=t.backgroundEnabled,e.scaleByDistance=t.scaleByDistance,e.translucencyByDistance=t.translucencyByDistance,e.distanceDisplayCondition=t.distanceDisplayCondition,e.heightOffset=t.heightOffset,e.anchorLineEnabled=t.anchorLineEnabled,e.anchorLineColor=t.anchorLineColor,e.image=t.image,e.disableDepthTestDistance=t.disableDepthTestDistance,e.horizontalOrigin=t.horizontalOrigin,e.verticalOrigin=t.verticalOrigin,e.labelHorizontalOrigin=t.labelHorizontalOrigin,e.labelVerticalOrigin=t.labelVerticalOrigin;const i={};if((0,o.Z)(t.meta)){const e=t.defines,n=(0,r.Z)(t.meta,r.Z.EMPTY_OBJECT);for(const t in n)n.hasOwnProperty(t)&&(i[t]=new c.Z(n[t],e))}e._meta=i,e._ready=!0}(this,e)}function d(e,t){const i=(0,r.Z)(e._style,r.Z.EMPTY_OBJECT).defines;if((0,o.Z)(t))return"boolean"==typeof t||"number"==typeof t?new c.Z(String(t)):"string"==typeof t?new c.Z(t,i):(0,o.Z)(t.conditions)?new l.Z(t,i):t}function h(e){if((0,o.Z)(e))return(0,o.Z)(e.expression)?e.expression:(0,o.Z)(e.conditionsExpression)?(0,n.Z)(e.conditionsExpression,!0):e}Object.defineProperties(u.prototype,{style:{get:function(){return this._style}},show:{get:function(){return this._show},set:function(e){this._show=d(this,e),this._style.show=h(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){return this._color},set:function(e){this._color=d(this,e),this._style.color=h(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=d(this,e),this._style.pointSize=h(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=d(this,e),this._style.pointOutlineColor=h(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=d(this,e),this._style.pointOutlineWidth=h(this._pointOutlineWidth)}},labelColor:{get:function(){return this._labelColor},set:function(e){this._labelColor=d(this,e),this._style.labelColor=h(this._labelColor)}},labelOutlineColor:{get:function(){return this._labelOutlineColor},set:function(e){this._labelOutlineColor=d(this,e),this._style.labelOutlineColor=h(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){return this._labelOutlineWidth},set:function(e){this._labelOutlineWidth=d(this,e),this._style.labelOutlineWidth=h(this._labelOutlineWidth)}},font:{get:function(){return this._font},set:function(e){this._font=d(this,e),this._style.font=h(this._font)}},labelStyle:{get:function(){return this._labelStyle},set:function(e){this._labelStyle=d(this,e),this._style.labelStyle=h(this._labelStyle)}},labelText:{get:function(){return this._labelText},set:function(e){this._labelText=d(this,e),this._style.labelText=h(this._labelText)}},backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=d(this,e),this._style.backgroundColor=h(this._backgroundColor)}},backgroundPadding:{get:function(){return this._backgroundPadding},set:function(e){this._backgroundPadding=d(this,e),this._style.backgroundPadding=h(this._backgroundPadding)}},backgroundEnabled:{get:function(){return this._backgroundEnabled},set:function(e){this._backgroundEnabled=d(this,e),this._style.backgroundEnabled=h(this._backgroundEnabled)}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(e){this._scaleByDistance=d(this,e),this._style.scaleByDistance=h(this._scaleByDistance)}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(e){this._translucencyByDistance=d(this,e),this._style.translucencyByDistance=h(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=d(this,e),this._style.distanceDisplayCondition=h(this._distanceDisplayCondition)}},heightOffset:{get:function(){return this._heightOffset},set:function(e){this._heightOffset=d(this,e),this._style.heightOffset=h(this._heightOffset)}},anchorLineEnabled:{get:function(){return this._anchorLineEnabled},set:function(e){this._anchorLineEnabled=d(this,e),this._style.anchorLineEnabled=h(this._anchorLineEnabled)}},anchorLineColor:{get:function(){return this._anchorLineColor},set:function(e){this._anchorLineColor=d(this,e),this._style.anchorLineColor=h(this._anchorLineColor)}},image:{get:function(){return this._image},set:function(e){this._image=d(this,e),this._style.image=h(this._image)}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance=d(this,e),this._style.disableDepthTestDistance=h(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(e){this._horizontalOrigin=d(this,e),this._style.horizontalOrigin=h(this._horizontalOrigin)}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(e){this._verticalOrigin=d(this,e),this._style.verticalOrigin=h(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){return this._labelHorizontalOrigin},set:function(e){this._labelHorizontalOrigin=d(this,e),this._style.labelHorizontalOrigin=h(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){return this._labelVerticalOrigin},set:function(e){this._labelVerticalOrigin=d(this,e),this._style.labelVerticalOrigin=h(this._labelVerticalOrigin)}},meta:{get:function(){return this._meta},set:function(e){this._meta=e}}}),u.fromUrl=function(e){if(!(0,o.Z)(e))throw new s.Z("url is required");return a.Z.createIfNeeded(e).fetchJson(e).then((function(e){return new u(e)}))},u.prototype.getColorShaderFunction=function(e,t,i){return this._colorShaderFunctionReady?(i.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,(0,o.Z)(this.color)&&(0,o.Z)(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(e,t,i,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=i.translucent,this._colorShaderFunction)},u.prototype.getShowShaderFunction=function(e,t,i){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,(0,o.Z)(this.show)&&(0,o.Z)(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(e,t,i,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},u.prototype.getPointSizeShaderFunction=function(e,t,i){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,(0,o.Z)(this.pointSize)&&(0,o.Z)(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(e,t,i,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},u.prototype.getVariables=function(){let e=[];return(0,o.Z)(this.color)&&(0,o.Z)(this.color.getVariables)&&e.push.apply(e,this.color.getVariables()),(0,o.Z)(this.show)&&(0,o.Z)(this.show.getVariables)&&e.push.apply(e,this.show.getVariables()),(0,o.Z)(this.pointSize)&&(0,o.Z)(this.pointSize.getVariables)&&e.push.apply(e,this.pointSize.getVariables()),e=e.filter((function(e,t,i){return i.indexOf(e)===t})),e};const p=u},354620:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(823438),r=i(11020),o=i(237646);function s(e,t){this._conditionsExpression=(0,n.Z)(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,function(e,t){const i=[],n=e._conditions;if(!(0,r.Z)(n))return;const s=n.length;for(let e=0;e<s;++e){const r=n[e],s=String(r[0]),l=String(r[1]);i.push(new a(new o.Z(s,t),new o.Z(l,t)))}e._runtimeConditions=i}(this,t)}function a(e,t){this.condition=e,this.expression=t}Object.defineProperties(s.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),s.prototype.evaluate=function(e,t){const i=this._runtimeConditions;if(!(0,r.Z)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluate(e,t)}},s.prototype.evaluateColor=function(e,t){const i=this._runtimeConditions;if(!(0,r.Z)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluateColor(e,t)}},s.prototype.getShaderFunction=function(e,t,i,n){const o=this._runtimeConditions;if(!(0,r.Z)(o)||0===o.length)return;let s="";const a=o.length;for(let e=0;e<a;++e){const n=o[e];s+=`    ${0===e?"if":"else if"} (${n.condition.getShaderExpression(t,i)})\n    {\n        return ${n.expression.getShaderExpression(t,i)};\n    }\n`}return s=`${n} ${e}\n{\n${s}    return ${n}(1.0);\n}\n`,s},s.prototype.getVariables=function(){let e=[];const t=this._runtimeConditions;if(!(0,r.Z)(t)||0===t.length)return e;const i=t.length;for(let n=0;n<i;++n){const i=t[n];e.push.apply(e,i.condition.getVariables()),e.push.apply(e,i.expression.getVariables())}return e=e.filter((function(e,t,i){return i.indexOf(e)===t})),e};const l=s},395075:(e,t,i)=>{"use strict";function n(e){}i.d(t,{Z:()=>r}),n.prototype.isReady=function(){return!0},n.prototype.shouldDiscardImage=function(e){return!1};const r=n},545477:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AlphaMode:()=>Ey.Z,AlphaPipelineStage:()=>lE.Z,Animation:()=>eO.Z,AnimationViewModel:()=>tO.Z,Appearance:()=>My.Z,ApproximateTerrainHeights:()=>th.Z,ArcGISTiledElevationTerrainProvider:()=>yh,ArcGisBaseMapType:()=>ky.Z,ArcGisMapServerImageryProvider:()=>Iy.Z,ArcGisMapService:()=>Oy.Z,ArcType:()=>X.Z,ArticulationStageType:()=>Zh.Z,AssociativeArray:()=>$r.Z,AttributeCompression:()=>vh.Z,AttributeType:()=>By.Z,AutoExposure:()=>Ry.Z,AutomaticUniforms:()=>pd.Z,Axis:()=>Fy.Z,AxisAlignedBoundingBox:()=>bh.Z,B3dmLoader:()=>cE.Z,B3dmParser:()=>Dy.Z,BaseLayerPicker:()=>iO.Z,BaseLayerPickerViewModel:()=>nO.Z,BatchTable:()=>Ly.Z,BatchTableHierarchy:()=>Vy.Z,BatchTexture:()=>Ny.Z,BatchTexturePipelineStage:()=>uE.Z,Billboard:()=>Uy.Z,BillboardCollection:()=>Gy.Z,BillboardGraphics:()=>n.Z,BillboardVisualizer:()=>r.Z,BingMapsGeocoderService:()=>Ch,BingMapsImageryProvider:()=>zy.Z,BingMapsStyle:()=>Ky.Z,BlendEquation:()=>qy.Z,BlendFunction:()=>Hy.Z,BlendOption:()=>Wy.Z,BlendingState:()=>jy.Z,BoundingRectangle:()=>$.Z,BoundingSphere:()=>Ul.Z,BoundingSphereState:()=>o.Z,BoxEmitter:()=>Yy,BoxGeometry:()=>Sh.Z,BoxGeometryUpdater:()=>s.Z,BoxGraphics:()=>a.Z,BoxOutlineGeometry:()=>Th.Z,BrdfLutGenerator:()=>Qy.Z,Buffer:()=>fd.Z,BufferLoader:()=>eZ.Z,BufferUsage:()=>md.Z,CPUStylingPipelineStage:()=>dE.Z,CallbackProperty:()=>l.Z,Camera:()=>tZ.Z,CameraEventAggregator:()=>iZ.Z,CameraEventType:()=>nZ.Z,CameraFlightPath:()=>rZ.Z,Cartesian2:()=>d.Z,Cartesian3:()=>Y.Z,Cartesian4:()=>Ah.Z,Cartographic:()=>Q.Z,CartographicGeocoderService:()=>Ph.Z,CatmullRomSpline:()=>Lh,Cesium3DContentGroup:()=>oZ.Z,Cesium3DTile:()=>sZ.Z,Cesium3DTileBatchTable:()=>aZ.Z,Cesium3DTileColorBlendMode:()=>lZ.Z,Cesium3DTileContent:()=>uZ,Cesium3DTileContentFactory:()=>dZ.Z,Cesium3DTileContentState:()=>hZ.Z,Cesium3DTileContentType:()=>pZ.Z,Cesium3DTileFeature:()=>fZ.Z,Cesium3DTileFeatureTable:()=>mZ.Z,Cesium3DTileOptimizationHint:()=>gZ.Z,Cesium3DTileOptimizations:()=>_Z.Z,Cesium3DTilePass:()=>yZ.Z,Cesium3DTilePassState:()=>ZZ.Z,Cesium3DTilePointFeature:()=>vZ.Z,Cesium3DTileRefine:()=>bZ.Z,Cesium3DTileStyle:()=>wZ.Z,Cesium3DTileStyleEngine:()=>xZ.Z,Cesium3DTilesInspector:()=>bO,Cesium3DTilesInspectorViewModel:()=>ZO,Cesium3DTilesVoxelProvider:()=>JZ,Cesium3DTileset:()=>XZ.Z,Cesium3DTilesetBaseTraversal:()=>$Z.Z,Cesium3DTilesetCache:()=>YZ.Z,Cesium3DTilesetGraphics:()=>c.Z,Cesium3DTilesetHeatmap:()=>QZ.Z,Cesium3DTilesetMetadata:()=>CZ.Z,Cesium3DTilesetMostDetailedTraversal:()=>ev.Z,Cesium3DTilesetSkipTraversal:()=>tv.Z,Cesium3DTilesetStatistics:()=>iv.Z,Cesium3DTilesetTraversal:()=>nv.Z,Cesium3DTilesetVisualizer:()=>u.Z,CesiumInspector:()=>PO,CesiumInspectorViewModel:()=>TO,CesiumTerrainProvider:()=>Vh.Z,CesiumWidget:()=>HT.Z,Check:()=>Ce.Z,CheckerboardMaterialProperty:()=>w,CircleEmitter:()=>ov,CircleGeometry:()=>qh,CircleOutlineGeometry:()=>Xh,ClassificationModelDrawCommand:()=>hE.Z,ClassificationPipelineStage:()=>pE.Z,ClassificationPrimitive:()=>sv.Z,ClassificationType:()=>Ee.Z,ClearCommand:()=>gd.Z,ClippingPlane:()=>av.Z,ClippingPlaneCollection:()=>lv.Z,Clock:()=>Le.Z,ClockRange:()=>ee.Z,ClockStep:()=>te.Z,ClockViewModel:()=>HI.Z,CloudCollection:()=>Xv,CloudType:()=>uv,Color:()=>h.Z,ColorBlendMode:()=>Me.Z,ColorGeometryInstanceAttribute:()=>$h.Z,ColorMaterialProperty:()=>x.Z,Command:()=>WI,ComponentDatatype:()=>Yh.Z,Composite3DTileContent:()=>$v.Z,CompositeEntityCollection:()=>L,CompositeMaterialProperty:()=>U,CompositePositionProperty:()=>G.Z,CompositeProperty:()=>V.Z,CompressedTextureBuffer:()=>Qh.Z,ComputeCommand:()=>_d.Z,ComputeEngine:()=>yd.Z,ConditionsExpression:()=>Yv.Z,ConeEmitter:()=>tb,ConstantPositionProperty:()=>z.Z,ConstantProperty:()=>K.Z,ConstantSpline:()=>ep.Z,ContentMetadata:()=>ib.Z,Context:()=>Zd.Z,ContextLimits:()=>vd.Z,CoplanarPolygonGeometry:()=>tp.Z,CoplanarPolygonGeometryLibrary:()=>ip.Z,CoplanarPolygonOutlineGeometry:()=>np.Z,CornerType:()=>ie.Z,CorridorGeometry:()=>rp.Z,CorridorGeometryLibrary:()=>op.Z,CorridorGeometryUpdater:()=>q.Z,CorridorGraphics:()=>H.Z,CorridorOutlineGeometry:()=>sp.Z,Credit:()=>ne.Z,CreditDisplay:()=>nb.Z,CubeMap:()=>bd.Z,CubeMapFace:()=>wd.Z,CubicRealPolynomial:()=>ap.Z,CullFace:()=>rb.Z,CullingVolume:()=>lp.Z,CumulusCloud:()=>vv,CustomDataSource:()=>W.Z,CustomHeightmapTerrainProvider:()=>up,CustomShader:()=>fE.Z,CustomShaderMode:()=>mE.Z,CustomShaderPipelineStage:()=>gE.Z,CustomShaderTranslucencyMode:()=>_E.Z,CylinderGeometry:()=>dp.Z,CylinderGeometryLibrary:()=>hp.Z,CylinderGeometryUpdater:()=>j.Z,CylinderGraphics:()=>J.Z,CylinderOutlineGeometry:()=>pp.Z,CzmlDataSource:()=>zi,DataSource:()=>De.Z,DataSourceClock:()=>Ue,DataSourceCollection:()=>Ki.Z,DataSourceDisplay:()=>qi.Z,DebugAppearance:()=>sb,DebugCameraPrimitive:()=>ab.Z,DebugInspector:()=>lb.Z,DebugModelMatrixPrimitive:()=>hb,DefaultProxy:()=>fp.Z,DepthFunction:()=>pb.Z,DepthPlane:()=>fb.Z,DequantizationPipelineStage:()=>yE.Z,DerivedCommand:()=>mb.Z,DeveloperError:()=>S.Z,DeviceOrientationCameraController:()=>gb.Z,DirectionalLight:()=>_b,DiscardEmptyTileImagePolicy:()=>yb.Z,DiscardMissingTileImagePolicy:()=>Zb.Z,DistanceDisplayCondition:()=>re.Z,DistanceDisplayConditionGeometryInstanceAttribute:()=>mp.Z,DoubleEndedPriorityQueue:()=>gp.Z,DoublyLinkedList:()=>_p.Z,DracoLoader:()=>vb.Z,DrawCommand:()=>xd.Z,DynamicGeometryBatch:()=>Hi.Z,DynamicGeometryUpdater:()=>Wi.Z,EarthOrientationParameters:()=>yp.Z,EarthOrientationParametersSample:()=>Zp.Z,EasingFunction:()=>zl.Z,EllipseGeometry:()=>Nh.Z,EllipseGeometryLibrary:()=>vp.Z,EllipseGeometryUpdater:()=>ji.Z,EllipseGraphics:()=>Ge.Z,EllipseOutlineGeometry:()=>Hh.Z,Ellipsoid:()=>oe.Z,EllipsoidGeodesic:()=>bp.Z,EllipsoidGeometry:()=>wp.Z,EllipsoidGeometryUpdater:()=>Ji.Z,EllipsoidGraphics:()=>ze.Z,EllipsoidOutlineGeometry:()=>xp.Z,EllipsoidPrimitive:()=>bb.Z,EllipsoidRhumbLine:()=>Cp.Z,EllipsoidSurfaceAppearance:()=>Tb,EllipsoidTangentPlane:()=>Sp.Z,EllipsoidTerrainProvider:()=>Tp.Z,EllipsoidalOccluder:()=>Ap.Z,Empty3DTileContent:()=>Ab.Z,EncodedCartesian3:()=>Pp.Z,Entity:()=>A.Z,EntityCluster:()=>Ke.Z,EntityCollection:()=>P.Z,EntityView:()=>Xi.Z,Event:()=>m.Z,EventHelper:()=>gt.Z,Expression:()=>Pb.Z,ExpressionNodeType:()=>Eb.Z,ExtrapolationType:()=>se.Z,FeatureDetection:()=>Ep.Z,FeatureIdPipelineStage:()=>ZE.Z,Fog:()=>Mb.Z,ForEach:()=>LP.Z,FrameRateMonitor:()=>Ib,FrameState:()=>Ob.Z,Framebuffer:()=>Cd.Z,FramebufferManager:()=>Sd.Z,FrustumCommands:()=>Bb.Z,FrustumGeometry:()=>Mp.Z,FrustumOutlineGeometry:()=>kp.Z,Fullscreen:()=>Ip.Z,FullscreenButton:()=>EO.Z,FullscreenButtonViewModel:()=>MO.Z,GeoJsonDataSource:()=>$i.Z,GeoJsonLoader:()=>vE.Z,GeocodeType:()=>Op.Z,Geocoder:()=>kO.Z,GeocoderService:()=>Bp.Z,GeocoderViewModel:()=>IO.Z,GeographicProjection:()=>Rp.Z,GeographicTilingScheme:()=>ih.Z,Geometry:()=>Fp.Z,Geometry3DTileContent:()=>Rb.Z,GeometryAttribute:()=>Dp.Z,GeometryAttributes:()=>Lp.Z,GeometryFactory:()=>Np,GeometryInstance:()=>Up.Z,GeometryInstanceAttribute:()=>Gp.Z,GeometryOffsetAttribute:()=>zp.Z,GeometryPipeline:()=>Kp.Z,GeometryPipelineStage:()=>bE.Z,GeometryType:()=>qp.Z,GeometryUpdater:()=>Yi.Z,GeometryVisualizer:()=>Qi.Z,GetFeatureInfoFormat:()=>Fb.Z,Globe:()=>Db.Z,GlobeDepth:()=>Lb.Z,GlobeSurfaceShaderSet:()=>Vb.Z,GlobeSurfaceTile:()=>Nb.Z,GlobeSurfaceTileProvider:()=>Ub.Z,GlobeTranslucency:()=>Gb.Z,GlobeTranslucencyFramebuffer:()=>zb.Z,GlobeTranslucencyState:()=>Kb.Z,GltfBufferViewLoader:()=>qb.Z,GltfDracoLoader:()=>Hb.Z,GltfImageLoader:()=>Wb.Z,GltfIndexBufferLoader:()=>jb.Z,GltfJsonLoader:()=>Jb.Z,GltfLoader:()=>Xb.Z,GltfLoaderUtil:()=>$b.Z,GltfStructuralMetadataLoader:()=>Yb.Z,GltfTextureLoader:()=>Qb.Z,GltfVertexBufferLoader:()=>ew.Z,GoogleEarthEnterpriseImageryProvider:()=>nw,GoogleEarthEnterpriseMapsProvider:()=>rw.Z,GoogleEarthEnterpriseMetadata:()=>cf,GoogleEarthEnterpriseTerrainData:()=>Of,GoogleEarthEnterpriseTerrainProvider:()=>Vf,GoogleEarthEnterpriseTileInformation:()=>$p,GoogleMaps:()=>zf,GpxDataSource:()=>jr,GregorianDate:()=>Kf.Z,GridImageryProvider:()=>cw,GridMaterialProperty:()=>Xe,GroundGeometryUpdater:()=>Jr.Z,GroundPolylineGeometry:()=>qf.Z,GroundPolylinePrimitive:()=>uw.Z,GroundPrimitive:()=>dw.Z,GroupMetadata:()=>hw.Z,HeadingPitchRange:()=>no.Z,HeadingPitchRoll:()=>ro.Z,Heap:()=>Hf.Z,HeightReference:()=>ke.Z,HeightmapEncoding:()=>nh.Z,HeightmapTerrainData:()=>rh.Z,HeightmapTessellator:()=>Wf.Z,HermitePolynomialApproximation:()=>he,HermiteSpline:()=>Eh.Z,HilbertOrder:()=>jf.Z,HomeButton:()=>OO.Z,HomeButtonViewModel:()=>BO.Z,HorizontalOrigin:()=>Ie.Z,I3SDataProvider:()=>Kw,I3SFeature:()=>fw,I3SField:()=>gw,I3SGeometry:()=>Bw,I3SLayer:()=>Nw,I3SNode:()=>Lw,I3dmLoader:()=>wE.Z,I3dmParser:()=>qw.Z,Iau2000Orientation:()=>Jf.Z,Iau2006XysData:()=>Xf.Z,Iau2006XysSample:()=>$f.Z,IauOrientationAxes:()=>Yf.Z,IauOrientationParameters:()=>Qf.Z,ImageBasedLighting:()=>Hw.Z,ImageBasedLightingPipelineStage:()=>xE.Z,ImageMaterialProperty:()=>$e.Z,Imagery:()=>Ww.Z,ImageryLayer:()=>jw.Z,ImageryLayerCollection:()=>Jw.Z,ImageryLayerFeatureInfo:()=>Xw.Z,ImageryProvider:()=>$w.Z,ImageryState:()=>Yw.Z,Implicit3DTileContent:()=>Qw.Z,ImplicitAvailabilityBitstream:()=>ex.Z,ImplicitMetadataView:()=>tx.Z,ImplicitSubdivisionScheme:()=>ix.Z,ImplicitSubtree:()=>TZ.Z,ImplicitSubtreeCache:()=>EZ,ImplicitSubtreeMetadata:()=>nx.Z,ImplicitTileCoordinates:()=>MZ.Z,ImplicitTileset:()=>kZ.Z,IndexDatatype:()=>uf.Z,InfoBox:()=>RO.Z,InfoBoxViewModel:()=>FO.Z,InspectorShared:()=>JI,InstanceAttributeSemantic:()=>rx.Z,InstancingPipelineStage:()=>CE.Z,InterpolationAlgorithm:()=>tm,InterpolationType:()=>im.Z,Intersect:()=>nm.Z,IntersectionTests:()=>rm.Z,Intersections2D:()=>df.Z,Interval:()=>om.Z,InvertClassification:()=>ox.Z,Ion:()=>sm.Z,IonGeocoderService:()=>am.Z,IonImageryProvider:()=>sx.Z,IonResource:()=>lm.Z,IonWorldImageryStyle:()=>ax.Z,Iso8601:()=>pe.Z,JobScheduler:()=>lx.Z,JobType:()=>cx.Z,JsonMetadataTable:()=>ux.Z,JulianDate:()=>fe.Z,KTX2Transcoder:()=>cm.Z,KeyboardEventModifier:()=>um.Z,KeyframeNode:()=>dx.Z,KmlCamera:()=>Xr,KmlDataSource:()=>hu,KmlLookAt:()=>Bl,KmlTour:()=>Nl,KmlTourFlyTo:()=>ql,KmlTourWait:()=>Wl,Label:()=>hx.Z,LabelCollection:()=>px.Z,LabelGraphics:()=>Ye.Z,LabelStyle:()=>Oe.Z,LabelVisualizer:()=>pu.Z,LagrangePolynomialApproximation:()=>me,LeapSecond:()=>dm.Z,Light:()=>mx,LightingModel:()=>SE.Z,LightingPipelineStage:()=>TE.Z,LinearApproximation:()=>ge.Z,LinearSpline:()=>hm.Z,ManagedArray:()=>pm.Z,MapMode2D:()=>gx.Z,MapProjection:()=>mm,MapboxImageryProvider:()=>_x.Z,MapboxStyleImageryProvider:()=>wx,Material:()=>Cb.Z,MaterialAppearance:()=>xx.Z,MaterialPipelineStage:()=>AE.Z,MaterialProperty:()=>fu.Z,Math:()=>T.Z,Matrix2:()=>gm.Z,Matrix3:()=>Ft.Z,Matrix4:()=>Mh.Z,Megatexture:()=>Cx.Z,MetadataClass:()=>Sx.Z,MetadataClassProperty:()=>Tx.Z,MetadataComponentType:()=>Ax.Z,MetadataEntity:()=>Px.Z,MetadataEnum:()=>Ex.Z,MetadataEnumValue:()=>Mx.Z,MetadataPipelineStage:()=>PE.Z,MetadataSchema:()=>kx.Z,MetadataSchemaLoader:()=>Ix.Z,MetadataSemantic:()=>IZ.Z,MetadataTable:()=>DZ.Z,MetadataTableProperty:()=>Ox.Z,MetadataType:()=>OZ.Z,MipmapHint:()=>Td.Z,Model:()=>EE.Z,Model3DTileContent:()=>ME.Z,ModelAlphaOptions:()=>kE.Z,ModelAnimation:()=>IE.Z,ModelAnimationChannel:()=>OE.Z,ModelAnimationCollection:()=>BE.Z,ModelAnimationLoop:()=>Bx.Z,ModelAnimationState:()=>Rx.Z,ModelArticulation:()=>RE.Z,ModelArticulationStage:()=>FE.Z,ModelClippingPlanesPipelineStage:()=>DE.Z,ModelColorPipelineStage:()=>LE.Z,ModelComponents:()=>Fx.Z,ModelDrawCommand:()=>VE.Z,ModelFeature:()=>NE.Z,ModelFeatureTable:()=>UE.Z,ModelGraphics:()=>Qe.Z,ModelLightingOptions:()=>GE.Z,ModelMatrixUpdateStage:()=>zE.Z,ModelNode:()=>KE.Z,ModelRenderResources:()=>qE.Z,ModelRuntimeNode:()=>HE.Z,ModelRuntimePrimitive:()=>WE.Z,ModelSceneGraph:()=>jE.Z,ModelSilhouettePipelineStage:()=>JE.Z,ModelSkin:()=>XE.Z,ModelSplitterPipelineStage:()=>$E.Z,ModelStatistics:()=>YE.Z,ModelType:()=>QE.Z,ModelUtility:()=>eM.Z,ModelVisualizer:()=>mu.Z,Moon:()=>Dx.Z,MorphTargetsPipelineStage:()=>tM.Z,MorphWeightSpline:()=>ym,MortonOrder:()=>Zm.Z,Multiple3DTileContent:()=>Lx.Z,MultisampleFramebuffer:()=>Ad.Z,NavigationHelpButton:()=>DO.Z,NavigationHelpButtonViewModel:()=>LO.Z,NearFarScalar:()=>_e.Z,NeverTileDiscardPolicy:()=>Vx.Z,NodeRenderResources:()=>iM.Z,NodeStatisticsPipelineStage:()=>nM.Z,NodeTransformationProperty:()=>et.Z,OIT:()=>Nx.Z,Occluder:()=>vm.Z,OctahedralProjectedCubeMap:()=>Ux.Z,OffsetGeometryInstanceAttribute:()=>bm.Z,OpenCageGeocoderService:()=>xm,OpenStreetMapImageryProvider:()=>Gx.Z,OrderedGroundPrimitiveCollection:()=>zx.Z,OrientedBoundingBox:()=>hf.Z,OrthographicFrustum:()=>Cm.Z,OrthographicOffCenterFrustum:()=>Sm.Z,Packable:()=>Tm,PackableForInterpolation:()=>Am,Particle:()=>Wx,ParticleBurst:()=>Jx,ParticleEmitter:()=>$x,ParticleSystem:()=>sC,Pass:()=>Pd.Z,PassState:()=>Ed.Z,PathGraphics:()=>tt.Z,PathVisualizer:()=>gu.Z,PeliasGeocoderService:()=>Pm.Z,PerInstanceColorAppearance:()=>aC.Z,PerformanceDisplay:()=>lC.Z,PerformanceWatchdog:()=>GO,PerformanceWatchdogViewModel:()=>NO,PerspectiveFrustum:()=>Em.Z,PerspectiveOffCenterFrustum:()=>Mm.Z,PickDepth:()=>cC.Z,PickDepthFramebuffer:()=>uC.Z,PickFramebuffer:()=>dC.Z,Picking:()=>hC.Z,PickingPipelineStage:()=>rM.Z,PinBuilder:()=>en.Z,PixelDatatype:()=>Md.Z,PixelFormat:()=>km.Z,Plane:()=>Im.Z,PlaneGeometry:()=>Om.Z,PlaneGeometryUpdater:()=>_u.Z,PlaneGraphics:()=>yu.Z,PlaneOutlineGeometry:()=>Bm.Z,PntsLoader:()=>oM.Z,PntsParser:()=>pC.Z,PointCloud:()=>fC.Z,PointCloudEyeDomeLighting:()=>mC.Z,PointCloudShading:()=>gC.Z,PointCloudStylingPipelineStage:()=>sM.Z,PointGraphics:()=>it.Z,PointPrimitive:()=>_C.Z,PointPrimitiveCollection:()=>yC.Z,PointVisualizer:()=>Zu.Z,PolygonGeometry:()=>Rm.Z,PolygonGeometryLibrary:()=>Fm.Z,PolygonGeometryUpdater:()=>vu.Z,PolygonGraphics:()=>nt.Z,PolygonHierarchy:()=>ye.Z,PolygonOutlineGeometry:()=>Dm.Z,PolygonPipeline:()=>Lm.Z,Polyline:()=>ZC.Z,PolylineArrowMaterialProperty:()=>ot,PolylineCollection:()=>vC.Z,PolylineColorAppearance:()=>cb.Z,PolylineDashMaterialProperty:()=>st.Z,PolylineGeometry:()=>Vm.Z,PolylineGeometryUpdater:()=>bu.Z,PolylineGlowMaterialProperty:()=>ct,PolylineGraphics:()=>ut.Z,PolylineMaterialAppearance:()=>bC.Z,PolylineOutlineMaterialProperty:()=>ft,PolylinePipeline:()=>Nm.Z,PolylineVisualizer:()=>wu.Z,PolylineVolumeGeometry:()=>Um.Z,PolylineVolumeGeometryLibrary:()=>Gm.Z,PolylineVolumeGeometryUpdater:()=>xu.Z,PolylineVolumeGraphics:()=>mt.Z,PolylineVolumeOutlineGeometry:()=>zm.Z,PositionProperty:()=>Cu.Z,PositionPropertyArray:()=>yt,PostProcessStage:()=>wC.Z,PostProcessStageCollection:()=>xC.Z,PostProcessStageComposite:()=>CC.Z,PostProcessStageLibrary:()=>SC.Z,PostProcessStageSampleMode:()=>TC.Z,PostProcessStageTextureCache:()=>AC.Z,Primitive:()=>ub.Z,PrimitiveCollection:()=>PC.Z,PrimitiveLoadPlan:()=>EC.Z,PrimitiveOutlineGenerator:()=>aM.Z,PrimitiveOutlinePipelineStage:()=>lM.Z,PrimitivePipeline:()=>MC.Z,PrimitiveRenderResources:()=>cM.Z,PrimitiveState:()=>kC.Z,PrimitiveStatisticsPipelineStage:()=>uM.Z,PrimitiveType:()=>Km.Z,ProjectionPicker:()=>zO.Z,ProjectionPickerViewModel:()=>KO.Z,Property:()=>_.Z,PropertyArray:()=>vt,PropertyAttribute:()=>IC.Z,PropertyAttributeProperty:()=>OC.Z,PropertyBag:()=>bt.Z,PropertyTable:()=>BC.Z,PropertyTexture:()=>RC.Z,PropertyTextureProperty:()=>FC.Z,ProviderViewModel:()=>rO.Z,Proxy:()=>Hm,QuadraticRealPolynomial:()=>Wm.Z,QuadtreeOccluders:()=>DC.Z,QuadtreePrimitive:()=>LC.Z,QuadtreeTile:()=>VC.Z,QuadtreeTileLoadState:()=>NC.Z,QuadtreeTileProvider:()=>GC,QuantizedMeshTerrainData:()=>pf.Z,QuarticRealPolynomial:()=>jm.Z,Quaternion:()=>Ze.Z,QuaternionSpline:()=>Jm.Z,Queue:()=>Xm.Z,Ray:()=>$m.Z,Rectangle:()=>ve.Z,RectangleCollisionChecker:()=>Ym.Z,RectangleGeometry:()=>Qm.Z,RectangleGeometryLibrary:()=>eg.Z,RectangleGeometryUpdater:()=>Su.Z,RectangleGraphics:()=>wt.Z,RectangleOutlineGeometry:()=>tg.Z,ReferenceFrame:()=>be.Z,ReferenceProperty:()=>xt.Z,RenderState:()=>kd.Z,Renderbuffer:()=>Id.Z,RenderbufferFormat:()=>Od.Z,Request:()=>oh.Z,RequestErrorEvent:()=>ig.Z,RequestScheduler:()=>ng.Z,RequestState:()=>sh.Z,RequestType:()=>ah.Z,Resource:()=>we.Z,ResourceCache:()=>RZ.Z,ResourceCacheKey:()=>zC.Z,ResourceCacheStatistics:()=>KC.Z,ResourceLoader:()=>qC.Z,ResourceLoaderState:()=>HC.Z,Rotation:()=>Ct,RuntimeError:()=>xe.Z,S2Cell:()=>rg.Z,SDFSettings:()=>WC.Z,SampledPositionProperty:()=>St.Z,SampledProperty:()=>Tt.Z,Sampler:()=>Bd.Z,ScaledPositionProperty:()=>jl.Z,Scene:()=>jC.Z,SceneFramebuffer:()=>JC.Z,SceneMode:()=>lo.Z,SceneMode2DPipelineStage:()=>dM.Z,SceneModePicker:()=>qO.Z,SceneModePickerViewModel:()=>HO.Z,SceneTransforms:()=>XC.Z,SceneTransitioner:()=>$C.Z,ScreenSpaceCameraController:()=>YC.Z,ScreenSpaceEventHandler:()=>og.Z,ScreenSpaceEventType:()=>sg.Z,SelectedFeatureIdPipelineStage:()=>hM.Z,SelectionIndicator:()=>WO.Z,SelectionIndicatorViewModel:()=>jO.Z,ShaderBuilder:()=>Rd.Z,ShaderCache:()=>Fd.Z,ShaderDestination:()=>Dd.Z,ShaderFunction:()=>Ld.Z,ShaderProgram:()=>Vd.Z,ShaderSource:()=>Nd.Z,ShaderStruct:()=>Ud.Z,ShadowMap:()=>QC.Z,ShadowMapShader:()=>eS.Z,ShadowMode:()=>Be.Z,ShadowVolumeAppearance:()=>tS.Z,ShowGeometryInstanceAttribute:()=>ag.Z,Simon1994PlanetaryPositions:()=>lg.Z,SimplePolylineGeometry:()=>fg,SingleTileImageryProvider:()=>iS.Z,SkinningPipelineStage:()=>pM.Z,SkyAtmosphere:()=>nS.Z,SkyBox:()=>rS.Z,SpatialNode:()=>oS.Z,SphereEmitter:()=>aS,SphereGeometry:()=>yg,SphereOutlineGeometry:()=>Zg.Z,Spherical:()=>Te,Spline:()=>kh.Z,SplitDirection:()=>lS.Z,Splitter:()=>cS.Z,StaticGeometryColorBatch:()=>Tu.Z,StaticGeometryPerMaterialBatch:()=>Au.Z,StaticGroundGeometryColorBatch:()=>Pu.Z,StaticGroundGeometryPerMaterialBatch:()=>Eu.Z,StaticGroundPolylinePerMaterialBatch:()=>Mu.Z,StaticOutlineGeometryBatch:()=>ku.Z,StencilConstants:()=>uS.Z,StencilFunction:()=>dS.Z,StencilOperation:()=>hS.Z,SteppedSpline:()=>vg.Z,StripeMaterialProperty:()=>It,StripeOrientation:()=>At,StructuralMetadata:()=>pS.Z,StyleCommandsNeeded:()=>fM.Z,StyleExpression:()=>mS,Sun:()=>gS.Z,SunLight:()=>_S.Z,SunPostProcess:()=>yS.Z,SupportedImageFormats:()=>ZS.Z,SvgPathBindingHandler:()=>XI.Z,TaskProcessor:()=>Qp.Z,Terrain:()=>vS.Z,TerrainData:()=>ff.Z,TerrainEncoding:()=>mf.Z,TerrainExaggeration:()=>bg.Z,TerrainFillMesh:()=>bS.Z,TerrainMesh:()=>gf.Z,TerrainOffsetProperty:()=>Iu.Z,TerrainProvider:()=>lh.Z,TerrainQuantization:()=>wg.Z,TerrainState:()=>wS.Z,Texture:()=>Gd.Z,TextureAtlas:()=>xS.Z,TextureCache:()=>zd.Z,TextureMagnificationFilter:()=>Kd.Z,TextureManager:()=>mM.Z,TextureMinificationFilter:()=>qd.Z,TextureUniform:()=>gM,TextureWrap:()=>Hd.Z,TileAvailability:()=>ch.Z,TileBoundingRegion:()=>CS.Z,TileBoundingS2Cell:()=>SS.Z,TileBoundingSphere:()=>TS.Z,TileBoundingVolume:()=>PS,TileCoordinatesImageryProvider:()=>MS,TileDiscardPolicy:()=>IS,TileEdge:()=>xg.Z,TileImagery:()=>OS.Z,TileMapServiceImageryProvider:()=>BS.Z,TileMetadata:()=>RS.Z,TileOrientedBoundingBox:()=>FS.Z,TileProviderError:()=>uh.Z,TileReplacementQueue:()=>DS.Z,TileSelectionResult:()=>LS.Z,TileState:()=>VS,Tileset3DTileContent:()=>NS.Z,TilesetMetadata:()=>US.Z,TilesetPipelineStage:()=>_M.Z,TilingScheme:()=>Sg,TimeConstants:()=>Tg.Z,TimeDynamicImagery:()=>GS.Z,TimeDynamicPointCloud:()=>zS.Z,TimeInterval:()=>Ae.Z,TimeIntervalCollection:()=>Pe.Z,TimeIntervalCollectionPositionProperty:()=>Ot.Z,TimeIntervalCollectionProperty:()=>Rt,TimeStandard:()=>Ag.Z,Timeline:()=>$O.Z,TimelineHighlightRange:()=>YO.Z,TimelineTrack:()=>QO.Z,Tipsify:()=>Pg.Z,ToggleButtonViewModel:()=>$I.Z,Tonemapper:()=>KS.Z,Transforms:()=>Dt.Z,TranslationRotationScale:()=>Eg.Z,TranslucentTileClassification:()=>qS.Z,TridiagonalSystemSolver:()=>Mg.Z,TrustedServers:()=>kg.Z,TweenCollection:()=>HS.Z,UniformState:()=>Wd.Z,UniformType:()=>yM.Z,UrlTemplateImageryProvider:()=>yx.Z,VERSION:()=>CB,VRButton:()=>eB.Z,VRButtonViewModel:()=>tB.Z,VRTheWorldTerrainProvider:()=>Ng,VaryingType:()=>ZM,Vector3DTileBatch:()=>WS.Z,Vector3DTileClampedPolylines:()=>jS.Z,Vector3DTileContent:()=>JS.Z,Vector3DTileGeometry:()=>XS.Z,Vector3DTilePoints:()=>$S.Z,Vector3DTilePolygons:()=>YS.Z,Vector3DTilePolylines:()=>QS.Z,Vector3DTilePrimitive:()=>eT.Z,VelocityOrientationProperty:()=>jt,VelocityVectorProperty:()=>zt,VertexArray:()=>jd.Z,VertexArrayFacade:()=>Jd.Z,VertexAttributeSemantic:()=>tT.Z,VertexFormat:()=>Uh.Z,VerticalOrigin:()=>Re.Z,VideoSynchronizer:()=>zg,View:()=>iT.Z,Viewer:()=>iB.Z,ViewportQuad:()=>rT,Visibility:()=>Kg.Z,Visualizer:()=>Bu,VoxelBoxShape:()=>FZ.Z,VoxelContent:()=>VZ,VoxelCylinderShape:()=>NZ.Z,VoxelEllipsoidShape:()=>oT.Z,VoxelInspector:()=>wB,VoxelInspectorViewModel:()=>ZB,VoxelPrimitive:()=>sT.Z,VoxelProvider:()=>lT,VoxelRenderResources:()=>cT.Z,VoxelShape:()=>dT,VoxelShapeType:()=>UZ.Z,VoxelTraversal:()=>hT.Z,VulkanConstants:()=>qg,WallGeometry:()=>Hg.Z,WallGeometryLibrary:()=>Wg.Z,WallGeometryUpdater:()=>Ru.Z,WallGraphics:()=>Jt.Z,WallOutlineGeometry:()=>jg.Z,WebGLConstants:()=>Jg.Z,WebMapServiceImageryProvider:()=>pT.Z,WebMapTileServiceImageryProvider:()=>fT.Z,WebMercatorProjection:()=>Xg.Z,WebMercatorTilingScheme:()=>dh.Z,WindingOrder:()=>$g.Z,WireframeIndexGenerator:()=>Yg.Z,WireframePipelineStage:()=>vM.Z,_shadersAcesTonemappingStage:()=>QA.Z,_shadersAdditiveBlend:()=>eP.Z,_shadersAdjustTranslucentFS:()=>O_.Z,_shadersAllMaterialAppearanceFS:()=>WT.Z,_shadersAllMaterialAppearanceVS:()=>jT.Z,_shadersAmbientOcclusionGenerate:()=>tP.Z,_shadersAmbientOcclusionModulate:()=>iP.Z,_shadersAspectRampMaterial:()=>sA.Z,_shadersAtmosphereCommon:()=>B_.Z,_shadersBasicMaterialAppearanceFS:()=>JT.Z,_shadersBasicMaterialAppearanceVS:()=>XT.Z,_shadersBillboardCollectionFS:()=>R_.Z,_shadersBillboardCollectionVS:()=>F_.Z,_shadersBlackAndWhite:()=>nP.Z,_shadersBloomComposite:()=>rP.Z,_shadersBrdfLutGeneratorFS:()=>D_.Z,_shadersBrightPass:()=>oP.Z,_shadersBrightness:()=>sP.Z,_shadersBumpMapMaterial:()=>aA.Z,_shadersCPUStylingStageFS:()=>CA.Z,_shadersCPUStylingStageVS:()=>SA.Z,_shadersCheckerboardMaterial:()=>lA.Z,_shadersCloudCollectionFS:()=>L_,_shadersCloudCollectionVS:()=>V_,_shadersCloudNoiseFS:()=>N_,_shadersCloudNoiseVS:()=>U_,_shadersCompareAndPackTranslucentDepth:()=>G_.Z,_shadersCompositeOITFS:()=>z_.Z,_shadersCompositeTranslucentClassification:()=>aP.Z,_shadersContrastBias:()=>lP.Z,_shadersCustomShaderStageFS:()=>TA.Z,_shadersCustomShaderStageVS:()=>AA.Z,_shadersCzmBuiltins:()=>oA.Z,_shadersDepthOfField:()=>cP.Z,_shadersDepthPlaneFS:()=>K_.Z,_shadersDepthPlaneVS:()=>q_.Z,_shadersDepthView:()=>uP.Z,_shadersDepthViewPacked:()=>dP,_shadersDotMaterial:()=>cA.Z,_shadersEdgeDetection:()=>hP.Z,_shadersElevationBandMaterial:()=>uA.Z,_shadersElevationContourMaterial:()=>dA.Z,_shadersElevationRampMaterial:()=>hA.Z,_shadersEllipsoidFS:()=>H_.Z,_shadersEllipsoidSurfaceAppearanceFS:()=>wb,_shadersEllipsoidSurfaceAppearanceVS:()=>xb,_shadersEllipsoidVS:()=>W_.Z,_shadersFXAA:()=>pP.Z,_shadersFXAA3_11:()=>j_.Z,_shadersFadeMaterial:()=>pA.Z,_shadersFeatureIdStageFS:()=>PA.Z,_shadersFeatureIdStageVS:()=>EA.Z,_shadersFilmicTonemapping:()=>fP.Z,_shadersGaussianBlur1D:()=>mP.Z,_shadersGeometryStageFS:()=>MA.Z,_shadersGeometryStageVS:()=>kA.Z,_shadersGlobeFS:()=>J_.Z,_shadersGlobeVS:()=>X_.Z,_shadersGridMaterial:()=>fA.Z,_shadersGroundAtmosphere:()=>$_.Z,_shadersHSBToRGB:()=>sk.Z,_shadersHSLToRGB:()=>ak.Z,_shadersImageBasedLightingStageFS:()=>IA.Z,_shadersInstancingStageCommon:()=>OA.Z,_shadersInstancingStageVS:()=>BA.Z,_shadersIntersectBox:()=>CP.Z,_shadersIntersectClippingPlanes:()=>SP.Z,_shadersIntersectCylinder:()=>TP.Z,_shadersIntersectDepth:()=>AP.Z,_shadersIntersectEllipsoid:()=>PP.Z,_shadersIntersection:()=>EP.Z,_shadersIntersectionUtils:()=>MP.Z,_shadersLegacyInstancingStageVS:()=>RA.Z,_shadersLensFlare:()=>gP.Z,_shadersLightingStageFS:()=>FA.Z,_shadersMaterialStageFS:()=>DA.Z,_shadersMegatexture:()=>kP.Z,_shadersMetadataStageFS:()=>LA.Z,_shadersMetadataStageVS:()=>VA.Z,_shadersModelClippingPlanesStageFS:()=>NA.Z,_shadersModelColorStageFS:()=>UA.Z,_shadersModelFS:()=>GA.Z,_shadersModelSilhouetteStageFS:()=>zA.Z,_shadersModelSilhouetteStageVS:()=>KA.Z,_shadersModelSplitterStageFS:()=>qA.Z,_shadersModelVS:()=>HA.Z,_shadersModifiedReinhardTonemapping:()=>_P.Z,_shadersMorphTargetsStageVS:()=>WA.Z,_shadersNightVision:()=>yP.Z,_shadersNormalMapMaterial:()=>mA.Z,_shadersOctahedralProjectionAtlasFS:()=>Y_.Z,_shadersOctahedralProjectionFS:()=>Q_.Z,_shadersOctahedralProjectionVS:()=>ey.Z,_shadersOctree:()=>IP.Z,_shadersPassThrough:()=>ZP.Z,_shadersPassThroughDepth:()=>vP.Z,_shadersPerInstanceColorAppearanceFS:()=>$T.Z,_shadersPerInstanceColorAppearanceVS:()=>YT.Z,_shadersPerInstanceFlatColorAppearanceFS:()=>QT.Z,_shadersPerInstanceFlatColorAppearanceVS:()=>eA.Z,_shadersPointCloudEyeDomeLighting:()=>bP.Z,_shadersPointCloudStylingStageVS:()=>jA.Z,_shadersPointPrimitiveCollectionFS:()=>ty.Z,_shadersPointPrimitiveCollectionVS:()=>iy.Z,_shadersPolylineArrowMaterial:()=>gA.Z,_shadersPolylineColorAppearanceVS:()=>tA.Z,_shadersPolylineCommon:()=>ny.Z,_shadersPolylineDashMaterial:()=>_A.Z,_shadersPolylineFS:()=>ry.Z,_shadersPolylineGlowMaterial:()=>yA.Z,_shadersPolylineMaterialAppearanceVS:()=>iA.Z,_shadersPolylineOutlineMaterial:()=>ZA.Z,_shadersPolylineShadowVolumeFS:()=>oy.Z,_shadersPolylineShadowVolumeMorphFS:()=>sy.Z,_shadersPolylineShadowVolumeMorphVS:()=>ay.Z,_shadersPolylineShadowVolumeVS:()=>ly.Z,_shadersPolylineVS:()=>cy.Z,_shadersPrimitiveOutlineStageFS:()=>JA.Z,_shadersPrimitiveOutlineStageVS:()=>XA.Z,_shadersRGBToHSB:()=>lk.Z,_shadersRGBToHSL:()=>ck.Z,_shadersRGBToXYZ:()=>uk.Z,_shadersReinhardTonemapping:()=>wP.Z,_shadersReprojectWebMercatorFS:()=>uy.Z,_shadersReprojectWebMercatorVS:()=>dy.Z,_shadersRimLightingMaterial:()=>vA.Z,_shadersSelectedFeatureIdStageCommon:()=>$A.Z,_shadersShadowVolumeAppearanceFS:()=>hy.Z,_shadersShadowVolumeAppearanceVS:()=>py.Z,_shadersShadowVolumeFS:()=>fy.Z,_shadersSilhouette:()=>xP.Z,_shadersSkinningStageVS:()=>YA.Z,_shadersSkyAtmosphereCommon:()=>my.Z,_shadersSkyAtmosphereFS:()=>gy.Z,_shadersSkyAtmosphereVS:()=>_y.Z,_shadersSkyBoxFS:()=>yy.Z,_shadersSkyBoxVS:()=>Zy.Z,_shadersSlopeRampMaterial:()=>bA.Z,_shadersStripeMaterial:()=>wA.Z,_shadersSunFS:()=>vy.Z,_shadersSunTextureFS:()=>by.Z,_shadersSunVS:()=>wy.Z,_shadersTexturedMaterialAppearanceFS:()=>nA.Z,_shadersTexturedMaterialAppearanceVS:()=>rA.Z,_shadersVector3DTileClampedPolylinesFS:()=>xy.Z,_shadersVector3DTileClampedPolylinesVS:()=>Cy.Z,_shadersVector3DTilePolylinesVS:()=>Sy.Z,_shadersVectorTileVS:()=>Ty.Z,_shadersViewportQuadFS:()=>Ay,_shadersViewportQuadVS:()=>Py.Z,_shadersVoxelFS:()=>OP.Z,_shadersVoxelVS:()=>BP.Z,_shadersWater:()=>xA.Z,_shadersXYZToRGB:()=>dk.Z,_shadersacesTonemapping:()=>hk.Z,_shadersalphaWeight:()=>pk.Z,_shadersantialias:()=>fk.Z,_shadersapproximateSphericalCoordinates:()=>mk.Z,_shadersbackFacing:()=>gk.Z,_shadersbranchFreeTernary:()=>_k.Z,_shaderscascadeColor:()=>yk.Z,_shaderscascadeDistance:()=>Zk.Z,_shaderscascadeMatrix:()=>vk.Z,_shaderscascadeWeights:()=>bk.Z,_shaderscolumbusViewMorph:()=>wk.Z,_shaderscomputePosition:()=>xk.Z,_shadersconvertUvToBox:()=>RP.Z,_shadersconvertUvToCylinder:()=>FP.Z,_shadersconvertUvToEllipsoid:()=>DP.Z,_shaderscosineAndSine:()=>Ck.Z,_shadersdecompressTextureCoordinates:()=>Sk.Z,_shadersdefaultPbrMaterial:()=>Tk.Z,_shadersdegreesPerRadian:()=>wM.Z,_shadersdepthClamp:()=>Ak.Z,_shadersdepthRange:()=>xM.Z,_shadersdepthRangeStruct:()=>FI.Z,_shaderseastNorthUpToEyeCoordinates:()=>Pk.Z,_shadersellipsoidContainsPoint:()=>Ek.Z,_shadersellipsoidWgs84TextureCoordinates:()=>Mk.Z,_shadersepsilon1:()=>CM.Z,_shadersepsilon2:()=>SM.Z,_shadersepsilon3:()=>TM.Z,_shadersepsilon4:()=>AM.Z,_shadersepsilon5:()=>PM.Z,_shadersepsilon6:()=>EM.Z,_shadersepsilon7:()=>MM.Z,_shadersequalsEpsilon:()=>kk.Z,_shaderseyeOffset:()=>Ik.Z,_shaderseyeToWindowCoordinates:()=>Ok.Z,_shadersfastApproximateAtan:()=>Bk.Z,_shadersfog:()=>Rk.Z,_shadersgammaCorrect:()=>Fk.Z,_shadersgeodeticSurfaceNormal:()=>Dk.Z,_shadersgetDefaultMaterial:()=>Lk.Z,_shadersgetLambertDiffuse:()=>Vk.Z,_shadersgetSpecular:()=>Nk.Z,_shadersgetWaterNoise:()=>Uk.Z,_shadershue:()=>Gk.Z,_shadersinfinity:()=>kM.Z,_shadersinverseGamma:()=>zk.Z,_shadersisEmpty:()=>Kk.Z,_shadersisFull:()=>qk.Z,_shaderslatitudeToWebMercatorFraction:()=>Hk.Z,_shaderslineDistance:()=>Wk.Z,_shaderslinearToSrgb:()=>jk.Z,_shadersluminance:()=>Jk.Z,_shadersmaterial:()=>DI.Z,_shadersmaterialInput:()=>LI.Z,_shadersmetersPerPixel:()=>Xk.Z,_shadersmodelMaterial:()=>VI.Z,_shadersmodelToWindowCoordinates:()=>$k.Z,_shadersmodelVertexOutput:()=>NI.Z,_shadersmultiplyWithColorBalance:()=>Yk.Z,_shadersnearFarScalar:()=>Qk.Z,_shadersoctDecode:()=>eI.Z,_shadersoneOverPi:()=>IM.Z,_shadersoneOverTwoPi:()=>OM.Z,_shaderspackDepth:()=>tI.Z,_shaderspassCesium3DTile:()=>BM.Z,_shaderspassCesium3DTileClassification:()=>RM.Z,_shaderspassCesium3DTileClassificationIgnoreShow:()=>FM.Z,_shaderspassClassification:()=>DM.Z,_shaderspassCompute:()=>LM.Z,_shaderspassEnvironment:()=>VM.Z,_shaderspassGlobe:()=>NM.Z,_shaderspassOpaque:()=>UM.Z,_shaderspassOverlay:()=>GM.Z,_shaderspassTerrainClassification:()=>zM.Z,_shaderspassTranslucent:()=>KM.Z,_shaderspassVoxels:()=>qM.Z,_shaderspbrLighting:()=>iI.Z,_shaderspbrMetallicRoughnessMaterial:()=>nI.Z,_shaderspbrParameters:()=>UI.Z,_shaderspbrSpecularGlossinessMaterial:()=>rI.Z,_shadersphong:()=>oI.Z,_shaderspi:()=>HM.Z,_shaderspiOverFour:()=>WM.Z,_shaderspiOverSix:()=>jM.Z,_shaderspiOverThree:()=>JM.Z,_shaderspiOverTwo:()=>XM.Z,_shadersplaneDistance:()=>sI.Z,_shaderspointAlongRay:()=>aI.Z,_shadersradiansPerDegree:()=>$M.Z,_shadersray:()=>GI.Z,_shadersrayEllipsoidIntersectionInterval:()=>lI.Z,_shadersraySegment:()=>zI.Z,_shadersraySphereIntersectionInterval:()=>cI.Z,_shadersreadDepth:()=>uI.Z,_shadersreadNonPerspective:()=>dI.Z,_shadersreverseLogDepth:()=>hI.Z,_shadersround:()=>pI.Z,_shaderssampleOctahedralProjection:()=>fI.Z,_shaderssaturation:()=>mI.Z,_shaderssceneMode2D:()=>YM.Z,_shaderssceneMode3D:()=>QM.Z,_shaderssceneModeColumbusView:()=>ek.Z,_shaderssceneModeMorphing:()=>tk.Z,_shadersshadowDepthCompare:()=>gI.Z,_shadersshadowParameters:()=>KI.Z,_shadersshadowVisibility:()=>_I.Z,_shaderssignNotZero:()=>yI.Z,_shaderssolarRadius:()=>ik.Z,_shaderssphericalHarmonics:()=>ZI.Z,_shaderssrgbToLinear:()=>vI.Z,_shaderstangentToEyeSpaceMatrix:()=>bI.Z,_shaderstextureCube:()=>wI.Z,_shadersthreePiOver2:()=>nk.Z,_shaderstransformPlane:()=>xI.Z,_shaderstranslateRelativeToEye:()=>CI.Z,_shaderstranslucentPhong:()=>SI.Z,_shaderstranspose:()=>TI.Z,_shaderstwoPi:()=>rk.Z,_shadersunpackDepth:()=>AI.Z,_shadersunpackFloat:()=>PI.Z,_shadersunpackUint:()=>EI.Z,_shadersvalueTransform:()=>MI.Z,_shadersvertexLogDepth:()=>kI.Z,_shaderswebMercatorMaxLatitude:()=>ok.Z,_shaderswindowToEyeCoordinates:()=>II.Z,_shaderswriteDepthClamp:()=>OI.Z,_shaderswriteLogDepth:()=>BI.Z,_shaderswriteNonPerspective:()=>RI.Z,addBuffer:()=>VP.Z,addDefaults:()=>NP.Z,addExtensionsRequired:()=>UP.Z,addExtensionsUsed:()=>GP.Z,addPipelineExtras:()=>zP.Z,addToArray:()=>KP.Z,appendForwardSlash:()=>Qg.Z,arrayRemoveDuplicates:()=>e_.Z,barycentricCoordinates:()=>t_.Z,binarySearch:()=>i_.Z,buildDrawCommand:()=>bM.Z,buildModuleUrl:()=>Yr.Z,buildVoxelDrawCommands:()=>mT.Z,clone:()=>Qr.Z,combine:()=>Gl.Z,computeFlyToLocationForRectangle:()=>gT.Z,createBillboardPointCallback:()=>_T.Z,createCommand:()=>YI.Z,createDefaultImageryProviderViewModels:()=>oO.Z,createDefaultTerrainProviderViewModels:()=>sO.Z,createElevationBandMaterial:()=>PT,createGooglePhotorealistic3DTileset:()=>ET,createGuid:()=>C.Z,createMaterialPropertyDescriptor:()=>Fu.Z,createOsmBuildings:()=>MT,createOsmBuildingsAsync:()=>kT,createPropertyDescriptor:()=>g.Z,createRawPropertyDescriptor:()=>Ve.Z,createTangentSpaceDebugPrimitive:()=>IT,createTaskProcessorWorker:()=>qI,createUniform:()=>Xd.Z,createUniformArray:()=>$d.Z,createWorldImagery:()=>OT,createWorldImageryAsync:()=>BT.Z,createWorldTerrain:()=>n_,createWorldTerrainAsync:()=>r_.Z,decodeGoogleEarthEnterpriseData:()=>s_,decodeVectorPolylinePositions:()=>a_.Z,defaultValue:()=>p.Z,defer:()=>eo.Z,defined:()=>f.Z,demodernizeShader:()=>Yd.Z,deprecationWarning:()=>Rl.Z,destroyObject:()=>Ug.Z,exportKml:()=>dd,findAccessorMinMax:()=>qP.Z,findContentMetadata:()=>RT.Z,findGroupMetadata:()=>FT.Z,findTileMetadata:()=>DT.Z,forEachTextureInMaterial:()=>HP.Z,formatError:()=>l_.Z,freezeRenderState:()=>Qd.Z,getAbsoluteUri:()=>c_.Z,getAccessorByteStride:()=>WP.Z,getBaseUri:()=>u_.Z,getBinaryAccessor:()=>LT.Z,getClipAndStyleCode:()=>VT.Z,getClippingFunction:()=>NT.Z,getComponentReader:()=>jP.Z,getElement:()=>Ol.Z,getExtensionFromUri:()=>to.Z,getFilenameFromUri:()=>ae.Z,getImageFromTypedArray:()=>d_.Z,getImagePixels:()=>Ig.Z,getJsonFromTypedArray:()=>h_.Z,getMagic:()=>p_.Z,getStringFromTypedArray:()=>f_.Z,getTimestamp:()=>io.Z,hasExtension:()=>SZ.Z,heightReferenceOnEntityPropertyChanged:()=>hd.Z,isBitSet:()=>jp,isBlobUri:()=>m_.Z,isCrossOriginUrl:()=>g_.Z,isDataUri:()=>__.Z,isLeapYear:()=>y_.Z,knockout:()=>aO.Z,knockout_3_5_1:()=>JO.Z,knockout_es5:()=>XO.Z,loadAndExecuteScript:()=>Yp.Z,loadCubeMap:()=>eh.Z,loadImageFromTypedArray:()=>Z_.Z,loadKTX2:()=>v_.Z,mergeSort:()=>b_.Z,moveTechniqueRenderStates:()=>JP.Z,moveTechniquesToExtension:()=>XP.Z,numberOfComponentsForType:()=>$P.Z,objectToQuery:()=>oo.Z,oneTimeWarning:()=>so.Z,parseBatchTable:()=>UT.Z,parseBoundingVolumeSemantics:()=>GT.Z,parseFeatureMetadataLegacy:()=>zT.Z,parseGlb:()=>YP.Z,parseResponseHeaders:()=>w_.Z,parseStructuralMetadata:()=>KT.Z,pointInsideTriangle:()=>C_,preprocess3DTileContent:()=>BZ.Z,processVoxelProperties:()=>qT.Z,queryToObject:()=>ao.Z,readAccessorPacked:()=>QP.Z,removeExtension:()=>eE.Z,removeExtensionsRequired:()=>tE.Z,removeExtensionsUsed:()=>iE.Z,removePipelineExtras:()=>nE.Z,removeUnusedElements:()=>rE.Z,resizeImageToNextPowerOfTwo:()=>S_.Z,sampleTerrain:()=>T_.Z,sampleTerrainMostDetailed:()=>A_.Z,scaleToGeodeticSurface:()=>P_.Z,subdivideArray:()=>E_.Z,subscribeAndEvaluate:()=>QI.Z,updateAccessorComponentTypes:()=>oE.Z,updateVersion:()=>sE.Z,usesExtension:()=>aE.Z,viewerCesium3DTilesInspectorMixin:()=>nB,viewerCesiumInspectorMixin:()=>rB,viewerDragDropMixin:()=>uB,viewerPerformanceWatchdogMixin:()=>dB,viewerVoxelInspectorMixin:()=>xB,webGLConstantToGlslType:()=>M_,wrapFunction:()=>k_,writeTextToCanvas:()=>I_.Z});var n=i(693100),r=i(100002),o=i(657528),s=i(155439),a=i(384627),l=i(484297),c=i(298486),u=i(216055),d=i(405254),h=i(35961),p=i(234146),f=i(11020),m=i(282910),g=i(830098),_=i(916269);const y=h.Z.WHITE,Z=h.Z.BLACK,v=new d.Z(2,2);function b(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._definitionChanged=new m.Z,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.repeat=e.repeat}Object.defineProperties(b.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._evenColor)&&_.Z.isConstant(this._oddColor)&&_.Z.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},evenColor:(0,g.Z)("evenColor"),oddColor:(0,g.Z)("oddColor"),repeat:(0,g.Z)("repeat")}),b.prototype.getType=function(e){return"Checkerboard"},b.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.lightColor=_.Z.getValueOrClonedDefault(this._evenColor,e,y,t.lightColor),t.darkColor=_.Z.getValueOrClonedDefault(this._oddColor,e,Z,t.darkColor),t.repeat=_.Z.getValueOrDefault(this._repeat,e,v),t},b.prototype.equals=function(e){return this===e||e instanceof b&&_.Z.equals(this._evenColor,e._evenColor)&&_.Z.equals(this._oddColor,e._oddColor)&&_.Z.equals(this._repeat,e._repeat)};const w=b;var x=i(731458),C=i(973384),S=i(765153),T=i(344485),A=i(467077),P=i(628122);const E={id:void 0},M=new Array(2);function k(e){const t=e.propertyNames,i=t.length;for(let n=0;n<i;n++)e[t[n]]=void 0;e._name=void 0,e._availability=void 0}function I(e,t,i,n){M[0]=i,M[1]=n.id,t[JSON.stringify(M)]=n.definitionChanged.addEventListener(R.prototype._onDefinitionChanged,e)}function O(e,t,i,n){M[0]=i,M[1]=n.id;const r=JSON.stringify(M);t[r](),t[r]=void 0}function B(e){if(e._shouldRecomposite=!0,0!==e._suspendCount)return;const t=e._collections,i=t.length,n=e._collectionsCopy,r=n.length;let o,s,a,l,c;const u=e._composite,d=new P.Z(e),h=e._eventHash;let p;for(o=0;o<r;o++)for(c=n[o],c.collectionChanged.removeEventListener(R.prototype._onCollectionChanged,e),a=c.values,p=c.id,l=a.length-1;l>-1;l--)s=a[l],O(0,h,p,s);for(o=i-1;o>=0;o--)for(c=t[o],c.collectionChanged.addEventListener(R.prototype._onCollectionChanged,e),a=c.values,p=c.id,l=a.length-1;l>-1;l--){s=a[l],I(e,h,p,s);let t=d.getById(s.id);(0,f.Z)(t)||(t=u.getById(s.id),(0,f.Z)(t)?k(t):(E.id=s.id,t=new A.Z(E)),d.add(t)),t.merge(s)}e._collectionsCopy=t.slice(0),u.suspendEvents(),u.removeAll();const m=d.values;for(o=0;o<m.length;o++)u.add(m[o]);u.resumeEvents()}function R(e,t){this._owner=t,this._composite=new P.Z(this),this._suspendCount=0,this._collections=(0,f.Z)(e)?e.slice():[],this._collectionsCopy=[],this._id=(0,C.Z)(),this._eventHash={},B(this),this._shouldRecomposite=!1}function F(e,t){if(!(0,f.Z)(t))throw new S.Z("collection is required.");const i=e.indexOf(t);if(-1===i)throw new S.Z("collection is not in this composite.");return i}function D(e,t,i){const n=e._collections;if((t=T.Z.clamp(t,0,n.length-1))===(i=T.Z.clamp(i,0,n.length-1)))return;const r=n[t];n[t]=n[i],n[i]=r,B(e)}Object.defineProperties(R.prototype,{collectionChanged:{get:function(){return this._composite._collectionChanged}},id:{get:function(){return this._id}},values:{get:function(){return this._composite.values}},owner:{get:function(){return this._owner}}}),R.prototype.addCollection=function(e,t){const i=(0,f.Z)(t);if(!(0,f.Z)(e))throw new S.Z("collection is required.");if(i){if(t<0)throw new S.Z("index must be greater than or equal to zero.");if(t>this._collections.length)throw new S.Z("index must be less than or equal to the number of collections.")}i?this._collections.splice(t,0,e):(t=this._collections.length,this._collections.push(e)),B(this)},R.prototype.removeCollection=function(e){const t=this._collections.indexOf(e);return-1!==t&&(this._collections.splice(t,1),B(this),!0)},R.prototype.removeAllCollections=function(){this._collections.length=0,B(this)},R.prototype.containsCollection=function(e){return-1!==this._collections.indexOf(e)},R.prototype.contains=function(e){return this._composite.contains(e)},R.prototype.indexOfCollection=function(e){return this._collections.indexOf(e)},R.prototype.getCollection=function(e){if(!(0,f.Z)(e))throw new S.Z("index is required.","index");return this._collections[e]},R.prototype.getCollectionsLength=function(){return this._collections.length},R.prototype.raiseCollection=function(e){const t=F(this._collections,e);D(this,t,t+1)},R.prototype.lowerCollection=function(e){const t=F(this._collections,e);D(this,t,t-1)},R.prototype.raiseCollectionToTop=function(e){const t=F(this._collections,e);t!==this._collections.length-1&&(this._collections.splice(t,1),this._collections.push(e),B(this))},R.prototype.lowerCollectionToBottom=function(e){const t=F(this._collections,e);0!==t&&(this._collections.splice(t,1),this._collections.splice(0,0,e),B(this))},R.prototype.suspendEvents=function(){this._suspendCount++,this._composite.suspendEvents()},R.prototype.resumeEvents=function(){if(0===this._suspendCount)throw new S.Z("resumeEvents can not be called before suspendEvents.");this._suspendCount--,this._shouldRecomposite&&0===this._suspendCount&&(B(this),this._shouldRecomposite=!1),this._composite.resumeEvents()},R.prototype.computeAvailability=function(){return this._composite.computeAvailability()},R.prototype.getById=function(e){return this._composite.getById(e)},R.prototype._onCollectionChanged=function(e,t,i){const n=this._collectionsCopy,r=n.length,o=this._composite;let s,a,l,c;o.suspendEvents();const u=i.length,d=this._eventHash,h=e.id;for(s=0;s<u;s++){const e=i[s];O(0,d,h,e);const t=e.id;for(a=r-1;a>=0;a--)l=n[a].getById(t),(0,f.Z)(l)&&((0,f.Z)(c)||(c=o.getById(t),k(c)),c.merge(l));(0,f.Z)(c)||o.removeById(t),c=void 0}const p=t.length;for(s=0;s<p;s++){const e=t[s];I(this,d,h,e);const i=e.id;for(a=r-1;a>=0;a--)l=n[a].getById(i),(0,f.Z)(l)&&((0,f.Z)(c)||(c=o.getById(i),(0,f.Z)(c)?k(c):(E.id=i,c=new A.Z(E),o.add(c))),c.merge(l));c=void 0}o.resumeEvents()},R.prototype._onDefinitionChanged=function(e,t,i,n){const r=this._collections,o=this._composite,s=r.length,a=e.id,l=o.getById(a);let c=l[t];const u=!(0,f.Z)(c);let d=!0;for(let i=s-1;i>=0;i--){const n=r[i].getById(e.id);if((0,f.Z)(n)){const e=n[t];if((0,f.Z)(e)){if(d){if(d=!1,!(0,f.Z)(e.merge)||!(0,f.Z)(e.clone)){c=e;break}c=e.clone(c)}c.merge(e)}}}u&&-1===l.propertyNames.indexOf(t)&&l.addProperty(t),l[t]=c};const L=R;var V=i(91981);function N(){this._definitionChanged=new m.Z,this._composite=new V.Z,this._composite.definitionChanged.addEventListener(N.prototype._raiseDefinitionChanged,this)}Object.defineProperties(N.prototype,{isConstant:{get:function(){return this._composite.isConstant}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._composite._intervals}}}),N.prototype.getType=function(e){if(!(0,f.Z)(e))throw new S.Z("time is required");const t=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,f.Z)(t))return t.getType(e)},N.prototype.getValue=function(e,t){if(!(0,f.Z)(e))throw new S.Z("time is required");const i=this._composite._intervals.findDataForIntervalContainingDate(e);if((0,f.Z)(i))return i.getValue(e,t)},N.prototype.equals=function(e){return this===e||e instanceof N&&this._composite.equals(e._composite,_.Z.equals)},N.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const U=N;var G=i(741224),z=i(303932),K=i(956568),q=i(831635),H=i(930265),W=i(534531),j=i(625739),J=i(138457),X=i(730617),$=i(890828),Y=i(660904),Q=i(532056),ee=i(140942),te=i(501e3),ie=i(555537),ne=i(865029),re=i(6821),oe=i(63354),se=i(165032),ae=i(695805);const le=T.Z.factorial;function ce(e,t,i,n,r,o){let s,a,l,c=0;if(n>0){for(a=0;a<r;a++){for(s=!1,l=0;l<o.length&&!s;l++)a===o[l]&&(s=!0);s||(o.push(a),c+=ce(e,t,i,n-1,r,o),o.splice(o.length-1,1))}return c}for(c=1,a=0;a<r;a++){for(s=!1,l=0;l<o.length&&!s;l++)a===o[l]&&(s=!0);s||(c*=e-i[t[a]])}return c}const ue={type:"Hermite",getRequiredDataPoints:function(e,t){if(t=(0,p.Z)(t,0),!(0,f.Z)(e))throw new S.Z("degree is required.");if(e<0)throw new S.Z("degree must be 0 or greater.");if(t<0)throw new S.Z("inputOrder must be 0 or greater.");return Math.max(Math.floor((e+1)/(t+1)),2)},interpolateOrderZero:function(e,t,i,n,r){let o,s,a,l,c,u;(0,f.Z)(r)||(r=new Array(n));const d=t.length,h=new Array(n);for(o=0;o<n;o++){r[o]=0;const e=new Array(d);for(h[o]=e,s=0;s<d;s++)e[s]=[]}const p=d,m=new Array(p);for(o=0;o<p;o++)m[o]=o;let g=d-1;for(l=0;l<n;l++){for(s=0;s<p;s++)u=m[s]*n+l,h[l][0].push(i[u]);for(o=1;o<p;o++){let e=!1;for(s=0;s<p-o;s++){const r=t[m[s]],a=t[m[s+o]];let c;a-r<=0?(u=m[s]*n+n*o+l,c=i[u],h[l][o].push(c/le(o))):(c=h[l][o-1][s+1]-h[l][o-1][s],h[l][o].push(c/(a-r))),e=e||0!==c}e||(g=o-1)}}for(a=0,c=0;a<=0;a++)for(o=a;o<=g;o++){const i=ce(e,m,t,a,o,[]);for(l=0;l<n;l++){const e=h[l][o][0];r[l+a*n]+=e*i}}return r}},de=[];ue.interpolate=function(e,t,i,n,r,o,s){const a=n*(o+1);(0,f.Z)(s)||(s=new Array(a));for(let e=0;e<a;e++)s[e]=0;const l=t.length,c=new Array(l*(r+1));let u;for(u=0;u<l;u++)for(let e=0;e<r+1;e++)c[u*(r+1)+e]=u;const d=c.length,h=de,p=function(e,t,i,n,r,o){let s,a,l=-1;const c=t.length,u=c*(c+1)/2;for(let d=0;d<r;d++){const h=Math.floor(d*u);for(s=0;s<c;s++)a=t[s]*r*(o+1)+d,e[h+s]=n[a];for(let u=1;u<c;u++){let p=0;const f=Math.floor(u*(1-u)/2)+c*u;let m=!1;for(s=0;s<c-u;s++){const l=i[t[s]],g=i[t[s+u]];let _,y;if(g-l<=0)a=t[s]*r*(o+1)+r*u+d,_=n[a],y=_/T.Z.factorial(u),e[h+f+p]=y,p++;else{const t=Math.floor((u-1)*(2-u)/2)+c*(u-1);_=e[h+t+s+1]-e[h+t+s],y=_/(g-l),e[h+f+p]=y,p++}m=m||0!==_}m&&(l=Math.max(l,u))}}return l}(h,c,t,i,n,r),m=[],g=d*(d+1)/2,_=Math.min(p,o);for(let i=0;i<=_;i++)for(u=i;u<=p;u++){m.length=0;const r=ce(e,c,t,i,u,m),o=Math.floor(u*(1-u)/2)+d*u;for(let e=0;e<n;e++){const t=h[Math.floor(e*g)+o];s[e+i*n]+=t*r}}return s};const he=ue;var pe=i(551332),fe=i(791364);const me={type:"Lagrange",getRequiredDataPoints:function(e){return Math.max(e+1,2)},interpolateOrderZero:function(e,t,i,n,r){let o,s;(0,f.Z)(r)||(r=new Array(n));const a=t.length;for(o=0;o<n;o++)r[o]=0;for(o=0;o<a;o++){let l=1;for(s=0;s<a;s++)if(s!==o){const i=t[o]-t[s];l*=(e-t[s])/i}for(s=0;s<n;s++)r[s]+=l*i[o*n+s]}return r}};var ge=i(433310),_e=i(485662),ye=i(816715),Ze=i(360846),ve=i(143450),be=i(803994),we=i(205522),xe=i(217066),Ce=i(790087);function Se(e,t,i){this.clock=(0,p.Z)(e,0),this.cone=(0,p.Z)(t,0),this.magnitude=(0,p.Z)(i,1)}Se.fromCartesian3=function(e,t){Ce.Z.typeOf.object("cartesian3",e);const i=e.x,n=e.y,r=e.z,o=i*i+n*n;return(0,f.Z)(t)||(t=new Se),t.clock=Math.atan2(n,i),t.cone=Math.atan2(Math.sqrt(o),r),t.magnitude=Math.sqrt(o+r*r),t},Se.clone=function(e,t){if((0,f.Z)(e))return(0,f.Z)(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=e.magnitude,t):new Se(e.clock,e.cone,e.magnitude)},Se.normalize=function(e,t){return Ce.Z.typeOf.object("spherical",e),(0,f.Z)(t)?(t.clock=e.clock,t.cone=e.cone,t.magnitude=1,t):new Se(e.clock,e.cone,1)},Se.equals=function(e,t){return e===t||(0,f.Z)(e)&&(0,f.Z)(t)&&e.clock===t.clock&&e.cone===t.cone&&e.magnitude===t.magnitude},Se.equalsEpsilon=function(e,t,i){return i=(0,p.Z)(i,0),e===t||(0,f.Z)(e)&&(0,f.Z)(t)&&Math.abs(e.clock-t.clock)<=i&&Math.abs(e.cone-t.cone)<=i&&Math.abs(e.magnitude-t.magnitude)<=i},Se.prototype.equals=function(e){return Se.equals(this,e)},Se.prototype.clone=function(e){return Se.clone(this,e)},Se.prototype.equalsEpsilon=function(e,t){return Se.equalsEpsilon(this,e,t)},Se.prototype.toString=function(){return`(${this.clock}, ${this.cone}, ${this.magnitude})`};const Te=Se;var Ae=i(674881),Pe=i(691156),Ee=i(203547),Me=i(66990),ke=i(990778),Ie=i(160629),Oe=i(644001),Be=i(534890),Re=i(218157),Fe=i(354998),De=i(728906),Le=i(249702),Ve=i(667436);function Ne(){this._definitionChanged=new m.Z,this._startTime=void 0,this._stopTime=void 0,this._currentTime=void 0,this._clockRange=void 0,this._clockStep=void 0,this._multiplier=void 0}Object.defineProperties(Ne.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},startTime:(0,Ve.Z)("startTime"),stopTime:(0,Ve.Z)("stopTime"),currentTime:(0,Ve.Z)("currentTime"),clockRange:(0,Ve.Z)("clockRange"),clockStep:(0,Ve.Z)("clockStep"),multiplier:(0,Ve.Z)("multiplier")}),Ne.prototype.clone=function(e){return(0,f.Z)(e)||(e=new Ne),e.startTime=this.startTime,e.stopTime=this.stopTime,e.currentTime=this.currentTime,e.clockRange=this.clockRange,e.clockStep=this.clockStep,e.multiplier=this.multiplier,e},Ne.prototype.equals=function(e){return this===e||(0,f.Z)(e)&&fe.Z.equals(this.startTime,e.startTime)&&fe.Z.equals(this.stopTime,e.stopTime)&&fe.Z.equals(this.currentTime,e.currentTime)&&this.clockRange===e.clockRange&&this.clockStep===e.clockStep&&this.multiplier===e.multiplier},Ne.prototype.merge=function(e){if(!(0,f.Z)(e))throw new S.Z("source is required.");this.startTime=(0,p.Z)(this.startTime,e.startTime),this.stopTime=(0,p.Z)(this.stopTime,e.stopTime),this.currentTime=(0,p.Z)(this.currentTime,e.currentTime),this.clockRange=(0,p.Z)(this.clockRange,e.clockRange),this.clockStep=(0,p.Z)(this.clockStep,e.clockStep),this.multiplier=(0,p.Z)(this.multiplier,e.multiplier)},Ne.prototype.getValue=function(e){return(0,f.Z)(e)||(e=new Le.Z),e.startTime=(0,p.Z)(this.startTime,e.startTime),e.stopTime=(0,p.Z)(this.stopTime,e.stopTime),e.currentTime=(0,p.Z)(this.currentTime,e.currentTime),e.clockRange=(0,p.Z)(this.clockRange,e.clockRange),e.multiplier=(0,p.Z)(this.multiplier,e.multiplier),e.clockStep=(0,p.Z)(this.clockStep,e.clockStep),e};const Ue=Ne;var Ge=i(534163),ze=i(979258),Ke=i(710299);const qe=h.Z.WHITE,He=new d.Z(8,8),We=new d.Z(0,0),je=new d.Z(1,1);function Je(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._definitionChanged=new m.Z,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=e.color,this.cellAlpha=e.cellAlpha,this.lineCount=e.lineCount,this.lineThickness=e.lineThickness,this.lineOffset=e.lineOffset}Object.defineProperties(Je.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._color)&&_.Z.isConstant(this._cellAlpha)&&_.Z.isConstant(this._lineCount)&&_.Z.isConstant(this._lineThickness)&&_.Z.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,g.Z)("color"),cellAlpha:(0,g.Z)("cellAlpha"),lineCount:(0,g.Z)("lineCount"),lineThickness:(0,g.Z)("lineThickness"),lineOffset:(0,g.Z)("lineOffset")}),Je.prototype.getType=function(e){return"Grid"},Je.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.color=_.Z.getValueOrClonedDefault(this._color,e,qe,t.color),t.cellAlpha=_.Z.getValueOrDefault(this._cellAlpha,e,.1),t.lineCount=_.Z.getValueOrClonedDefault(this._lineCount,e,He,t.lineCount),t.lineThickness=_.Z.getValueOrClonedDefault(this._lineThickness,e,je,t.lineThickness),t.lineOffset=_.Z.getValueOrClonedDefault(this._lineOffset,e,We,t.lineOffset),t},Je.prototype.equals=function(e){return this===e||e instanceof Je&&_.Z.equals(this._color,e._color)&&_.Z.equals(this._cellAlpha,e._cellAlpha)&&_.Z.equals(this._lineCount,e._lineCount)&&_.Z.equals(this._lineThickness,e._lineThickness)&&_.Z.equals(this._lineOffset,e._lineOffset)};const Xe=Je;var $e=i(624163),Ye=i(503124),Qe=i(417042),et=i(713761),tt=i(750080),it=i(932249),nt=i(549227);function rt(e){this._definitionChanged=new m.Z,this._color=void 0,this._colorSubscription=void 0,this.color=e}Object.defineProperties(rt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,g.Z)("color")}),rt.prototype.getType=function(e){return"PolylineArrow"},rt.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.color=_.Z.getValueOrClonedDefault(this._color,e,h.Z.WHITE,t.color),t},rt.prototype.equals=function(e){return this===e||e instanceof rt&&_.Z.equals(this._color,e._color)};const ot=rt;var st=i(312763);const at=h.Z.WHITE;function lt(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._definitionChanged=new m.Z,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=e.color,this.glowPower=e.glowPower,this.taperPower=e.taperPower}Object.defineProperties(lt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._color)&&_.Z.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,g.Z)("color"),glowPower:(0,g.Z)("glowPower"),taperPower:(0,g.Z)("taperPower")}),lt.prototype.getType=function(e){return"PolylineGlow"},lt.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.color=_.Z.getValueOrClonedDefault(this._color,e,at,t.color),t.glowPower=_.Z.getValueOrDefault(this._glowPower,e,.25,t.glowPower),t.taperPower=_.Z.getValueOrDefault(this._taperPower,e,1,t.taperPower),t},lt.prototype.equals=function(e){return this===e||e instanceof lt&&_.Z.equals(this._color,e._color)&&_.Z.equals(this._glowPower,e._glowPower)&&_.Z.equals(this._taperPower,e._taperPower)};const ct=lt;var ut=i(470361);const dt=h.Z.WHITE,ht=h.Z.BLACK;function pt(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._definitionChanged=new m.Z,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this.color=e.color,this.outlineColor=e.outlineColor,this.outlineWidth=e.outlineWidth}Object.defineProperties(pt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._color)&&_.Z.isConstant(this._outlineColor)&&_.Z.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,g.Z)("color"),outlineColor:(0,g.Z)("outlineColor"),outlineWidth:(0,g.Z)("outlineWidth")}),pt.prototype.getType=function(e){return"PolylineOutline"},pt.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.color=_.Z.getValueOrClonedDefault(this._color,e,dt,t.color),t.outlineColor=_.Z.getValueOrClonedDefault(this._outlineColor,e,ht,t.outlineColor),t.outlineWidth=_.Z.getValueOrDefault(this._outlineWidth,e,1),t},pt.prototype.equals=function(e){return this===e||e instanceof pt&&_.Z.equals(this._color,e._color)&&_.Z.equals(this._outlineColor,e._outlineColor)&&_.Z.equals(this._outlineWidth,e._outlineWidth)};const ft=pt;var mt=i(212327),gt=i(700234);function _t(e,t){this._value=void 0,this._definitionChanged=new m.Z,this._eventHelper=new gt.Z,this._referenceFrame=(0,p.Z)(t,be.Z.FIXED),this.setValue(e)}Object.defineProperties(_t.prototype,{isConstant:{get:function(){const e=this._value;if(!(0,f.Z)(e))return!0;const t=e.length;for(let i=0;i<t;i++)if(!_.Z.isConstant(e[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),_t.prototype.getValue=function(e,t){return this.getValueInReferenceFrame(e,be.Z.FIXED,t)},_t.prototype.getValueInReferenceFrame=function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("time is required.");if(!(0,f.Z)(t))throw new S.Z("referenceFrame is required.");const n=this._value;if(!(0,f.Z)(n))return;const r=n.length;(0,f.Z)(i)||(i=new Array(r));let o=0,s=0;for(;o<r;){const r=n[o].getValueInReferenceFrame(e,t,i[o]);(0,f.Z)(r)&&(i[s]=r,s++),o++}return i.length=s,i},_t.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),(0,f.Z)(e)){this._value=e.slice();const i=e.length;for(let n=0;n<i;n++){const i=e[n];(0,f.Z)(i)&&t.add(i.definitionChanged,_t.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},_t.prototype.equals=function(e){return this===e||e instanceof _t&&this._referenceFrame===e._referenceFrame&&_.Z.arrayEquals(this._value,e._value)},_t.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const yt=_t;function Zt(e){this._value=void 0,this._definitionChanged=new m.Z,this._eventHelper=new gt.Z,this.setValue(e)}Object.defineProperties(Zt.prototype,{isConstant:{get:function(){const e=this._value;if(!(0,f.Z)(e))return!0;const t=e.length;for(let i=0;i<t;i++)if(!_.Z.isConstant(e[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),Zt.prototype.getValue=function(e,t){if(!(0,f.Z)(e))throw new S.Z("time is required.");const i=this._value;if(!(0,f.Z)(i))return;const n=i.length;(0,f.Z)(t)||(t=new Array(n));let r=0,o=0;for(;r<n;){const i=this._value[r].getValue(e,t[r]);(0,f.Z)(i)&&(t[o]=i,o++),r++}return t.length=o,t},Zt.prototype.setValue=function(e){const t=this._eventHelper;if(t.removeAll(),(0,f.Z)(e)){this._value=e.slice();const i=e.length;for(let n=0;n<i;n++){const i=e[n];(0,f.Z)(i)&&t.add(i.definitionChanged,Zt.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},Zt.prototype.equals=function(e){return this===e||e instanceof Zt&&_.Z.arrayEquals(this._value,e._value)},Zt.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const vt=Zt;var bt=i(704305),wt=i(141348),xt=i(467369);const Ct={packedLength:1,pack:function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("value is required");if(!(0,f.Z)(t))throw new S.Z("array is required");return t[i=(0,p.Z)(i,0)]=e,t},unpack:function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("array is required");return e[t=(0,p.Z)(t,0)]},convertPackedArrayForInterpolation:function(e,t,i,n){if(!(0,f.Z)(e))throw new S.Z("packedArray is required");let r;(0,f.Z)(n)||(n=[]),t=(0,p.Z)(t,0);for(let o=0,s=(i=(0,p.Z)(i,e.length))-t+1;o<s;o++){const i=e[t+o];0===o||Math.abs(r-i)<Math.PI?n[o]=i:n[o]=i-T.Z.TWO_PI,r=i}},unpackInterpolationResult:function(e,t,i,n,r){if(!(0,f.Z)(e))throw new S.Z("array is required");if(!(0,f.Z)(t))throw new S.Z("sourceArray is required");return(r=e[0])<0?r+T.Z.TWO_PI:r}};var St=i(641256),Tt=i(431763);const At=Object.freeze({HORIZONTAL:0,VERTICAL:1}),Pt=At.HORIZONTAL,Et=h.Z.WHITE,Mt=h.Z.BLACK;function kt(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._definitionChanged=new m.Z,this._orientation=void 0,this._orientationSubscription=void 0,this._evenColor=void 0,this._evenColorSubscription=void 0,this._oddColor=void 0,this._oddColorSubscription=void 0,this._offset=void 0,this._offsetSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this.orientation=e.orientation,this.evenColor=e.evenColor,this.oddColor=e.oddColor,this.offset=e.offset,this.repeat=e.repeat}Object.defineProperties(kt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._orientation)&&_.Z.isConstant(this._evenColor)&&_.Z.isConstant(this._oddColor)&&_.Z.isConstant(this._offset)&&_.Z.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},orientation:(0,g.Z)("orientation"),evenColor:(0,g.Z)("evenColor"),oddColor:(0,g.Z)("oddColor"),offset:(0,g.Z)("offset"),repeat:(0,g.Z)("repeat")}),kt.prototype.getType=function(e){return"Stripe"},kt.prototype.getValue=function(e,t){return(0,f.Z)(t)||(t={}),t.horizontal=_.Z.getValueOrDefault(this._orientation,e,Pt)===At.HORIZONTAL,t.evenColor=_.Z.getValueOrClonedDefault(this._evenColor,e,Et,t.evenColor),t.oddColor=_.Z.getValueOrClonedDefault(this._oddColor,e,Mt,t.oddColor),t.offset=_.Z.getValueOrDefault(this._offset,e,0),t.repeat=_.Z.getValueOrDefault(this._repeat,e,1),t},kt.prototype.equals=function(e){return this===e||e instanceof kt&&_.Z.equals(this._orientation,e._orientation)&&_.Z.equals(this._evenColor,e._evenColor)&&_.Z.equals(this._oddColor,e._oddColor)&&_.Z.equals(this._offset,e._offset)&&_.Z.equals(this._repeat,e._repeat)};const It=kt;var Ot=i(251142);function Bt(){this._definitionChanged=new m.Z,this._intervals=new Pe.Z,this._intervals.changedEvent.addEventListener(Bt.prototype._intervalsChanged,this)}Object.defineProperties(Bt.prototype,{isConstant:{get:function(){return this._intervals.isEmpty}},definitionChanged:{get:function(){return this._definitionChanged}},intervals:{get:function(){return this._intervals}}}),Bt.prototype.getValue=function(e,t){if(!(0,f.Z)(e))throw new S.Z("time is required");const i=this._intervals.findDataForIntervalContainingDate(e);return(0,f.Z)(i)&&"function"==typeof i.clone?i.clone(t):i},Bt.prototype.equals=function(e){return this===e||e instanceof Bt&&this._intervals.equals(e._intervals,_.Z.equals)},Bt.prototype._intervalsChanged=function(){this._definitionChanged.raiseEvent(this)};const Rt=Bt;var Ft=i(664288),Dt=i(720794);function Lt(e,t){this._position=void 0,this._subscription=void 0,this._definitionChanged=new m.Z,this._normalize=(0,p.Z)(t,!0),this.position=e}Object.defineProperties(Lt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._position)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._position},set:function(e){const t=this._position;t!==e&&((0,f.Z)(t)&&this._subscription(),this._position=e,(0,f.Z)(e)&&(this._subscription=e._definitionChanged.addEventListener((function(){this._definitionChanged.raiseEvent(this)}),this)),this._definitionChanged.raiseEvent(this))}},normalize:{get:function(){return this._normalize},set:function(e){this._normalize!==e&&(this._normalize=e,this._definitionChanged.raiseEvent(this))}}});const Vt=new Y.Z,Nt=new Y.Z,Ut=new fe.Z,Gt=1/60;Lt.prototype.getValue=function(e,t){return this._getValue(e,t)},Lt.prototype._getValue=function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("time is required");(0,f.Z)(t)||(t=new Y.Z);const n=this._position;if(_.Z.isConstant(n))return this._normalize?void 0:Y.Z.clone(Y.Z.ZERO,t);let r=n.getValue(e,Vt),o=n.getValue(fe.Z.addSeconds(e,Gt,Ut),Nt);if(!(0,f.Z)(r))return;if(!(0,f.Z)(o)&&(o=r,r=n.getValue(fe.Z.addSeconds(e,-Gt,Ut),Nt),!(0,f.Z)(r)))return;if(Y.Z.equals(r,o))return this._normalize?void 0:Y.Z.clone(Y.Z.ZERO,t);(0,f.Z)(i)&&r.clone(i);const s=Y.Z.subtract(o,r,t);return this._normalize?Y.Z.normalize(s,t):Y.Z.divideByScalar(s,Gt,t)},Lt.prototype.equals=function(e){return this===e||e instanceof Lt&&_.Z.equals(this._position,e._position)};const zt=Lt;function Kt(e,t){this._velocityVectorProperty=new zt(e,!0),this._subscription=void 0,this._ellipsoid=void 0,this._definitionChanged=new m.Z,this.ellipsoid=(0,p.Z)(t,oe.Z.WGS84);const i=this;this._velocityVectorProperty.definitionChanged.addEventListener((function(){i._definitionChanged.raiseEvent(i)}))}Object.defineProperties(Kt.prototype,{isConstant:{get:function(){return _.Z.isConstant(this._velocityVectorProperty)}},definitionChanged:{get:function(){return this._definitionChanged}},position:{get:function(){return this._velocityVectorProperty.position},set:function(e){this._velocityVectorProperty.position=e}},ellipsoid:{get:function(){return this._ellipsoid},set:function(e){this._ellipsoid!==e&&(this._ellipsoid=e,this._definitionChanged.raiseEvent(this))}}});const qt=new Y.Z,Ht=new Y.Z,Wt=new Ft.Z;Kt.prototype.getValue=function(e,t){const i=this._velocityVectorProperty._getValue(e,Ht,qt);if((0,f.Z)(i))return Dt.Z.rotationMatrixFromPositionVelocity(qt,i,this._ellipsoid,Wt),Ze.Z.fromRotationMatrix(Wt,t)},Kt.prototype.equals=function(e){return this===e||e instanceof Kt&&_.Z.equals(this._velocityVectorProperty,e._velocityVectorProperty)&&(this._ellipsoid===e._ellipsoid||this._ellipsoid.equals(e._ellipsoid))};const jt=Kt;var Jt=i(501356);function Xt(){}let $t;function Yt(e,t){return"#"===t[0]&&(t=$t+t),xt.Z.fromString(e,t)}function Qt(e,t,i){if((0,f.Z)(i.reference))return Yt(t,i.reference);if((0,f.Z)(i.velocityReference)){const n=Yt(t,i.velocityReference);switch(e){case Y.Z:case Xt:return new zt(n,e===Xt);case Ze.Z:return new jt(n)}}throw new xe.Z(`${JSON.stringify(i)} is not valid CZML.`)}Xt.packedLength=Y.Z.packedLength,Xt.unpack=Y.Z.unpack,Xt.pack=Y.Z.pack;const ei=new Y.Z,ti=new Te,ii=new Q.Z,ni=new Ae.Z,ri=new Ze.Z;function oi(e,t){const i=(0,p.Z)(e.uri,e);return(0,f.Z)(t)?t.getDerivedResource({url:i}):we.Z.createIfNeeded(i)}function si(e){const t=e.cartesian;if((0,f.Z)(t))return t;const i=e.cartesianVelocity;if((0,f.Z)(i))return i;const n=e.unitCartesian;if((0,f.Z)(n))return n;const r=e.unitSpherical;if((0,f.Z)(r))return function(e){const t=e.length;if(ti.magnitude=1,2===t)return ti.clock=e[0],ti.cone=e[1],Y.Z.fromSpherical(ti,ei),[ei.x,ei.y,ei.z];const i=new Array(t/3*4);for(let n=0,r=0;n<t;n+=3,r+=4)i[r]=e[n],ti.clock=e[n+1],ti.cone=e[n+2],Y.Z.fromSpherical(ti,ei),i[r+1]=ei.x,i[r+2]=ei.y,i[r+3]=ei.z;return i}(r);const o=e.spherical;if((0,f.Z)(o))return function(e){const t=e.length;if(3===t)return ti.clock=e[0],ti.cone=e[1],ti.magnitude=e[2],Y.Z.fromSpherical(ti,ei),[ei.x,ei.y,ei.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],ti.clock=e[n+1],ti.cone=e[n+2],ti.magnitude=e[n+3],Y.Z.fromSpherical(ti,ei),i[n+1]=ei.x,i[n+2]=ei.y,i[n+3]=ei.z;return i}(o);const s=e.cartographicRadians;if((0,f.Z)(s))return function(e){const t=e.length;if(3===t)return ii.longitude=e[0],ii.latitude=e[1],ii.height=e[2],oe.Z.WGS84.cartographicToCartesian(ii,ei),[ei.x,ei.y,ei.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],ii.longitude=e[n+1],ii.latitude=e[n+2],ii.height=e[n+3],oe.Z.WGS84.cartographicToCartesian(ii,ei),i[n+1]=ei.x,i[n+2]=ei.y,i[n+3]=ei.z;return i}(s);const a=e.cartographicDegrees;if((0,f.Z)(a))return function(e){const t=e.length;if(3===t)return ii.longitude=T.Z.toRadians(e[0]),ii.latitude=T.Z.toRadians(e[1]),ii.height=e[2],oe.Z.WGS84.cartographicToCartesian(ii,ei),[ei.x,ei.y,ei.z];const i=new Array(t);for(let n=0;n<t;n+=4)i[n]=e[n],ii.longitude=T.Z.toRadians(e[n+1]),ii.latitude=T.Z.toRadians(e[n+2]),ii.height=e[n+3],oe.Z.WGS84.cartographicToCartesian(ii,ei),i[n+1]=ei.x,i[n+2]=ei.y,i[n+3]=ei.z;return i}(a);throw new xe.Z(`${JSON.stringify(e)} is not a valid CZML interval.`)}function ai(e,t){Y.Z.unpack(e,t,ei),Y.Z.normalize(ei,ei),Y.Z.pack(ei,e,t)}function li(e,t){Ze.Z.unpack(e,t,ri),Ze.Z.normalize(ri,ri),Ze.Z.pack(ri,e,t)}function ci(e){return"boolean"==typeof e?Boolean:"number"==typeof e?Number:"string"==typeof e?String:e.hasOwnProperty("array")?Array:e.hasOwnProperty("boolean")?Boolean:e.hasOwnProperty("boundingRectangle")?$.Z:e.hasOwnProperty("cartesian2")?d.Z:e.hasOwnProperty("cartesian")||e.hasOwnProperty("spherical")||e.hasOwnProperty("cartographicRadians")||e.hasOwnProperty("cartographicDegrees")?Y.Z:e.hasOwnProperty("unitCartesian")||e.hasOwnProperty("unitSpherical")?Xt:e.hasOwnProperty("rgba")||e.hasOwnProperty("rgbaf")?h.Z:e.hasOwnProperty("arcType")?X.Z:e.hasOwnProperty("classificationType")?Ee.Z:e.hasOwnProperty("colorBlendMode")?Me.Z:e.hasOwnProperty("cornerType")?ie.Z:e.hasOwnProperty("heightReference")?ke.Z:e.hasOwnProperty("horizontalOrigin")?Ie.Z:e.hasOwnProperty("date")?fe.Z:e.hasOwnProperty("labelStyle")?Oe.Z:e.hasOwnProperty("number")?Number:e.hasOwnProperty("nearFarScalar")?_e.Z:e.hasOwnProperty("distanceDisplayCondition")?re.Z:e.hasOwnProperty("object")||e.hasOwnProperty("value")?Object:e.hasOwnProperty("unitQuaternion")?Ze.Z:e.hasOwnProperty("shadowMode")?Be.Z:e.hasOwnProperty("string")?String:e.hasOwnProperty("stripeOrientation")?At:e.hasOwnProperty("wsen")||e.hasOwnProperty("wsenDegrees")?ve.Z:e.hasOwnProperty("uri")?Fe:e.hasOwnProperty("verticalOrigin")?Re.Z:Object}const ui={HERMITE:he,LAGRANGE:me,LINEAR:ge.Z};function di(e,t){const i=e.interpolationAlgorithm,n=e.interpolationDegree;((0,f.Z)(i)||(0,f.Z)(n))&&t.setInterpolationOptions({interpolationAlgorithm:ui[i],interpolationDegree:n});const r=e.forwardExtrapolationType;(0,f.Z)(r)&&(t.forwardExtrapolationType=se.Z[r]);const o=e.forwardExtrapolationDuration;(0,f.Z)(o)&&(t.forwardExtrapolationDuration=o);const s=e.backwardExtrapolationType;(0,f.Z)(s)&&(t.backwardExtrapolationType=se.Z[s]);const a=e.backwardExtrapolationDuration;(0,f.Z)(a)&&(t.backwardExtrapolationDuration=a)}const hi={iso8601:void 0};function pi(e){if((0,f.Z)(e))return hi.iso8601=e,Ae.Z.fromIso8601(hi)}function fi(e){const t=pe.Z.MAXIMUM_INTERVAL.clone();return t.data=e,t}function mi(e){const t=new V.Z;return t.intervals.addInterval(fi(e)),t}function gi(e){const t=new G.Z(e.referenceFrame);return t.intervals.addInterval(fi(e)),t}function _i(e,t,i,n,r,o,s){let a,l,c,u=pi(n.interval);(0,f.Z)(r)&&(u=(0,f.Z)(u)?Ae.Z.intersect(u,r,ni):r);const m=!(0,f.Z)(n.reference)&&!(0,f.Z)(n.velocityReference),g=(0,f.Z)(u)&&!u.equals(pe.Z.MAXIMUM_INTERVAL);if(!0===n.delete)return g?yi(t[i],u):void(t[i]=void 0);let _=!1;if(m){if(l=function(e,t,i){switch(e){case X.Z:return X.Z[(0,p.Z)(t.arcType,t)];case Array:return t.array;case Boolean:return(0,p.Z)(t.boolean,t);case $.Z:return t.boundingRectangle;case d.Z:return t.cartesian2;case Y.Z:return si(t);case Xt:return function(e){const t=si(e);if(3===t.length)return ai(t,0),t;for(let e=1;e<t.length;e+=4)ai(t,e);return t}(t);case h.Z:return function(e){let t=e.rgbaf;if((0,f.Z)(t))return t;const i=e.rgba;if(!(0,f.Z)(i))return;const n=i.length;if(n===h.Z.packedLength)return[h.Z.byteToFloat(i[0]),h.Z.byteToFloat(i[1]),h.Z.byteToFloat(i[2]),h.Z.byteToFloat(i[3])];t=new Array(n);for(let e=0;e<n;e+=5)t[e]=i[e],t[e+1]=h.Z.byteToFloat(i[e+1]),t[e+2]=h.Z.byteToFloat(i[e+2]),t[e+3]=h.Z.byteToFloat(i[e+3]),t[e+4]=h.Z.byteToFloat(i[e+4]);return t}(t);case Ee.Z:return Ee.Z[(0,p.Z)(t.classificationType,t)];case Me.Z:return Me.Z[(0,p.Z)(t.colorBlendMode,t)];case ie.Z:return ie.Z[(0,p.Z)(t.cornerType,t)];case ke.Z:return ke.Z[(0,p.Z)(t.heightReference,t)];case Ie.Z:return Ie.Z[(0,p.Z)(t.horizontalOrigin,t)];case Image:return oi(t,i);case fe.Z:return fe.Z.fromIso8601((0,p.Z)(t.date,t));case Oe.Z:return Oe.Z[(0,p.Z)(t.labelStyle,t)];case Number:return(0,p.Z)(t.number,t);case _e.Z:return t.nearFarScalar;case re.Z:return t.distanceDisplayCondition;case Object:return(0,p.Z)((0,p.Z)(t.object,t.value),t);case Ze.Z:return function(e){const t=e.unitQuaternion;if((0,f.Z)(t)){if(4===t.length)return li(t,0),t;for(let e=1;e<t.length;e+=5)li(t,e)}return t}(t);case Ct:return(0,p.Z)(t.number,t);case Be.Z:return Be.Z[(0,p.Z)((0,p.Z)(t.shadowMode,t.shadows),t)];case String:return(0,p.Z)(t.string,t);case At:return At[(0,p.Z)(t.stripeOrientation,t)];case ve.Z:return function(e){let t=e.wsen;if((0,f.Z)(t))return t;const i=e.wsenDegrees;if(!(0,f.Z)(i))return;const n=i.length;if(n===ve.Z.packedLength)return[T.Z.toRadians(i[0]),T.Z.toRadians(i[1]),T.Z.toRadians(i[2]),T.Z.toRadians(i[3])];t=new Array(n);for(let e=0;e<n;e+=5)t[e]=i[e],t[e+1]=T.Z.toRadians(i[e+1]),t[e+2]=T.Z.toRadians(i[e+2]),t[e+3]=T.Z.toRadians(i[e+3]),t[e+4]=T.Z.toRadians(i[e+4]);return t}(t);case Fe:return oi(t,i);case Re.Z:return Re.Z[(0,p.Z)(t.verticalOrigin,t)];default:throw new xe.Z(e)}}(e,n,o),!(0,f.Z)(l))return;a=(0,p.Z)(e.packedLength,1),c=(0,p.Z)(l.length,1),_=!(0,f.Z)(n.array)&&"string"!=typeof l&&c>a&&e!==Object}const y="function"==typeof e.unpack&&e!==Ct;if(!_&&!g)return void(t[i]=m?new K.Z(y?e.unpack(l,0):l):Qt(e,s,n));let Z,v=t[i];const b=n.epoch;if((0,f.Z)(b)&&(Z=fe.Z.fromIso8601(b)),_&&!g)return v instanceof Tt.Z||(t[i]=v=new Tt.Z(e)),v.addSamplesPackedArray(l,Z),void di(n,v);let w;if(!_&&g)return u=u.clone(),u.data=m?y?e.unpack(l,0):l:Qt(e,s,n),(0,f.Z)(v)||(t[i]=v=m?new Rt:new V.Z),void(m&&v instanceof Rt?v.intervals.addInterval(u):v instanceof V.Z?(m&&(u.data=new K.Z(u.data)),v.intervals.addInterval(u)):(t[i]=v=mi(v),m&&(u.data=new K.Z(u.data)),v.intervals.addInterval(u)));(0,f.Z)(v)||(t[i]=v=new V.Z),v instanceof V.Z||(t[i]=v=mi(v));const x=v.intervals;w=x.findInterval(u),(0,f.Z)(w)&&w.data instanceof Tt.Z||(w=u.clone(),w.data=new Tt.Z(e),x.addInterval(w)),w.data.addSamplesPackedArray(l,Z),di(n,w.data)}function yi(e,t){if(e instanceof Tt.Z)e.removeSamples(t);else if(e instanceof Rt)e.intervals.removeInterval(t);else if(e instanceof V.Z){const i=e.intervals;for(let e=0;e<i.length;++e){const n=Ae.Z.intersect(i.get(e),t,ni);n.isEmpty||yi(n.data,t)}i.removeInterval(t)}}function Zi(e,t,i,n,r,o,s){if((0,f.Z)(n))if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)_i(e,t,i,n[a],r,o,s);else _i(e,t,i,n,r,o,s)}function vi(e,t,i,n,r,o){let s=pi(i.interval);(0,f.Z)(n)&&(s=(0,f.Z)(s)?Ae.Z.intersect(s,n,ni):n);const a=(0,f.Z)(i.cartesianVelocity)?1:0,l=Y.Z.packedLength*(a+1);let c,u;const d=!(0,f.Z)(i.reference),h=(0,f.Z)(s)&&!s.equals(pe.Z.MAXIMUM_INTERVAL);if(!0===i.delete)return h?bi(e[t],s):void(e[t]=void 0);let m,g=!1;if(d&&((0,f.Z)(i.referenceFrame)&&(m=be.Z[i.referenceFrame]),m=(0,p.Z)(m,be.Z.FIXED),c=si(i),u=(0,p.Z)(c.length,1),g=u>l),!g&&!h)return void(e[t]=d?new z.Z(Y.Z.unpack(c),m):Yt(o,i.reference));let _,y=e[t];const Z=i.epoch;if((0,f.Z)(Z)&&(_=fe.Z.fromIso8601(Z)),g&&!h)return y instanceof St.Z&&(!(0,f.Z)(m)||y.referenceFrame===m)||(e[t]=y=new St.Z(m,a)),y.addSamplesPackedArray(c,_),void di(i,y);let v;if(!g&&h)return s=s.clone(),s.data=d?Y.Z.unpack(c):Yt(o,i.reference),(0,f.Z)(y)||(y=d?new Ot.Z(m):new G.Z(m),e[t]=y),void(d&&y instanceof Ot.Z&&(0,f.Z)(m)&&y.referenceFrame===m?y.intervals.addInterval(s):y instanceof G.Z?(d&&(s.data=new z.Z(s.data,m)),y.intervals.addInterval(s)):(e[t]=y=gi(y),d&&(s.data=new z.Z(s.data,m)),y.intervals.addInterval(s)));(0,f.Z)(y)?y instanceof G.Z||(e[t]=y=gi(y)):e[t]=y=new G.Z(m);const b=y.intervals;v=b.findInterval(s),(0,f.Z)(v)&&v.data instanceof St.Z&&(!(0,f.Z)(m)||v.data.referenceFrame===m)||(v=s.clone(),v.data=new St.Z(m,a),b.addInterval(v)),v.data.addSamplesPackedArray(c,_),di(i,v.data)}function bi(e,t){if(e instanceof St.Z)e.removeSamples(t);else if(e instanceof Ot.Z)e.intervals.removeInterval(t);else if(e instanceof G.Z){const i=e.intervals;for(let e=0;e<i.length;++e){const n=Ae.Z.intersect(i.get(e),t,ni);n.isEmpty||bi(n.data,t)}i.removeInterval(t)}}function wi(e,t,i,n,r,o){if((0,f.Z)(i))if(Array.isArray(i))for(let r=0,s=i.length;r<s;++r)vi(e,t,i[r],n,0,o);else vi(e,t,i,n,0,o)}function xi(e,t,i,n){(0,f.Z)(i.references)?Ti(e,t,i.references,i.interval,n,vt,V.Z):((0,f.Z)(i.cartesian2)?i.array=d.Z.unpackArray(i.cartesian2):(0,f.Z)(i.cartesian)&&(i.array=d.Z.unpackArray(i.cartesian)),(0,f.Z)(i.array)&&Zi(Array,e,t,i,void 0,void 0,n))}function Ci(e,t,i,n,r,o){let s=pi(i.interval);(0,f.Z)(n)&&(s=(0,f.Z)(s)?Ae.Z.intersect(s,n,ni):n);let a,l,c,u=e[t];if((0,f.Z)(s)){u instanceof U||(u=new U,e[t]=u);const i=u.intervals;l=i.findInterval({start:s.start,stop:s.stop}),(0,f.Z)(l)?a=l.data:(l=s.clone(),i.addInterval(l))}else a=u;(0,f.Z)(i.solidColor)?(a instanceof x.Z||(a=new x.Z),c=i.solidColor,Zi(h.Z,a,"color",c.color,void 0,void 0,o)):(0,f.Z)(i.grid)?(a instanceof Xe||(a=new Xe),c=i.grid,Zi(h.Z,a,"color",c.color,void 0,r,o),Zi(Number,a,"cellAlpha",c.cellAlpha,void 0,r,o),Zi(d.Z,a,"lineCount",c.lineCount,void 0,r,o),Zi(d.Z,a,"lineThickness",c.lineThickness,void 0,r,o),Zi(d.Z,a,"lineOffset",c.lineOffset,void 0,r,o)):(0,f.Z)(i.image)?(a instanceof $e.Z||(a=new $e.Z),c=i.image,Zi(Image,a,"image",c.image,void 0,r,o),Zi(d.Z,a,"repeat",c.repeat,void 0,r,o),Zi(h.Z,a,"color",c.color,void 0,r,o),Zi(Boolean,a,"transparent",c.transparent,void 0,r,o)):(0,f.Z)(i.stripe)?(a instanceof It||(a=new It),c=i.stripe,Zi(At,a,"orientation",c.orientation,void 0,r,o),Zi(h.Z,a,"evenColor",c.evenColor,void 0,r,o),Zi(h.Z,a,"oddColor",c.oddColor,void 0,r,o),Zi(Number,a,"offset",c.offset,void 0,r,o),Zi(Number,a,"repeat",c.repeat,void 0,r,o)):(0,f.Z)(i.polylineOutline)?(a instanceof ft||(a=new ft),c=i.polylineOutline,Zi(h.Z,a,"color",c.color,void 0,r,o),Zi(h.Z,a,"outlineColor",c.outlineColor,void 0,r,o),Zi(Number,a,"outlineWidth",c.outlineWidth,void 0,r,o)):(0,f.Z)(i.polylineGlow)?(a instanceof ct||(a=new ct),c=i.polylineGlow,Zi(h.Z,a,"color",c.color,void 0,r,o),Zi(Number,a,"glowPower",c.glowPower,void 0,r,o),Zi(Number,a,"taperPower",c.taperPower,void 0,r,o)):(0,f.Z)(i.polylineArrow)?(a instanceof ot||(a=new ot),c=i.polylineArrow,Zi(h.Z,a,"color",c.color,void 0,void 0,o)):(0,f.Z)(i.polylineDash)?(a instanceof st.Z||(a=new st.Z),c=i.polylineDash,Zi(h.Z,a,"color",c.color,void 0,void 0,o),Zi(h.Z,a,"gapColor",c.gapColor,void 0,void 0,o),Zi(Number,a,"dashLength",c.dashLength,void 0,r,o),Zi(Number,a,"dashPattern",c.dashPattern,void 0,r,o)):(0,f.Z)(i.checkerboard)&&(a instanceof w||(a=new w),c=i.checkerboard,Zi(h.Z,a,"evenColor",c.evenColor,void 0,r,o),Zi(h.Z,a,"oddColor",c.oddColor,void 0,r,o),Zi(d.Z,a,"repeat",c.repeat,void 0,r,o)),(0,f.Z)(l)?l.data=a:e[t]=a}function Si(e,t,i,n,r,o){if((0,f.Z)(i))if(Array.isArray(i))for(let s=0,a=i.length;s<a;++s)Ci(e,t,i[s],n,r,o);else Ci(e,t,i,n,r,o)}function Ti(e,t,i,n,r,o,s){const a=i.map((function(e){return Yt(r,e)}));if((0,f.Z)(n)){n=pi(n);let i=e[t];if(!(i instanceof s)){const n=new s;n.intervals.addInterval(fi(i)),e[t]=i=n}n.data=new o(a),i.intervals.addInterval(n)}else e[t]=new o(a)}function Ai(e,t,i,n){const r=i.references;(0,f.Z)(r)?Ti(e,t,r,i.interval,n,vt,V.Z):Zi(Array,e,t,i,void 0,void 0,n)}function Pi(e,t,i,n){if((0,f.Z)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)Ai(e,t,i[r],n);else Ai(e,t,i,n)}function Ei(e,t,i,n){const r=i.references;(0,f.Z)(r)?Ti(e,t,r,i.interval,n,yt,G.Z):((0,f.Z)(i.cartesian)?i.array=Y.Z.unpackArray(i.cartesian):(0,f.Z)(i.cartographicRadians)?i.array=Y.Z.fromRadiansArrayHeights(i.cartographicRadians):(0,f.Z)(i.cartographicDegrees)&&(i.array=Y.Z.fromDegreesArrayHeights(i.cartographicDegrees)),(0,f.Z)(i.array)&&Zi(Array,e,t,i,void 0,void 0,n))}function Mi(e,t,i,n){if((0,f.Z)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)Ei(e,t,i[r],n);else Ei(e,t,i,n)}function ki(e){return Y.Z.unpackArray(e)}function Ii(e){return Y.Z.fromRadiansArrayHeights(e)}function Oi(e){return Y.Z.fromDegreesArrayHeights(e)}function Bi(e,t,i,n){const r=i.references;if((0,f.Z)(r)){const o=r.map((function(e){const t={};return Ti(t,"positions",e,i.interval,n,yt,G.Z),t.positions}));e[t]=new yt(o)}else(0,f.Z)(i.cartesian)?i.array=i.cartesian.map(ki):(0,f.Z)(i.cartographicRadians)?i.array=i.cartographicRadians.map(Ii):(0,f.Z)(i.cartographicDegrees)&&(i.array=i.cartographicDegrees.map(Oi)),(0,f.Z)(i.array)&&Zi(Array,e,t,i,void 0,void 0,n)}function Ri(e,t,i,n,r){let o=pi(t.interval);(0,f.Z)(i)&&(o=(0,f.Z)(o)?Ae.Z.intersect(o,i,ni):i);let s=e.nodeTransformations;const a=Object.keys(t);for(let i=0,l=a.length;i<l;++i){const l=a[i];if("interval"===l)continue;const c=t[l];if(!(0,f.Z)(c))continue;(0,f.Z)(s)||(e.nodeTransformations=s=new bt.Z),s.hasProperty(l)||s.addProperty(l);let u=s[l];(0,f.Z)(u)||(s[l]=u=new et.Z),Zi(Y.Z,u,"translation",c.translation,o,n,r),Zi(Ze.Z,u,"rotation",c.rotation,o,n,r),Zi(Y.Z,u,"scale",c.scale,o,n,r)}}function Fi(e,t,i,n,r){let o=pi(t.interval);(0,f.Z)(i)&&(o=(0,f.Z)(o)?Ae.Z.intersect(o,i,ni):i);let s=e.articulations;const a=Object.keys(t);for(let i=0,l=a.length;i<l;++i){const l=a[i];if("interval"===l)continue;const c=t[l];(0,f.Z)(c)&&((0,f.Z)(s)||(e.articulations=s=new bt.Z),s.hasProperty(l)||s.addProperty(l),Zi(Number,s,l,c,o,n,r))}}function Di(e){this.polygon=e,this._definitionChanged=new m.Z}function Li(e){return e?X.Z.GEODESIC:X.Z.NONE}function Vi(e,t,i,n,r){let o=e.id;if((0,f.Z)(o)||(o=(0,C.Z)()),$t=o,!(0,f.Z)(r._version)&&"document"!==o)throw new xe.Z("The first CZML packet is required to be the document object.");if(!0===e.delete)t.removeById(o);else if("document"===o)!function(e,t){const i=e.version;if((0,f.Z)(i)&&"string"==typeof i){const e=i.split(".");if(2===e.length){if("1"!==e[0])throw new xe.Z("Cesium only supports CZML version 1.");t._version=i}}if(!(0,f.Z)(t._version))throw new xe.Z("CZML version information invalid.  It is expected to be a property on the document object in the <Major>.<Minor> version format.");const n=t._documentPacket;(0,f.Z)(e.name)&&(n.name=e.name);const r=e.clock;if((0,f.Z)(r)){const e=n.clock;(0,f.Z)(e)?(e.interval=(0,p.Z)(r.interval,e.interval),e.currentTime=(0,p.Z)(r.currentTime,e.currentTime),e.range=(0,p.Z)(r.range,e.range),e.step=(0,p.Z)(r.step,e.step),e.multiplier=(0,p.Z)(r.multiplier,e.multiplier)):n.clock={interval:r.interval,currentTime:r.currentTime,range:r.range,step:r.step,multiplier:r.multiplier}}}(e,r);else{const r=t.getOrCreateEntity(o),s=e.parent;(0,f.Z)(s)&&(r.parent=t.getOrCreateEntity(s));for(let o=i.length-1;o>-1;o--)i[o](r,e,t,n)}$t=void 0}function Ni(e,t,i,n){if(!(0,f.Z)(t))throw new S.Z("czml is required.");let r=t,o=(i=(0,p.Z)(i,p.Z.EMPTY_OBJECT)).sourceUri,s=i.credit;if("string"==typeof s&&(s=new ne.Z(s)),e._credit=s,"string"==typeof t||t instanceof we.Z){r=(t=we.Z.createIfNeeded(t)).fetchJson(),o=(0,p.Z)(o,t.clone());const i=e._resourceCredits,n=t.credits;if((0,f.Z)(n)){const e=n.length;for(let t=0;t<e;t++)i.push(n[t])}}return o=we.Z.createIfNeeded(o),De.Z.setLoading(e,!0),Promise.resolve(r).then((function(t){return function(e,t,i,n){De.Z.setLoading(e,!0);const r=e._entityCollection;n&&(e._version=void 0,e._documentPacket=new Ui,r.removeAll()),Gi._processCzml(t,r,i,void 0,e);let o=function(e){let t;const i=e._documentPacket.clock;if(!(0,f.Z)(i)){if(!(0,f.Z)(e._clock)){const i=e._entityCollection.computeAvailability();if(!i.start.equals(pe.Z.MINIMUM_VALUE)){const n=i.start,r=i.stop,o=fe.Z.secondsDifference(r,n),s=Math.round(o/120);return t=new Ue,t.startTime=fe.Z.clone(n),t.stopTime=fe.Z.clone(r),t.clockRange=ee.Z.LOOP_STOP,t.multiplier=s,t.currentTime=fe.Z.clone(n),t.clockStep=te.Z.SYSTEM_CLOCK_MULTIPLIER,e._clock=t,!0}}return!1}(0,f.Z)(e._clock)?t=e._clock.clone():(t=new Ue,t.startTime=pe.Z.MINIMUM_VALUE.clone(),t.stopTime=pe.Z.MAXIMUM_VALUE.clone(),t.currentTime=pe.Z.MINIMUM_VALUE.clone(),t.clockRange=ee.Z.LOOP_STOP,t.clockStep=te.Z.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=1);const n=pi(i.interval);return(0,f.Z)(n)&&(t.startTime=n.start,t.stopTime=n.stop),(0,f.Z)(i.currentTime)&&(t.currentTime=fe.Z.fromIso8601(i.currentTime)),(0,f.Z)(i.range)&&(t.clockRange=(0,p.Z)(ee.Z[i.range],ee.Z.LOOP_STOP)),(0,f.Z)(i.step)&&(t.clockStep=(0,p.Z)(te.Z[i.step],te.Z.SYSTEM_CLOCK_MULTIPLIER)),(0,f.Z)(i.multiplier)&&(t.multiplier=i.multiplier),!t.equals(e._clock)&&(e._clock=t.clone(e._clock),!0)}(e);const s=e._documentPacket;return(0,f.Z)(s.name)&&e._name!==s.name?(e._name=s.name,o=!0):!(0,f.Z)(e._name)&&(0,f.Z)(i)&&(e._name=(0,ae.Z)(i.getUrlComponent()),o=!0),De.Z.setLoading(e,!1),o&&e._changed.raiseEvent(e),e}(e,t,o,n)})).catch((function(t){return De.Z.setLoading(e,!1),e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}function Ui(){this.name=void 0,this.clock=void 0}function Gi(e){this._name=e,this._changed=new m.Z,this._error=new m.Z,this._isLoading=!1,this._loading=new m.Z,this._clock=void 0,this._documentPacket=new Ui,this._version=void 0,this._entityCollection=new P.Z(this),this._entityCluster=new Ke.Z,this._credit=void 0,this._resourceCredits=[]}Object.defineProperties(Di.prototype,{isConstant:{get:function(){const e=this.polygon._positions,t=this.polygon._holes;return(!(0,f.Z)(e)||e.isConstant)&&(!(0,f.Z)(t)||t.isConstant)}},definitionChanged:{get:function(){return this._definitionChanged}}}),Di.prototype.getValue=function(e,t){let i,n;return(0,f.Z)(this.polygon._positions)&&(i=this.polygon._positions.getValue(e)),(0,f.Z)(this.polygon._holes)&&(n=this.polygon._holes.getValue(e),(0,f.Z)(n)&&(n=n.map((function(e){return new ye.Z(e)})))),(0,f.Z)(t)?(t.positions=i,t.holes=n,t):new ye.Z(i,n)},Di.prototype.equals=function(e){return this===e||e instanceof Di&&_.Z.equals(this.polygon._positions,e.polygon._positions)&&_.Z.equals(this.polygon._holes,e.polygon._holes)},Gi.load=function(e,t){return(new Gi).load(e,t)},Object.defineProperties(Gi.prototype,{name:{get:function(){return this._name}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,f.Z)(e))throw new S.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),Gi.updaters=[function(e,t,i,r){const o=t.billboard;if(!(0,f.Z)(o))return;const s=pi(o.interval);let a=e.billboard;(0,f.Z)(a)||(e.billboard=a=new n.Z),Zi(Boolean,a,"show",o.show,s,r,i),Zi(Image,a,"image",o.image,s,r,i),Zi(Number,a,"scale",o.scale,s,r,i),Zi(d.Z,a,"pixelOffset",o.pixelOffset,s,r,i),Zi(Y.Z,a,"eyeOffset",o.eyeOffset,s,r,i),Zi(Ie.Z,a,"horizontalOrigin",o.horizontalOrigin,s,r,i),Zi(Re.Z,a,"verticalOrigin",o.verticalOrigin,s,r,i),Zi(ke.Z,a,"heightReference",o.heightReference,s,r,i),Zi(h.Z,a,"color",o.color,s,r,i),Zi(Ct,a,"rotation",o.rotation,s,r,i),function(e,t,i,n,r){(0,f.Z)(t)&&Zi(Xt,e,"alignedAxis",t,i,n,r)}(a,o.alignedAxis,s,r,i),Zi(Boolean,a,"sizeInMeters",o.sizeInMeters,s,r,i),Zi(Number,a,"width",o.width,s,r,i),Zi(Number,a,"height",o.height,s,r,i),Zi(_e.Z,a,"scaleByDistance",o.scaleByDistance,s,r,i),Zi(_e.Z,a,"translucencyByDistance",o.translucencyByDistance,s,r,i),Zi(_e.Z,a,"pixelOffsetScaleByDistance",o.pixelOffsetScaleByDistance,s,r,i),Zi($.Z,a,"imageSubRegion",o.imageSubRegion,s,r,i),Zi(re.Z,a,"distanceDisplayCondition",o.distanceDisplayCondition,s,r,i),Zi(Number,a,"disableDepthTestDistance",o.disableDepthTestDistance,s,r,i)},function(e,t,i,n){const r=t.box;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.box;(0,f.Z)(s)||(e.box=s=new a.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Y.Z,s,"dimensions",r.dimensions,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.corridor;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.corridor;(0,f.Z)(s)||(e.corridor=s=new H.Z),Zi(Boolean,s,"show",r.show,o,n,i),Mi(s,"positions",r.positions,i),Zi(Number,s,"width",r.width,o,n,i),Zi(Number,s,"height",r.height,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Zi(ke.Z,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Zi(ie.Z,s,"cornerType",r.cornerType,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Ee.Z,s,"classificationType",r.classificationType,o,n,i),Zi(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.cylinder;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.cylinder;(0,f.Z)(s)||(e.cylinder=s=new J.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Number,s,"length",r.length,o,n,i),Zi(Number,s,"topRadius",r.topRadius,o,n,i),Zi(Number,s,"bottomRadius",r.bottomRadius,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Number,s,"numberOfVerticalLines",r.numberOfVerticalLines,o,n,i),Zi(Number,s,"slices",r.slices,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.ellipse;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.ellipse;(0,f.Z)(s)||(e.ellipse=s=new Ge.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Number,s,"semiMajorAxis",r.semiMajorAxis,o,n,i),Zi(Number,s,"semiMinorAxis",r.semiMinorAxis,o,n,i),Zi(Number,s,"height",r.height,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Zi(ke.Z,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Zi(Ct,s,"rotation",r.rotation,o,n,i),Zi(Ct,s,"stRotation",r.stRotation,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Number,s,"numberOfVerticalLines",r.numberOfVerticalLines,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Ee.Z,s,"classificationType",r.classificationType,o,n,i),Zi(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.ellipsoid;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.ellipsoid;(0,f.Z)(s)||(e.ellipsoid=s=new ze.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Y.Z,s,"radii",r.radii,o,n,i),Zi(Y.Z,s,"innerRadii",r.innerRadii,o,n,i),Zi(Number,s,"minimumClock",r.minimumClock,o,n,i),Zi(Number,s,"maximumClock",r.maximumClock,o,n,i),Zi(Number,s,"minimumCone",r.minimumCone,o,n,i),Zi(Number,s,"maximumCone",r.maximumCone,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Number,s,"stackPartitions",r.stackPartitions,o,n,i),Zi(Number,s,"slicePartitions",r.slicePartitions,o,n,i),Zi(Number,s,"subdivisions",r.subdivisions,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.label;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.label;(0,f.Z)(s)||(e.label=s=new Ye.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(String,s,"text",r.text,o,n,i),Zi(String,s,"font",r.font,o,n,i),Zi(Oe.Z,s,"style",r.style,o,n,i),Zi(Number,s,"scale",r.scale,o,n,i),Zi(Boolean,s,"showBackground",r.showBackground,o,n,i),Zi(h.Z,s,"backgroundColor",r.backgroundColor,o,n,i),Zi(d.Z,s,"backgroundPadding",r.backgroundPadding,o,n,i),Zi(d.Z,s,"pixelOffset",r.pixelOffset,o,n,i),Zi(Y.Z,s,"eyeOffset",r.eyeOffset,o,n,i),Zi(Ie.Z,s,"horizontalOrigin",r.horizontalOrigin,o,n,i),Zi(Re.Z,s,"verticalOrigin",r.verticalOrigin,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(h.Z,s,"fillColor",r.fillColor,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(_e.Z,s,"translucencyByDistance",r.translucencyByDistance,o,n,i),Zi(_e.Z,s,"pixelOffsetScaleByDistance",r.pixelOffsetScaleByDistance,o,n,i),Zi(_e.Z,s,"scaleByDistance",r.scaleByDistance,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Number,s,"disableDepthTestDistance",r.disableDepthTestDistance,o,n,i)},function(e,t,i,n){const r=t.model;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s,a,l=e.model;(0,f.Z)(l)||(e.model=l=new Qe.Z),Zi(Boolean,l,"show",r.show,o,n,i),Zi(Fe,l,"uri",r.gltf,o,n,i),Zi(Number,l,"scale",r.scale,o,n,i),Zi(Number,l,"minimumPixelSize",r.minimumPixelSize,o,n,i),Zi(Number,l,"maximumScale",r.maximumScale,o,n,i),Zi(Boolean,l,"incrementallyLoadTextures",r.incrementallyLoadTextures,o,n,i),Zi(Boolean,l,"runAnimations",r.runAnimations,o,n,i),Zi(Boolean,l,"clampAnimations",r.clampAnimations,o,n,i),Zi(Be.Z,l,"shadows",r.shadows,o,n,i),Zi(ke.Z,l,"heightReference",r.heightReference,o,n,i),Zi(h.Z,l,"silhouetteColor",r.silhouetteColor,o,n,i),Zi(Number,l,"silhouetteSize",r.silhouetteSize,o,n,i),Zi(h.Z,l,"color",r.color,o,n,i),Zi(Me.Z,l,"colorBlendMode",r.colorBlendMode,o,n,i),Zi(Number,l,"colorBlendAmount",r.colorBlendAmount,o,n,i),Zi(re.Z,l,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i);const c=r.nodeTransformations;if((0,f.Z)(c))if(Array.isArray(c))for(s=0,a=c.length;s<a;++s)Ri(l,c[s],o,n,i);else Ri(l,c,o,n,i);const u=r.articulations;if((0,f.Z)(u))if(Array.isArray(u))for(s=0,a=u.length;s<a;++s)Fi(l,u[s],o,n,i);else Fi(l,u,o,n,i)},function(e,t,i,n){const r=t.name;(0,f.Z)(r)&&(e.name=t.name)},function(e,t,i,n){const r=t.description;(0,f.Z)(r)&&Zi(String,e,"description",r,void 0,n,i)},function(e,t,i,n){const r=t.path;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.path;(0,f.Z)(s)||(e.path=s=new tt.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Number,s,"leadTime",r.leadTime,o,n,i),Zi(Number,s,"trailTime",r.trailTime,o,n,i),Zi(Number,s,"width",r.width,o,n,i),Zi(Number,s,"resolution",r.resolution,o,n,i),Si(s,"material",r.material,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.point;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.point;(0,f.Z)(s)||(e.point=s=new it.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Number,s,"pixelSize",r.pixelSize,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(h.Z,s,"color",r.color,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(_e.Z,s,"scaleByDistance",r.scaleByDistance,o,n,i),Zi(_e.Z,s,"translucencyByDistance",r.translucencyByDistance,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Number,s,"disableDepthTestDistance",r.disableDepthTestDistance,o,n,i)},function(e,t,i,n){const r=t.polygon;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.polygon;(0,f.Z)(s)||(e.polygon=s=new nt.Z),Zi(Boolean,s,"show",r.show,o,n,i),Mi(s,"_positions",r.positions,i),function(e,t,i,n){if((0,f.Z)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;++r)Bi(e,t,i[r],n);else Bi(e,t,i,n)}(s,"_holes",r.holes,i),((0,f.Z)(s._positions)||(0,f.Z)(s._holes))&&(s.hierarchy=new Di(s)),Zi(Number,s,"height",r.height,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Zi(ke.Z,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Zi(Ct,s,"stRotation",r.stRotation,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Boolean,s,"perPositionHeight",r.perPositionHeight,o,n,i),Zi(Boolean,s,"closeTop",r.closeTop,o,n,i),Zi(Boolean,s,"closeBottom",r.closeBottom,o,n,i),Zi(X.Z,s,"arcType",r.arcType,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Ee.Z,s,"classificationType",r.classificationType,o,n,i),Zi(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.polyline;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.polyline;if((0,f.Z)(s)||(e.polyline=s=new ut.Z),Zi(Boolean,s,"show",r.show,o,n,i),Mi(s,"positions",r.positions,i),Zi(Number,s,"width",r.width,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Si(s,"material",r.material,o,n,i),Si(s,"depthFailMaterial",r.depthFailMaterial,o,n,i),Zi(X.Z,s,"arcType",r.arcType,o,n,i),Zi(Boolean,s,"clampToGround",r.clampToGround,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Ee.Z,s,"classificationType",r.classificationType,o,n,i),Zi(Number,s,"zIndex",r.zIndex,o,n,i),(0,f.Z)(r.followSurface)&&!(0,f.Z)(r.arcType)){const e={};Zi(Boolean,e,"followSurface",r.followSurface,o,n,i),s.arcType=(a=e.followSurface,c=Li,new l.Z((function(e,t){return c(a.getValue(e,t))}),a.isConstant))}var a,c},function(e,t,i,n){const r=t.polylineVolume;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.polylineVolume;(0,f.Z)(s)||(e.polylineVolume=s=new mt.Z),Mi(s,"positions",r.positions,i),function(e,t,i,n){if((0,f.Z)(i))if(Array.isArray(i))for(let r=0,o=i.length;r<o;r++)xi(e,t,i[r],n);else xi(e,t,i,n)}(s,"shape",r.shape,i),Zi(Boolean,s,"show",r.show,o,n,i),Zi(ie.Z,s,"cornerType",r.cornerType,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.properties;if((0,f.Z)(r)){(0,f.Z)(e.properties)||(e.properties=new bt.Z);for(const t in r)if(r.hasOwnProperty(t)){e.properties.hasProperty(t)||e.properties.addProperty(t);const o=r[t];if(Array.isArray(o))for(let r=0,s=o.length;r<s;++r)_i(ci(o[r]),e.properties,t,o[r],void 0,n,i);else _i(ci(o),e.properties,t,o,void 0,n,i)}}},function(e,t,i,n){const r=t.rectangle;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.rectangle;(0,f.Z)(s)||(e.rectangle=s=new wt.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(ve.Z,s,"coordinates",r.coordinates,o,n,i),Zi(Number,s,"height",r.height,o,n,i),Zi(ke.Z,s,"heightReference",r.heightReference,o,n,i),Zi(Number,s,"extrudedHeight",r.extrudedHeight,o,n,i),Zi(ke.Z,s,"extrudedHeightReference",r.extrudedHeightReference,o,n,i),Zi(Ct,s,"rotation",r.rotation,o,n,i),Zi(Ct,s,"stRotation",r.stRotation,o,n,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i),Zi(Ee.Z,s,"classificationType",r.classificationType,o,n,i),Zi(Number,s,"zIndex",r.zIndex,o,n,i)},function(e,t,i,n){const r=t.position;(0,f.Z)(r)&&wi(e,"position",r,void 0,0,i)},function(e,t,i,n){const r=t.tileset;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.tileset;(0,f.Z)(s)||(e.tileset=s=new c.Z),Zi(Boolean,s,"show",r.show,o,n,i),Zi(Fe,s,"uri",r.uri,o,n,i),Zi(Number,s,"maximumScreenSpaceError",r.maximumScreenSpaceError,o,n,i)},function(e,t,i,n){const r=t.viewFrom;(0,f.Z)(r)&&Zi(Y.Z,e,"viewFrom",r,void 0,n,i)},function(e,t,i,n){const r=t.wall;if(!(0,f.Z)(r))return;const o=pi(r.interval);let s=e.wall;(0,f.Z)(s)||(e.wall=s=new Jt.Z),Zi(Boolean,s,"show",r.show,o,n,i),Mi(s,"positions",r.positions,i),Pi(s,"minimumHeights",r.minimumHeights,i),Pi(s,"maximumHeights",r.maximumHeights,i),Zi(Number,s,"granularity",r.granularity,o,n,i),Zi(Boolean,s,"fill",r.fill,o,n,i),Si(s,"material",r.material,o,n,i),Zi(Boolean,s,"outline",r.outline,o,n,i),Zi(h.Z,s,"outlineColor",r.outlineColor,o,n,i),Zi(Number,s,"outlineWidth",r.outlineWidth,o,n,i),Zi(Be.Z,s,"shadows",r.shadows,o,n,i),Zi(re.Z,s,"distanceDisplayCondition",r.distanceDisplayCondition,o,n,i)},function(e,t,i,n){const r=t.orientation;(0,f.Z)(r)&&Zi(Ze.Z,e,"orientation",r,void 0,n,i)},function(e,t,i,n){const r=t.availability;if(!(0,f.Z)(r))return;let o;if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)(0,f.Z)(o)||(o=new Pe.Z),o.addInterval(pi(r[e]));else o=new Pe.Z,o.addInterval(pi(r));e.availability=o}],Gi.prototype.process=function(e,t){return Ni(this,e,t,!1)},Gi.prototype.load=function(e,t){return Ni(this,e,t,!0)},Gi.prototype.update=function(e){return!0},Gi.processPacketData=Zi,Gi.processPositionPacketData=wi,Gi.processMaterialPacketData=Si,Gi._processCzml=function(e,t,i,n,r){if(n=(0,p.Z)(n,Gi.updaters),Array.isArray(e))for(let o=0,s=e.length;o<s;++o)Vi(e[o],t,n,i,r);else Vi(e,t,n,i,r)};const zi=Gi;var Ki=i(883334),qi=i(934135),Hi=i(946931),Wi=i(452741),ji=i(624550),Ji=i(926625),Xi=i(487004),$i=i(745332),Yi=i(674842),Qi=i(636114),en=i(177418);function tn(e){return"boolean"==typeof e}function nn(e,t){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)}function rn(e,t){for(var i=e.length-1;i>=0;i--)!0===t(e[i])&&e.splice(i,1)}function on(e){throw new Error("Unhandled case for value: '".concat(e,"'"))}var sn=/[A-Za-z]/,an=/[\d]/,ln=/\s/,cn=/['"]/,un=/[\x00-\x1F\x7F]/,dn=/A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,hn=dn+/\u2700-\u27bf\udde6-\uddff\ud800-\udbff\udc00-\udfff\ufe0e\ufe0f\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ud83c\udffb-\udfff\u200d\u3299\u3297\u303d\u3030\u24c2\ud83c\udd70-\udd71\udd7e-\udd7f\udd8e\udd91-\udd9a\udde6-\uddff\ude01-\ude02\ude1a\ude2f\ude32-\ude3a\ude50-\ude51\u203c\u2049\u25aa-\u25ab\u25b6\u25c0\u25fb-\u25fe\u00a9\u00ae\u2122\u2139\udc04\u2600-\u26FF\u2b05\u2b06\u2b07\u2b1b\u2b1c\u2b50\u2b55\u231a\u231b\u2328\u23cf\u23e9-\u23f3\u23f8-\u23fa\udccf\u2935\u2934\u2190-\u21ff/.source+/\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D4-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D01-\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF5\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F/.source,pn=/0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19/.source,fn=(new RegExp("[".concat(dn+pn,"]")),hn+pn),mn=new RegExp("[".concat(fn,"]")),gn=function(){function e(e){void 0===e&&(e={}),this.tagName="",this.attrs={},this.innerHTML="",this.tagName=e.tagName||"",this.attrs=e.attrs||{},this.innerHTML=e.innerHtml||e.innerHTML||""}return e.prototype.setTagName=function(e){return this.tagName=e,this},e.prototype.getTagName=function(){return this.tagName||""},e.prototype.setAttr=function(e,t){return this.getAttrs()[e]=t,this},e.prototype.getAttr=function(e){return this.getAttrs()[e]},e.prototype.setAttrs=function(e){return Object.assign(this.getAttrs(),e),this},e.prototype.getAttrs=function(){return this.attrs||(this.attrs={})},e.prototype.setClass=function(e){return this.setAttr("class",e)},e.prototype.addClass=function(e){for(var t,i=this.getClass(),n=i?i.split(ln):[],r=e.split(ln);t=r.shift();)-1===n.indexOf(t)&&n.push(t);return this.getAttrs().class=n.join(" "),this},e.prototype.removeClass=function(e){for(var t,i=this.getClass(),n=i?i.split(ln):[],r=e.split(ln);n.length&&(t=r.shift());){var o=n.indexOf(t);-1!==o&&n.splice(o,1)}return this.getAttrs().class=n.join(" "),this},e.prototype.getClass=function(){return this.getAttrs().class||""},e.prototype.hasClass=function(e){return-1!==(" "+this.getClass()+" ").indexOf(" "+e+" ")},e.prototype.setInnerHTML=function(e){return this.innerHTML=e,this},e.prototype.setInnerHtml=function(e){return this.setInnerHTML(e)},e.prototype.getInnerHTML=function(){return this.innerHTML||""},e.prototype.getInnerHtml=function(){return this.getInnerHTML()},e.prototype.toAnchorString=function(){var e=this.getTagName(),t=this.buildAttrsStr();return["<",e,t=t?" "+t:"",">",this.getInnerHtml(),"</",e,">"].join("")},e.prototype.buildAttrsStr=function(){if(!this.attrs)return"";var e=this.getAttrs(),t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+'="'+e[i]+'"');return t.join(" ")},e}(),_n=function(){function e(e){void 0===e&&(e={}),this.newWindow=!1,this.truncate={},this.className="",this.newWindow=e.newWindow||!1,this.truncate=e.truncate||{},this.className=e.className||""}return e.prototype.build=function(e){return new gn({tagName:"a",attrs:this.createAttrs(e),innerHtml:this.processAnchorText(e.getAnchorText())})},e.prototype.createAttrs=function(e){var t={href:e.getAnchorHref()},i=this.createCssClass(e);return i&&(t.class=i),this.newWindow&&(t.target="_blank",t.rel="noopener noreferrer"),this.truncate&&this.truncate.length&&this.truncate.length<e.getAnchorText().length&&(t.title=e.getAnchorHref()),t},e.prototype.createCssClass=function(e){var t=this.className;if(t){for(var i=[t],n=e.getCssClassSuffixes(),r=0,o=n.length;r<o;r++)i.push(t+"-"+n[r]);return i.join(" ")}return""},e.prototype.processAnchorText=function(e){return this.doTruncate(e)},e.prototype.doTruncate=function(e){var t=this.truncate;if(!t||!t.length)return e;var i=t.length,n=t.location;return"smart"===n?function(e,t,i){var n,r;null==i?(i="&hellip;",r=3,n=8):(r=i.length,n=i.length);var o=function(e){var t="";return e.scheme&&e.host&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t},s=function(e,t){var n=t/2,r=Math.ceil(n),o=-1*Math.floor(n),s="";return o<0&&(s=e.substr(o)),e.substr(0,r)+i+s};if(e.length<=t)return e;var a=t-r,l=function(e){var t={},i=e,n=i.match(/^([a-z]+):\/\//i);return n&&(t.scheme=n[1],i=i.substr(n[0].length)),(n=i.match(/^(.*?)(?=(\?|#|\/|$))/i))&&(t.host=n[1],i=i.substr(n[0].length)),(n=i.match(/^\/(.*?)(?=(\?|#|$))/i))&&(t.path=n[1],i=i.substr(n[0].length)),(n=i.match(/^\?(.*?)(?=(#|$))/i))&&(t.query=n[1],i=i.substr(n[0].length)),(n=i.match(/^#(.*?)$/i))&&(t.fragment=n[1]),t}(e);if(l.query){var c=l.query.match(/^(.*?)(?=(\?|\#))(.*?)$/i);c&&(l.query=l.query.substr(0,c[1].length),e=o(l))}if(e.length<=t)return e;if(l.host&&(l.host=l.host.replace(/^www\./,""),e=o(l)),e.length<=t)return e;var u="";if(l.host&&(u+=l.host),u.length>=a)return l.host.length==t?(l.host.substr(0,t-r)+i).substr(0,a+n):s(u,a).substr(0,a+n);var d="";if(l.path&&(d+="/"+l.path),l.query&&(d+="?"+l.query),d){if((u+d).length>=a)return(u+d).length==t?(u+d).substr(0,t):(u+s(d,a-u.length)).substr(0,a+n);u+=d}if(l.fragment){var h="#"+l.fragment;if((u+h).length>=a)return(u+h).length==t?(u+h).substr(0,t):(u+s(h,a-u.length)).substr(0,a+n);u+=h}if(l.scheme&&l.host){var p=l.scheme+"://";if((u+p).length<a)return(p+u).substr(0,t)}if(u.length<=t)return u;var f="";return a>0&&(f=u.substr(-1*Math.floor(a/2))),(u.substr(0,Math.ceil(a/2))+i+f).substr(0,a+n)}(e,i):"middle"===n?function(e,t,i){if(e.length<=t)return e;var n,r;null==i?(i="&hellip;",n=8,r=3):(n=i.length,r=i.length);var o=t-r,s="";return o>0&&(s=e.substr(-1*Math.floor(o/2))),(e.substr(0,Math.ceil(o/2))+i+s).substr(0,o+n)}(e,i):function(e,t,i){return function(e,t,i){var n;return e.length>t&&(null==i?(i="&hellip;",n=3):n=i.length,e=e.substring(0,t-n)+i),e}(e,t,void 0)}(e,i)},e}(),yn=function(e,t){return yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},yn(e,t)};function Zn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}yn(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var vn=function(){return vn=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},vn.apply(this,arguments)};Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var bn=function(){function e(e){this._=null,this.matchedText="",this.offset=0,this.tagBuilder=e.tagBuilder,this.matchedText=e.matchedText,this.offset=e.offset}return e.prototype.getMatchedText=function(){return this.matchedText},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getOffset=function(){return this.offset},e.prototype.getCssClassSuffixes=function(){return[this.type]},e.prototype.buildTag=function(){return this.tagBuilder.build(this)},e}(),wn=new RegExp("^(?:xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--clchc0ea0b2g2a9gcd|xn--w4r85el8fhu5dnra|northwesternmutual|travelersinsurance|vermögensberatung|xn--5su34j936bgsg|xn--bck1b9a5dre4c|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgberp4a5d4ar|xn--xkc2dl3a5ee0h|vermögensberater|xn--fzys8d69uvgm|xn--mgba7c0bbn0a|xn--mgbcpq6gpa1a|xn--xkc2al3hye2a|americanexpress|kerryproperties|sandvikcoromant|xn--i1b6b1a6a2e|xn--kcrx77d1x4a|xn--lgbbat1ad8j|xn--mgba3a4f16a|xn--mgbaakc7dvf|xn--mgbc0a9azcg|xn--nqv7fs00ema|americanfamily|bananarepublic|cancerresearch|cookingchannel|kerrylogistics|weatherchannel|xn--54b7fta0cc|xn--6qq986b3xl|xn--80aqecdr1a|xn--b4w605ferd|xn--fiq228c5hs|xn--h2breg3eve|xn--jlq480n2rg|xn--jlq61u9w7b|xn--mgba3a3ejt|xn--mgbaam7a8h|xn--mgbayh7gpa|xn--mgbbh1a71e|xn--mgbca7dzdo|xn--mgbi4ecexp|xn--mgbx4cd0ab|xn--rvc1e0am3e|international|lifeinsurance|travelchannel|wolterskluwer|xn--cckwcxetd|xn--eckvdtc9d|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--h2brj9c8c|xn--tiq49xqyj|xn--yfro4i67o|xn--ygbi2ammx|construction|lplfinancial|scholarships|versicherung|xn--3e0b707e|xn--45br5cyl|xn--4dbrk0ce|xn--80adxhks|xn--80asehdb|xn--8y0a063a|xn--gckr3f0f|xn--mgb9awbf|xn--mgbab2bd|xn--mgbgu82a|xn--mgbpl2fh|xn--mgbt3dhd|xn--mk1bu44c|xn--ngbc5azd|xn--ngbe9e0a|xn--ogbpf8fl|xn--qcka1pmc|accountants|barclaycard|blackfriday|blockbuster|bridgestone|calvinklein|contractors|creditunion|engineering|enterprises|foodnetwork|investments|kerryhotels|lamborghini|motorcycles|olayangroup|photography|playstation|productions|progressive|redumbrella|williamhill|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--3bst00m|xn--3ds443g|xn--3hcrj9c|xn--42c2d9a|xn--45brj9c|xn--55qw42g|xn--6frz82g|xn--80ao21a|xn--9krt00a|xn--cck2b3b|xn--czr694b|xn--d1acj3b|xn--efvy88h|xn--fct429k|xn--fjq720a|xn--flw351e|xn--g2xx48c|xn--gecrj9c|xn--gk3at1e|xn--h2brj9c|xn--hxt814e|xn--imr513n|xn--j6w193g|xn--jvr189m|xn--kprw13d|xn--kpry57d|xn--mgbbh1a|xn--mgbtx2b|xn--mix891f|xn--nyqy26a|xn--otu796d|xn--pgbs0dh|xn--q9jyb4c|xn--rhqv96g|xn--rovu88b|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--vuq861b|xn--w4rs40l|xn--xhq521b|xn--zfr164b|சிங்கப்பூர்|accountant|apartments|associates|basketball|bnpparibas|boehringer|capitalone|consulting|creditcard|cuisinella|eurovision|extraspace|foundation|healthcare|immobilien|industries|management|mitsubishi|nextdirect|properties|protection|prudential|realestate|republican|restaurant|schaeffler|tatamotors|technology|university|vlaanderen|volkswagen|xn--30rr7y|xn--3pxu8k|xn--45q11c|xn--4gbrim|xn--55qx5d|xn--5tzm5g|xn--80aswg|xn--90a3ac|xn--9dbq2a|xn--9et52u|xn--c2br7g|xn--cg4bki|xn--czrs0t|xn--czru2d|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--io0a7i|xn--kput3i|xn--mxtq1m|xn--o3cw4h|xn--pssy2u|xn--q7ce6a|xn--unup4y|xn--wgbh1c|xn--wgbl6a|xn--y9a3aq|accenture|alfaromeo|allfinanz|amsterdam|analytics|aquarelle|barcelona|bloomberg|christmas|community|directory|education|equipment|fairwinds|financial|firestone|fresenius|frontdoor|furniture|goldpoint|hisamitsu|homedepot|homegoods|homesense|institute|insurance|kuokgroup|lancaster|landrover|lifestyle|marketing|marshalls|melbourne|microsoft|panasonic|passagens|pramerica|richardli|shangrila|solutions|statebank|statefarm|stockholm|travelers|vacations|xn--90ais|xn--c1avg|xn--d1alf|xn--e1a4c|xn--fhbei|xn--j1aef|xn--j1amh|xn--l1acc|xn--ngbrx|xn--nqv7f|xn--p1acf|xn--qxa6a|xn--tckwe|xn--vhquv|yodobashi|موريتانيا|abudhabi|airforce|allstate|attorney|barclays|barefoot|bargains|baseball|boutique|bradesco|broadway|brussels|builders|business|capetown|catering|catholic|cipriani|cityeats|cleaning|clinique|clothing|commbank|computer|delivery|deloitte|democrat|diamonds|discount|discover|download|engineer|ericsson|etisalat|exchange|feedback|fidelity|firmdale|football|frontier|goodyear|grainger|graphics|guardian|hdfcbank|helsinki|holdings|hospital|infiniti|ipiranga|istanbul|jpmorgan|lighting|lundbeck|marriott|maserati|mckinsey|memorial|merckmsd|mortgage|observer|partners|pharmacy|pictures|plumbing|property|redstone|reliance|saarland|samsclub|security|services|shopping|showtime|softbank|software|stcgroup|supplies|training|vanguard|ventures|verisign|woodside|xn--90ae|xn--node|xn--p1ai|xn--qxam|yokohama|السعودية|abogado|academy|agakhan|alibaba|android|athleta|auction|audible|auspost|avianca|banamex|bauhaus|bentley|bestbuy|booking|brother|bugatti|capital|caravan|careers|channel|charity|chintai|citadel|clubmed|college|cologne|comcast|company|compare|contact|cooking|corsica|country|coupons|courses|cricket|cruises|dentist|digital|domains|exposed|express|farmers|fashion|ferrari|ferrero|finance|fishing|fitness|flights|florist|flowers|forsale|frogans|fujitsu|gallery|genting|godaddy|grocery|guitars|hamburg|hangout|hitachi|holiday|hosting|hoteles|hotmail|hyundai|ismaili|jewelry|juniper|kitchen|komatsu|lacaixa|lanxess|lasalle|latrobe|leclerc|limited|lincoln|markets|monster|netbank|netflix|network|neustar|okinawa|oldnavy|organic|origins|philips|pioneer|politie|realtor|recipes|rentals|reviews|rexroth|samsung|sandvik|schmidt|schwarz|science|shiksha|singles|staples|storage|support|surgery|systems|temasek|theater|theatre|tickets|tiffany|toshiba|trading|walmart|wanggou|watches|weather|website|wedding|whoswho|windows|winners|xfinity|yamaxun|youtube|zuerich|католик|اتصالات|البحرين|الجزائر|العليان|پاکستان|كاثوليك|இந்தியா|abarth|abbott|abbvie|africa|agency|airbus|airtel|alipay|alsace|alstom|amazon|anquan|aramco|author|bayern|beauty|berlin|bharti|bostik|boston|broker|camera|career|casino|center|chanel|chrome|church|circle|claims|clinic|coffee|comsec|condos|coupon|credit|cruise|dating|datsun|dealer|degree|dental|design|direct|doctor|dunlop|dupont|durban|emerck|energy|estate|events|expert|family|flickr|futbol|gallup|garden|george|giving|global|google|gratis|health|hermes|hiphop|hockey|hotels|hughes|imamat|insure|intuit|jaguar|joburg|juegos|kaufen|kinder|kindle|kosher|lancia|latino|lawyer|lefrak|living|locker|london|luxury|madrid|maison|makeup|market|mattel|mobile|monash|mormon|moscow|museum|mutual|nagoya|natura|nissan|nissay|norton|nowruz|office|olayan|online|oracle|orange|otsuka|pfizer|photos|physio|pictet|quebec|racing|realty|reisen|repair|report|review|rocher|rogers|ryukyu|safety|sakura|sanofi|school|schule|search|secure|select|shouji|soccer|social|stream|studio|supply|suzuki|swatch|sydney|taipei|taobao|target|tattoo|tennis|tienda|tjmaxx|tkmaxx|toyota|travel|unicom|viajes|viking|villas|virgin|vision|voting|voyage|vuelos|walter|webcam|xihuan|yachts|yandex|zappos|москва|онлайн|ابوظبي|ارامكو|الاردن|المغرب|امارات|فلسطين|مليسيا|भारतम्|இலங்கை|ファッション|actor|adult|aetna|amfam|amica|apple|archi|audio|autos|azure|baidu|beats|bible|bingo|black|boats|bosch|build|canon|cards|chase|cheap|cisco|citic|click|cloud|coach|codes|crown|cymru|dabur|dance|deals|delta|drive|dubai|earth|edeka|email|epson|faith|fedex|final|forex|forum|gallo|games|gifts|gives|glass|globo|gmail|green|gripe|group|gucci|guide|homes|honda|horse|house|hyatt|ikano|irish|jetzt|koeln|kyoto|lamer|lease|legal|lexus|lilly|linde|lipsy|loans|locus|lotte|lotto|macys|mango|media|miami|money|movie|music|nexus|nikon|ninja|nokia|nowtv|omega|osaka|paris|parts|party|phone|photo|pizza|place|poker|praxi|press|prime|promo|quest|radio|rehab|reise|ricoh|rocks|rodeo|rugby|salon|sener|seven|sharp|shell|shoes|skype|sling|smart|smile|solar|space|sport|stada|store|study|style|sucks|swiss|tatar|tires|tirol|tmall|today|tokyo|tools|toray|total|tours|trade|trust|tunes|tushu|ubank|vegas|video|vodka|volvo|wales|watch|weber|weibo|works|world|xerox|yahoo|ישראל|ایران|بازار|بھارت|سودان|سورية|همراه|भारोत|संगठन|বাংলা|భారత్|ഭാരതം|嘉里大酒店|aarp|able|adac|aero|akdn|ally|amex|arab|army|arpa|arte|asda|asia|audi|auto|baby|band|bank|bbva|beer|best|bike|bing|blog|blue|bofa|bond|book|buzz|cafe|call|camp|care|cars|casa|case|cash|cbre|cern|chat|citi|city|club|cool|coop|cyou|data|date|dclk|deal|dell|desi|diet|dish|docs|dvag|erni|fage|fail|fans|farm|fast|fiat|fido|film|fire|fish|flir|food|ford|free|fund|game|gbiz|gent|ggee|gift|gmbh|gold|golf|goog|guge|guru|hair|haus|hdfc|help|here|hgtv|host|hsbc|icbc|ieee|imdb|immo|info|itau|java|jeep|jobs|jprs|kddi|kids|kiwi|kpmg|kred|land|lego|lgbt|lidl|life|like|limo|link|live|loan|loft|love|ltda|luxe|maif|meet|meme|menu|mini|mint|mobi|moda|moto|name|navy|news|next|nico|nike|ollo|open|page|pars|pccw|pics|ping|pink|play|plus|pohl|porn|post|prod|prof|qpon|read|reit|rent|rest|rich|room|rsvp|ruhr|safe|sale|sarl|save|saxo|scot|seat|seek|sexy|shaw|shia|shop|show|silk|sina|site|skin|sncf|sohu|song|sony|spot|star|surf|talk|taxi|team|tech|teva|tiaa|tips|town|toys|tube|vana|visa|viva|vivo|vote|voto|wang|weir|wien|wiki|wine|work|xbox|yoga|zara|zero|zone|дети|сайт|بارت|بيتك|ڀارت|تونس|شبكة|عراق|عمان|موقع|भारत|ভারত|ভাৰত|ਭਾਰਤ|ભારત|ଭାରତ|ಭಾರತ|ලංකා|アマゾン|グーグル|クラウド|ポイント|组织机构|電訊盈科|香格里拉|aaa|abb|abc|aco|ads|aeg|afl|aig|anz|aol|app|art|aws|axa|bar|bbc|bbt|bcg|bcn|bet|bid|bio|biz|bms|bmw|bom|boo|bot|box|buy|bzh|cab|cal|cam|car|cat|cba|cbn|cbs|ceo|cfa|cfd|com|cpa|crs|dad|day|dds|dev|dhl|diy|dnp|dog|dot|dtv|dvr|eat|eco|edu|esq|eus|fan|fit|fly|foo|fox|frl|ftr|fun|fyi|gal|gap|gay|gdn|gea|gle|gmo|gmx|goo|gop|got|gov|hbo|hiv|hkt|hot|how|ibm|ice|icu|ifm|inc|ing|ink|int|ist|itv|jcb|jio|jll|jmp|jnj|jot|joy|kfh|kia|kim|kpn|krd|lat|law|lds|llc|llp|lol|lpl|ltd|man|map|mba|med|men|mil|mit|mlb|mls|mma|moe|moi|mom|mov|msd|mtn|mtr|nab|nba|nec|net|new|nfl|ngo|nhk|now|nra|nrw|ntt|nyc|obi|one|ong|onl|ooo|org|ott|ovh|pay|pet|phd|pid|pin|pnc|pro|pru|pub|pwc|red|ren|ril|rio|rip|run|rwe|sap|sas|sbi|sbs|sca|scb|ses|sew|sex|sfr|ski|sky|soy|spa|srl|stc|tab|tax|tci|tdk|tel|thd|tjx|top|trv|tui|tvs|ubs|uno|uol|ups|vet|vig|vin|vip|wed|win|wme|wow|wtc|wtf|xin|xxx|xyz|you|yun|zip|бел|ком|қаз|мкд|мон|орг|рус|срб|укр|հայ|קום|عرب|قطر|كوم|مصر|कॉम|नेट|คอม|ไทย|ລາວ|ストア|セール|みんな|中文网|亚马逊|天主教|我爱你|新加坡|淡马锡|诺基亚|飞利浦|ac|ad|ae|af|ag|ai|al|am|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|ελ|ευ|бг|ею|рф|გე|닷넷|닷컴|삼성|한국|コム|世界|中信|中国|中國|企业|佛山|信息|健康|八卦|公司|公益|台湾|台灣|商城|商店|商标|嘉里|在线|大拿|娱乐|家電|广东|微博|慈善|手机|招聘|政务|政府|新闻|时尚|書籍|机构|游戏|澳門|点看|移动|网址|网店|网站|网络|联通|谷歌|购物|通販|集团|食品|餐厅|香港)$"),xn=/[\/?#]/,Cn=/[-+&@#/%=~_()|'$*\[\]{}\u2713]/,Sn=/[?!:,.;^]/,Tn=/https?:\/\//i,An=new RegExp("^"+Tn.source,"i"),Pn=new RegExp(Sn.source+"$"),En=/^(javascript|vbscript):/i,Mn=/^[A-Za-z][-.+A-Za-z0-9]*:(\/\/)?([^:/]*)/,kn=/^(?:\/\/)?([^/#?:]+)/;function In(e){return sn.test(e)}function On(e){return sn.test(e)||an.test(e)||"+"===e||"-"===e||"."===e}function Bn(e){return mn.test(e)}function Rn(e){return"_"===e||Bn(e)}function Fn(e){return mn.test(e)||Cn.test(e)||Sn.test(e)}function Dn(e){return xn.test(e)}function Ln(e){return wn.test(e.toLowerCase())}var Vn=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,Nn=/[:/?#]/,Un=/^(https?:\/\/)?(www\.)?/i,Gn=/^\/\//,zn=function(e){function t(t){var i=e.call(this,t)||this;return i.type="url",i.url="",i.urlMatchType="scheme",i.protocolRelativeMatch=!1,i.stripPrefix={scheme:!0,www:!0},i.stripTrailingSlash=!0,i.decodePercentEncoding=!0,i.protocolPrepended=!1,i.urlMatchType=t.urlMatchType,i.url=t.url,i.protocolRelativeMatch=t.protocolRelativeMatch,i.stripPrefix=t.stripPrefix,i.stripTrailingSlash=t.stripTrailingSlash,i.decodePercentEncoding=t.decodePercentEncoding,i}return Zn(t,e),t.prototype.getType=function(){return"url"},t.prototype.getUrlMatchType=function(){return this.urlMatchType},t.prototype.getUrl=function(){var e=this.url;return this.protocolRelativeMatch||"scheme"===this.urlMatchType||this.protocolPrepended||(e=this.url="http://"+e,this.protocolPrepended=!0),e},t.prototype.getAnchorHref=function(){return this.getUrl().replace(/&amp;/g,"&")},t.prototype.getAnchorText=function(){var e=this.getMatchedText();return this.protocolRelativeMatch&&(e=e.replace(Gn,"")),this.stripPrefix.scheme&&(e=function(e){return e.replace(An,"")}(e)),this.stripPrefix.www&&(e=function(e){return e.replace(Un,"$1")}(e)),this.stripTrailingSlash&&(e=function(e){return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e}(e)),this.decodePercentEncoding&&(e=function(e){var t=e.replace(/%22/gi,"&quot;").replace(/%26/gi,"&amp;").replace(/%27/gi,"&#39;").replace(/%3C/gi,"&lt;").replace(/%3E/gi,"&gt;");try{return decodeURIComponent(t)}catch(e){return t}}(e)),e},t}(bn),Kn=/^mailto:/i,qn=new RegExp("[".concat(fn,"!#$%&'*+/=?^_`{|}~-]"));function Hn(e){return qn.test(e)}var Wn=function(e){function t(t){var i=e.call(this,t)||this;return i.type="email",i.email="",i.email=t.email,i}return Zn(t,e),t.prototype.getType=function(){return"email"},t.prototype.getEmail=function(){return this.email},t.prototype.getAnchorHref=function(){return"mailto:"+this.email},t.prototype.getAnchorText=function(){return this.email},t}(bn);function jn(e){return"_"===e||mn.test(e)}var Jn=["twitter","facebook","instagram","tiktok"],Xn=function(e){function t(t){var i=e.call(this,t)||this;return i.type="hashtag",i.serviceName="twitter",i.hashtag="",i.serviceName=t.serviceName,i.hashtag=t.hashtag,i}return Zn(t,e),t.prototype.getType=function(){return"hashtag"},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getHashtag=function(){return this.hashtag},t.prototype.getAnchorHref=function(){var e=this.serviceName,t=this.hashtag;switch(e){case"twitter":return"https://twitter.com/hashtag/"+t;case"facebook":return"https://www.facebook.com/hashtag/"+t;case"instagram":return"https://instagram.com/explore/tags/"+t;case"tiktok":return"https://www.tiktok.com/tag/"+t;default:throw on(e),new Error("Invalid hashtag service: ".concat(e))}},t.prototype.getAnchorText=function(){return"#"+this.hashtag},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&t.push(i),t},t}(bn),$n={twitter:/^@\w{1,15}$/,instagram:/^@[_\w]{1,30}$/,soundcloud:/^@[-a-z0-9_]{3,25}$/,tiktok:/^@[.\w]{1,23}[\w]$/},Yn=/[-\w.]/;function Qn(e){return Yn.test(e)}var er=["twitter","instagram","soundcloud","tiktok"],tr=function(e){function t(t){var i=e.call(this,t)||this;return i.type="mention",i.serviceName="twitter",i.mention="",i.mention=t.mention,i.serviceName=t.serviceName,i}return Zn(t,e),t.prototype.getType=function(){return"mention"},t.prototype.getMention=function(){return this.mention},t.prototype.getServiceName=function(){return this.serviceName},t.prototype.getAnchorHref=function(){switch(this.serviceName){case"twitter":return"https://twitter.com/"+this.mention;case"instagram":return"https://instagram.com/"+this.mention;case"soundcloud":return"https://soundcloud.com/"+this.mention;case"tiktok":return"https://www.tiktok.com/@"+this.mention;default:throw new Error("Unknown service name to point mention to: "+this.serviceName)}},t.prototype.getAnchorText=function(){return"@"+this.mention},t.prototype.getCssClassSuffixes=function(){var t=e.prototype.getCssClassSuffixes.call(this),i=this.getServiceName();return i&&t.push(i),t},t}(bn),ir=/[-. ]/,nr=/[-. ()]/,rr=/[,;]/,or=new RegExp("^".concat(/(?:(?:(?:(\+)?\d{1,3}[-. ]?)?\(?\d{3}\)?[-. ]?\d{3}[-. ]?\d{4})|(?:(\+)(?:9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)[-. ]?(?:\d[-. ]?){6,12}\d+))([,;]+[0-9]+#?)*/.source,"|").concat(/(0([1-9]-?[1-9]\d{3}|[1-9]{2}-?\d{3}|[1-9]{2}\d{1}-?\d{2}|[1-9]{2}\d{2}-?\d{1})-?\d{4}|0[789]0-?\d{4}-?\d{4}|050-?\d{4}-?\d{4})/.source,"$"));function sr(e){return ir.test(e)}function ar(e){return rr.test(e)}var lr=function(e){function t(t){var i=e.call(this,t)||this;return i.type="phone",i.number="",i.plusSign=!1,i.number=t.number,i.plusSign=t.plusSign,i}return Zn(t,e),t.prototype.getType=function(){return"phone"},t.prototype.getPhoneNumber=function(){return this.number},t.prototype.getNumber=function(){return this.getPhoneNumber()},t.prototype.getAnchorHref=function(){return"tel:"+(this.plusSign?"+":"")+this.number},t.prototype.getAnchorText=function(){return this.matchedText},t}(bn);var cr=/[\(\{\[]/,ur=/[\)\}\]]/,dr={")":"(","}":"{","]":"["};function hr(e,t){return{type:"url",startIdx:e,state:t,acceptStateReached:!1,matchType:"scheme"}}function pr(e,t){return{type:"url",startIdx:e,state:t,acceptStateReached:!1,matchType:"tld"}}function fr(e,t){return{type:"phone",startIdx:e,state:t,acceptStateReached:!1}}var mr=function(e){void 0===e&&(e={}),this.idx=void 0!==e.idx?e.idx:-1,this.type=e.type||"tag",this.name=e.name||"",this.isOpening=!!e.isOpening,this.isClosing=!!e.isClosing};const gr=function(){function e(t){var i,n;void 0===t&&(t={}),this.version=e.version,this.urls={},this.email=!0,this.phone=!0,this.hashtag=!1,this.mention=!1,this.newWindow=!0,this.stripPrefix={scheme:!0,www:!0},this.stripTrailingSlash=!0,this.decodePercentEncoding=!0,this.truncate={length:0,location:"end"},this.className="",this.replaceFn=null,this.context=void 0,this.sanitizeHtml=!1,this.tagBuilder=null,this.urls=(null==(n=t.urls)&&(n=!0),tn(n)?{schemeMatches:n,tldMatches:n,ipV4Matches:n}:{schemeMatches:!tn(n.schemeMatches)||n.schemeMatches,tldMatches:!tn(n.tldMatches)||n.tldMatches,ipV4Matches:!tn(n.ipV4Matches)||n.ipV4Matches}),this.email=tn(t.email)?t.email:this.email,this.phone=tn(t.phone)?t.phone:this.phone,this.hashtag=t.hashtag||this.hashtag,this.mention=t.mention||this.mention,this.newWindow=tn(t.newWindow)?t.newWindow:this.newWindow,this.stripPrefix=(null==(i=t.stripPrefix)&&(i=!0),tn(i)?{scheme:i,www:i}:{scheme:!tn(i.scheme)||i.scheme,www:!tn(i.www)||i.www}),this.stripTrailingSlash=tn(t.stripTrailingSlash)?t.stripTrailingSlash:this.stripTrailingSlash,this.decodePercentEncoding=tn(t.decodePercentEncoding)?t.decodePercentEncoding:this.decodePercentEncoding,this.sanitizeHtml=t.sanitizeHtml||!1;var r=this.mention;if(!1!==r&&-1===er.indexOf(r))throw new Error("invalid `mention` cfg '".concat(r,"' - see docs"));var o,s=this.hashtag;if(!1!==s&&-1===Jn.indexOf(s))throw new Error("invalid `hashtag` cfg '".concat(s,"' - see docs"));this.truncate="number"==typeof(o=t.truncate)?{length:o,location:"end"}:function(e,t){for(var i in t)t.hasOwnProperty(i)&&void 0===e[i]&&(e[i]=t[i]);return e}(o||{},{length:Number.POSITIVE_INFINITY,location:"end"}),this.className=t.className||this.className,this.replaceFn=t.replaceFn||this.replaceFn,this.context=t.context||this}return e.link=function(t,i){return new e(i).link(t)},e.parse=function(t,i){return new e(i).parse(t)},e.prototype.parse=function(e){var t=this,i=["a","style","script"],n=0,r=[];return function(e,t){for(var i,n=t.onOpenTag,r=t.onCloseTag,o=t.onText,s=t.onComment,a=t.onDoctype,l=new mr,c=0,u=e.length,d=0,h=0,p=l;c<u;){var f=e.charAt(c);switch(d){case 0:m(f);break;case 1:g(f);break;case 2:y(f);break;case 3:_(f);break;case 4:Z(f);break;case 5:v(f);break;case 6:b(f);break;case 7:w(f);break;case 8:x(f);break;case 9:C(f);break;case 10:S(f);break;case 11:T(f);break;case 12:A(f);break;case 13:"--"===e.substr(c,2)?(c+=2,p=new mr(vn(vn({},p),{type:"comment"})),d=14):"DOCTYPE"===e.substr(c,7).toUpperCase()?(c+=7,p=new mr(vn(vn({},p),{type:"doctype"})),d=20):R();break;case 14:P(f);break;case 15:E(f);break;case 16:M(f);break;case 17:k(f);break;case 18:I(f);break;case 19:O(f);break;case 20:B(f);break;default:on(d)}c++}function m(e){"<"===e&&F()}function g(e){"!"===e?d=13:"/"===e?(d=2,p=new mr(vn(vn({},p),{isClosing:!0}))):"<"===e?F():sn.test(e)?(d=3,p=new mr(vn(vn({},p),{isOpening:!0}))):(d=0,p=l)}function _(e){ln.test(e)?(p=new mr(vn(vn({},p),{name:L()})),d=4):"<"===e?F():"/"===e?(p=new mr(vn(vn({},p),{name:L()})),d=12):">"===e?(p=new mr(vn(vn({},p),{name:L()})),D()):sn.test(e)||an.test(e)||":"===e||R()}function y(e){">"===e?R():sn.test(e)?d=3:R()}function Z(e){ln.test(e)||("/"===e?d=12:">"===e?D():"<"===e?F():"="===e||cn.test(e)||un.test(e)?R():d=5)}function v(e){ln.test(e)?d=6:"/"===e?d=12:"="===e?d=7:">"===e?D():"<"===e?F():cn.test(e)&&R()}function b(e){ln.test(e)||("/"===e?d=12:"="===e?d=7:">"===e?D():"<"===e?F():cn.test(e)?R():d=5)}function w(e){ln.test(e)||('"'===e?d=8:"'"===e?d=9:/[>=`]/.test(e)?R():"<"===e?F():d=10)}function x(e){'"'===e&&(d=11)}function C(e){"'"===e&&(d=11)}function S(e){ln.test(e)?d=4:">"===e?D():"<"===e&&F()}function T(e){ln.test(e)?d=4:"/"===e?d=12:">"===e?D():"<"===e?F():(d=4,c--)}function A(e){">"===e?(p=new mr(vn(vn({},p),{isClosing:!0})),D()):d=4}function P(e){"-"===e?d=15:">"===e?R():d=16}function E(e){"-"===e?d=18:">"===e?R():d=16}function M(e){"-"===e&&(d=17)}function k(e){d="-"===e?18:16}function I(e){">"===e?D():"!"===e?d=19:"-"===e||(d=16)}function O(e){"-"===e?d=17:">"===e?D():d=16}function B(e){">"===e?D():"<"===e&&F()}function R(){d=0,p=l}function F(){d=1,p=new mr({idx:c})}function D(){var t=e.slice(h,p.idx);t&&o(t,h),"comment"===p.type?s(p.idx):"doctype"===p.type?a(p.idx):(p.isOpening&&n(p.name,p.idx),p.isClosing&&r(p.name,p.idx)),R(),h=c+1}function L(){var t=p.idx+(p.isClosing?2:1);return e.slice(t,c).toLowerCase()}h<c&&(i=e.slice(h,c),o(i,h),h=c+1)}(e,{onOpenTag:function(e){i.indexOf(e)>=0&&n++},onText:function(e,i){if(0===n){var o=e.split(/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi),s=i;o.forEach((function(e,i){if(i%2==0){var n=t.parseText(e,s);r.push.apply(r,n)}s+=e.length}))}},onCloseTag:function(e){i.indexOf(e)>=0&&(n=Math.max(n-1,0))},onComment:function(e){},onDoctype:function(e){}}),r=this.compactMatches(r),r=this.removeUnwantedMatches(r)},e.prototype.compactMatches=function(e){e.sort((function(e,t){return e.getOffset()-t.getOffset()}));for(var t=0;t<e.length-1;){var i=e[t],n=i.getOffset(),r=i.getMatchedText().length,o=n+r;if(t+1<e.length){if(e[t+1].getOffset()===n){var s=e[t+1].getMatchedText().length>r?t:t+1;e.splice(s,1);continue}if(e[t+1].getOffset()<o){e.splice(t+1,1);continue}}t++}return e},e.prototype.removeUnwantedMatches=function(e){return this.hashtag||rn(e,(function(e){return"hashtag"===e.getType()})),this.email||rn(e,(function(e){return"email"===e.getType()})),this.phone||rn(e,(function(e){return"phone"===e.getType()})),this.mention||rn(e,(function(e){return"mention"===e.getType()})),this.urls.schemeMatches||rn(e,(function(e){return"url"===e.getType()&&"scheme"===e.getUrlMatchType()})),this.urls.tldMatches||rn(e,(function(e){return"url"===e.getType()&&"tld"===e.getUrlMatchType()})),this.urls.ipV4Matches||rn(e,(function(e){return"url"===e.getType()&&"ipV4"===e.getUrlMatchType()})),e},e.prototype.parseText=function(e,t){void 0===t&&(t=0),t=t||0;for(var i=function(e,t){for(var i=t.tagBuilder,n=t.stripPrefix,r=t.stripTrailingSlash,o=t.decodePercentEncoding,s=t.hashtagServiceName,a=t.mentionServiceName,l=[],c=e.length,u=[],d=0;d<c;d++){var h=e.charAt(d);if(0===u.length)g(h);else for(var p=u.length-1;p>=0;p--){var f=u[p];switch(f.state){case 11:w(f,h);break;case 12:x(f,h);break;case 0:_(f,h);break;case 1:y(f,h);break;case 2:Z(f,h);break;case 3:v(f,h);break;case 4:b(f,h);break;case 5:C(f,h);break;case 6:S(f,h);break;case 7:T(f,h);break;case 13:A(f,h);break;case 14:P(f,h);break;case 8:E(f,h);break;case 9:M(f,h);break;case 10:k(f,h);break;case 15:I(f,h);break;case 16:O(f,h);break;case 17:B(f,h);break;case 18:R(f,h);break;case 19:F(f,h);break;case 20:D(f,h);break;case 21:L(f,h);break;case 22:V(f,h);break;case 23:N(f,h);break;case 24:U(f,h);break;case 25:G(f,h);break;case 26:z(f,h);break;case 27:K(f,h);break;case 28:q(f,h);break;case 29:H(f,h);break;case 30:W(f,h);break;case 31:j(f,h);break;case 32:X(f,h);break;case 33:$(f,h);break;case 34:Y(f,h);break;case 35:Q(f,h);break;case 36:ee(f,h);break;case 37:J(f,h);break;case 38:te(f,h);break;case 39:ie(f,h);break;case 40:ne(f,h);break;case 41:re(f,h);break;default:on(f.state)}}}for(var m=u.length-1;m>=0;m--)u.forEach((function(e){return oe(e)}));return l;function g(e){if("#"===e)u.push({type:"hashtag",startIdx:d,state:28,acceptStateReached:!1});else if("@"===e)u.push({type:"mention",startIdx:d,state:30,acceptStateReached:!1});else if("/"===e)u.push(pr(d,11));else if("+"===e)u.push(fr(d,37));else if("("===e)u.push(fr(d,32));else{if(an.test(e)&&(u.push(fr(d,38)),u.push({type:"url",startIdx:d,state:13,acceptStateReached:!1,matchType:"ipV4",octetsEncountered:1})),function(e){return mn.test(e)}(e)){var t="m"===e.toLowerCase()?15:22;u.push(function(e,t){return{type:"email",startIdx:e,state:t,acceptStateReached:!1}}(d,t))}In(e)&&u.push(hr(d,0)),mn.test(e)&&u.push(pr(d,5))}}function _(e,t){":"===t?e.state=2:"-"===t?e.state=1:On(t)||nn(u,e)}function y(e,t){"-"===t||("/"===t?(nn(u,e),u.push(pr(d,11))):On(t)?e.state=0:nn(u,e))}function Z(e,t){"/"===t?e.state=3:"."===t?nn(u,e):Bn(t)?(e.state=5,In(t)&&u.push(hr(d,0))):nn(u,e)}function v(e,t){"/"===t?e.state=4:Fn(t)?(e.state=10,e.acceptStateReached=!0):oe(e)}function b(e,t){"/"===t?e.state=10:Bn(t)?(e.state=5,e.acceptStateReached=!0):nn(u,e)}function w(e,t){"/"===t?e.state=12:nn(u,e)}function x(e,t){Bn(t)?e.state=5:nn(u,e)}function C(e,t){"."===t?e.state=7:"-"===t?e.state=6:":"===t?e.state=8:Dn(t)?e.state=10:Rn(t)||oe(e)}function S(e,t){"-"===t||("."===t?oe(e):Bn(t)?e.state=5:oe(e))}function T(e,t){"."===t?oe(e):Bn(t)?(e.state=5,e.acceptStateReached=!0):oe(e)}function A(e,t){"."===t?e.state=14:":"===t?e.state=8:an.test(t)||(Dn(t)?e.state=10:mn.test(t)?nn(u,e):oe(e))}function P(e,t){an.test(t)?(e.octetsEncountered++,4===e.octetsEncountered&&(e.acceptStateReached=!0),e.state=13):oe(e)}function E(e,t){an.test(t)?e.state=9:oe(e)}function M(e,t){an.test(t)||(Dn(t)?e.state=10:oe(e))}function k(e,t){Fn(t)||oe(e)}function I(e,t){"a"===t.toLowerCase()?e.state=16:V(e,t)}function O(e,t){"i"===t.toLowerCase()?e.state=17:V(e,t)}function B(e,t){"l"===t.toLowerCase()?e.state=18:V(e,t)}function R(e,t){"t"===t.toLowerCase()?e.state=19:V(e,t)}function F(e,t){"o"===t.toLowerCase()?e.state=20:V(e,t)}function D(e,t){":"===t.toLowerCase()?e.state=21:V(e,t)}function L(e,t){Hn(t)?e.state=22:nn(u,e)}function V(e,t){"."===t?e.state=23:"@"===t?e.state=24:Hn(t)?e.state=22:nn(u,e)}function N(e,t){"."===t||"@"===t?nn(u,e):Hn(t)?e.state=22:nn(u,e)}function U(e,t){Bn(t)?e.state=25:nn(u,e)}function G(e,t){"."===t?e.state=27:"-"===t?e.state=26:Rn(t)||oe(e)}function z(e,t){"-"===t||"."===t?oe(e):Rn(t)?e.state=25:oe(e)}function K(e,t){"."===t||"-"===t?oe(e):Bn(t)?(e.state=25,e.acceptStateReached=!0):oe(e)}function q(e,t){jn(t)?(e.state=29,e.acceptStateReached=!0):nn(u,e)}function H(e,t){jn(t)||oe(e)}function W(e,t){Qn(t)?(e.state=31,e.acceptStateReached=!0):nn(u,e)}function j(e,t){Qn(t)||(mn.test(t)?nn(u,e):oe(e))}function J(e,t){an.test(t)?e.state=38:(nn(u,e),g(t))}function X(e,t){an.test(t)?e.state=33:nn(u,e),g(t)}function $(e,t){an.test(t)?e.state=34:nn(u,e)}function Y(e,t){an.test(t)?e.state=35:nn(u,e)}function Q(e,t){")"===t?e.state=36:nn(u,e)}function ee(e,t){an.test(t)?e.state=38:sr(t)?e.state=39:nn(u,e)}function te(e,t){e.acceptStateReached=!0,ar(t)?e.state=40:"#"===t?e.state=41:an.test(t)||("("===t?e.state=32:sr(t)?e.state=39:(oe(e),In(t)&&u.push(hr(d,0))))}function ie(e,t){an.test(t)?e.state=38:"("===t?e.state=32:(oe(e),g(t))}function ne(e,t){ar(t)||("#"===t?e.state=41:an.test(t)?e.state=38:oe(e))}function re(e,t){ar(t)?e.state=40:an.test(t)?nn(u,e):oe(e)}function oe(t){if(nn(u,t),t.acceptStateReached){var c,h,p=t.startIdx,f=e.slice(t.startIdx,d);if(f=function(e){for(var t={"(":0,"{":0,"[":0},i=0;i<e.length;i++){var n=e.charAt(i);cr.test(n)?t[n]++:ur.test(n)&&t[dr[n]]--}for(var r,o=e.length-1;o>=0;)if(r=e.charAt(o),ur.test(r)){var s=dr[r];if(!(t[s]<0))break;t[s]++,o--}else{if(!Pn.test(r))break;o--}return e.slice(0,o+1)}(f),"url"===t.type){if("@"===e.charAt(t.startIdx-1))return;var m=t.matchType;if("scheme"===m){var g=Tn.exec(f);if(g&&(p+=g.index,f=f.slice(g.index)),!function(e){if(En.test(e))return!1;var t=e.match(Mn);if(!t)return!1;var i=!!t[1],n=t[2];return!!i||!(-1===n.indexOf(".")||!sn.test(n))}(f))return}else if("tld"===m){if(!function(e){var t=e.match(kn);if(!t)return!1;var i=t[0].split(".");return!(i.length<2||!Ln(i[i.length-1]))}(f))return}else if("ipV4"===m){if(!function(e){var t=e.split(Nn,1)[0];return Vn.test(t)}(f))return}else on(m);l.push(new zn({tagBuilder:i,matchedText:f,offset:p,urlMatchType:m,url:f,protocolRelativeMatch:"//"===f.slice(0,2),stripPrefix:n,stripTrailingSlash:r,decodePercentEncoding:o}))}else if("email"===t.type)Ln(f.split(".").pop()||"")&&l.push(new Wn({tagBuilder:i,matchedText:f,offset:p,email:f.replace(Kn,"")}));else if("hashtag"===t.type)f.length<=140&&l.push(new Xn({tagBuilder:i,matchedText:f,offset:p,serviceName:s,hashtag:f.slice(1)}));else if("mention"===t.type)h=f,$n[a].test(h)&&l.push(new tr({tagBuilder:i,matchedText:f,offset:p,serviceName:a,mention:f.slice(1)}));else if("phone"===t.type){if(("+"===(c=f=f.replace(/ +$/g,"")).charAt(0)||nr.test(c))&&or.test(c)){var _=f.replace(/[^0-9,;#]/g,"");l.push(new lr({tagBuilder:i,matchedText:f,offset:p,number:_,plusSign:"+"===f.charAt(0)}))}}else on(t)}}}(e,{tagBuilder:this.getTagBuilder(),stripPrefix:this.stripPrefix,stripTrailingSlash:this.stripTrailingSlash,decodePercentEncoding:this.decodePercentEncoding,hashtagServiceName:this.hashtag,mentionServiceName:this.mention||"twitter"}),n=0,r=i.length;n<r;n++)i[n].setOffset(t+i[n].getOffset());return i},e.prototype.link=function(e){if(!e)return"";this.sanitizeHtml&&(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"));for(var t=this.parse(e),i=[],n=0,r=0,o=t.length;r<o;r++){var s=t[r];i.push(e.substring(n,s.getOffset())),i.push(this.createMatchReturnVal(s)),n=s.getOffset()+s.getMatchedText().length}return i.push(e.substring(n)),i.join("")},e.prototype.createMatchReturnVal=function(e){var t;return this.replaceFn&&(t=this.replaceFn.call(this.context,e)),"string"==typeof t?t:!1===t?e.getMatchedText():t instanceof gn?t.toAnchorString():e.buildTag().toAnchorString()},e.prototype.getTagBuilder=function(){var e=this.tagBuilder;return e||(e=this.tagBuilder=new _n({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),e},e.version="4.0.0",e}();let _r;"undefined"!=typeof DOMParser&&(_r=new DOMParser);const yr=new gr({stripPrefix:!1,email:!1,replaceFn:function(e,t){return"scheme"===t.urlMatchType||"www"===t.urlMatchType}}),Zr=32,vr=2414016,br=1,wr=16093e3,xr=.1,Cr={gpx:[null,void 0,"http://www.topografix.com/GPX/1/1"]};function Sr(e,t){let i=Pr(e,"id");return i=(0,f.Z)(i)?i:(0,C.Z)(),t.getOrCreateEntity(i)}function Tr(e){const t=Ar(e,"lon"),i=Ar(e,"lat"),n=kr(e,"ele",Cr.gpx);return Y.Z.fromDegrees(t,i,n)}function Ar(e,t){if(!(0,f.Z)(e))return;const i=e.getAttribute(t);if(null!==i){const e=parseFloat(i);return isNaN(e)?void 0:e}}function Pr(e,t){if(!(0,f.Z)(e))return;const i=e.getAttribute(t);return null!==i?i:void 0}function Er(e,t,i){if(!(0,f.Z)(e))return;const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];if(r.localName===t&&-1!==i.indexOf(r.namespaceURI))return r}}function Mr(e,t,i){if(!(0,f.Z)(e))return;const n=[],r=e.getElementsByTagName(t),o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function kr(e,t,i){const n=Er(e,t,i);if((0,f.Z)(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function Ir(e,t,i){const n=Er(e,t,i);if((0,f.Z)(n))return n.textContent.trim()}function Or(e){const t=new n.Z;return t.width=Zr,t.height=Zr,t.scaleByDistance=new _e.Z(vr,br,wr,xr),t.pixelOffsetScaleByDistance=new _e.Z(vr,br,wr,xr),t.verticalOrigin=new K.Z(Re.Z.BOTTOM),t.image=e,t}function Br(e){const t=new ut.Z;return t.width=4,t.material=new ft,t.material.color=(0,f.Z)(e)?e:h.Z.RED,t.material.outlineWidth=2,t.material.outlineColor=h.Z.BLACK,t}const Rr={time:{text:"Time",tag:"time"},comment:{text:"Comment",tag:"cmt"},description:{text:"Description",tag:"desc"},source:{text:"Source",tag:"src"},number:{text:"GPS track/route number",tag:"number"},type:{text:"Type",tag:"type"}};let Fr;function Dr(e,t){let i,n="";const r=Object.keys(Rr),o=r.length;for(i=0;i<o;i++){const t=r[i],o=Rr[t];o.value=(0,p.Z)(Ir(e,o.tag,Cr.gpx),""),(0,f.Z)(o.value)&&""!==o.value&&(n=`${n}<p>${o.text}: ${o.value}</p>`)}if(!(0,f.Z)(n)||""===n)return;n=yr.link(n),Fr.innerHTML=n;const s=Fr.querySelectorAll("a");for(i=0;i<s.length;i++)s[i].setAttribute("target","_blank");const a=h.Z.WHITE,l=h.Z.BLACK;let c='<div class="cesium-infoBox-description-lighter" style="';return c+="overflow:auto;",c+="word-wrap:break-word;",c+=`background-color:${a.toCssColorString()};`,c+=`color:${l.toCssColorString()};`,c+='">',c+=`${Fr.innerHTML}</div>`,Fr.innerHTML="",c}function Lr(e,t,i,n){const r=Tr(t),o=Sr(t,i);o.position=r;const s=(0,f.Z)(n.waypointImage)?n.waypointImage:e._pinBuilder.fromMakiIconId("marker",h.Z.RED,Zr);o.billboard=Or(s);const a=Ir(t,"name",Cr.gpx);o.name=a,o.label=function(){const e=new Ye.Z;return e.translucencyByDistance=new _e.Z(3e6,1,5e6,0),e.pixelOffset=new d.Z(17,0),e.horizontalOrigin=Ie.Z.LEFT,e.font="16px sans-serif",e.style=Oe.Z.FILL_AND_OUTLINE,e}(),o.label.text=a,o.description=Dr(t),n.clampToGround&&(o.billboard.heightReference=ke.Z.CLAMP_TO_GROUND,o.label.heightReference=ke.Z.CLAMP_TO_GROUND)}function Vr(e){const t={positions:[],times:[]},i=Mr(e,"trkpt",Cr.gpx);let n;for(let e=0;e<i.length;e++){const r=Tr(i[e]);t.positions.push(r),n=Ir(i[e],"time",Cr.gpx),(0,f.Z)(n)&&t.times.push(fe.Z.fromIso8601(n))}return t}function Nr(e){const t=Er(e,"author",Cr.gpx);if((0,f.Z)(t)){const e={name:Ir(t,"name",Cr.gpx),email:Ur(t),link:Gr(t)};if((0,f.Z)(e.name)||(0,f.Z)(e.email)||(0,f.Z)(e.link))return e}}function Ur(e){const t=Er(e,"email",Cr.gpx);if((0,f.Z)(t))return`${Ir(t,"id",Cr.gpx)}@${Ir(t,"domain",Cr.gpx)}`}function Gr(e){const t=Er(e,"link",Cr.gpx);if((0,f.Z)(t)){const e={href:Pr(t,"href"),text:Ir(t,"text",Cr.gpx),mimeType:Ir(t,"type",Cr.gpx)};if((0,f.Z)(e.href)||(0,f.Z)(e.text)||(0,f.Z)(e.mimeType))return e}}function zr(e){const t=Er(e,"copyright",Cr.gpx);if((0,f.Z)(t)){const e={author:Pr(t,"author"),year:Ir(t,"year",Cr.gpx),license:Ir(t,"license",Cr.gpx)};if((0,f.Z)(e.author)||(0,f.Z)(e.year)||(0,f.Z)(e.license))return e}}function Kr(e){const t=Er(e,"bounds",Cr.gpx);if((0,f.Z)(t)){const e={minLat:kr(t,"minlat",Cr.gpx),maxLat:kr(t,"maxlat",Cr.gpx),minLon:kr(t,"minlon",Cr.gpx),maxLon:kr(t,"maxlon",Cr.gpx)};if((0,f.Z)(e.minLat)||(0,f.Z)(e.maxLat)||(0,f.Z)(e.minLon)||(0,f.Z)(e.maxLon))return e}}"undefined"!=typeof document&&(Fr=document.createElement("div"));const qr={wpt:Lr,rte:function(e,t,i,n){const r=Sr(t,i);r.description=Dr(t);const o=Mr(t,"rtept",Cr.gpx),s=new Array(o.length);for(let t=0;t<o.length;t++)Lr(e,o[t],i,n),s[t]=Tr(o[t]);r.polyline=Br(n.routeColor),n.clampToGround&&(r.polyline.clampToGround=!0),r.polyline.positions=s},trk:function(e,t,i,n){const r=Sr(t,i);r.description=Dr(t);const o=Mr(t,"trkseg",Cr.gpx);let s,a=[],l=[],c=!0;const u=new St.Z;for(let e=0;e<o.length;e++)s=Vr(o[e]),a=a.concat(s.positions),s.times.length>0?(l=l.concat(s.times),u.addSamples(l,a),c=c&&!0):c=!1;if(c){const t=(0,f.Z)(n.waypointImage)?n.waypointImage:e._pinBuilder.fromMakiIconId("marker",h.Z.RED,Zr);r.billboard=Or(t),r.position=u,n.clampToGround&&(r.billboard.heightReference=ke.Z.CLAMP_TO_GROUND),r.availability=new Pe.Z,r.availability.addInterval(new Ae.Z({start:l[0],stop:l[l.length-1]}))}r.polyline=Br(n.trackColor),r.polyline.positions=a,n.clampToGround&&(r.polyline.clampToGround=!0)}};function Hr(e,t,i){const n=e._entityCollection;n.removeAll();const r=t.documentElement,o=Pr(r,"version"),s=Pr(r,"creator");let a;const l=function(e){const t=Er(e,"metadata",Cr.gpx);if((0,f.Z)(t)){const e={name:Ir(t,"name",Cr.gpx),desc:Ir(t,"desc",Cr.gpx),author:Nr(t),copyright:zr(t),link:Gr(t),time:Ir(t,"time",Cr.gpx),keywords:Ir(t,"keywords",Cr.gpx),bounds:Kr(t)};if((0,f.Z)(e.name)||(0,f.Z)(e.desc)||(0,f.Z)(e.author)||(0,f.Z)(e.copyright)||(0,f.Z)(e.link)||(0,f.Z)(e.time)||(0,f.Z)(e.keywords)||(0,f.Z)(e.bounds))return e}}(r);let c;(0,f.Z)(l)&&(a=l.name),"gpx"===r.localName?function(e,t,i,n){const r=Object.keys(qr),o=r.length;for(let s=0;s<o;s++){const o=r[s],a=qr[o],l=t.childNodes,c=l.length;for(let t=0;t<c;t++){const r=l[t];r.localName===o&&-1!==Cr.gpx.indexOf(r.namespaceURI)&&a(e,r,i,n)}}}(e,r,n,i):console.log(`GPX - Unsupported node: ${r.localName}`);const u=n.computeAvailability();let d=u.start,h=u.stop;const p=fe.Z.equals(d,pe.Z.MINIMUM_VALUE),m=fe.Z.equals(h,pe.Z.MAXIMUM_VALUE);if(!p||!m){let e;p&&(e=new Date,e.setHours(0,0,0,0),d=fe.Z.fromDate(e)),m&&(e=new Date,e.setHours(24,0,0,0),h=fe.Z.fromDate(e)),c=new Ue,c.startTime=d,c.stopTime=h,c.currentTime=fe.Z.clone(d),c.clockRange=ee.Z.LOOP_STOP,c.clockStep=te.Z.SYSTEM_CLOCK_MULTIPLIER,c.multiplier=Math.round(Math.min(Math.max(fe.Z.secondsDifference(h,d)/60,1),31556900))}let g=!1;return e._name!==a&&(e._name=a,g=!0),e._creator!==s&&(e._creator=s,g=!0),_=e._metadata,y=l,!(!(0,f.Z)(_)&&!(0,f.Z)(y)||(0,f.Z)(_)&&(0,f.Z)(y)&&_.name===y.name&&_.dec===y.desc&&_.src===y.src&&_.author===y.author&&_.copyright===y.copyright&&_.link===y.link&&_.time===y.time&&_.bounds===y.bounds)&&(e._metadata=l,g=!0),e._version!==o&&(e._version=o,g=!0),c!==e._clock&&(g=!0,e._clock=c),g&&e._changed.raiseEvent(e),De.Z.setLoading(e,!1),e;var _,y}function Wr(){this._changed=new m.Z,this._error=new m.Z,this._loading=new m.Z,this._clock=void 0,this._entityCollection=new P.Z(this),this._entityCluster=new Ke.Z,this._name=void 0,this._version=void 0,this._creator=void 0,this._metadata=void 0,this._isLoading=!1,this._pinBuilder=new en.Z}Wr.load=function(e,t){return(new Wr).load(e,t)},Object.defineProperties(Wr.prototype,{name:{get:function(){return this._name}},version:{get:function(){return this._version}},creator:{get:function(){return this._creator}},metadata:{get:function(){return this._metadata}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,f.Z)(e))throw new S.Z("value must be defined.");this._entityCluster=e}}}),Wr.prototype.update=function(e){return!0},Wr.prototype.load=function(e,t){if(!(0,f.Z)(e))throw new S.Z("data is required.");t=(0,p.Z)(t,p.Z.EMPTY_OBJECT),De.Z.setLoading(this,!0);const i=this._name,n=this;return function(e,t,i,n){n=(0,p.Z)(n,p.Z.EMPTY_OBJECT);let r=i;if("string"==typeof i||i instanceof we.Z){r=(i=we.Z.createIfNeeded(i)).fetchBlob();const t=e._resourceCredits,n=i.credits;if((0,f.Z)(n)){const e=n.length;for(let i=0;i<e;i++)t.push(n[i])}}return Promise.resolve(r).then((function(t){return t instanceof Blob?(i=t,new Promise(((e,t)=>{const n=new FileReader;n.addEventListener("load",(function(){e(n.result)})),n.addEventListener("error",(function(){t(n.error)})),n.readAsText(i)}))).then((function(t){let i,r;try{i=_r.parseFromString(t,"application/xml")}catch(e){r=e.toString()}if((0,f.Z)(r)||i.body||"parsererror"===i.documentElement.tagName){let e=(0,f.Z)(r)?r:i.documentElement.firstChild.nodeValue;throw e||(e=i.body.innerText),new xe.Z(e)}return Hr(e,i,n)})):Hr(e,t,n);var i})).catch((function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}(this,this._entityCollection,e,t).then((function(){let e;const t=n._entityCollection.computeAvailability();let r=t.start,o=t.stop;const s=fe.Z.equals(r,pe.Z.MINIMUM_VALUE),a=fe.Z.equals(o,pe.Z.MAXIMUM_VALUE);if(!s||!a){let t;s&&(t=new Date,t.setHours(0,0,0,0),r=fe.Z.fromDate(t)),a&&(t=new Date,t.setHours(24,0,0,0),o=fe.Z.fromDate(t)),e=new Ue,e.startTime=r,e.stopTime=o,e.currentTime=fe.Z.clone(r),e.clockRange=ee.Z.LOOP_STOP,e.clockStep=te.Z.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(fe.Z.secondsDifference(o,r)/60,1),31556900))}let l=!1;return e!==n._clock&&(n._clock=e,l=!0),i!==n._name&&(l=!0),l&&n._changed.raiseEvent(n),De.Z.setLoading(n,!1),n})).catch((function(e){return De.Z.setLoading(n,!1),n._error.raiseEvent(n,e),console.log(e),Promise.reject(e)}))};const jr=Wr;var Jr=i(792739);const Xr=function(e,t){this.position=e,this.headingPitchRoll=t};var $r=i(781382),Yr=i(949225),Qr=i(823438),eo=i(12275),to=i(583177),io=i(732292),no=i(339079),ro=i(296541),oo=i(948180),so=i(590292),ao=i(275293),lo=i(714233);const co=15,uo=573,ho=-2;function po(e){return fo(e.map((([e,t])=>new Array(e).fill(t,0,e))))}function fo(e){return e.reduce(((e,t)=>e.concat(Array.isArray(t)?fo(t):t)),[])}const mo=[0,1,2,3].concat(...po([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function go(){const e=this;function t(e,t){let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1}e.build_tree=function(i){const n=e.dyn_tree,r=e.stat_desc.static_tree,o=e.stat_desc.elems;let s,a,l,c=-1;for(i.heap_len=0,i.heap_max=uo,s=0;s<o;s++)0!==n[2*s]?(i.heap[++i.heap_len]=c=s,i.depth[s]=0):n[2*s+1]=0;for(;i.heap_len<2;)l=i.heap[++i.heap_len]=c<2?++c:0,n[2*l]=1,i.depth[l]=0,i.opt_len--,r&&(i.static_len-=r[2*l+1]);for(e.max_code=c,s=Math.floor(i.heap_len/2);s>=1;s--)i.pqdownheap(n,s);l=o;do{s=i.heap[1],i.heap[1]=i.heap[i.heap_len--],i.pqdownheap(n,1),a=i.heap[1],i.heap[--i.heap_max]=s,i.heap[--i.heap_max]=a,n[2*l]=n[2*s]+n[2*a],i.depth[l]=Math.max(i.depth[s],i.depth[a])+1,n[2*s+1]=n[2*a+1]=l,i.heap[1]=l++,i.pqdownheap(n,1)}while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],function(t){const i=e.dyn_tree,n=e.stat_desc.static_tree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,s=e.stat_desc.max_length;let a,l,c,u,d,h,p=0;for(u=0;u<=co;u++)t.bl_count[u]=0;for(i[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<uo;a++)l=t.heap[a],u=i[2*i[2*l+1]+1]+1,u>s&&(u=s,p++),i[2*l+1]=u,l>e.max_code||(t.bl_count[u]++,d=0,l>=o&&(d=r[l-o]),h=i[2*l],t.opt_len+=h*(u+d),n&&(t.static_len+=h*(n[2*l+1]+d)));if(0!==p){do{for(u=s-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[s]--,p-=2}while(p>0);for(u=s;0!==u;u--)for(l=t.bl_count[u];0!==l;)c=t.heap[--a],c>e.max_code||(i[2*c+1]!=u&&(t.opt_len+=(u-i[2*c+1])*i[2*c],i[2*c+1]=u),l--)}}(i),function(e,i,n){const r=[];let o,s,a,l=0;for(o=1;o<=co;o++)r[o]=l=l+n[o-1]<<1;for(s=0;s<=i;s++)a=e[2*s+1],0!==a&&(e[2*s]=t(r[a]++,a))}(n,e.max_code,i.bl_count)}}function _o(e,t,i,n,r){const o=this;o.static_tree=e,o.extra_bits=t,o.extra_base=i,o.elems=n,o.max_length=r}go._length_code=[0,1,2,3,4,5,6,7].concat(...po([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),go.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],go.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],go.d_code=function(e){return e<256?mo[e]:mo[256+(e>>>7)]},go.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],go.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],go.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],go.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const yo=po([[144,8],[112,9],[24,7],[8,8]]);_o.static_ltree=fo([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,yo[t]])));const Zo=po([[30,5]]);function vo(e,t,i,n,r){const o=this;o.good_length=e,o.max_lazy=t,o.nice_length=i,o.max_chain=n,o.func=r}_o.static_dtree=fo([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Zo[t]]))),_o.static_l_desc=new _o(_o.static_ltree,go.extra_lbits,257,286,co),_o.static_d_desc=new _o(_o.static_dtree,go.extra_dbits,0,30,co),_o.static_bl_desc=new _o(null,go.extra_blbits,0,19,7);const bo=[new vo(0,0,0,0,0),new vo(4,4,8,4,1),new vo(4,5,16,8,1),new vo(4,6,32,32,1),new vo(4,4,16,16,2),new vo(8,16,32,32,2),new vo(8,16,128,128,2),new vo(8,32,128,256,2),new vo(32,128,258,1024,2),new vo(32,258,258,4096,2)],wo=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],xo=113,Co=666,So=262;function To(e,t,i,n){const r=e[2*t],o=e[2*i];return r<o||r==o&&n[t]<=n[i]}function Ao(){const e=this;let t,i,n,r,o,s,a,l,c,u,d,h,p,f,m,g,_,y,Z,v,b,w,x,C,S,T,A,P,E,M,k,I,O;const B=new go,R=new go,F=new go;let D,L,V,N,U,G;function z(){let t;for(t=0;t<286;t++)k[2*t]=0;for(t=0;t<30;t++)I[2*t]=0;for(t=0;t<19;t++)O[2*t]=0;k[512]=1,e.opt_len=e.static_len=0,L=V=0}function K(e,t){let i,n=-1,r=e[1],o=0,s=7,a=4;0===r&&(s=138,a=3),e[2*(t+1)+1]=65535;for(let l=0;l<=t;l++)i=r,r=e[2*(l+1)+1],++o<s&&i==r||(o<a?O[2*i]+=o:0!==i?(i!=n&&O[2*i]++,O[32]++):o<=10?O[34]++:O[36]++,o=0,n=i,0===r?(s=138,a=3):i==r?(s=6,a=3):(s=7,a=4))}function q(t){e.pending_buf[e.pending++]=t}function H(e){q(255&e),q(e>>>8&255)}function W(e,t){let i;const n=t;G>16-n?(i=e,U|=i<<G&65535,H(U),U=i>>>16-G,G+=n-16):(U|=e<<G&65535,G+=n)}function j(e,t){const i=2*e;W(65535&t[i],65535&t[i+1])}function J(e,t){let i,n,r=-1,o=e[1],s=0,a=7,l=4;for(0===o&&(a=138,l=3),i=0;i<=t;i++)if(n=o,o=e[2*(i+1)+1],!(++s<a&&n==o)){if(s<l)do{j(n,O)}while(0!=--s);else 0!==n?(n!=r&&(j(n,O),s--),j(16,O),W(s-3,2)):s<=10?(j(17,O),W(s-3,3)):(j(18,O),W(s-11,7));s=0,r=n,0===o?(a=138,l=3):n==o?(a=6,l=3):(a=7,l=4)}}function X(){16==G?(H(U),U=0,G=0):G>=8&&(q(255&U),U>>>=8,G-=8)}function $(t,i){let n,r,o;if(e.dist_buf[L]=t,e.lc_buf[L]=255&i,L++,0===t?k[2*i]++:(V++,t--,k[2*(go._length_code[i]+256+1)]++,I[2*go.d_code(t)]++),!(8191&L)&&A>2){for(n=8*L,r=b-_,o=0;o<30;o++)n+=I[2*o]*(5+go.extra_dbits[o]);if(n>>>=3,V<Math.floor(L/2)&&n<Math.floor(r/2))return!0}return L==D-1}function Y(t,i){let n,r,o,s,a=0;if(0!==L)do{n=e.dist_buf[a],r=e.lc_buf[a],a++,0===n?j(r,t):(o=go._length_code[r],j(o+256+1,t),s=go.extra_lbits[o],0!==s&&(r-=go.base_length[o],W(r,s)),n--,o=go.d_code(n),j(o,i),s=go.extra_dbits[o],0!==s&&(n-=go.base_dist[o],W(n,s)))}while(a<L);j(256,t),N=t[513]}function Q(){G>8?H(U):G>0&&q(255&U),U=0,G=0}function ee(t,i,n){W(0+(n?1:0),3),function(t,i,n){Q(),N=8,H(i),H(~i),e.pending_buf.set(l.subarray(t,t+i),e.pending),e.pending+=i}(t,i)}function te(i){(function(t,i,n){let r,o,s=0;A>0?(B.build_tree(e),R.build_tree(e),s=function(){let t;for(K(k,B.max_code),K(I,R.max_code),F.build_tree(e),t=18;t>=3&&0===O[2*go.bl_order[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=i+5,i+4<=r&&-1!=t?ee(t,i,n):o==r?(W(2+(n?1:0),3),Y(_o.static_ltree,_o.static_dtree)):(W(4+(n?1:0),3),function(e,t,i){let n;for(W(e-257,5),W(t-1,5),W(i-4,4),n=0;n<i;n++)W(O[2*go.bl_order[n]+1],3);J(k,e-1),J(I,t-1)}(B.max_code+1,R.max_code+1,s+1),Y(k,I)),z(),n&&Q()})(_>=0?_:-1,b-_,i),_=b,t.flush_pending()}function ie(){let e,i,n,r;do{if(r=c-x-b,0===r&&0===b&&0===x)r=o;else if(-1==r)r--;else if(b>=o+o-So){l.set(l.subarray(o,o+o),0),w-=o,b-=o,_-=o,e=p,n=e;do{i=65535&d[--n],d[n]=i>=o?i-o:0}while(0!=--e);e=o,n=e;do{i=65535&u[--n],u[n]=i>=o?i-o:0}while(0!=--e);r+=o}if(0===t.avail_in)return;e=t.read_buf(l,b+x,r),x+=e,x>=3&&(h=255&l[b],h=(h<<g^255&l[b+1])&m)}while(x<So&&0!==t.avail_in)}function ne(e){let t,i,n=S,r=b,s=C;const c=b>o-So?b-(o-So):0;let d=M;const h=a,p=b+258;let f=l[r+s-1],m=l[r+s];C>=E&&(n>>=2),d>x&&(d=x);do{if(t=e,l[t+s]==m&&l[t+s-1]==f&&l[t]==l[r]&&l[++t]==l[r+1]){r+=2,t++;do{}while(l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&l[++r]==l[++t]&&r<p);if(i=258-(p-r),r=p-258,i>s){if(w=e,s=i,i>=d)break;f=l[r+s-1],m=l[r+s]}}}while((e=65535&u[e&h])>c&&0!=--n);return s<=x?s:x}e.depth=[],e.bl_count=[],e.heap=[],k=[],I=[],O=[],e.pqdownheap=function(t,i){const n=e.heap,r=n[i];let o=i<<1;for(;o<=e.heap_len&&(o<e.heap_len&&To(t,n[o+1],n[o],e.depth)&&o++,!To(t,r,n[o],e.depth));)n[i]=n[o],i=o,o<<=1;n[i]=r},e.deflateInit=function(t,Z,w,L,V,K){return L||(L=8),V||(V=8),K||(K=0),t.msg=null,-1==Z&&(Z=6),V<1||V>9||8!=L||w<9||w>15||Z<0||Z>9||K<0||K>2?ho:(t.dstate=e,s=w,o=1<<s,a=o-1,f=V+7,p=1<<f,m=p-1,g=Math.floor((f+3-1)/3),l=new Uint8Array(2*o),u=[],d=[],D=1<<V+6,e.pending_buf=new Uint8Array(4*D),n=4*D,e.dist_buf=new Uint16Array(D),e.lc_buf=new Uint8Array(D),A=Z,P=K,function(t){return t.total_in=t.total_out=0,t.msg=null,e.pending=0,e.pending_out=0,i=xo,r=0,B.dyn_tree=k,B.stat_desc=_o.static_l_desc,R.dyn_tree=I,R.stat_desc=_o.static_d_desc,F.dyn_tree=O,F.stat_desc=_o.static_bl_desc,U=0,G=0,N=8,z(),function(){c=2*o,d[p-1]=0;for(let e=0;e<p-1;e++)d[e]=0;T=bo[A].max_lazy,E=bo[A].good_length,M=bo[A].nice_length,S=bo[A].max_chain,b=0,_=0,x=0,y=C=2,v=0,h=0}(),0}(t))},e.deflateEnd=function(){return 42!=i&&i!=xo&&i!=Co?ho:(e.lc_buf=null,e.dist_buf=null,e.pending_buf=null,d=null,u=null,l=null,e.dstate=null,i==xo?-3:0)},e.deflateParams=function(e,t,i){let n=0;return-1==t&&(t=6),t<0||t>9||i<0||i>2?ho:(bo[A].func!=bo[t].func&&0!==e.total_in&&(n=e.deflate(1)),A!=t&&(A=t,T=bo[A].max_lazy,E=bo[A].good_length,M=bo[A].nice_length,S=bo[A].max_chain),P=i,n)},e.deflateSetDictionary=function(e,t,n){let r,s=n,c=0;if(!t||42!=i)return ho;if(s<3)return 0;for(s>o-So&&(s=o-So,c=n-s),l.set(t.subarray(c,c+s),0),b=s,_=s,h=255&l[0],h=(h<<g^255&l[1])&m,r=0;r<=s-3;r++)h=(h<<g^255&l[r+2])&m,u[r&a]=d[h],d[h]=r;return 0},e.deflate=function(c,f){let S,E,M,k,I;if(f>4||f<0)return ho;if(!c.next_out||!c.next_in&&0!==c.avail_in||i==Co&&4!=f)return c.msg=wo[4],ho;if(0===c.avail_out)return c.msg=wo[7],-5;var O;if(t=c,k=r,r=f,42==i&&(E=8+(s-8<<4)<<8,M=(A-1&255)>>1,M>3&&(M=3),E|=M<<6,0!==b&&(E|=32),E+=31-E%31,i=xo,q((O=E)>>8&255),q(255&O)),0!==e.pending){if(t.flush_pending(),0===t.avail_out)return r=-1,0}else if(0===t.avail_in&&f<=k&&4!=f)return t.msg=wo[7],-5;if(i==Co&&0!==t.avail_in)return c.msg=wo[7],-5;if(0!==t.avail_in||0!==x||0!=f&&i!=Co){switch(I=-1,bo[A].func){case 0:I=function(e){let i,r=65535;for(r>n-5&&(r=n-5);;){if(x<=1){if(ie(),0===x&&0==e)return 0;if(0===x)break}if(b+=x,x=0,i=_+r,(0===b||b>=i)&&(x=b-i,b=i,te(!1),0===t.avail_out))return 0;if(b-_>=o-So&&(te(!1),0===t.avail_out))return 0}return te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f);break;case 1:I=function(e){let i,n=0;for(;;){if(x<So){if(ie(),x<So&&0==e)return 0;if(0===x)break}if(x>=3&&(h=(h<<g^255&l[b+2])&m,n=65535&d[h],u[b&a]=d[h],d[h]=b),0!==n&&(b-n&65535)<=o-So&&2!=P&&(y=ne(n)),y>=3)if(i=$(b-w,y-3),x-=y,y<=T&&x>=3){y--;do{b++,h=(h<<g^255&l[b+2])&m,n=65535&d[h],u[b&a]=d[h],d[h]=b}while(0!=--y);b++}else b+=y,y=0,h=255&l[b],h=(h<<g^255&l[b+1])&m;else i=$(0,255&l[b]),x--,b++;if(i&&(te(!1),0===t.avail_out))return 0}return te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f);break;case 2:I=function(e){let i,n,r=0;for(;;){if(x<So){if(ie(),x<So&&0==e)return 0;if(0===x)break}if(x>=3&&(h=(h<<g^255&l[b+2])&m,r=65535&d[h],u[b&a]=d[h],d[h]=b),C=y,Z=w,y=2,0!==r&&C<T&&(b-r&65535)<=o-So&&(2!=P&&(y=ne(r)),y<=5&&(1==P||3==y&&b-w>4096)&&(y=2)),C>=3&&y<=C){n=b+x-3,i=$(b-1-Z,C-3),x-=C-1,C-=2;do{++b<=n&&(h=(h<<g^255&l[b+2])&m,r=65535&d[h],u[b&a]=d[h],d[h]=b)}while(0!=--C);if(v=0,y=2,b++,i&&(te(!1),0===t.avail_out))return 0}else if(0!==v){if(i=$(0,255&l[b-1]),i&&te(!1),b++,x--,0===t.avail_out)return 0}else v=1,b++,x--}return 0!==v&&(i=$(0,255&l[b-1]),v=0),te(4==e),0===t.avail_out?4==e?2:0:4==e?3:1}(f)}if(2!=I&&3!=I||(i=Co),0==I||2==I)return 0===t.avail_out&&(r=-1),0;if(1==I){if(1==f)W(2,3),j(256,_o.static_ltree),X(),1+N+10-G<9&&(W(2,3),j(256,_o.static_ltree),X()),N=7;else if(ee(0,0,!1),3==f)for(S=0;S<p;S++)d[S]=0;if(t.flush_pending(),0===t.avail_out)return r=-1,0}}return 4!=f?0:1}}function Po(){const e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}Po.prototype={deflateInit:function(e,t){const i=this;return i.dstate=new Ao,t||(t=co),i.dstate.deflateInit(i,e,t)},deflate:function(e){const t=this;return t.dstate?t.dstate.deflate(t,e):ho},deflateEnd:function(){const e=this;if(!e.dstate)return ho;const t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){const i=this;return i.dstate?i.dstate.deflateParams(i,e,t):ho},deflateSetDictionary:function(e,t){const i=this;return i.dstate?i.dstate.deflateSetDictionary(i,e,t):ho},read_buf:function(e,t,i){const n=this;let r=n.avail_in;return r>i&&(r=i),0===r?0:(n.avail_in-=r,e.set(n.next_in.subarray(n.next_in_index,n.next_in_index+r),t),n.next_in_index+=r,n.total_in+=r,r)},flush_pending:function(){const e=this;let t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};const Eo=0,Mo=1,ko=-2,Io=-3,Oo=-4,Bo=-5,Ro=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Fo=1440,Do=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],Lo=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],Vo=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],No=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],Uo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Go=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],zo=15;function Ko(){let e,t,i,n,r,o;function s(e,t,s,a,l,c,u,d,h,p,f){let m,g,_,y,Z,v,b,w,x,C,S,T,A,P,E;C=0,Z=s;do{i[e[t+C]]++,C++,Z--}while(0!==Z);if(i[0]==s)return u[0]=-1,d[0]=0,Eo;for(w=d[0],v=1;v<=zo&&0===i[v];v++);for(b=v,w<v&&(w=v),Z=zo;0!==Z&&0===i[Z];Z--);for(_=Z,w>Z&&(w=Z),d[0]=w,P=1<<v;v<Z;v++,P<<=1)if((P-=i[v])<0)return Io;if((P-=i[Z])<0)return Io;for(i[Z]+=P,o[1]=v=0,C=1,A=2;0!=--Z;)o[A]=v+=i[C],A++,C++;Z=0,C=0;do{0!==(v=e[t+C])&&(f[o[v]++]=Z),C++}while(++Z<s);for(s=o[_],o[0]=Z=0,C=0,y=-1,T=-w,r[0]=0,S=0,E=0;b<=_;b++)for(m=i[b];0!=m--;){for(;b>T+w;){if(y++,T+=w,E=_-T,E=E>w?w:E,(g=1<<(v=b-T))>m+1&&(g-=m+1,A=b,v<E))for(;++v<E&&!((g<<=1)<=i[++A]);)g-=i[A];if(E=1<<v,p[0]+E>Fo)return Io;r[y]=S=p[0],p[0]+=E,0!==y?(o[y]=Z,n[0]=v,n[1]=w,v=Z>>>T-w,n[2]=S-r[y-1]-v,h.set(n,3*(r[y-1]+v))):u[0]=S}for(n[1]=b-T,C>=s?n[0]=192:f[C]<a?(n[0]=f[C]<256?0:96,n[2]=f[C++]):(n[0]=c[f[C]-a]+16+64,n[2]=l[f[C++]-a]),g=1<<b-T,v=Z>>>T;v<E;v+=g)h.set(n,3*(S+v));for(v=1<<b-1;Z&v;v>>>=1)Z^=v;for(Z^=v,x=(1<<T)-1;(Z&x)!=o[y];)y--,T-=w,x=(1<<T)-1}return 0!==P&&1!=_?Bo:Eo}function a(s){let a;for(e||(e=[],t=[],i=new Int32Array(zo+1),n=[],r=new Int32Array(zo),o=new Int32Array(zo+1)),t.length<s&&(t=[]),a=0;a<s;a++)t[a]=0;for(a=0;a<zo+1;a++)i[a]=0;for(a=0;a<3;a++)n[a]=0;r.set(i.subarray(0,zo),0),o.set(i.subarray(0,zo+1),0)}this.inflate_trees_bits=function(i,n,r,o,l){let c;return a(19),e[0]=0,c=s(i,0,19,19,null,null,r,n,o,e,t),c==Io?l.msg="oversubscribed dynamic bit lengths tree":c!=Bo&&0!==n[0]||(l.msg="incomplete dynamic bit lengths tree",c=Io),c},this.inflate_trees_dynamic=function(i,n,r,o,l,c,u,d,h){let p;return a(288),e[0]=0,p=s(r,0,i,257,Vo,No,c,o,d,e,t),p!=Eo||0===o[0]?(p==Io?h.msg="oversubscribed literal/length tree":p!=Oo&&(h.msg="incomplete literal/length tree",p=Io),p):(a(288),p=s(r,i,n,0,Uo,Go,u,l,d,e,t),p!=Eo||0===l[0]&&i>257?(p==Io?h.msg="oversubscribed distance tree":p==Bo?(h.msg="incomplete distance tree",p=Io):p!=Oo&&(h.msg="empty distance tree with lengths",p=Io),p):Eo)}}Ko.inflate_trees_fixed=function(e,t,i,n){return e[0]=9,t[0]=5,i[0]=Do,n[0]=Lo,Eo};const qo=0,Ho=1,Wo=2,jo=3,Jo=4,Xo=5,$o=6,Yo=7,Qo=8,es=9;function ts(){const e=this;let t,i,n,r,o=0,s=0,a=0,l=0,c=0,u=0,d=0,h=0,p=0,f=0;function m(e,t,i,n,r,o,s,a){let l,c,u,d,h,p,f,m,g,_,y,Z,v,b,w,x;f=a.next_in_index,m=a.avail_in,h=s.bitb,p=s.bitk,g=s.write,_=g<s.read?s.read-g-1:s.end-g,y=Ro[e],Z=Ro[t];do{for(;p<20;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;if(l=h&y,c=i,u=n,x=3*(u+l),0!==(d=c[x]))for(;;){if(h>>=c[x+1],p-=c[x+1],16&d){for(d&=15,v=c[x+2]+(h&Ro[d]),h>>=d,p-=d;p<15;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;for(l=h&Z,c=r,u=o,x=3*(u+l),d=c[x];;){if(h>>=c[x+1],p-=c[x+1],16&d){for(d&=15;p<d;)m--,h|=(255&a.read_byte(f++))<<p,p+=8;if(b=c[x+2]+(h&Ro[d]),h>>=d,p-=d,_-=v,g>=b)w=g-b,g-w>0&&2>g-w?(s.win[g++]=s.win[w++],s.win[g++]=s.win[w++],v-=2):(s.win.set(s.win.subarray(w,w+2),g),g+=2,w+=2,v-=2);else{w=g-b;do{w+=s.end}while(w<0);if(d=s.end-w,v>d){if(v-=d,g-w>0&&d>g-w)do{s.win[g++]=s.win[w++]}while(0!=--d);else s.win.set(s.win.subarray(w,w+d),g),g+=d,w+=d,d=0;w=0}}if(g-w>0&&v>g-w)do{s.win[g++]=s.win[w++]}while(0!=--v);else s.win.set(s.win.subarray(w,w+v),g),g+=v,w+=v,v=0;break}if(64&d)return a.msg="invalid distance code",v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,Io;l+=c[x+2],l+=h&Ro[d],x=3*(u+l),d=c[x]}break}if(64&d)return 32&d?(v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,Mo):(a.msg="invalid literal/length code",v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,Io);if(l+=c[x+2],l+=h&Ro[d],x=3*(u+l),0===(d=c[x])){h>>=c[x+1],p-=c[x+1],s.win[g++]=c[x+2],_--;break}}else h>>=c[x+1],p-=c[x+1],s.win[g++]=c[x+2],_--}while(_>=258&&m>=10);return v=a.avail_in-m,v=p>>3<v?p>>3:v,m+=v,f-=v,p-=v<<3,s.bitb=h,s.bitk=p,a.avail_in=m,a.total_in+=f-a.next_in_index,a.next_in_index=f,s.write=g,Eo}e.init=function(e,o,s,a,l,c){t=qo,d=e,h=o,n=s,p=a,r=l,f=c,i=null},e.proc=function(e,g,_){let y,Z,v,b,w,x,C,S=0,T=0,A=0;for(A=g.next_in_index,b=g.avail_in,S=e.bitb,T=e.bitk,w=e.write,x=w<e.read?e.read-w-1:e.end-w;;)switch(t){case qo:if(x>=258&&b>=10&&(e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,_=m(d,h,n,p,r,f,e,g),A=g.next_in_index,b=g.avail_in,S=e.bitb,T=e.bitk,w=e.write,x=w<e.read?e.read-w-1:e.end-w,_!=Eo)){t=_==Mo?Yo:es;break}a=d,i=n,s=p,t=Ho;case Ho:for(y=a;T<y;){if(0===b)return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);_=Eo,b--,S|=(255&g.read_byte(A++))<<T,T+=8}if(Z=3*(s+(S&Ro[y])),S>>>=i[Z+1],T-=i[Z+1],v=i[Z],0===v){l=i[Z+2],t=$o;break}if(16&v){c=15&v,o=i[Z+2],t=Wo;break}if(!(64&v)){a=v,s=Z/3+i[Z+2];break}if(32&v){t=Yo;break}return t=es,g.msg="invalid literal/length code",_=Io,e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);case Wo:for(y=c;T<y;){if(0===b)return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);_=Eo,b--,S|=(255&g.read_byte(A++))<<T,T+=8}o+=S&Ro[y],S>>=y,T-=y,a=h,i=r,s=f,t=jo;case jo:for(y=a;T<y;){if(0===b)return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);_=Eo,b--,S|=(255&g.read_byte(A++))<<T,T+=8}if(Z=3*(s+(S&Ro[y])),S>>=i[Z+1],T-=i[Z+1],v=i[Z],16&v){c=15&v,u=i[Z+2],t=Jo;break}if(!(64&v)){a=v,s=Z/3+i[Z+2];break}return t=es,g.msg="invalid distance code",_=Io,e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);case Jo:for(y=c;T<y;){if(0===b)return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);_=Eo,b--,S|=(255&g.read_byte(A++))<<T,T+=8}u+=S&Ro[y],S>>=y,T-=y,t=Xo;case Xo:for(C=w-u;C<0;)C+=e.end;for(;0!==o;){if(0===x&&(w==e.end&&0!==e.read&&(w=0,x=w<e.read?e.read-w-1:e.end-w),0===x&&(e.write=w,_=e.inflate_flush(g,_),w=e.write,x=w<e.read?e.read-w-1:e.end-w,w==e.end&&0!==e.read&&(w=0,x=w<e.read?e.read-w-1:e.end-w),0===x)))return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);e.win[w++]=e.win[C++],x--,C==e.end&&(C=0),o--}t=qo;break;case $o:if(0===x&&(w==e.end&&0!==e.read&&(w=0,x=w<e.read?e.read-w-1:e.end-w),0===x&&(e.write=w,_=e.inflate_flush(g,_),w=e.write,x=w<e.read?e.read-w-1:e.end-w,w==e.end&&0!==e.read&&(w=0,x=w<e.read?e.read-w-1:e.end-w),0===x)))return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);_=Eo,e.win[w++]=l,x--,t=qo;break;case Yo:if(T>7&&(T-=8,b++,A--),e.write=w,_=e.inflate_flush(g,_),w=e.write,x=w<e.read?e.read-w-1:e.end-w,e.read!=e.write)return e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);t=Qo;case Qo:return _=Mo,e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);case es:return _=Io,e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_);default:return _=ko,e.bitb=S,e.bitk=T,g.avail_in=b,g.total_in+=A-g.next_in_index,g.next_in_index=A,e.write=w,e.inflate_flush(g,_)}},e.free=function(){}}const is=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ns=0,rs=1,os=2,ss=3,as=4,ls=5,cs=6,us=7,ds=8,hs=9;function ps(e,t){const i=this;let n,r=ns,o=0,s=0,a=0;const l=[0],c=[0],u=new ts;let d=0,h=new Int32Array(3*Fo);const p=new Ko;i.bitk=0,i.bitb=0,i.win=new Uint8Array(t),i.end=t,i.read=0,i.write=0,i.reset=function(e,t){t&&(t[0]=0),r==cs&&u.free(e),r=ns,i.bitk=0,i.bitb=0,i.read=i.write=0},i.reset(e,null),i.inflate_flush=function(e,t){let n,r,o;return r=e.next_out_index,o=i.read,n=(o<=i.write?i.write:i.end)-o,n>e.avail_out&&(n=e.avail_out),0!==n&&t==Bo&&(t=Eo),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.win.subarray(o,o+n),r),r+=n,o+=n,o==i.end&&(o=0,i.write==i.end&&(i.write=0),n=i.write-o,n>e.avail_out&&(n=e.avail_out),0!==n&&t==Bo&&(t=Eo),e.avail_out-=n,e.total_out+=n,e.next_out.set(i.win.subarray(o,o+n),r),r+=n,o+=n),e.next_out_index=r,i.read=o,t},i.proc=function(e,t){let f,m,g,_,y,Z,v,b;for(_=e.next_in_index,y=e.avail_in,m=i.bitb,g=i.bitk,Z=i.write,v=Z<i.read?i.read-Z-1:i.end-Z;;){let w,x,C,S,T,A,P,E;switch(r){case ns:for(;g<3;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}switch(f=7&m,d=1&f,f>>>1){case 0:m>>>=3,g-=3,f=7&g,m>>>=f,g-=f,r=rs;break;case 1:w=[],x=[],C=[[]],S=[[]],Ko.inflate_trees_fixed(w,x,C,S),u.init(w[0],x[0],C[0],0,S[0],0),m>>>=3,g-=3,r=cs;break;case 2:m>>>=3,g-=3,r=ss;break;case 3:return m>>>=3,g-=3,r=hs,e.msg="invalid block type",t=Io,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t)}break;case rs:for(;g<32;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}if((~m>>>16&65535)!=(65535&m))return r=hs,e.msg="invalid stored block lengths",t=Io,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);o=65535&m,m=g=0,r=0!==o?os:0!==d?us:ns;break;case os:if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);if(0===v&&(Z==i.end&&0!==i.read&&(Z=0,v=Z<i.read?i.read-Z-1:i.end-Z),0===v&&(i.write=Z,t=i.inflate_flush(e,t),Z=i.write,v=Z<i.read?i.read-Z-1:i.end-Z,Z==i.end&&0!==i.read&&(Z=0,v=Z<i.read?i.read-Z-1:i.end-Z),0===v)))return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);if(t=Eo,f=o,f>y&&(f=y),f>v&&(f=v),i.win.set(e.read_buf(_,f),Z),_+=f,y-=f,Z+=f,v-=f,0!=(o-=f))break;r=0!==d?us:ns;break;case ss:for(;g<14;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}if(s=f=16383&m,(31&f)>29||(f>>5&31)>29)return r=hs,e.msg="too many length or distance symbols",t=Io,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);if(f=258+(31&f)+(f>>5&31),!n||n.length<f)n=[];else for(b=0;b<f;b++)n[b]=0;m>>>=14,g-=14,a=0,r=as;case as:for(;a<4+(s>>>10);){for(;g<3;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}n[is[a++]]=7&m,m>>>=3,g-=3}for(;a<19;)n[is[a++]]=0;if(l[0]=7,f=p.inflate_trees_bits(n,l,c,h,e),f!=Eo)return(t=f)==Io&&(n=null,r=hs),i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);a=0,r=ls;case ls:for(;f=s,!(a>=258+(31&f)+(f>>5&31));){let o,u;for(f=l[0];g<f;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}if(f=h[3*(c[0]+(m&Ro[f]))+1],u=h[3*(c[0]+(m&Ro[f]))+2],u<16)m>>>=f,g-=f,n[a++]=u;else{for(b=18==u?7:u-14,o=18==u?11:3;g<f+b;){if(0===y)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);t=Eo,y--,m|=(255&e.read_byte(_++))<<g,g+=8}if(m>>>=f,g-=f,o+=m&Ro[b],m>>>=b,g-=b,b=a,f=s,b+o>258+(31&f)+(f>>5&31)||16==u&&b<1)return n=null,r=hs,e.msg="invalid bit length repeat",t=Io,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);u=16==u?n[b-1]:0;do{n[b++]=u}while(0!=--o);a=b}}if(c[0]=-1,T=[],A=[],P=[],E=[],T[0]=9,A[0]=6,f=s,f=p.inflate_trees_dynamic(257+(31&f),1+(f>>5&31),n,T,A,P,E,h,e),f!=Eo)return f==Io&&(n=null,r=hs),t=f,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);u.init(T[0],A[0],h,P[0],h,E[0]),r=cs;case cs:if(i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,(t=u.proc(i,e,t))!=Mo)return i.inflate_flush(e,t);if(t=Eo,u.free(e),_=e.next_in_index,y=e.avail_in,m=i.bitb,g=i.bitk,Z=i.write,v=Z<i.read?i.read-Z-1:i.end-Z,0===d){r=ns;break}r=us;case us:if(i.write=Z,t=i.inflate_flush(e,t),Z=i.write,v=Z<i.read?i.read-Z-1:i.end-Z,i.read!=i.write)return i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);r=ds;case ds:return t=Mo,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);case hs:return t=Io,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t);default:return t=ko,i.bitb=m,i.bitk=g,e.avail_in=y,e.total_in+=_-e.next_in_index,e.next_in_index=_,i.write=Z,i.inflate_flush(e,t)}}},i.free=function(e){i.reset(e,null),i.win=null,h=null},i.set_dictionary=function(e,t,n){i.win.set(e.subarray(t,t+n),0),i.read=i.write=n},i.sync_point=function(){return r==rs?1:0}}const fs=13,ms=[0,0,255,255];function gs(){const e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),Eo):ko}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,Eo},e.inflateInit=function(i,n){return i.msg=null,e.blocks=null,n<8||n>15?(e.inflateEnd(i),ko):(e.wbits=n,i.istate.blocks=new ps(i,1<<n),t(i),Eo)},e.inflate=function(e,t){let i,n;if(!e||!e.istate||!e.next_in)return ko;const r=e.istate;for(t=4==t?Bo:Eo,i=Bo;;)switch(r.mode){case 0:if(0===e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,8!=(15&(r.method=e.read_byte(e.next_in_index++)))){r.mode=fs,e.msg="unknown compression method",r.marker=5;break}if(8+(r.method>>4)>r.wbits){r.mode=fs,e.msg="invalid win size",r.marker=5;break}r.mode=1;case 1:if(0===e.avail_in)return i;if(i=t,e.avail_in--,e.total_in++,n=255&e.read_byte(e.next_in_index++),((r.method<<8)+n)%31!=0){r.mode=fs,e.msg="incorrect header check",r.marker=5;break}if(!(32&n)){r.mode=7;break}r.mode=2;case 2:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,r.mode=3;case 3:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,r.mode=4;case 4:if(0===e.avail_in)return i;i=t,e.avail_in--,e.total_in++,r.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,r.mode=5;case 5:return 0===e.avail_in?i:(i=t,e.avail_in--,e.total_in++,r.need+=255&e.read_byte(e.next_in_index++),r.mode=6,2);case 6:return r.mode=fs,e.msg="need dictionary",r.marker=0,ko;case 7:if(i=r.blocks.proc(e,i),i==Io){r.mode=fs,r.marker=0;break}if(i==Eo&&(i=t),i!=Mo)return i;i=t,r.blocks.reset(e,r.was),r.mode=12;case 12:return e.avail_in=0,Mo;case fs:return Io;default:return ko}},e.inflateSetDictionary=function(e,t,i){let n=0,r=i;if(!e||!e.istate||6!=e.istate.mode)return ko;const o=e.istate;return r>=1<<o.wbits&&(r=(1<<o.wbits)-1,n=i-r),o.blocks.set_dictionary(t,n,r),o.mode=7,Eo},e.inflateSync=function(e){let i,n,r,o,s;if(!e||!e.istate)return ko;const a=e.istate;if(a.mode!=fs&&(a.mode=fs,a.marker=0),0===(i=e.avail_in))return Bo;for(n=e.next_in_index,r=a.marker;0!==i&&r<4;)e.read_byte(n)==ms[r]?r++:r=0!==e.read_byte(n)?0:4-r,n++,i--;return e.total_in+=n-e.next_in_index,e.next_in_index=n,e.avail_in=i,a.marker=r,4!=r?Io:(o=e.total_in,s=e.total_out,t(e),e.total_in=o,e.total_out=s,a.mode=7,Eo)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():ko}}function _s(){}_s.prototype={inflateInit:function(e){const t=this;return t.istate=new gs,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){const t=this;return t.istate?t.istate.inflate(t,e):ko},inflateEnd:function(){const e=this;if(!e.istate)return ko;const t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){const e=this;return e.istate?e.istate.inflateSync(e):ko},inflateSetDictionary:function(e,t){const i=this;return i.istate?i.istate.inflateSetDictionary(i,e,t):ko},read_byte:function(e){return this.next_in[e]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};const ys={chunkSize:524288,maxWorkers:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||2,terminateWorkerTimeout:5e3,useWebWorkers:!0,workerScripts:void 0},Zs=Object.assign({},ys);function vs(){return Zs}function bs(e){if(void 0!==e.baseURL&&(Zs.baseURL=e.baseURL),void 0!==e.chunkSize&&(Zs.chunkSize=e.chunkSize),void 0!==e.maxWorkers&&(Zs.maxWorkers=e.maxWorkers),void 0!==e.terminateWorkerTimeout&&(Zs.terminateWorkerTimeout=e.terminateWorkerTimeout),void 0!==e.useWebWorkers&&(Zs.useWebWorkers=e.useWebWorkers),void 0!==e.Deflate&&(Zs.Deflate=e.Deflate),void 0!==e.Inflate&&(Zs.Inflate=e.Inflate),void 0!==e.workerScripts){if(e.workerScripts.deflate){if(!Array.isArray(e.workerScripts.deflate))throw new Error("workerScripts.deflate must be an array");Zs.workerScripts||(Zs.workerScripts={}),Zs.workerScripts.deflate=e.workerScripts.deflate}if(e.workerScripts.inflate){if(!Array.isArray(e.workerScripts.inflate))throw new Error("workerScripts.inflate must be an array");Zs.workerScripts||(Zs.workerScripts={}),Zs.workerScripts.inflate=e.workerScripts.inflate}}}const ws=[];for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=t>>>1^3988292384:t>>>=1;ws[e]=t}const xs=class{constructor(e){this.crc=e||-1}append(e){let t=0|this.crc;for(let i=0,n=0|e.length;i<n;i++)t=t>>>8^ws[255&(t^e[i])];this.crc=t}get(){return~this.crc}},Cs=function(e){if("undefined"==typeof TextEncoder){e=unescape(encodeURIComponent(e));const t=new Uint8Array(e.length);for(let i=0;i<t.length;i++)t[i]=e.charCodeAt(i);return t}return(new TextEncoder).encode(e)},Ss={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const i=e[e.length-1],n=Ss.getPartial(i);return 32===n?e.concat(t):Ss._shiftRight(t,n,0|i,e.slice(0,e.length-1))},bitLength(e){const t=e.length;if(0===t)return 0;const i=e[t-1];return 32*(t-1)+Ss.getPartial(i)},clamp(e,t){if(32*e.length<t)return e;const i=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,i>0&&t&&(e[i-1]=Ss.partial(t,e[i-1]&2147483648>>t-1,1)),e},partial:(e,t,i)=>32===e?t:(i?0|t:t<<32-e)+1099511627776*e,getPartial:e=>Math.round(e/1099511627776)||32,_shiftRight(e,t,i,n){for(void 0===n&&(n=[]);t>=32;t-=32)n.push(i),i=0;if(0===t)return n.concat(e);for(let r=0;r<e.length;r++)n.push(i|e[r]>>>t),i=e[r]<<32-t;const r=e.length?e[e.length-1]:0,o=Ss.getPartial(r);return n.push(Ss.partial(t+o&31,t+o>32?i:n.pop(),1)),n}},Ts={bytes:{fromBits(e){const t=Ss.bitLength(e)/8,i=new Uint8Array(t);let n;for(let r=0;r<t;r++)3&r||(n=e[r/4]),i[r]=n>>>24,n<<=8;return i},toBits(e){const t=[];let i,n=0;for(i=0;i<e.length;i++)n=n<<8|e[i],3&~i||(t.push(n),n=0);return 3&i&&t.push(Ss.partial(8*(3&i),n)),t}}},As={sha1:function(e){e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()}};As.sha1.prototype={blockSize:512,reset:function(){const e=this;return e._h=this._init.slice(0),e._buffer=[],e._length=0,e},update:function(e){const t=this;"string"==typeof e&&(e=Ts.utf8String.toBits(e));const i=t._buffer=Ss.concat(t._buffer,e),n=t._length,r=t._length=n+Ss.bitLength(e);if(r>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");const o=new Uint32Array(i);let s=0;for(let e=t.blockSize+n-(t.blockSize+n&t.blockSize-1);e<=r;e+=t.blockSize)t._block(o.subarray(16*s,16*(s+1))),s+=1;return i.splice(0,16*s),t},finalize:function(){const e=this;let t=e._buffer;const i=e._h;t=Ss.concat(t,[Ss.partial(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),i},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(e,t,i,n){return e<=19?t&i|~t&n:e<=39?t^i^n:e<=59?t&i|t&n|i&n:e<=79?t^i^n:void 0},_S:function(e,t){return t<<e|t>>>32-e},_block:function(e){const t=this,i=t._h,n=Array(80);for(let t=0;t<16;t++)n[t]=e[t];let r=i[0],o=i[1],s=i[2],a=i[3],l=i[4];for(let e=0;e<=79;e++){e>=16&&(n[e]=t._S(1,n[e-3]^n[e-8]^n[e-14]^n[e-16]));const i=t._S(5,r)+t._f(e,o,s,a)+l+n[e]+t._key[Math.floor(e/20)]|0;l=a,a=s,s=t._S(30,o),o=r,r=i}i[0]=i[0]+r|0,i[1]=i[1]+o|0,i[2]=i[2]+s|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0}};const Ps=class{constructor(e){const t=this;t._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],t._tables[0][0][0]||t._precompute();const i=t._tables[0][4],n=t._tables[1],r=e.length;let o,s,a,l=1;if(4!==r&&6!==r&&8!==r)throw new Error("invalid aes key size");for(t._key=[s=e.slice(0),a=[]],o=r;o<4*r+28;o++){let e=s[o-1];(o%r==0||8===r&&o%r==4)&&(e=i[e>>>24]<<24^i[e>>16&255]<<16^i[e>>8&255]<<8^i[255&e],o%r==0&&(e=e<<8^e>>>24^l<<24,l=l<<1^283*(l>>7))),s[o]=s[o-r]^e}for(let e=0;o;e++,o--){const t=s[3&e?o:o-4];a[e]=o<=4||e<4?t:n[0][i[t>>>24]]^n[1][i[t>>16&255]]^n[2][i[t>>8&255]]^n[3][i[255&t]]}}encrypt(e){return this._crypt(e,0)}decrypt(e){return this._crypt(e,1)}_precompute(){const e=this._tables[0],t=this._tables[1],i=e[4],n=t[4],r=[],o=[];let s,a,l,c;for(let e=0;e<256;e++)o[(r[e]=e<<1^283*(e>>7))^e]=e;for(let u=s=0;!i[u];u^=a||1,s=o[s]||1){let o=s^s<<1^s<<2^s<<3^s<<4;o=o>>8^255&o^99,i[u]=o,n[o]=u,c=r[l=r[a=r[u]]];let d=16843009*c^65537*l^257*a^16843008*u,h=257*r[o]^16843008*o;for(let i=0;i<4;i++)e[i][u]=h=h<<24^h>>>8,t[i][o]=d=d<<24^d>>>8}for(let i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)}_crypt(e,t){if(4!==e.length)throw new Error("invalid aes block size");const i=this._key[t],n=i.length/4-2,r=[0,0,0,0],o=this._tables[t],s=o[0],a=o[1],l=o[2],c=o[3],u=o[4];let d,h,p,f=e[0]^i[0],m=e[t?3:1]^i[1],g=e[2]^i[2],_=e[t?1:3]^i[3],y=4;for(let e=0;e<n;e++)d=s[f>>>24]^a[m>>16&255]^l[g>>8&255]^c[255&_]^i[y],h=s[m>>>24]^a[g>>16&255]^l[_>>8&255]^c[255&f]^i[y+1],p=s[g>>>24]^a[_>>16&255]^l[f>>8&255]^c[255&m]^i[y+2],_=s[_>>>24]^a[f>>16&255]^l[m>>8&255]^c[255&g]^i[y+3],y+=4,f=d,m=h,g=p;for(let e=0;e<4;e++)r[t?3&-e:e]=u[f>>>24]<<24^u[m>>16&255]<<16^u[g>>8&255]<<8^u[255&_]^i[y++],d=f,f=m,m=g,g=_,_=d;return r}},Es={getRandomValues(e){const t=new Uint32Array(e.buffer),i=e=>{let t=987654321;const i=4294967295;return function(){return t=36969*(65535&t)+(t>>16)&i,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i)/4294967296+.5)*(Math.random()>.5?1:-1)}};for(let n,r=0;r<e.length;r+=4){const e=i(4294967296*(n||Math.random()));n=987654071*e(),t[r/4]=4294967296*e()|0}return e}},Ms=class{constructor(e,t){this._prf=e,this._initIv=t,this._iv=t}reset(){this._iv=this._initIv}update(e){return this.calculate(this._prf,e,this._iv)}incWord(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,i=e>>8&255,n=255&e;255===t?(t=0,255===i?(i=0,255===n?n=0:++n):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=n}return e}incCounter(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}calculate(e,t,i){let n;if(!(n=t.length))return[];const r=Ss.bitLength(t);for(let r=0;r<n;r+=4){this.incCounter(i);const n=e.encrypt(i);t[r]^=n[0],t[r+1]^=n[1],t[r+2]^=n[2],t[r+3]^=n[3]}return Ss.clamp(t,r)}},ks={importKey:e=>new ks.hmacSha1(Ts.bytes.toBits(e)),pbkdf2(e,t,i,n){if(i=i||1e4,n<0||i<0)throw new Error("invalid params to pbkdf2");const r=1+(n>>5)<<2;let o,s,a,l,c;const u=new ArrayBuffer(r),d=new DataView(u);let h=0;const p=Ss;for(t=Ts.bytes.toBits(t),c=1;h<(r||1);c++){for(o=s=e.encrypt(p.concat(t,[c])),a=1;a<i;a++)for(s=e.encrypt(s),l=0;l<s.length;l++)o[l]^=s[l];for(a=0;h<(r||1)&&a<o.length;a++)d.setInt32(h,o[a]),h+=4}return u.slice(0,n/8)},hmacSha1:class{constructor(e){const t=this,i=t._hash=As.sha1,n=[[],[]],r=i.prototype.blockSize/32;t._baseHash=[new i,new i],e.length>r&&(e=i.hash(e));for(let t=0;t<r;t++)n[0][t]=909522486^e[t],n[1][t]=1549556828^e[t];t._baseHash[0].update(n[0]),t._baseHash[1].update(n[1]),t._resultHash=new i(t._baseHash[0])}reset(){const e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}update(e){this._updated=!0,this._resultHash.update(e)}digest(){const e=this,t=e._resultHash.finalize(),i=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),i}encrypt(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},Is="Invalid pasword",Os=16,Bs={name:"PBKDF2"},Rs=Object.assign({hash:{name:"HMAC"}},Bs),Fs=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},Bs),Ds=["deriveBits"],Ls=[8,12,16],Vs=[16,24,32],Ns=10,Us=[0,0,0,0],Gs="undefined"!=typeof crypto,zs=Gs&&void 0!==crypto.subtle,Ks=Ts.bytes,qs=Ps,Hs=Ms,Ws=ks.hmacSha1;class js{constructor(e,t,i){Object.assign(this,{password:e,signed:t,strength:i-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;if(t.password){const i=Qs(e,0,Ls[t.strength]+2);await async function(e,t,i){await $s(e,i,Qs(t,0,Ls[e.strength]));const n=Qs(t,Ls[e.strength]),r=e.keys.passwordVerification;if(r[0]!=n[0]||r[1]!=n[1])throw new Error(Is)}(t,i,t.password),t.password=null,t.aesCtrGladman=new Hs(new qs(t.keys.key),Array.from(Us)),t.hmac=new Ws(t.keys.authentication),e=Qs(e,Ls[t.strength]+2)}return Xs(t,e,new Uint8Array(e.length-Ns-(e.length-Ns)%Os),0,Ns,!0)}flush(){const e=this,t=e.pendingInput,i=Qs(t,0,t.length-Ns),n=Qs(t,t.length-Ns);let r=new Uint8Array(0);if(i.length){const t=Ks.toBits(i);e.hmac.update(t);const n=e.aesCtrGladman.update(t);r=Ks.fromBits(n)}let o=!0;if(e.signed){const t=Qs(Ks.fromBits(e.hmac.digest()),0,Ns);for(let e=0;e<Ns;e++)t[e]!=n[e]&&(o=!1)}return{valid:o,data:r}}}class Js{constructor(e,t){Object.assign(this,{password:e,strength:t-1,pendingInput:new Uint8Array(0)})}async append(e){const t=this;let i=new Uint8Array(0);t.password&&(i=await async function(e,t){const i=(n=new Uint8Array(Ls[e.strength]),Gs&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(n):Es.getRandomValues(n));var n;return await $s(e,t,i),Ys(i,e.keys.passwordVerification)}(t,t.password),t.password=null,t.aesCtrGladman=new Hs(new qs(t.keys.key),Array.from(Us)),t.hmac=new Ws(t.keys.authentication));const n=new Uint8Array(i.length+e.length-e.length%Os);return n.set(i,0),Xs(t,e,n,i.length,0)}flush(){const e=this;let t=new Uint8Array(0);if(e.pendingInput.length){const i=e.aesCtrGladman.update(Ks.toBits(e.pendingInput));e.hmac.update(i),t=Ks.fromBits(i)}const i=Qs(Ks.fromBits(e.hmac.digest()),0,Ns);return{data:Ys(t,i),signature:i}}}function Xs(e,t,i,n,r,o){const s=t.length-r;let a;for(e.pendingInput.length&&(t=Ys(e.pendingInput,t),i=function(e,t){if(t&&t>e.length){const i=e;(e=new Uint8Array(t)).set(i,0)}return e}(i,s-s%Os)),a=0;a<=s-Os;a+=Os){const r=Ks.toBits(Qs(t,a,a+Os));o&&e.hmac.update(r);const s=e.aesCtrGladman.update(r);o||e.hmac.update(s),i.set(Ks.fromBits(s),a+n)}return e.pendingInput=Qs(t,a),i}async function $s(e,t,i){const n=Cs(t),r=await function(e,t,i,n,r){return Gs&&zs&&"function"==typeof crypto.subtle.importKey?crypto.subtle.importKey(e,t,i,!1,r):ks.importKey(t)}("raw",n,Rs,0,Ds),o=await async function(e,t,i){return Gs&&zs&&"function"==typeof crypto.subtle.deriveBits?await crypto.subtle.deriveBits(e,t,i):ks.pbkdf2(t,e.salt,Fs.iterations,i)}(Object.assign({salt:i},Fs),r,8*(2*Vs[e.strength]+2)),s=new Uint8Array(o);e.keys={key:Ks.toBits(Qs(s,0,Vs[e.strength])),authentication:Ks.toBits(Qs(s,Vs[e.strength],2*Vs[e.strength])),passwordVerification:Qs(s,2*Vs[e.strength])}}function Ys(e,t){let i=e;return e.length+t.length&&(i=new Uint8Array(e.length+t.length),i.set(e,0),i.set(t,e.length)),i}function Qs(e,t,i){return e.subarray(t,i)}class ea{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),ra(this,e)}append(e){const t=this;if(t.password){const i=ia(t,e.subarray(0,12));if(t.password=null,i[11]!=t.passwordVerification)throw new Error(Is);e=e.subarray(12)}return ia(t,e)}flush(){return{valid:!0,data:new Uint8Array(0)}}}class ta{constructor(e,t){Object.assign(this,{password:e,passwordVerification:t}),ra(this,e)}append(e){const t=this;let i,n;if(t.password){t.password=null;const r=crypto.getRandomValues(new Uint8Array(12));r[11]=t.passwordVerification,i=new Uint8Array(e.length+r.length),i.set(na(t,r),0),n=12}else i=new Uint8Array(e.length),n=0;return i.set(na(t,e),n),i}flush(){return{data:new Uint8Array(0)}}}function ia(e,t){const i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=sa(e)^t[n],oa(e,i[n]);return i}function na(e,t){const i=new Uint8Array(t.length);for(let n=0;n<t.length;n++)i[n]=sa(e)^t[n],oa(e,t[n]);return i}function ra(e,t){e.keys=[305419896,591751049,878082192],e.crcKey0=new xs(e.keys[0]),e.crcKey2=new xs(e.keys[2]);for(let i=0;i<t.length;i++)oa(e,t.charCodeAt(i))}function oa(e,t){e.crcKey0.append([t]),e.keys[0]=~e.crcKey0.get(),e.keys[1]=la(e.keys[1]+aa(e.keys[0])),e.keys[1]=la(Math.imul(e.keys[1],134775813)+1),e.crcKey2.append([e.keys[1]>>>24]),e.keys[2]=~e.crcKey2.get()}function sa(e){const t=2|e.keys[2];return aa(Math.imul(t,1^t)>>>8)}function aa(e){return 255&e}function la(e){return 4294967295&e}const ca="deflate",ua="inflate",da="Invalid signature";class ha{constructor(e,{signature:t,password:i,signed:n,compressed:r,zipCrypto:o,passwordVerification:s,encryptionStrength:a},{chunkSize:l}){const c=Boolean(i);Object.assign(this,{signature:t,encrypted:c,signed:n,compressed:r,inflate:r&&new e({chunkSize:l}),crc32:n&&new xs,zipCrypto:o,decrypt:c&&o?new ea(i,s):new js(i,n,a)})}async append(e){const t=this;return t.encrypted&&e.length&&(e=await t.decrypt.append(e)),t.compressed&&e.length&&(e=await t.inflate.append(e)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),e}async flush(){const e=this;let t,i=new Uint8Array(0);if(e.encrypted){const t=e.decrypt.flush();if(!t.valid)throw new Error(da);i=t.data}if((!e.encrypted||e.zipCrypto)&&e.signed){const i=new DataView(new Uint8Array(4).buffer);if(t=e.crc32.get(),i.setUint32(0,t),e.signature!=i.getUint32(0,!1))throw new Error(da)}return e.compressed&&(i=await e.inflate.append(i)||new Uint8Array(0),await e.inflate.flush()),{data:i,signature:t}}}class pa{constructor(e,{encrypted:t,signed:i,compressed:n,level:r,zipCrypto:o,password:s,passwordVerification:a,encryptionStrength:l},{chunkSize:c}){Object.assign(this,{encrypted:t,signed:i,compressed:n,deflate:n&&new e({level:r||5,chunkSize:c}),crc32:i&&new xs,zipCrypto:o,encrypt:t&&o?new ta(s,a):new Js(s,l)})}async append(e){const t=this;let i=e;return t.compressed&&e.length&&(i=await t.deflate.append(e)),t.encrypted&&i.length&&(i=await t.encrypt.append(i)),(!t.encrypted||t.zipCrypto)&&t.signed&&e.length&&t.crc32.append(e),i}async flush(){const e=this;let t,i=new Uint8Array(0);if(e.compressed&&(i=await e.deflate.flush()||new Uint8Array(0)),e.encrypted){i=await e.encrypt.append(i);const n=e.encrypt.flush();t=n.signature;const r=new Uint8Array(i.length+n.data.length);r.set(i,0),r.set(n.data,i.length),i=r}return e.encrypted&&!e.zipCrypto||!e.signed||(t=e.crc32.get()),{data:i,signature:t}}}const fa="init",ma="append",ga="flush";let _a=!0;const ya=(e,t,i,n,r,o,s)=>(Object.assign(e,{busy:!0,codecConstructor:t,options:Object.assign({},i),scripts:s,terminate(){e.worker&&!e.busy&&(e.worker.terminate(),e.interface=null)},onTaskFinished(){e.busy=!1,r(e)}}),o?function(e,t){let i;const n={type:"module"};if(!e.interface){if(_a)try{e.worker=r({},t.baseURL)}catch(i){_a=!1,e.worker=r(n,t.baseURL)}else e.worker=r(n,t.baseURL);e.worker.addEventListener("message",(function(t){const n=t.data;if(i){const t=n.error,r=n.type;if(t){const n=new Error(t.message);n.stack=t.stack,i.reject(n),i=null,e.onTaskFinished()}else if(r==fa||r==ga||r==ma){const t=n.data;r==ga?(i.resolve({data:new Uint8Array(t),signature:n.signature}),i=null,e.onTaskFinished()):i.resolve(t&&new Uint8Array(t))}}}),!1),e.interface={append:e=>o({type:ma,data:e}),flush:()=>o({type:ga}),abort(){e.onTaskFinished()}}}return e.interface;function r(t,i){let n,r;n=e.scripts[0],"function"==typeof n&&(n=n());try{r=new URL(n,i)}catch(e){r=n}return new Worker(r,t)}async function o(n){if(!i){const i=e.options,n=e.scripts.slice(1);await s({scripts:n,type:fa,options:i,config:{chunkSize:t.chunkSize}})}return s(n)}function s(t){const n=e.worker,r=new Promise(((e,t)=>i={resolve:e,reject:t}));try{if(t.data)try{t.data=t.data.buffer,n.postMessage(t,[t.data])}catch(e){n.postMessage(t)}else n.postMessage(t)}catch(t){i.reject(t),i=null,e.onTaskFinished()}return r}}(e,n):function(e,t){const i=function(e,t,i){return t.codecType.startsWith(ca)?new pa(e,t,i):t.codecType.startsWith(ua)?new ha(e,t,i):void 0}(e.codecConstructor,e.options,t);return{async append(t){try{return await i.append(t)}catch(t){throw e.onTaskFinished(),t}},async flush(){try{return await i.flush()}finally{e.onTaskFinished()}},abort(){e.onTaskFinished()}}}(e,n));let Za=[];const va=[];function ba(e,t,i){const n=!(!t.compressed&&!t.signed&&!t.encrypted)&&(t.useWebWorkers||void 0===t.useWebWorkers&&i.useWebWorkers),r=n&&i.workerScripts?i.workerScripts[t.codecType]:[];if(Za.length<i.maxWorkers){const s={};return Za.push(s),ya(s,e,t,i,o,n,r)}{const s=Za.find((e=>!e.busy));return s?(wa(s),ya(s,e,t,i,o,n,r)):new Promise((i=>va.push({resolve:i,codecConstructor:e,options:t,webWorker:n,scripts:r})))}function o(e){if(va.length){const[{resolve:t,codecConstructor:n,options:r,webWorker:s,scripts:a}]=va.splice(0,1);t(ya(e,n,r,i,o,s,a))}else e.worker?(wa(e),Number.isFinite(i.terminateWorkerTimeout)&&i.terminateWorkerTimeout>=0&&(e.terminateTimeout=setTimeout((()=>{Za=Za.filter((t=>t!=e)),e.terminate()}),i.terminateWorkerTimeout))):Za=Za.filter((t=>t!=e))}}function wa(e){e.terminateTimeout&&(clearTimeout(e.terminateTimeout),e.terminateTimeout=null)}const xa="text/plain";class Ca{constructor(){this.size=0}init(){this.initialized=!0}}class Sa extends Ca{}class Ta extends Ca{writeUint8Array(e){this.size+=e.length}}class Aa extends Sa{constructor(e){super(),this.blobReader=new Ma(new Blob([e],{type:xa}))}init(){super.init(),this.blobReader.init(),this.size=this.blobReader.size}readUint8Array(e,t){return this.blobReader.readUint8Array(e,t)}}class Pa extends Ta{constructor(e){super(),this.encoding=e,this.blob=new Blob([],{type:xa})}writeUint8Array(e){super.writeUint8Array(e),this.blob=new Blob([this.blob,e.buffer],{type:xa})}getData(){if(this.blob.text)return this.blob.text();{const e=new FileReader;return new Promise(((t,i)=>{e.onload=e=>t(e.target.result),e.onerror=()=>i(e.error),e.readAsText(this.blob,this.encoding)}))}}}class Ea extends Ta{constructor(e){super(),this.data="data:"+(e||"")+";base64,",this.pending=[]}writeUint8Array(e){super.writeUint8Array(e);let t=0,i=this.pending;const n=this.pending.length;for(this.pending="",t=0;t<3*Math.floor((n+e.length)/3)-n;t++)i+=String.fromCharCode(e[t]);for(;t<e.length;t++)this.pending+=String.fromCharCode(e[t]);i.length>2?this.data+=btoa(i):this.pending=i}getData(){return this.data+btoa(this.pending)}}class Ma extends Sa{constructor(e){super(),this.blob=e,this.size=e.size}async readUint8Array(e,t){if(this.blob.arrayBuffer)return new Uint8Array(await this.blob.slice(e,e+t).arrayBuffer());{const i=new FileReader;return new Promise(((n,r)=>{i.onload=e=>n(new Uint8Array(e.target.result)),i.onerror=()=>r(i.error),i.readAsArrayBuffer(this.blob.slice(e,e+t))}))}}}class ka extends Ta{constructor(e){super(),this.contentType=e,this.arrayBuffersMaxlength=8,Ia(this)}writeUint8Array(e){super.writeUint8Array(e),this.arrayBuffers.length==this.arrayBuffersMaxlength&&Oa(this),this.arrayBuffers.push(e.buffer)}getData(){return this.blob||(this.arrayBuffers.length&&Oa(this),this.blob=this.pendingBlob,Ia(this)),this.blob}}function Ia(e){e.pendingBlob=new Blob([],{type:e.contentType}),e.arrayBuffers=[]}function Oa(e){e.pendingBlob=new Blob([e.pendingBlob,...e.arrayBuffers],{type:e.contentType}),e.arrayBuffers=[]}const Ba=4294967295,Ra=65535,Fa=67324752,Da=33639248,La=101010256,Va=101075792,Na=117853008,Ua=21589,Ga=2048,za="/",Ka=new Date(2107,11,31),qa=new Date(1980,0,1),Ha="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼¶§▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂ÇüéâäàåçêëèïîìÄÅÉæÆôöòûùÿÖÜ¢£¥₧ƒáíóúñÑªº¿⌐¬½¼¡«»░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀αßΓπΣσµτΦΘΩδ∞φε∩≡±≥≤⌠⌡÷≈°∙·√ⁿ²■ ".split(""),Wa=function(e,t){if(t&&"cp437"==t.trim().toLowerCase())return(e=>{let t="";for(let i=0;i<e.length;i++)t+=Ha[e[i]];return t})(e);if("undefined"==typeof TextDecoder){const t=new FileReader;return new Promise(((i,n)=>{t.onload=e=>i(e.target.result),t.onerror=()=>n(t.error),t.readAsText(new Blob([e]))}))}return new TextDecoder(t).decode(e)},ja="Abort error";async function Ja(e,t,i,n,r,o,s){const a=Math.max(o.chunkSize,64);return async function o(l=0,c=0){const u=s.signal,d=r();if(l<d){Xa(u,e);const r=await t.readUint8Array(l+n,Math.min(a,d-l)),h=r.length;Xa(u,e);const p=await e.append(r);if(Xa(u,e),c+=await $a(i,p),s.onprogress)try{s.onprogress(l+h,d)}catch(e){}return o(l+a,c)}{const t=await e.flush();return c+=await $a(i,t.data),{signature:t.signature,length:c}}}()}function Xa(e,t){if(e&&e.aborted)throw t.abort(),new Error(ja)}async function $a(e,t){return t.length&&await e.writeUint8Array(t),t.length}const Ya=["filename","rawFilename","directory","encrypted","compressedSize","uncompressedSize","lastModDate","rawLastModDate","comment","rawComment","signature","extraField","rawExtraField","bitFlag","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","filenameUTF8","commentUTF8","offset","zip64","compressionMethod","extraFieldNTFS","lastAccessDate","creationDate","extraFieldExtendedTimestamp","version","versionMadeBy","msDosCompatible","internalFileAttribute","externalFileAttribute"];class Qa{constructor(e){Ya.forEach((t=>this[t]=e[t]))}}const el="File format is not recognized",tl="Compression method not supported",il="utf-8",nl="cp437",rl=["uncompressedSize","compressedSize","offset"];class ol{constructor(e,t={}){Object.assign(this,{reader:e,options:t,config:vs()})}async*getEntriesGenerator(e={}){const t=this,i=t.reader;if(i.initialized||await i.init(),i.size<22)throw new Error(el);const n=await async function(e,t,i,n,r){const o=new Uint8Array(4);var s,a;s=_l(o),a=t,s.setUint32(0,a,!0);return await l(22)||await l(Math.min(1048582,i));async function l(t){const n=i-t,r=await yl(e,n,t);for(let e=r.length-22;e>=0;e--)if(r[e]==o[0]&&r[e+1]==o[1]&&r[e+2]==o[2]&&r[e+3]==o[3])return{offset:n+e,buffer:r.slice(e,e+22).buffer}}}(i,La,i.size);if(!n)throw new Error("End of central directory not found");const r=_l(n);let o=ml(r,12),s=ml(r,16),a=fl(r,8),l=0;if(s==Ba||o==Ba||a==Ra){const e=_l(await yl(i,n.offset-20,20));if(ml(e,0)!=Na)throw new Error("End of Zip64 central directory not found");s=gl(e,8);let t=await yl(i,s,56),r=_l(t);const c=n.offset-20-56;if(ml(r,0)!=Va&&s!=c){const e=s;s=c,l=s-e,t=await yl(i,s,56),r=_l(t)}if(ml(r,0)!=Va)throw new Error("End of Zip64 central directory locator not found");a=gl(r,32),o=gl(r,40),s-=o}if(s<0||s>=i.size)throw new Error(el);let c=0,u=await yl(i,s,o),d=_l(u);if(o){const e=n.offset-o;if(ml(d,c)!=Da&&s!=e){const t=s;s=e,l=s-t,u=await yl(i,s,o),d=_l(u)}}if(s<0||s>=i.size)throw new Error(el);for(let n=0;n<a;n++){const r=new sl(i,t.config,t.options);if(ml(d,c)!=Da)throw new Error("Central directory header not found");al(r,d,c+6);const o=Boolean(r.bitFlag.languageEncodingFlag),s=c+46,h=s+r.filenameLength,p=h+r.extraFieldLength,f=fl(d,c+4),m=!0;Object.assign(r,{versionMadeBy:f,msDosCompatible:m,compressedSize:0,uncompressedSize:0,commentLength:fl(d,c+32),directory:m&&!(16&~pl(d,c+38)),offset:ml(d,c+42)+l,internalFileAttribute:ml(d,c+34),externalFileAttribute:ml(d,c+38),rawFilename:u.subarray(s,h),filenameUTF8:o,commentUTF8:o,rawExtraField:u.subarray(h,p)});const g=p+r.commentLength;r.rawComment=u.subarray(p,g);const _=ul(t,e,"filenameEncoding"),y=ul(t,e,"commentEncoding"),[Z,v]=await Promise.all([Wa(r.rawFilename,r.filenameUTF8?il:_||nl),Wa(r.rawComment,r.commentUTF8?il:y||nl)]);r.filename=Z,r.comment=v,!r.directory&&r.filename.endsWith(za)&&(r.directory=!0),await ll(r,r,d,c+6);const b=new Qa(r);if(b.getData=(e,t)=>r.getData(e,b,t),c=g,e.onprogress)try{e.onprogress(n+1,a,new Qa(r))}catch(e){}yield b}return!0}async getEntries(e={}){const t=[],i=this.getEntriesGenerator(e);let n=i.next();for(;!(await n).done;)t.push((await n).value),n=i.next();return t}async close(){}}class sl{constructor(e,t,i){Object.assign(this,{reader:e,config:t,options:i})}async getData(e,t,i={}){const n=this,{reader:r,offset:o,extraFieldAES:s,compressionMethod:a,config:l,bitFlag:c,signature:u,rawLastModDate:d,compressedSize:h}=n,p=n.localDirectory={};r.initialized||await r.init();let f=await yl(r,o,30);const m=_l(f);let g=ul(n,i,"password");if(g=g&&g.length&&g,s&&99!=s.originalCompressionMethod)throw new Error(tl);if(0!=a&&8!=a)throw new Error(tl);if(ml(m,0)!=Fa)throw new Error("Local file header not found");al(p,m,4),f=await yl(r,o,30+p.filenameLength+p.extraFieldLength),p.rawExtraField=f.subarray(30+p.filenameLength),await ll(n,p,m,4),t.lastAccessDate=p.lastAccessDate,t.creationDate=p.creationDate;const _=n.encrypted&&p.encrypted,y=_&&!s;if(_){if(!y&&void 0===s.strength)throw new Error("Encryption method not supported");if(!g)throw new Error("File contains encrypted entry")}const Z=await ba(l.Inflate,{codecType:ua,password:g,zipCrypto:y,encryptionStrength:s&&s.strength,signed:ul(n,i,"checkSignature"),passwordVerification:y&&(c.dataDescriptor?d>>>8&255:u>>>24&255),signature:u,compressed:0!=a,encrypted:_,useWebWorkers:ul(n,i,"useWebWorkers")},l);e.initialized||await e.init();const v=ul(n,i,"signal"),b=o+30+p.filenameLength+p.extraFieldLength;return await Ja(Z,r,e,b,(()=>h),l,{onprogress:i.onprogress,signal:v}),e.getData()}}function al(e,t,i){const n=e.rawBitFlag=fl(t,i+2),r=!(1&~n),o=ml(t,i+6);Object.assign(e,{encrypted:r,version:fl(t,i),bitFlag:{level:(6&n)>>1,dataDescriptor:!(8&~n),languageEncodingFlag:(n&Ga)==Ga},rawLastModDate:o,lastModDate:dl(o),filenameLength:fl(t,i+22),extraFieldLength:fl(t,i+24)})}async function ll(e,t,i,n){const r=t.rawExtraField,o=t.extraField=new Map,s=_l(new Uint8Array(r));let a=0;try{for(;a<r.length;){const e=fl(s,a),t=fl(s,a+2);o.set(e,{type:e,data:r.slice(a+4,a+4+t)}),a+=4+t}}catch(e){}const l=fl(i,n+4);t.signature=ml(i,n+10),t.uncompressedSize=ml(i,n+18),t.compressedSize=ml(i,n+14);const c=o.get(1);c&&(function(e,t){t.zip64=!0;const i=_l(e.data);e.values=[];for(let t=0;t<Math.floor(e.data.length/8);t++)e.values.push(gl(i,0+8*t));const n=rl.filter((e=>t[e]==Ba));for(let t=0;t<n.length;t++)e[n[t]]=e.values[t];rl.forEach((i=>{if(t[i]==Ba){if(void 0===e[i])throw new Error("Zip64 extra field not found");t[i]=e[i]}}))}(c,t),t.extraFieldZip64=c);const u=o.get(28789);u&&(await cl(u,"filename","rawFilename",t,e),t.extraFieldUnicodePath=u);const d=o.get(25461);d&&(await cl(d,"comment","rawComment",t,e),t.extraFieldUnicodeComment=d);const h=o.get(39169);h?(function(e,t,i){const n=_l(e.data);e.vendorVersion=pl(n,0),e.vendorId=pl(n,2);const r=pl(n,4);e.strength=r,e.originalCompressionMethod=i,t.compressionMethod=e.compressionMethod=fl(n,5)}(h,t,l),t.extraFieldAES=h):t.compressionMethod=l;const p=o.get(10);p&&(function(e,t){const i=_l(e.data);let n,r=4;try{for(;r<e.data.length&&!n;){const t=fl(i,r),o=fl(i,r+2);1==t&&(n=e.data.slice(r+4,r+4+o)),r+=4+o}}catch(e){}try{if(n&&24==n.length){const i=_l(n),r=i.getBigUint64(0,!0),o=i.getBigUint64(8,!0),s=i.getBigUint64(16,!0);Object.assign(e,{rawLastModDate:r,rawLastAccessDate:o,rawCreationDate:s});const a=hl(r),l={lastModDate:a,lastAccessDate:hl(o),creationDate:hl(s)};Object.assign(e,l),Object.assign(t,l)}}catch(e){}}(p,t),t.extraFieldNTFS=p);const f=o.get(Ua);f&&(function(e,t){const i=_l(e.data),n=pl(i,0),r=[],o=[];1&~n||(r.push("lastModDate"),o.push("rawLastModDate")),2&~n||(r.push("lastAccessDate"),o.push("rawLastAccessDate")),4&~n||(r.push("creationDate"),o.push("rawCreationDate"));let s=1;r.forEach(((n,r)=>{if(e.data.length>=s+4){const a=ml(i,s);t[n]=e[n]=new Date(1e3*a);const l=o[r];e[l]=a}s+=4}))}(f,t),t.extraFieldExtendedTimestamp=f)}async function cl(e,t,i,n,r){const o=_l(e.data);e.version=pl(o,0),e.signature=ml(o,1);const s=new xs;s.append(r[i]);const a=_l(new Uint8Array(4));a.setUint32(0,s.get(),!0),e[t]=await Wa(e.data.subarray(5)),e.valid=!r.bitFlag.languageEncodingFlag&&e.signature==ml(a,0),e.valid&&(n[t]=e[t],n[t+"UTF8"]=!0)}function ul(e,t,i){return void 0===t[i]?e.options[i]:t[i]}function dl(e){const t=(4294901760&e)>>16,i=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&i)>>11,(2016&i)>>5,2*(31&i),0)}catch(e){}}function hl(e){return new Date(Number(e/BigInt(1e4)-BigInt(116444736e5)))}function pl(e,t){return e.getUint8(t)}function fl(e,t){return e.getUint16(t,!0)}function ml(e,t){return e.getUint32(t,!0)}function gl(e,t){return Number(e.getBigUint64(t,!0))}function _l(e){return new DataView(e.buffer)}function yl(e,t,i){return e.readUint8Array(t,i)}const Zl="Version exceeds 65535",vl="Zip64 is not supported",bl=new Uint8Array([7,0,2,0,65,69,3,0,0]);let wl=0;class xl{constructor(e,t={}){Object.assign(this,{writer:e,options:t,config:vs(),files:new Map,offset:e.size,pendingCompressedSize:0,pendingEntries:[],pendingAddFileCalls:new Set})}async add(e="",t,i={}){const n=this;if(!(wl<n.config.maxWorkers))return new Promise(((r,o)=>n.pendingEntries.push({name:e,reader:t,options:i,resolve:r,reject:o})));{let r;wl++;try{return r=async function(e,t,i,n){if(t=t.trim(),n.directory&&!t.endsWith(za)?t+=za:n.directory=t.endsWith(za),e.files.has(t))throw new Error("File already exists");const r=Cs(t);if(r.length>Ra)throw new Error("File entry name exceeds 64KB");const o=n.comment||"",s=Cs(o);if(s.length>Ra)throw new Error("File entry comment exceeds 64KB");const a=e.options.version||n.version||0;if(a>Ra)throw new Error(Zl);const l=e.options.versionMadeBy||n.versionMadeBy||20;if(l>Ra)throw new Error(Zl);const c=Tl(e,n,"lastModDate")||new Date,u=Tl(e,n,"lastAccessDate"),d=Tl(e,n,"creationDate"),h=Tl(e,n,"password"),p=Tl(e,n,"encryptionStrength")||3,f=Tl(e,n,"zipCrypto");if(void 0!==h&&void 0!==p&&(p<1||p>3))throw new Error("The strength must equal 1, 2, or 3");let m=new Uint8Array(0);const g=n.extraField;if(g){let e=0,t=0;g.forEach((t=>e+=4+t.length)),m=new Uint8Array(e),g.forEach(((e,i)=>{if(i>Ra)throw new Error("Extra field type exceeds 65535");if(e.length>Ra)throw new Error("Extra field data exceeds 64KB");kl(m,new Uint16Array([i]),t),kl(m,new Uint16Array([e.length]),t+2),kl(m,e,t+4),t+=4+e.length}))}let _=Tl(e,n,"extendedTimestamp");void 0===_&&(_=!0);let y=0,Z=Tl(e,n,"keepOrder");void 0===Z&&(Z=!0);let v=0,b=Tl(e,n,"msDosCompatible");void 0===b&&(b=!0);const w=Tl(e,n,"internalFileAttribute")||0,x=Tl(e,n,"externalFileAttribute")||0;i&&(i.initialized||await i.init(),v=i.size,y=function(e){return e+5*(Math.floor(e/16383)+1)}(v));let C=n.zip64||e.options.zip64||!1;if(e.offset+e.pendingCompressedSize>=Ba||v>=Ba||y>=Ba){if(!1===n.zip64||!1===e.options.zip64||!Z)throw new Error(vl);C=!0}e.pendingCompressedSize+=y,await Promise.resolve();const S=Tl(e,n,"level"),T=Tl(e,n,"useWebWorkers"),A=Tl(e,n,"bufferedWrite");let P=Tl(e,n,"dataDescriptor"),E=Tl(e,n,"dataDescriptorSignature");const M=Tl(e,n,"signal");void 0===P&&(P=!0),P&&void 0===E&&(E=!1);const k=await async function(e,t,i,n){const r=e.files,o=e.writer,s=Array.from(r.values()).pop();let a,l,c,u={};r.set(t,u);try{let d,h,p;if(n.keepOrder&&(d=s&&s.lock),u.lock=p=new Promise((e=>c=e)),n.bufferedWrite||e.lockWrite||!n.dataDescriptor?(h=new ka,h.init(),a=!0):(e.lockWrite=new Promise((e=>l=e)),o.initialized||await o.init(),h=o),u=await async function(e,t,i,n){const{rawFilename:r,lastAccessDate:o,creationDate:s,password:a,level:l,zip64:c,zipCrypto:u,dataDescriptor:d,dataDescriptorSignature:h,directory:p,version:f,versionMadeBy:m,rawComment:g,rawExtraField:_,useWebWorkers:y,onprogress:Z,signal:v,encryptionStrength:b,extendedTimestamp:w,msDosCompatible:x,internalFileAttribute:C,externalFileAttribute:S}=n,T=Boolean(a&&a.length),A=0!==l&&!p;let P,E,M;if(T&&!u){P=new Uint8Array(bl.length+2);const e=Il(P);Pl(e,0,39169),kl(P,bl,2),Al(e,8,b)}else P=new Uint8Array(0);if(w){M=new Uint8Array(9+(o?4:0)+(s?4:0));const e=Il(M);Pl(e,0,Ua),Pl(e,2,M.length-4),Al(e,4,1+(o?2:0)+(s?4:0)),El(e,5,Math.floor(n.lastModDate.getTime()/1e3)),o&&El(e,9,Math.floor(o.getTime()/1e3)),s&&El(e,13,Math.floor(s.getTime()/1e3));try{E=new Uint8Array(36);const e=Il(E),t=Sl(n.lastModDate);Pl(e,0,10),Pl(e,2,32),Pl(e,8,1),Pl(e,10,24),Ml(e,12,t),Ml(e,20,Sl(o)||t),Ml(e,28,Sl(s)||t)}catch(e){E=new Uint8Array(0)}}else E=M=new Uint8Array(0);const k={version:f||20,versionMadeBy:m,zip64:c,directory:Boolean(p),filenameUTF8:!0,rawFilename:r,commentUTF8:!0,rawComment:g,rawExtraFieldZip64:c?new Uint8Array(28):new Uint8Array(0),rawExtraFieldExtendedTimestamp:M,rawExtraFieldNTFS:E,rawExtraFieldAES:P,rawExtraField:_,extendedTimestamp:w,msDosCompatible:x,internalFileAttribute:C,externalFileAttribute:S};let I=k.uncompressedSize=0,O=Ga;d&&(O|=8);let B=0;A&&(B=8),c&&(k.version=k.version>45?k.version:45),T&&(O|=1,u||(k.version=k.version>51?k.version:51,B=99,A&&(k.rawExtraFieldAES[9]=8))),k.compressionMethod=B;const R=k.headerArray=new Uint8Array(26),F=Il(R);Pl(F,0,k.version),Pl(F,2,O),Pl(F,4,B);const D=new Uint32Array(1),L=Il(D);let V;V=n.lastModDate<qa?qa:n.lastModDate>Ka?Ka:n.lastModDate,Pl(L,0,(V.getHours()<<6|V.getMinutes())<<5|V.getSeconds()/2),Pl(L,2,(V.getFullYear()-1980<<4|V.getMonth()+1)<<5|V.getDate());const N=D[0];El(F,6,N),Pl(F,22,r.length);const U=P.length+M.length+E.length+k.rawExtraField.length;Pl(F,24,U);const G=new Uint8Array(30+r.length+U);let z;El(Il(G),0,Fa),kl(G,R,4),kl(G,r,30),kl(G,P,30+r.length),kl(G,M,30+r.length+P.length),kl(G,E,30+r.length+P.length+M.length),kl(G,k.rawExtraField,30+r.length+P.length+M.length+E.length);let K=0;if(e){const n=await ba(i.Deflate,{codecType:ca,level:l,password:a,encryptionStrength:b,zipCrypto:T&&u,passwordVerification:T&&u&&N>>8&255,signed:!0,compressed:A,encrypted:T,useWebWorkers:y},i);await t.writeUint8Array(G),k.dataWritten=!0,z=await Ja(n,e,t,0,(()=>e.size),i,{onprogress:Z,signal:v}),I=k.uncompressedSize=e.size,K=z.length}else await t.writeUint8Array(G),k.dataWritten=!0;let q,H=new Uint8Array(0),W=0;if(d&&(H=new Uint8Array(c?h?24:20:h?16:12),q=Il(H),h&&(W=4,El(q,0,134695760))),e){const e=z.signature;if(T&&!u||void 0===e||(El(F,10,e),k.signature=e,d&&El(q,W,e)),c){const e=Il(k.rawExtraFieldZip64);Pl(e,0,1),Pl(e,2,24),El(F,14,Ba),Ml(e,12,BigInt(K)),El(F,18,Ba),Ml(e,4,BigInt(I)),d&&(Ml(q,W+4,BigInt(K)),Ml(q,W+12,BigInt(I)))}else El(F,14,K),El(F,18,I),d&&(El(q,W+4,K),El(q,W+8,I))}d&&await t.writeUint8Array(H);const j=G.length+K+H.length;return Object.assign(k,{compressedSize:K,lastModDate:V,rawLastModDate:N,creationDate:s,lastAccessDate:o,encrypted:T,length:j}),k}(i,h,e.config,n),u.lock=p,r.set(t,u),u.filename=t,a){let t=0;const i=h.getData();let s;await Promise.all([e.lockWrite,d]);do{s=Array.from(r.values()).find((e=>e.writingBufferedData)),s&&await s.lock}while(s&&s.lock);if(u.writingBufferedData=!0,!n.dataDescriptor){const e=26,r=await Cl(i,0,e),s=new DataView(r);u.encrypted&&!n.zipCrypto||El(s,14,u.signature),u.zip64?(El(s,18,Ba),El(s,22,Ba)):(El(s,18,u.compressedSize),El(s,22,u.uncompressedSize)),await o.writeUint8Array(new Uint8Array(r)),t=e}await async function(e,t,i=0){const n=536870912;await async function r(){if(i<t.size){const o=await Cl(t,i,i+n);await e.writeUint8Array(new Uint8Array(o)),i+=n,await r()}}()}(o,i,t),delete u.writingBufferedData}if(u.offset=e.offset,u.zip64)Ml(Il(u.rawExtraFieldZip64),20,BigInt(u.offset));else if(u.offset>=Ba)throw new Error(vl);return e.offset+=u.length,u}catch(i){throw(a&&u.writingBufferedData||!a&&u.dataWritten)&&(i.corruptedEntry=e.hasCorruptedEntries=!0,u.uncompressedSize&&(e.offset+=u.uncompressedSize)),r.delete(t),i}finally{c(),l&&l()}}(e,t,i,Object.assign({},n,{rawFilename:r,rawComment:s,version:a,versionMadeBy:l,lastModDate:c,lastAccessDate:u,creationDate:d,rawExtraField:m,zip64:C,password:h,level:S,useWebWorkers:T,encryptionStrength:p,extendedTimestamp:_,zipCrypto:f,bufferedWrite:A,keepOrder:Z,dataDescriptor:P,dataDescriptorSignature:E,signal:M,msDosCompatible:b,internalFileAttribute:w,externalFileAttribute:x}));return y&&(e.pendingCompressedSize-=y),Object.assign(k,{name:t,comment:o,extraField:g}),new Qa(k)}(n,e,t,i),this.pendingAddFileCalls.add(r),await r}finally{this.pendingAddFileCalls.delete(r),wl--;const e=n.pendingEntries.shift();e&&n.add(e.name,e.reader,e.options).then(e.resolve).catch(e.reject)}}}async close(e=new Uint8Array(0),t={}){for(;this.pendingAddFileCalls.size;)await Promise.all(Array.from(this.pendingAddFileCalls));return await async function(e,t,i){const n=e.writer,r=e.files;let o=0,s=0,a=e.offset,l=r.size;for(const[,e]of r)s+=46+e.rawFilename.length+e.rawComment.length+e.rawExtraFieldZip64.length+e.rawExtraFieldAES.length+e.rawExtraFieldExtendedTimestamp.length+e.rawExtraFieldNTFS.length+e.rawExtraField.length;let c=i.zip64||e.options.zip64||!1;if(a>=Ba||s>=Ba||l>=Ra){if(!1===i.zip64||!1===e.options.zip64)throw new Error(vl);c=!0}const u=new Uint8Array(s+(c?98:22)),d=Il(u);if(t&&t.length){if(!(t.length<=Ra))throw new Error("Zip file comment exceeds 64KB");Pl(d,o+20,t.length)}for(const[e,t]of Array.from(r.values()).entries()){const{rawFilename:n,rawExtraFieldZip64:s,rawExtraFieldAES:a,rawExtraField:l,rawComment:c,versionMadeBy:h,headerArray:p,directory:f,zip64:m,msDosCompatible:g,internalFileAttribute:_,externalFileAttribute:y}=t;let Z,v;if(t.extendedTimestamp){v=t.rawExtraFieldNTFS,Z=new Uint8Array(9);const e=Il(Z);Pl(e,0,Ua),Pl(e,2,Z.length-4),Al(e,4,1),El(e,5,Math.floor(t.lastModDate.getTime()/1e3))}else v=Z=new Uint8Array(0);const b=s.length+a.length+Z.length+v.length+l.length;if(El(d,o,Da),Pl(d,o+4,h),kl(u,p,o+6),Pl(d,o+30,b),Pl(d,o+32,c.length),El(d,o+34,_),y?El(d,o+38,y):f&&g&&Al(d,o+38,16),El(d,o+42,m?Ba:t.offset),kl(u,n,o+46),kl(u,s,o+46+n.length),kl(u,a,o+46+n.length+s.length),kl(u,Z,o+46+n.length+s.length+a.length),kl(u,v,o+46+n.length+s.length+a.length+Z.length),kl(u,l,o+46+n.length+s.length+a.length+Z.length+v.length),kl(u,c,o+46+n.length+b),o+=46+n.length+b+c.length,i.onprogress)try{i.onprogress(e+1,r.size,new Qa(t))}catch(e){}}c&&(El(d,o,Va),Ml(d,o+4,BigInt(44)),Pl(d,o+12,45),Pl(d,o+14,45),Ml(d,o+24,BigInt(l)),Ml(d,o+32,BigInt(l)),Ml(d,o+40,BigInt(s)),Ml(d,o+48,BigInt(a)),El(d,o+56,Na),Ml(d,o+64,BigInt(a)+BigInt(s)),El(d,o+72,1),l=Ra,a=Ba,s=Ba,o+=76),El(d,o,La),Pl(d,o+8,l),Pl(d,o+10,l),El(d,o+12,s),El(d,o+16,a),await n.writeUint8Array(u),t&&t.length&&await n.writeUint8Array(t)}(this,e,t),this.writer.getData()}}function Cl(e,t,i){if(e.arrayBuffer)return t||i?e.slice(t,i).arrayBuffer():e.arrayBuffer();{const n=new FileReader;return new Promise(((r,o)=>{n.onload=e=>r(e.target.result),n.onerror=()=>o(n.error),n.readAsArrayBuffer(t||i?e.slice(t,i):e)}))}}function Sl(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function Tl(e,t,i){return void 0===t[i]?e.options[i]:t[i]}function Al(e,t,i){e.setUint8(t,i)}function Pl(e,t,i){e.setUint16(t,i,!0)}function El(e,t,i){e.setUint32(t,i,!0)}function Ml(e,t,i){e.setBigUint64(t,i,!0)}function kl(e,t,i){e.set(t,i)}function Il(e){return new DataView(e.buffer)}bs({Deflate:function(e){const t=new Po,i=(n=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(n/16383)+1);var n;const r=new Uint8Array(i);let o=e?e.level:-1;void 0===o&&(o=-1),t.deflateInit(o),t.next_out=r,this.append=function(e,n){let o,s,a=0,l=0,c=0;const u=[];if(e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=i,o=t.deflate(0),0!=o)throw new Error("deflating: "+t.msg);t.next_out_index&&(t.next_out_index==i?u.push(new Uint8Array(r)):u.push(r.slice(0,t.next_out_index))),c+=t.next_out_index,n&&t.next_in_index>0&&t.next_in_index!=a&&(n(t.next_in_index),a=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return u.length>1?(s=new Uint8Array(c),u.forEach((function(e){s.set(e,l),l+=e.length}))):s=u[0]||new Uint8Array(0),s}},this.flush=function(){let e,n,o=0,s=0;const a=[];do{if(t.next_out_index=0,t.avail_out=i,e=t.deflate(4),1!=e&&0!=e)throw new Error("deflating: "+t.msg);i-t.avail_out>0&&a.push(r.slice(0,t.next_out_index)),s+=t.next_out_index}while(t.avail_in>0||0===t.avail_out);return t.deflateEnd(),n=new Uint8Array(s),a.forEach((function(e){n.set(e,o),o+=e.length})),n}},Inflate:function(e){const t=new _s,i=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,n=new Uint8Array(i);let r=!1;t.inflateInit(),t.next_out=n,this.append=function(e,o){const s=[];let a,l,c=0,u=0,d=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=i,0!==t.avail_in||r||(t.next_in_index=0,r=!0),a=t.inflate(0),r&&a===Bo){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(a!==Eo&&a!==Mo)throw new Error("inflating: "+t.msg);if((r||a===Mo)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===i?s.push(new Uint8Array(n)):s.push(n.slice(0,t.next_out_index))),d+=t.next_out_index,o&&t.next_in_index>0&&t.next_in_index!=c&&(o(t.next_in_index),c=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return s.length>1?(l=new Uint8Array(d),s.forEach((function(e){l.set(e,u),u+=e.length}))):l=s[0]||new Uint8Array(0),l}},this.flush=function(){t.inflateEnd()}}});var Ol=i(902299);const Bl=function(e,t){this.position=e,this.headingPitchRange=t};var Rl=i(906439);function Fl(e,t){this.id=t,this.name=e,this.playlistIndex=0,this.playlist=[],this.tourStart=new m.Z,this.tourEnd=new m.Z,this.entryStart=new m.Z,this.entryEnd=new m.Z,this._activeEntries=[]}function Dl(e){for(let t=e.pop();void 0!==t;t=e.pop())t.stop()}function Ll(e,t,i){const n=this.playlist[this.playlistIndex];if(n){const r=Vl.bind(this,e,t,i);if(this._activeEntries.push(n),this.entryStart.raiseEvent(n),n.blocking)n.play(r,e.scene.camera,t);else{const o=this;n.play((function(){o.entryEnd.raiseEvent(n);const e=o._activeEntries.indexOf(n);e>=0&&o._activeEntries.splice(e,1)})),r(e,t,i)}}else(0,f.Z)(i)&&i(!1)}function Vl(e,t,i,n){const r=this.playlist[this.playlistIndex];if(this.entryEnd.raiseEvent(r,n),n)i(n);else{const n=this._activeEntries.indexOf(r);n>=0&&this._activeEntries.splice(n,1),this.playlistIndex++,Ll.call(this,e,t,i)}}Fl.prototype.addPlaylistEntry=function(e){this.playlist.push(e)},Fl.prototype.play=function(e,t){(0,f.Z)(e.cesiumWidget)&&(0,Rl.Z)("viewer","The viewer parameter has been deprecated in Cesium 1.99. It will be removed in 1.100. Instead of a Viewer, pass a CesiumWidget instead."),this.tourStart.raiseEvent();const i=this;Ll.call(this,e,t,(function(e){i.playlistIndex=0,e||Dl(i._activeEntries),i.tourEnd.raiseEvent(e)}))},Fl.prototype.stop=function(){Dl(this._activeEntries)};const Nl=Fl;var Ul=i(762031),Gl=i(394579),zl=i(942841);function Kl(e,t,i){this.type="KmlTourFlyTo",this.blocking=!0,this.activeCamera=null,this.activeCallback=null,this.duration=e,this.view=i,this.flyToMode=t}Kl.prototype.play=function(e,t,i){if(this.activeCamera=t,(0,f.Z)(e)&&null!==e){const t=this;this.activeCallback=function(i){delete t.activeCallback,delete t.activeCamera,e(!(0,f.Z)(i)&&i)}}const n=this.getCameraOptions(i);if(this.view.headingPitchRoll)t.flyTo(n);else if(this.view.headingPitchRange){const e=new Ul.Z(this.view.position);t.flyToBoundingSphere(e,n)}},Kl.prototype.stop=function(){(0,f.Z)(this.activeCamera)&&this.activeCamera.cancelFlight(),(0,f.Z)(this.activeCallback)&&this.activeCallback(!0)},Kl.prototype.getCameraOptions=function(e){let t={duration:this.duration};return(0,f.Z)(this.activeCallback)&&(t.complete=this.activeCallback),"smooth"===this.flyToMode&&(t.easingFunction=zl.Z.LINEAR_NONE),this.view.headingPitchRoll?(t.destination=this.view.position,t.orientation=this.view.headingPitchRoll):this.view.headingPitchRange&&(t.offset=this.view.headingPitchRange),(0,f.Z)(e)&&(t=(0,Gl.Z)(t,e)),t};const ql=Kl;function Hl(e){this.type="KmlTourWait",this.blocking=!0,this.duration=e,this.timeout=null}Hl.prototype.play=function(e){const t=this;this.activeCallback=e,this.timeout=setTimeout((function(){delete t.activeCallback,e(!1)}),1e3*this.duration)},Hl.prototype.stop=function(){clearTimeout(this.timeout),(0,f.Z)(this.activeCallback)&&this.activeCallback(!0)};const Wl=Hl;var jl=i(357210);const Jl={avi:"video/x-msvideo",bmp:"image/bmp",bz2:"application/x-bzip2",chm:"application/vnd.ms-htmlhelp",css:"text/css",csv:"text/csv",doc:"application/msword",dvi:"application/x-dvi",eps:"application/postscript",flv:"video/x-flv",gif:"image/gif",gz:"application/x-gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",jnlp:"application/x-java-jnlp-file",jpeg:"image/jpeg",jpg:"image/jpeg",m3u:"audio/x-mpegurl",m4v:"video/mp4",mathml:"application/mathml+xml",mid:"audio/midi",midi:"audio/midi",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",ogg:"application/ogg",pdf:"application/pdf",png:"image/png",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",ps:"application/postscript",qt:"video/quicktime",rdf:"application/rdf+xml",rss:"application/rss+xml",rtf:"application/rtf",svg:"image/svg+xml",swf:"application/x-shockwave-flash",text:"text/plain",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"application/xml",zip:"application/zip",detectFromFilename:function(e){let t=e.toLowerCase();return t=(0,to.Z)(t),Jl[t]}};let Xl;"undefined"!=typeof DOMParser&&(Xl=new DOMParser);const $l=new gr({stripPrefix:!1,email:!1,replaceFn:function(e){return"scheme"===e.urlMatchType||"www"===e.urlMatchType}}),Yl=32,Ql=2414016,ec=1,tc=16093e3,ic=.1,nc=[null,void 0,"http://www.opengis.net/kml/2.2","http://earth.google.com/kml/2.2","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.0"],rc=["http://www.google.com/kml/ext/2.2"],oc={kml:nc,gx:rc,atom:["http://www.w3.org/2005/Atom"],kmlgx:nc.concat(rc)},sc={Document:Wc,Folder:function(e,t,i,n){const r=Hc(e,t,i),o=(0,Qr.Z)(i);o.parentEntity=r.entity,Wc(0,t,o,n)},Placemark:function(e,t,i,n){const r=Hc(e,t,i),o=r.entity,s=r.styleEntity;let a=!1;const l=t.childNodes;for(let t=0,n=l.length;t<n&&!a;t++){const n=l.item(t),r=Kc[n.localName];(0,f.Z)(r)&&(r(e,i.entityCollection,n,o,s,o.id),a=!0)}a||(o.merge(s),Nc(e,o,s))},NetworkLink:function(e,t,i,n){const r=Hc(e,t,i).entity,o=i.sourceResource,s=i.uriResolver;let a=Zc(t,"Link",oc.kml);if((0,f.Z)(a)||(a=Zc(t,"Url",oc.kml)),(0,f.Z)(a)){let t,l,c=xc(a,"href",oc.kml);if((0,f.Z)(c)){let u=c;if(c=Sc(c,o,i.uriResolver),/^data:/.test(c.getUrlComponent()))/\.kmz/i.test(o.getUrlComponent())||(u=o.getDerivedResource({url:u}));else{if(u=c.clone(),t=xc(a,"viewRefreshMode",oc.kml),"onRegion"===t)return void(0,so.Z)("kml-refrehMode-onRegion","KML - Unsupported viewRefreshMode: onRegion");l=(0,p.Z)(xc(a,"viewBoundScale",oc.kml),1);const i="onStop"===t?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",n=(0,p.Z)(xc(a,"viewFormat",oc.kml),i),r=xc(a,"httpQuery",oc.kml);(0,f.Z)(n)&&c.setQueryParameters((0,ao.Z)(eu(n))),(0,f.Z)(r)&&c.setQueryParameters((0,ao.Z)(eu(r)));const o=e._ellipsoid;ou(c,e.camera,e.canvas,l,e._lastCameraView.bbox,o)}const d={sourceUri:u,uriResolver:s,context:r.id,screenOverlayContainer:i.screenOverlayContainer},h=new P.Z,m=au(e,h,c,d).then((function(i){const n=e._entityCollection,o=h.values;n.suspendEvents();for(let e=0;e<o.length;e++){const t=o[e];(0,f.Z)(t.parent)||(t.parent=r,cu(t)),n.add(t)}n.resumeEvents();const s=xc(a,"refreshMode",oc.kml);let u=(0,p.Z)(wc(a,"refreshInterval",oc.kml),0);if("onInterval"===s&&u>0||"onExpire"===s||"onStop"===t){const t=Zc(i,"NetworkLinkControl",oc.kml),n=(0,f.Z)(t),o=fe.Z.now(),d={id:(0,C.Z)(),href:c,cookie:{},lastUpdated:o,updating:!1,entity:r,viewBoundScale:l,needsUpdate:!1,cameraUpdateTime:o};let h=0;if(n&&(d.cookie=(0,ao.Z)((0,p.Z)(xc(t,"cookie",oc.kml),"")),h=(0,p.Z)(wc(t,"minRefreshPeriod",oc.kml),0)),"onInterval"===s)n&&(u=Math.max(h,u)),d.refreshMode=Qc.INTERVAL,d.time=u;else if("onExpire"===s){let e;if(n&&(e=xc(t,"expires",oc.kml)),(0,f.Z)(e))try{const t=fe.Z.fromIso8601(e),i=fe.Z.secondsDifference(t,o);i>0&&i<h&&fe.Z.addSeconds(o,h,t),d.refreshMode=Qc.EXPIRE,d.time=t}catch(e){(0,so.Z)("kml-refreshMode-onInterval-onExpire","KML - NetworkLinkControl expires is not a valid date")}else(0,so.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element")}else(0,f.Z)(e.camera)?(d.refreshMode=Qc.STOP,d.time=(0,p.Z)(wc(a,"viewRefreshTime",oc.kml),0)):(0,so.Z)("kml-refrehMode-onStop-noCamera","A NetworkLink with viewRefreshMode=onStop requires the `camera` property to be defined.");(0,f.Z)(d.refreshMode)&&e._networkLinks.set(d.id,d)}})).catch((function(t){(0,so.Z)(`An error occured during loading ${c.url}`),e._error.raiseEvent(e,t)}));n.addPromise(m)}}},GroundOverlay:function(e,t,i,n){const r=Hc(e,t,i).entity;let o,s=!1;const a=e._ellipsoid,l=gc(Zc(t,"LatLonQuad",oc.gx),a),c=wc(t,"drawOrder",oc.kml);if((0,f.Z)(l))o=Mc(),o.hierarchy=new ye.Z(l),o.zIndex=c,r.polygon=o,s=!0;else{o=new wt.Z,o.zIndex=c,r.rectangle=o;const e=Zc(t,"LatLonBox",oc.kml);if((0,f.Z)(e)){let t=wc(e,"west",oc.kml),i=wc(e,"south",oc.kml),n=wc(e,"east",oc.kml),r=wc(e,"north",oc.kml);(0,f.Z)(t)&&(t=T.Z.negativePiToPi(T.Z.toRadians(t))),(0,f.Z)(i)&&(i=T.Z.clampToLatitudeRange(T.Z.toRadians(i))),(0,f.Z)(n)&&(n=T.Z.negativePiToPi(T.Z.toRadians(n))),(0,f.Z)(r)&&(r=T.Z.clampToLatitudeRange(T.Z.toRadians(r))),o.coordinates=new ve.Z(t,i,n,r);const s=wc(e,"rotation",oc.kml);if((0,f.Z)(s)){const e=T.Z.toRadians(s);o.rotation=e,o.stRotation=e}}}const u=Zc(t,"Icon",oc.kml),d=Ic(u,e,i.sourceResource,i.uriResolver,!0);if((0,f.Z)(d)){s&&(0,so.Z)("kml-gx:LatLonQuad","KML - gx:LatLonQuad Icon does not support texture projection.");const e=wc(u,"x",oc.gx),i=wc(u,"y",oc.gx),n=wc(u,"w",oc.gx),r=wc(u,"h",oc.gx);((0,f.Z)(e)||(0,f.Z)(i)||(0,f.Z)(n)||(0,f.Z)(r))&&(0,so.Z)("kml-groundOverlay-xywh","KML - gx:x, gx:y, gx:w, gx:h aren't supported for GroundOverlays"),o.material=d,o.material.color=Pc(t,"color",oc.kml),o.material.transparent=!0}else o.material=Pc(t,"color",oc.kml);let h=xc(t,"altitudeMode",oc.kml);(0,f.Z)(h)?"absolute"===h?(o.height=wc(t,"altitude",oc.kml),o.zIndex=void 0):"clampToGround"!==h&&(0,so.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${h}`):(h=xc(t,"altitudeMode",oc.gx),"relativeToSeaFloor"===h?((0,so.Z)("kml-altitudeMode-relativeToSeaFloor","KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."),o.height=wc(t,"altitude",oc.kml),o.zIndex=void 0):"clampToSeaFloor"===h?(0,so.Z)("kml-altitudeMode-clampToSeaFloor","KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."):(0,f.Z)(h)&&(0,so.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${h}`))},PhotoOverlay:Yc,ScreenOverlay:function(e,t,i,n){const r=i.screenOverlayContainer;if(!(0,f.Z)(r))return;const o=i.sourceResource,s=i.uriResolver,a=Ic(Zc(t,"Icon",oc.kml),e,o,s,!1);if(!(0,f.Z)(a))return;const l=document.createElement("img");e._screenOverlays.push(l),l.src=a.url,l.onload=function(){const e=["position: absolute"],i=Zc(t,"screenXY",oc.kml),n=Zc(t,"overlayXY",oc.kml),r=Zc(t,"size",oc.kml);let o,s,a,c,u,d;(0,f.Z)(r)&&(o=_c(r,"x"),s=_c(r,"y"),a=yc(r,"xunits"),c=yc(r,"yunits"),(0,f.Z)(o)&&-1!==o&&0!==o&&("fraction"===a?u=`width: ${Math.floor(100*o)}%`:"pixels"===a&&(u=`width: ${o}px`),e.push(u)),(0,f.Z)(s)&&-1!==s&&0!==s&&("fraction"===c?d=`height: ${Math.floor(100*s)}%`:"pixels"===c&&(d=`height: ${s}px`),e.push(d))),l.style=e.join(";");let h=0,p=l.height;(0,f.Z)(n)&&(o=_c(n,"x"),s=_c(n,"y"),a=yc(n,"xunits"),c=yc(n,"yunits"),(0,f.Z)(o)&&("fraction"===a?h=o*l.width:("pixels"===a||"insetPixels"===a)&&(h=o)),(0,f.Z)(s)&&("fraction"===c?p=s*l.height:("pixels"===c||"insetPixels"===c)&&(p=s))),(0,f.Z)(i)&&(o=_c(i,"x"),s=_c(i,"y"),a=yc(i,"xunits"),c=yc(i,"yunits"),(0,f.Z)(o)&&("fraction"===a?u=`left: calc(${Math.floor(100*o)}% - ${h}px)`:"pixels"===a?u=`left: ${o-h}px`:"insetPixels"===a&&(u=`right: ${o-h}px`),e.push(u)),(0,f.Z)(s)&&("fraction"===c?d=`bottom: calc(${Math.floor(100*s)}% - ${p}px)`:"pixels"===c?d=`bottom: ${s-p}px`:"insetPixels"===c&&(d=`top: ${s-p}px`),e.push(d))),l.style=e.join(";")},r.appendChild(l)},Tour:function(e,t,i,n){const r=xc(t,"name",oc.kml),o=yc(t,"id"),s=new Nl(r,o),a=Zc(t,"Playlist",oc.gx);if(a){const t=e._ellipsoid,i=a.childNodes;for(let e=0;e<i.length;e++){const n=i[e];if(n.localName){const e=jc[n.localName];e?e(s,n,t):console.log(`Unknown KML Tour playlist entry type ${n.localName}`)}}}e._kmlTours.push(s)}};function ac(e){this._dataSource=e,this._deferred=(0,eo.Z)(),this._stack=[],this._promises=[],this._timeoutSet=!1,this._used=!1,this._started=0,this._timeThreshold=1e3}function lc(e){const t={xsi:"http://www.w3.org/2001/XMLSchema-instance"};let i,n,r,o;for(const s in t)t.hasOwnProperty(s)&&(r=RegExp(`[< ]${s}:`),o=`xmlns:${s}=`,r.test(e)&&-1===e.indexOf(o)&&((0,f.Z)(i)||(i=e.substr(0,e.indexOf("<kml")+4),n=e.substr(i.length)),i+=` ${o}"${t[s]}"`));return(0,f.Z)(i)&&(e=i+n),e}function cc(e){let t=e.indexOf("xmlns:");const i=e.indexOf(">",t);let n,r,o;for(;-1!==t&&t<i;)n=e.slice(t,e.indexOf('"',t)),r=t,t=e.indexOf(n,t+1),-1!==t?(o=e.indexOf('"',e.indexOf('"',t)+1),t=(e=e.slice(0,t-1)+e.slice(o+1,e.length)).indexOf("xmlns:",r-1)):t=e.indexOf("xmlns:",r+1);return e}function uc(e,t){const i=(0,p.Z)(Jl.detectFromFilename(e.filename),"application/octet-stream");return Promise.resolve(e.getData(new Ea(i))).then((function(i){t[e.filename]=i}))}function dc(e,t,i,n){const r=n.keys,o=new Fe("."),s=e.querySelectorAll(t);for(let e=0;e<s.length;e++){const a=s[e],l=a.getAttribute(i);if((0,f.Z)(l)){const e=new Fe(l).absoluteTo(o).toString(),s=r.indexOf(e);if(-1!==s){const e=r[s];a.setAttribute(i,n[e]),"a"===t&&null===a.getAttribute("download")&&a.setAttribute("download",e)}}}}function hc(e,t,i,n){const r=e.querySelectorAll(t);for(let e=0;e<r.length;e++){const t=r[e],o=Sc(t.getAttribute(i),n);(0,f.Z)(o)&&t.setAttribute(i,o.url)}}function pc(e,t,i){let n=yc(e,"id");n=(0,f.Z)(n)&&0!==n.length?n:(0,C.Z)(),(0,f.Z)(i)&&(n=i+n);let r=t.getById(n);return(0,f.Z)(r)&&(n=(0,C.Z)(),(0,f.Z)(i)&&(n=i+n)),r=t.add(new A.Z({id:n})),(0,f.Z)(r.kml)||(r.addProperty("kml"),r.kml=new du),r}function fc(e,t){return"absolute"===e||"relativeToGround"===e||"relativeToSeaFloor"===t}function mc(e,t){if(!(0,f.Z)(e))return Y.Z.fromDegrees(0,0,0,t);const i=e.match(/[^\s,\n]+/g);if(!(0,f.Z)(i))return Y.Z.fromDegrees(0,0,0,t);let n=parseFloat(i[0]),r=parseFloat(i[1]),o=parseFloat(i[2]);return n=isNaN(n)?0:n,r=isNaN(r)?0:r,o=isNaN(o)?0:o,Y.Z.fromDegrees(n,r,o,t)}function gc(e,t){if(!(0,f.Z)(e))return;const i=e.textContent.match(/[^\s\n]+/g);if(!(0,f.Z)(i))return;const n=i.length,r=new Array(n);let o=0;for(let e=0;e<n;e++)r[o++]=mc(i[e],t);return r}function _c(e,t){if(!(0,f.Z)(e))return;const i=e.getAttribute(t);if(null!==i){const e=parseFloat(i);return isNaN(e)?void 0:e}}function yc(e,t){if(!(0,f.Z)(e))return;const i=e.getAttribute(t);return null!==i?i:void 0}function Zc(e,t,i){if(!(0,f.Z)(e))return;const n=e.childNodes,r=n.length;for(let e=0;e<r;e++){const r=n[e];if(r.localName===t&&-1!==i.indexOf(r.namespaceURI))return r}}function vc(e,t,i){if(!(0,f.Z)(e))return;const n=[],r=e.getElementsByTagNameNS("*",t),o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function bc(e,t,i){if(!(0,f.Z)(e))return[];const n=[],r=e.childNodes,o=r.length;for(let e=0;e<o;e++){const o=r[e];o.localName===t&&-1!==i.indexOf(o.namespaceURI)&&n.push(o)}return n}function wc(e,t,i){const n=Zc(e,t,i);if((0,f.Z)(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function xc(e,t,i){const n=Zc(e,t,i);if((0,f.Z)(n))return n.textContent.trim()}function Cc(e,t,i){const n=Zc(e,t,i);if((0,f.Z)(n)){const e=n.textContent.trim();return"1"===e||/^true$/i.test(e)}}function Sc(e,t,i){if(!(0,f.Z)(e))return;let n;if((0,f.Z)(i)){let r=i[e=e.replace(/\\/g,"/")];if((0,f.Z)(r))n=new we.Z({url:r});else{const o=new Fe(t.getUrlComponent());r=i[new Fe(e).absoluteTo(o)],(0,f.Z)(r)&&(n=new we.Z({url:r}))}}return(0,f.Z)(n)||(n=t.getDerivedResource({url:e})),n}Object.defineProperties(ac.prototype,{dataSource:{get:function(){return this._dataSource}}}),ac.prototype.addNodes=function(e,t){this._stack.push({nodes:e,index:0,processingData:t}),this._used=!0},ac.prototype.addPromise=function(e){this._promises.push(e)},ac.prototype.wait=function(){const e=this._deferred;return this._used||e.resolve(),Promise.all([e.promise,Promise.all(this._promises)])},ac.prototype.process=function(){const e=1===this._stack.length;return e&&(this._started=lu._getTimestamp()),this._process(e)},ac.prototype._giveUpTime=function(){if(this._timeoutSet)return;this._timeoutSet=!0,this._timeThreshold=50;const e=this;setTimeout((function(){e._timeoutSet=!1,e._started=lu._getTimestamp(),e._process(!0)}),0)},ac.prototype._nextNode=function(){const e=this._stack,t=e[e.length-1],i=t.index,n=t.nodes;if(i!==n.length)return++t.index,n[i]},ac.prototype._pop=function(){const e=this._stack;return e.pop(),0!==e.length||(this._deferred.resolve(),!1)},ac.prototype._process=function(e){const t=this.dataSource,i=this._stack[this._stack.length-1].processingData;let n=this._nextNode();for(;(0,f.Z)(n);){const e=sc[n.localName];if((0,f.Z)(e)&&(-1!==oc.kml.indexOf(n.namespaceURI)||-1!==oc.gx.indexOf(n.namespaceURI))&&(e(t,n,i,this),this._timeoutSet||lu._getTimestamp()>this._started+this._timeThreshold))return void this._giveUpTime();n=this._nextNode()}this._pop()&&e&&this._process(!0)};const Tc={maximumRed:void 0,red:void 0,maximumGreen:void 0,green:void 0,maximumBlue:void 0,blue:void 0};function Ac(e,t){if(!(0,f.Z)(e)||/^\s*$/gm.test(e))return;"#"===e[0]&&(e=e.substring(1));const i=parseInt(e.substring(0,2),16)/255,n=parseInt(e.substring(2,4),16)/255,r=parseInt(e.substring(4,6),16)/255,o=parseInt(e.substring(6,8),16)/255;return t?(o>0?(Tc.maximumRed=o,Tc.red=void 0):(Tc.maximumRed=void 0,Tc.red=0),r>0?(Tc.maximumGreen=r,Tc.green=void 0):(Tc.maximumGreen=void 0,Tc.green=0),n>0?(Tc.maximumBlue=n,Tc.blue=void 0):(Tc.maximumBlue=void 0,Tc.blue=0),Tc.alpha=i,h.Z.fromRandom(Tc)):new h.Z(o,r,n,i)}function Pc(e,t,i){const n=xc(e,t,i);if((0,f.Z)(n))return Ac(n,"random"===xc(e,"colorMode",i))}function Ec(){const e=new n.Z;return e.width=Yl,e.height=Yl,e.scaleByDistance=new _e.Z(Ql,ec,tc,ic),e.pixelOffsetScaleByDistance=new _e.Z(Ql,ec,tc,ic),e}function Mc(){const e=new nt.Z;return e.outline=!0,e.outlineColor=h.Z.WHITE,e}function kc(){const e=new Ye.Z;return e.translucencyByDistance=new _e.Z(3e6,1,5e6,0),e.pixelOffset=new d.Z(17,0),e.horizontalOrigin=Ie.Z.LEFT,e.font="16px sans-serif",e.style=Oe.Z.FILL_AND_OUTLINE,e}function Ic(e,t,i,n,r){let o=xc(e,"href",oc.kml);if(!(0,f.Z)(o)||0===o.length)return;if(0===o.indexOf("root://icons/palette-")){const t=o.charAt(21);let i=(0,p.Z)(wc(e,"x",oc.gx),0),n=(0,p.Z)(wc(e,"y",oc.gx),0);i=Math.min(i/32,7),n=7-Math.min(n/32,7),o=`https://maps.google.com/mapfiles/kml/pal${t}/icon${8*n+i}.png`}const s=Sc(o,i,n);if(r){const i=xc(e,"refreshMode",oc.kml),n=xc(e,"viewRefreshMode",oc.kml);"onInterval"===i||"onExpire"===i?(0,so.Z)(`kml-refreshMode-${i}`,`KML - Unsupported Icon refreshMode: ${i}`):"onStop"!==n&&"onRegion"!==n||(0,so.Z)(`kml-refreshMode-${n}`,`KML - Unsupported Icon viewRefreshMode: ${n}`);const r=(0,p.Z)(xc(e,"viewBoundScale",oc.kml),1),o="onStop"===n?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",a=(0,p.Z)(xc(e,"viewFormat",oc.kml),o),l=xc(e,"httpQuery",oc.kml);(0,f.Z)(a)&&s.setQueryParameters((0,ao.Z)(eu(a))),(0,f.Z)(l)&&s.setQueryParameters((0,ao.Z)(eu(l)));const c=t._ellipsoid;return ou(s,t.camera,t.canvas,r,t._lastCameraView.bbox,c),s}return s}function Oc(e,t,i,n,r){let o=wc(t,"scale",oc.kml);const s=wc(t,"heading",oc.kml),a=Pc(t,"color",oc.kml),l=Zc(t,"Icon",oc.kml);let c=Ic(l,e,n,r,!1);(0,f.Z)(l)&&!(0,f.Z)(c)&&(c=!1);const u=wc(l,"x",oc.gx),h=wc(l,"y",oc.gx),m=wc(l,"w",oc.gx),g=wc(l,"h",oc.gx),_=Zc(t,"hotSpot",oc.kml),y=_c(_,"x"),Z=_c(_,"y"),v=yc(_,"xunits"),b=yc(_,"yunits");let w,x,C=i.billboard;(0,f.Z)(C)||(C=Ec(),i.billboard=C),C.image=c,C.scale=o,C.color=a,((0,f.Z)(u)||(0,f.Z)(h)||(0,f.Z)(m)||(0,f.Z)(g))&&(C.imageSubRegion=new $.Z(u,h,m,g)),(0,f.Z)(s)&&0!==s&&(C.rotation=T.Z.toRadians(-s),C.alignedAxis=Y.Z.UNIT_Z),o=(0,p.Z)(o,1),(0,f.Z)(y)&&("pixels"===v?w=-y*o:"insetPixels"===v?w=(y-Yl)*o:"fraction"===v&&(w=-y*Yl*o),w+=.5*Yl*o),(0,f.Z)(Z)&&("pixels"===b?x=Z*o:"insetPixels"===b?x=(-Z+Yl)*o:"fraction"===b&&(x=Z*Yl*o),x-=.5*Yl*o),((0,f.Z)(w)||(0,f.Z)(x))&&(C.pixelOffset=new d.Z(w,x))}function Bc(e,t,i,n,r){for(let o=0,s=t.childNodes.length;o<s;o++){const s=t.childNodes.item(o);if("IconStyle"===s.localName)Oc(e,s,i,n,r);else if("LabelStyle"===s.localName){let e=i.label;(0,f.Z)(e)||(e=kc(),i.label=e),e.scale=(0,p.Z)(wc(s,"scale",oc.kml),e.scale),e.fillColor=(0,p.Z)(Pc(s,"color",oc.kml),e.fillColor),e.text=i.name}else if("LineStyle"===s.localName){let e=i.polyline;(0,f.Z)(e)||(e=new ut.Z,i.polyline=e),e.width=wc(s,"width",oc.kml),e.material=Pc(s,"color",oc.kml),(0,f.Z)(Pc(s,"outerColor",oc.gx))&&(0,so.Z)("kml-gx:outerColor","KML - gx:outerColor is not supported in a LineStyle"),(0,f.Z)(wc(s,"outerWidth",oc.gx))&&(0,so.Z)("kml-gx:outerWidth","KML - gx:outerWidth is not supported in a LineStyle"),(0,f.Z)(wc(s,"physicalWidth",oc.gx))&&(0,so.Z)("kml-gx:physicalWidth","KML - gx:physicalWidth is not supported in a LineStyle"),(0,f.Z)(Cc(s,"labelVisibility",oc.gx))&&(0,so.Z)("kml-gx:labelVisibility","KML - gx:labelVisibility is not supported in a LineStyle")}else if("PolyStyle"===s.localName){let e=i.polygon;(0,f.Z)(e)||(e=Mc(),i.polygon=e),e.material=(0,p.Z)(Pc(s,"color",oc.kml),e.material),e.fill=(0,p.Z)(Cc(s,"fill",oc.kml),e.fill),e.outline=(0,p.Z)(Cc(s,"outline",oc.kml),e.outline)}else if("BalloonStyle"===s.localName){const e=(0,p.Z)(Ac(xc(s,"bgColor",oc.kml)),h.Z.WHITE),t=(0,p.Z)(Ac(xc(s,"textColor",oc.kml)),h.Z.BLACK),n=xc(s,"text",oc.kml);i.addProperty("balloonStyle"),i.balloonStyle={bgColor:e,textColor:t,text:n}}else if("ListStyle"===s.localName){const e=xc(s,"listItemType",oc.kml);"radioFolder"!==e&&"checkOffOnly"!==e||(0,so.Z)(`kml-listStyle-${e}`,`KML - Unsupported ListStyle with listItemType: ${e}`)}}}function Rc(e,t,i){return t.fetchXML().then((function(n){return Fc(e,n,i,t,!0)}))}function Fc(e,t,i,n,r,o){let s,a,l,c;const u=vc(t,"Style",oc.kml);if((0,f.Z)(u)){const t=u.length;for(s=0;s<t;s++)c=u[s],a=yc(c,"id"),(0,f.Z)(a)&&(a=`#${a}`,r&&(0,f.Z)(n)&&(a=n.getUrlComponent()+a),(0,f.Z)(i.getById(a))||(l=new A.Z({id:a}),i.add(l),Bc(e,c,l,n,o)))}const d=vc(t,"StyleMap",oc.kml);if((0,f.Z)(d)){const t=d.length;for(s=0;s<t;s++){const t=d[s];if(a=yc(t,"id"),(0,f.Z)(a)){const s=bc(t,"Pair",oc.kml);for(let t=0;t<s.length;t++){const u=s[t],d=xc(u,"key",oc.kml);if("normal"===d){if(a=`#${a}`,r&&(0,f.Z)(n)&&(a=n.getUrlComponent()+a),!(0,f.Z)(i.getById(a))){l=i.getOrCreateEntity(a);let t=xc(u,"styleUrl",oc.kml);if((0,f.Z)(t)){"#"!==t[0]&&(t=`#${t}`),r&&(0,f.Z)(n)&&(t=n.getUrlComponent()+t);const e=i.getById(t);(0,f.Z)(e)&&l.merge(e)}else c=Zc(u,"Style",oc.kml),Bc(e,c,l,n,o)}}else(0,so.Z)(`kml-styleMap-${d}`,`KML - Unsupported StyleMap key: ${d}`)}}}}const h=[],p=t.getElementsByTagName("styleUrl"),m=p.length;for(s=0;s<m;s++){const t=p[s].textContent;if("#"!==t[0]){const r=t.split("#");if(2===r.length){const t=r[0],o=n.getDerivedResource({url:t});h.push(Rc(e,o,i))}}}return h}function Dc(e,t,i){const n=new xt.Z(e,t.id,["position"]),r=new jl.Z(t.position);t.polyline=(0,f.Z)(i.polyline)?i.polyline.clone():new ut.Z,t.polyline.positions=new yt([n,r])}function Lc(e,t){return!(0,f.Z)(e)&&!(0,f.Z)(t)||"clampToGround"===e?ke.Z.CLAMP_TO_GROUND:"relativeToGround"===e?ke.Z.RELATIVE_TO_GROUND:"absolute"===e?ke.Z.NONE:"clampToSeaFloor"===t?((0,so.Z)("kml-gx:altitudeMode-clampToSeaFloor","KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."),ke.Z.CLAMP_TO_GROUND):"relativeToSeaFloor"===t?((0,so.Z)("kml-gx:altitudeMode-relativeToSeaFloor","KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."),ke.Z.RELATIVE_TO_GROUND):((0,f.Z)(e)?(0,so.Z)("kml-altitudeMode-unknown",`KML - Unknown <kml:altitudeMode>:${e}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`):(0,so.Z)("kml-gx:altitudeMode-unknown",`KML - Unknown <gx:altitudeMode>:${t}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`),ke.Z.CLAMP_TO_GROUND)}function Vc(e,t,i){return"relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t?e:(((0,f.Z)(t)&&"clampToGround"!==t||(0,f.Z)(i)&&"clampToSeaFloor"!==i)&&(0,so.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${(0,p.Z)(t,i)}`),new jl.Z(e))}function Nc(e,t,i,n){let r=t.label;(0,f.Z)(r)||(r=(0,f.Z)(i.label)?i.label.clone():kc(),t.label=r),r.text=t.name;let o=t.billboard;(0,f.Z)(o)||(o=(0,f.Z)(i.billboard)?i.billboard.clone():Ec(),t.billboard=o),(0,f.Z)(o.image)?o.image.getValue()||(o.image=void 0):o.image=e._pinBuilder.fromColor(h.Z.YELLOW,64);let s=1;(0,f.Z)(o.scale)&&(s=o.scale.getValue(),0!==s?r.pixelOffset=new d.Z(16*s+1,0):(r.pixelOffset=void 0,r.horizontalOrigin=void 0)),(0,f.Z)(n)&&e._clampToGround&&(o.heightReference=n,r.heightReference=n)}function Uc(e,t){let i=e.path;(0,f.Z)(i)||(i=new tt.Z,i.leadTime=0,e.path=i);const n=t.polyline;(0,f.Z)(n)&&(i.material=n.material,i.width=n.width)}function Gc(e,t,i,n,r){const o=Zc(i,"coordinates",oc.kml),s=xc(i,"altitudeMode",oc.kml),a=xc(i,"altitudeMode",oc.gx),l=Cc(i,"extrude",oc.kml),c=Cc(i,"tessellate",oc.kml),u=fc(s,a),d=wc(i,"drawOrder",oc.gx),m=e._ellipsoid,g=gc(o,m);let _=r.polyline;if(u&&l){const e=new Jt.Z;n.wall=e,e.positions=g;const t=r.polygon;(0,f.Z)(t)&&(e.fill=t.fill,e.material=t.material),e.outline=!0,(0,f.Z)(_)?(e.outlineColor=(0,f.Z)(_.material)?_.material.color:h.Z.WHITE,e.outlineWidth=_.width):(0,f.Z)(t)&&(e.outlineColor=(0,f.Z)(t.material)?t.material.color:h.Z.WHITE)}else if(e._clampToGround&&!u&&c){const e=new ut.Z;e.clampToGround=!0,n.polyline=e,e.positions=g,(0,f.Z)(_)?(e.material=(0,f.Z)(_.material)?_.material.color.getValue(pe.Z.MINIMUM_VALUE):h.Z.WHITE,e.width=(0,p.Z)(_.width,1)):(e.material=h.Z.WHITE,e.width=1),e.zIndex=d}else(0,f.Z)(d)&&(0,so.Z)("kml-gx:drawOrder","KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"),e._clampToGround&&!c&&(0,so.Z)("kml-line-tesselate","Ignoring clampToGround for KML lines without the tessellate flag."),_=(0,f.Z)(_)?_.clone():new ut.Z,n.polyline=_,_.positions=function(e,t,i,n){if(!(0,f.Z)(e))return;if("relativeToSeaFloor"===i||"absolute"===t||"relativeToGround"===t)return e;((0,f.Z)(t)&&"clampToGround"!==t||(0,f.Z)(i)&&"clampToSeaFloor"!==i)&&(0,so.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${(0,p.Z)(t,i)}`);const r=e.length;for(let t=0;t<r;t++){const i=e[t];n.scaleToGeodeticSurface(i,i)}return e}(g,s,a,m),c&&!u||(_.arcType=X.Z.NONE);return!0}function zc(e,t,i,n,r,o,s,a,l){const c=e[0],u=e[e.length-1],d=new St.Z;d.addSamples(e,t),i.intervals.addInterval(new Ae.Z({start:c,stop:u,isStartIncluded:l,isStopIncluded:l,data:Vc(d,s,a)})),n.addInterval(new Ae.Z({start:c,stop:u,isStartIncluded:l,isStopIncluded:l})),r.intervals.addInterval(new Ae.Z({start:c,stop:u,isStartIncluded:l,isStopIncluded:l,data:o}))}const Kc={Point:function(e,t,i,n,r){const o=xc(i,"coordinates",oc.kml),s=xc(i,"altitudeMode",oc.kml),a=xc(i,"altitudeMode",oc.gx),l=Cc(i,"extrude",oc.kml),c=mc(o,e._ellipsoid);return n.position=c,Nc(e,n,r,Lc(s,a)),l&&fc(s,a)&&Dc(t,n,r),!0},LineString:Gc,LinearRing:Gc,Polygon:function(e,t,i,n,r){const o=Zc(i,"outerBoundaryIs",oc.kml);let s=Zc(o,"LinearRing",oc.kml),a=Zc(s,"coordinates",oc.kml);const l=e._ellipsoid;let c=gc(a,l);const u=Cc(i,"extrude",oc.kml),d=fc(xc(i,"altitudeMode",oc.kml),xc(i,"altitudeMode",oc.gx)),p=(0,f.Z)(r.polygon)?r.polygon.clone():Mc(),m=r.polyline;if((0,f.Z)(m)&&(p.outlineColor=(0,f.Z)(m.material)?m.material.color:h.Z.WHITE,p.outlineWidth=m.width),n.polygon=p,d?(p.perPositionHeight=!0,p.extrudedHeight=u?0:void 0):e._clampToGround||(p.height=0),(0,f.Z)(c)){const e=new ye.Z(c),t=bc(i,"innerBoundaryIs",oc.kml);for(let i=0;i<t.length;i++){s=bc(t[i],"LinearRing",oc.kml);for(let t=0;t<s.length;t++)a=Zc(s[t],"coordinates",oc.kml),c=gc(a,l),(0,f.Z)(c)&&e.holes.push(new ye.Z(c))}p.hierarchy=e}return!0},Track:function(e,t,i,n,r){const o=xc(i,"altitudeMode",oc.kml),s=xc(i,"altitudeMode",oc.gx),a=bc(i,"coord",oc.gx),l=bc(i,"angles",oc.gx),c=bc(i,"when",oc.kml),u=Cc(i,"extrude",oc.kml),d=fc(o,s),h=e._ellipsoid;l.length>0&&(0,so.Z)("kml-gx:angles","KML - gx:angles are not supported in gx:Tracks");const p=Math.min(a.length,c.length),f=[],m=[];for(let e=0;e<p;e++){const t=mc(a[e].textContent,h);f.push(t),m.push(fe.Z.fromIso8601(c[e].textContent))}const g=new St.Z;return g.addSamples(m,f),n.position=g,Nc(e,n,r,Lc(o,s)),Uc(n,r),n.availability=new Pe.Z,c.length>0&&n.availability.addInterval(new Ae.Z({start:m[0],stop:m[m.length-1]})),d&&u&&Dc(t,n,r),!0},MultiTrack:function(e,t,i,n,r){const o=Cc(i,"interpolate",oc.gx),s=bc(i,"Track",oc.gx);let a,l,c,u=!1;const d=new Rt,h=new Pe.Z,p=new G.Z,m=e._ellipsoid;for(let e=0,t=s.length;e<t;e++){const t=s[e],i=bc(t,"when",oc.kml),n=bc(t,"coord",oc.gx),r=xc(t,"altitudeMode",oc.kml),g=xc(t,"altitudeMode",oc.gx),_=fc(r,g),y=Cc(t,"extrude",oc.kml),Z=Math.min(n.length,i.length),v=[];a=[];for(let e=0;e<Z;e++){const t=mc(n[e].textContent,m);v.push(t),a.push(fe.Z.fromIso8601(i[e].textContent))}o&&((0,f.Z)(l)&&zc([l,a[0]],[c,v[0]],p,h,d,!1,"absolute",void 0,!1),l=a[Z-1],c=v[v.length-1]),zc(a,v,p,h,d,_&&y,r,g,!0),u=u||_&&y}return n.availability=h,n.position=p,Nc(e,n,r),Uc(n,r),u&&(Dc(t,n,r),n.polyline.show=d),!0},MultiGeometry:function(e,t,i,n,r,o){const s=i.childNodes;let a=!1;for(let i=0,l=s.length;i<l;i++){const l=s.item(i),c=Kc[l.localName];if((0,f.Z)(c)){const i=pc(l,t,o);i.parent=n,i.name=n.name,i.availability=n.availability,i.description=n.description,i.kml=n.kml,c(e,t,l,i,r)&&(a=!0)}}return a},Model:function(e,t,i,n,r){return(0,so.Z)("kml-unsupportedGeometry",`KML - Unsupported geometry: ${i.localName}`),!1}};let qc;function Hc(e,t,i){const n=i.entityCollection,r=i.parentEntity,o=i.sourceResource,s=i.uriResolver,a=pc(t,n,i.context),l=a.kml,c=function(e,t,i,n,r){const o=new A.Z;let s,a=-1;const l=t.childNodes,c=l.length;for(let e=0;e<c;e++){const t=l[e];"Style"!==t.localName&&"StyleMap"!==t.localName||(a=e)}if(-1!==a){const t=l[a];if("Style"===t.localName)Bc(e,t,o,n,r);else{const a=bc(t,"Pair",oc.kml);for(let t=0;t<a.length;t++){const l=a[t],c=xc(l,"key",oc.kml);if("normal"===c){const t=xc(l,"styleUrl",oc.kml);(0,f.Z)(t)?(s=i.getById(t),(0,f.Z)(s)||(s=i.getById(`#${t}`)),(0,f.Z)(s)&&o.merge(s)):Bc(e,Zc(l,"Style",oc.kml),o,n,r)}else(0,so.Z)(`kml-styleMap-${c}`,`KML - Unsupported StyleMap key: ${c}`)}}}const u=xc(t,"styleUrl",oc.kml);if((0,f.Z)(u)){let e=u;if("#"!==u[0]&&-1!==u.indexOf("#")){const t=u.split("#"),i=t[0];e=`${n.getDerivedResource({url:i}).getUrlComponent()}#${t[1]}`}s=i.getById(e),(0,f.Z)(s)||(s=i.getById(`#${e}`)),(0,f.Z)(s)&&o.merge(s)}return o}(e,t,i.styleCollection,o,s),u=xc(t,"name",oc.kml);a.name=u,a.parent=r;let d=function(e){const t=Zc(e,"TimeSpan",oc.kmlgx);if(!(0,f.Z)(t))return;let i;const n=Zc(t,"begin",oc.kmlgx);let r=(0,f.Z)(n)?fe.Z.fromIso8601(n.textContent):void 0;const o=Zc(t,"end",oc.kmlgx);let s=(0,f.Z)(o)?fe.Z.fromIso8601(o.textContent):void 0;if((0,f.Z)(r)&&(0,f.Z)(s)){if(fe.Z.lessThan(s,r)){const e=r;r=s,s=e}i=new Pe.Z,i.addInterval(new Ae.Z({start:r,stop:s}))}else(0,f.Z)(r)?(i=new Pe.Z,i.addInterval(new Ae.Z({start:r,stop:pe.Z.MAXIMUM_VALUE}))):(0,f.Z)(s)&&(i=new Pe.Z,i.addInterval(new Ae.Z({start:pe.Z.MINIMUM_VALUE,stop:s})));return i}(t);(0,f.Z)(d)||(d=function(e){const t=Zc(e,"TimeStamp",oc.kmlgx),i=xc(t,"when",oc.kmlgx);if(!(0,f.Z)(t)||!(0,f.Z)(i)||0===i.length)return;const n=fe.Z.fromIso8601(i),r=new Pe.Z;return r.addInterval(new Ae.Z({start:n,stop:pe.Z.MAXIMUM_VALUE})),r}(t)),a.availability=d,cu(a);const m=Cc(t,"visibility",oc.kml);a.show=function e(t){return!t||t.show&&e(t.parent)}(r)&&(0,p.Z)(m,!0);const g=Zc(t,"author",oc.atom),_=l.author;_.name=xc(g,"name",oc.atom),_.uri=xc(g,"uri",oc.atom),_.email=xc(g,"email",oc.atom);const y=Zc(t,"link",oc.atom),Z=l.link;Z.href=yc(y,"href"),Z.hreflang=yc(y,"hreflang"),Z.rel=yc(y,"rel"),Z.type=yc(y,"type"),Z.title=yc(y,"title"),Z.length=yc(y,"length"),l.address=xc(t,"address",oc.kml),l.phoneNumber=xc(t,"phoneNumber",oc.kml),l.snippet=xc(t,"Snippet",oc.kml),function(e,t){const i=Zc(e,"ExtendedData",oc.kml);if(!(0,f.Z)(i))return;(0,f.Z)(Zc(i,"SchemaData",oc.kml))&&(0,so.Z)("kml-schemaData","KML - SchemaData is unsupported"),(0,f.Z)(yc(i,"xmlns:prefix"))&&(0,so.Z)("kml-extendedData","KML - ExtendedData with xmlns:prefix is unsupported");const n={},r=bc(i,"Data",oc.kml);if((0,f.Z)(r)){const e=r.length;for(let t=0;t<e;t++){const e=r[t],i=yc(e,"name");(0,f.Z)(i)&&(n[i]={displayName:xc(e,"displayName",oc.kml),value:xc(e,"value",oc.kml)})}}t.kml.extendedData=n}(t,a),function(e,t,i,n,r){let o,s,a;const l=t.kml,c=l.extendedData,u=xc(e,"description",oc.kml),d=(0,p.Z)(t.balloonStyle,i.balloonStyle);let m,g=h.Z.WHITE,_=h.Z.BLACK,y=u;if((0,f.Z)(d)&&(g=(0,p.Z)(d.bgColor,h.Z.WHITE),_=(0,p.Z)(d.textColor,h.Z.BLACK),y=(0,p.Z)(d.text,u)),(0,f.Z)(y)){if(y=y.replace("$[name]",(0,p.Z)(t.name,"")),y=y.replace("$[description]",(0,p.Z)(u,"")),y=y.replace("$[address]",(0,p.Z)(l.address,"")),y=y.replace("$[Snippet]",(0,p.Z)(l.snippet,"")),y=y.replace("$[id]",t.id),y=y.replace("$[geDirections]",""),(0,f.Z)(c)){const e=y.match(/\$\[.+?\]/g);if(null!==e)for(o=0;o<e.length;o++){const t=e[o];let i=t.substr(2,t.length-3);const n=/\/displayName$/.test(i);i=i.replace(/\/displayName$/,""),m=c[i],(0,f.Z)(m)&&(m=n?m.displayName:m.value),(0,f.Z)(m)&&(y=y.replace(t,(0,p.Z)(m,"")))}}}else if((0,f.Z)(c)&&(a=Object.keys(c),a.length>0)){for(y='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',o=0;o<a.length;o++)s=a[o],m=c[s],y+=`<tr><th>${(0,p.Z)(m.displayName,s)}</th><td>${(0,p.Z)(m.value,"")}</td></tr>`;y+="</tbody></table>"}if(!(0,f.Z)(y))return;y=$l.link(y),qc.innerHTML=y;const Z=qc.querySelectorAll("a");for(o=0;o<Z.length;o++)Z[o].setAttribute("target","_blank");(0,f.Z)(n)&&n.keys.length>1&&(dc(qc,"a","href",n),dc(qc,"link","href",n),dc(qc,"area","href",n),dc(qc,"img","src",n),dc(qc,"iframe","src",n),dc(qc,"video","src",n),dc(qc,"audio","src",n),dc(qc,"source","src",n),dc(qc,"track","src",n),dc(qc,"input","src",n),dc(qc,"embed","src",n),dc(qc,"script","src",n),dc(qc,"video","poster",n)),hc(qc,"a","href",r),hc(qc,"link","href",r),hc(qc,"area","href",r),hc(qc,"img","src",r),hc(qc,"iframe","src",r),hc(qc,"video","src",r),hc(qc,"audio","src",r),hc(qc,"source","src",r),hc(qc,"track","src",r),hc(qc,"input","src",r),hc(qc,"embed","src",r),hc(qc,"script","src",r),hc(qc,"video","poster",r);let v='<div class="cesium-infoBox-description-lighter" style="';v+="overflow:auto;",v+="word-wrap:break-word;",v+=`background-color:${g.toCssColorString()};`,v+=`color:${_.toCssColorString()};`,v+='">',v+=`${qc.innerHTML}</div>`,qc.innerHTML="",t.description=v}(t,a,c,s,o);const v=e._ellipsoid;return $c(t,a,v),Xc(t,a,v),(0,f.Z)(Zc(t,"Region",oc.kml))&&(0,so.Z)("kml-region","KML - Placemark Regions are unsupported"),{entity:a,styleEntity:c}}function Wc(e,t,i,n){n.addNodes(t.childNodes,i),n.process()}"undefined"!=typeof document&&(qc=document.createElement("div"));const jc={FlyTo:function(e,t,i){const n=wc(t,"duration",oc.gx),r=xc(t,"flyToMode",oc.gx),o={kml:{}};$c(t,o,i),Xc(t,o,i);const s=o.kml.lookAt||o.kml.camera,a=new ql(n,r,s);e.addPlaylistEntry(a)},Wait:function(e,t){const i=wc(t,"duration",oc.gx);e.addPlaylistEntry(new Wl(i))},SoundCue:Jc,AnimatedUpdate:Jc,TourControl:Jc};function Jc(e,t){(0,so.Z)(`KML Tour unsupported node ${t.localName}`)}function Xc(e,t,i){const n=Zc(e,"Camera",oc.kml);if((0,f.Z)(n)){const e=(0,p.Z)(wc(n,"longitude",oc.kml),0),r=(0,p.Z)(wc(n,"latitude",oc.kml),0),o=(0,p.Z)(wc(n,"altitude",oc.kml),0),s=(0,p.Z)(wc(n,"heading",oc.kml),0),a=(0,p.Z)(wc(n,"tilt",oc.kml),0),l=(0,p.Z)(wc(n,"roll",oc.kml),0),c=Y.Z.fromDegrees(e,r,o,i),u=ro.Z.fromDegrees(s,a-90,l);t.kml.camera=new Xr(c,u)}}function $c(e,t,i){const n=Zc(e,"LookAt",oc.kml);if((0,f.Z)(n)){const e=(0,p.Z)(wc(n,"longitude",oc.kml),0),r=(0,p.Z)(wc(n,"latitude",oc.kml),0),o=(0,p.Z)(wc(n,"altitude",oc.kml),0);let s=wc(n,"heading",oc.kml),a=wc(n,"tilt",oc.kml);const l=(0,p.Z)(wc(n,"range",oc.kml),0);a=T.Z.toRadians((0,p.Z)(a,0)),s=T.Z.toRadians((0,p.Z)(s,0));const c=new no.Z(s,a-T.Z.PI_OVER_TWO,l),u=Y.Z.fromDegrees(e,r,o,i);t.kml.lookAt=new Bl(u,c)}}function Yc(e,t,i,n){e._unsupportedNode.raiseEvent(e,i.parentEntity,t,i.entityCollection,i.styleCollection,i.sourceResource,i.uriResolver),(0,so.Z)(`kml-unsupportedFeature-${t.nodeName}`,`KML - Unsupported feature: ${t.nodeName}`)}const Qc={INTERVAL:0,EXPIRE:1,STOP:2};function eu(e){if(!(0,f.Z)(e)||0===e.length)return"";const t=e[0];return"&"!==t&&"?"!==t||(e=e.substring(1)),e}const tu=new ve.Z,iu=new Q.Z,nu=new d.Z,ru=new Y.Z;function ou(e,t,i,n,r,o){function s(e){return e<-T.Z.PI_OVER_TWO?-T.Z.PI_OVER_TWO:e>T.Z.PI_OVER_TWO?T.Z.PI_OVER_TWO:e}function a(e){return e>T.Z.PI?e-T.Z.TWO_PI:e<-T.Z.PI?e+T.Z.TWO_PI:e}let l=(0,oo.Z)(e.queryParameters);if(l=l.replace(/%5B/g,"[").replace(/%5D/g,"]"),(0,f.Z)(t)&&t._mode!==lo.Z.MORPHING){let e,c;if(r=(0,p.Z)(r,tu),(0,f.Z)(i)&&(nu.x=.5*i.clientWidth,nu.y=.5*i.clientHeight,e=t.pickEllipsoid(nu,o,ru)),(0,f.Z)(e)?c=o.cartesianToCartographic(e,iu):(c=ve.Z.center(r,iu),e=o.cartographicToCartesian(c)),(0,f.Z)(n)&&!T.Z.equalsEpsilon(n,1,T.Z.EPSILON9)){const e=r.width*n*.5,t=r.height*n*.5;r=new ve.Z(a(c.longitude-e),s(c.latitude-t),a(c.longitude+e),s(c.latitude+t))}l=l.replace("[bboxWest]",T.Z.toDegrees(r.west).toString()),l=l.replace("[bboxSouth]",T.Z.toDegrees(r.south).toString()),l=l.replace("[bboxEast]",T.Z.toDegrees(r.east).toString()),l=l.replace("[bboxNorth]",T.Z.toDegrees(r.north).toString());const u=T.Z.toDegrees(c.longitude).toString(),d=T.Z.toDegrees(c.latitude).toString();l=l.replace("[lookatLon]",u),l=l.replace("[lookatLat]",d),l=l.replace("[lookatTilt]",T.Z.toDegrees(t.pitch).toString()),l=l.replace("[lookatHeading]",T.Z.toDegrees(t.heading).toString()),l=l.replace("[lookatRange]",Y.Z.distance(t.positionWC,e)),l=l.replace("[lookatTerrainLon]",u),l=l.replace("[lookatTerrainLat]",d),l=l.replace("[lookatTerrainAlt]",c.height.toString()),o.cartesianToCartographic(t.positionWC,iu),l=l.replace("[cameraLon]",T.Z.toDegrees(iu.longitude).toString()),l=l.replace("[cameraLat]",T.Z.toDegrees(iu.latitude).toString()),l=l.replace("[cameraAlt]",T.Z.toDegrees(iu.height).toString());const h=t.frustum,m=h.aspectRatio;let g="",_="";if((0,f.Z)(m)){const e=T.Z.toDegrees(h.fov);m>1?(g=e,_=e/m):(_=e,g=e*m)}l=l.replace("[horizFov]",g.toString()),l=l.replace("[vertFov]",_.toString())}else l=l.replace("[bboxWest]","-180"),l=l.replace("[bboxSouth]","-90"),l=l.replace("[bboxEast]","180"),l=l.replace("[bboxNorth]","90"),l=l.replace("[lookatLon]",""),l=l.replace("[lookatLat]",""),l=l.replace("[lookatRange]",""),l=l.replace("[lookatTilt]",""),l=l.replace("[lookatHeading]",""),l=l.replace("[lookatTerrainLon]",""),l=l.replace("[lookatTerrainLat]",""),l=l.replace("[lookatTerrainAlt]",""),l=l.replace("[cameraLon]",""),l=l.replace("[cameraLat]",""),l=l.replace("[cameraAlt]",""),l=l.replace("[horizFov]",""),l=l.replace("[vertFov]","");(0,f.Z)(i)?(l=l.replace("[horizPixels]",i.clientWidth),l=l.replace("[vertPixels]",i.clientHeight)):(l=l.replace("[horizPixels]",""),l=l.replace("[vertPixels]","")),l=l.replace("[terrainEnabled]","1"),l=l.replace("[clientVersion]","1"),l=l.replace("[kmlVersion]","2.2"),l=l.replace("[clientName]","Cesium"),l=l.replace("[language]","English"),e.setQueryParameters((0,ao.Z)(l))}function su(e,t,i,n,r,o,s){t.removeAll();const a=i.documentElement;let l=xc("Document"===a.localName?a:Zc(a,"Document",oc.kml),"name",oc.kml);(0,f.Z)(l)||(l=(0,ae.Z)(n.getUrlComponent())),(0,f.Z)(e._name)||(e._name=l);const c=new lu._DeferredLoading(e),u=new P.Z(e);return Promise.all(Fc(e,i,u,n,!1,r)).then((function(){let a=i.documentElement;if("kml"===a.localName){const e=a.childNodes;for(let t=0;t<e.length;t++){const i=e[t];if((0,f.Z)(sc[i.localName])){a=i;break}}}const l={parentEntity:void 0,entityCollection:t,styleCollection:u,sourceResource:n,uriResolver:r,context:s,screenOverlayContainer:o};return t.suspendEvents(),function(e,t,i,n){const r=sc[t.localName];(0,f.Z)(r)?r(e,t,i,n):Yc(e,t,i)}(e,a,l,c),t.resumeEvents(),c.wait().then((function(){return i.documentElement}))}))}function au(e,t,i,n){let r=(n=(0,p.Z)(n,p.Z.EMPTY_OBJECT)).sourceUri;const o=n.uriResolver,s=n.context;let a=n.screenOverlayContainer,l=i;if("string"==typeof i||i instanceof we.Z){l=(i=we.Z.createIfNeeded(i)).fetchBlob(),r=(0,p.Z)(r,i.clone());const t=e._resourceCredits,n=i.credits;if((0,f.Z)(n)){const e=n.length;for(let i=0;i<e;i++)t.push(n[i])}}else r=(0,p.Z)(r,we.Z.DEFAULT.clone());return r=we.Z.createIfNeeded(r),(0,f.Z)(a)&&(a=(0,Ol.Z)(a)),Promise.resolve(l).then((function(i){return i instanceof Blob?function(e){const t=e.slice(0,Math.min(4,e.size)),i=(0,eo.Z)(),n=new FileReader;return n.addEventListener("load",(function(){i.resolve(1347093252===new DataView(n.result).getUint32(0,!1))})),n.addEventListener("error",(function(){i.reject(n.error)})),n.readAsArrayBuffer(t),i.promise}(i).then((function(n){return n?function(e,t,i,n,r){const o=(0,Yr.Z)("ThirdParty/Workers/z-worker-pako.js");bs({workerScripts:{deflate:[o,"./pako_deflate.min.js"],inflate:[o,"./pako_inflate.min.js"]}});const s=new ol(new Ma(i));return Promise.resolve(s.getEntries()).then((function(i){const o=[],a={};let l;for(let e=0;e<i.length;e++){const t=i[e];t.directory||(/\.kml$/i.test(t.filename)?(0,f.Z)(l)&&/\//i.test(t.filename)?o.push(uc(t,a)):((0,f.Z)(l)&&o.push(uc(l,a)),l=t):o.push(uc(t,a)))}return(0,f.Z)(l)&&o.push(function(e,t){return Promise.resolve(e.getData(new Pa)).then((function(e){e=cc(e=lc(e)),t.kml=Xl.parseFromString(e,"application/xml")}))}(l,a)),Promise.all(o).then((function(){if(s.close(),!(0,f.Z)(a.kml))throw new xe.Z("KMZ file does not contain a KML document.");return a.keys=Object.keys(a),su(e,t,a.kml,n,a,r)}))}))}(e,t,i,r,a):function(e){const t=(0,eo.Z)(),i=new FileReader;return i.addEventListener("load",(function(){t.resolve(i.result)})),i.addEventListener("error",(function(){t.reject(i.error)})),i.readAsText(e),t.promise}(i).then((function(i){let n,l;i=cc(i=lc(i));try{n=Xl.parseFromString(i,"application/xml")}catch(e){l=e.toString()}if((0,f.Z)(l)||n.body||"parsererror"===n.documentElement.tagName){let e=(0,f.Z)(l)?l:n.documentElement.firstChild.nodeValue;throw e||(e=n.body.innerText),new xe.Z(e)}return su(e,t,n,r,o,a,s)}))})):su(e,t,i,r,o,a,s)})).catch((function(t){return e._error.raiseEvent(e,t),console.log(t),Promise.reject(t)}))}function lu(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).camera,i=e.canvas;this._changed=new m.Z,this._error=new m.Z,this._loading=new m.Z,this._refresh=new m.Z,this._unsupportedNode=new m.Z,this._clock=void 0,this._entityCollection=new P.Z(this),this._name=void 0,this._isLoading=!1,this._pinBuilder=new en.Z,this._networkLinks=new $r.Z,this._entityCluster=new Ke.Z,this.canvas=i,this.camera=t,this._lastCameraView={position:(0,f.Z)(t)?Y.Z.clone(t.positionWC):void 0,direction:(0,f.Z)(t)?Y.Z.clone(t.directionWC):void 0,up:(0,f.Z)(t)?Y.Z.clone(t.upWC):void 0,bbox:(0,f.Z)(t)?t.computeViewRectangle():ve.Z.clone(ve.Z.MAX_VALUE)},this._ellipsoid=(0,p.Z)(e.ellipsoid,oe.Z.WGS84);let n=e.credit;"string"==typeof n&&(n=new ne.Z(n)),this._credit=n,this._resourceCredits=[],this._kmlTours=[],this._screenOverlays=[]}function cu(e){const t=e.parent;if((0,f.Z)(t)){const i=t.availability;if((0,f.Z)(i)){const t=e.availability;(0,f.Z)(t)?t.intersect(i):e.availability=i}}}lu.load=function(e,t){return new lu(t=(0,p.Z)(t,p.Z.EMPTY_OBJECT)).load(e,t)},Object.defineProperties(lu.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},refreshEvent:{get:function(){return this._refresh}},unsupportedNodeEvent:{get:function(){return this._unsupportedNode}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,f.Z)(e))throw new S.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}},kmlTours:{get:function(){return this._kmlTours}}}),lu.prototype.load=function(e,t){if(!(0,f.Z)(e))throw new S.Z("data is required.");t=(0,p.Z)(t,p.Z.EMPTY_OBJECT),De.Z.setLoading(this,!0);const i=this._name;this._name=void 0,this._clampToGround=(0,p.Z)(t.clampToGround,!1);const n=this;return au(this,this._entityCollection,e,t).then((function(){let e;const t=n._entityCollection.computeAvailability();let r=t.start,o=t.stop;const s=fe.Z.equals(r,pe.Z.MINIMUM_VALUE),a=fe.Z.equals(o,pe.Z.MAXIMUM_VALUE);if(!s||!a){let t;s&&(t=new Date,t.setHours(0,0,0,0),r=fe.Z.fromDate(t)),a&&(t=new Date,t.setHours(24,0,0,0),o=fe.Z.fromDate(t)),e=new Ue,e.startTime=r,e.stopTime=o,e.currentTime=fe.Z.clone(r),e.clockRange=ee.Z.LOOP_STOP,e.clockStep=te.Z.SYSTEM_CLOCK_MULTIPLIER,e.multiplier=Math.round(Math.min(Math.max(fe.Z.secondsDifference(o,r)/60,1),31556900))}let l=!1;return e!==n._clock&&(n._clock=e,l=!0),i!==n._name&&(l=!0),l&&n._changed.raiseEvent(n),De.Z.setLoading(n,!1),n})).catch((function(e){return De.Z.setLoading(n,!1),n._error.raiseEvent(n,e),console.log(e),Promise.reject(e)}))},lu.prototype.destroy=function(){for(;this._screenOverlays.length>0;)this._screenOverlays.pop().remove()};const uu=new $r.Z;function du(){this.author={name:void 0,uri:void 0,email:void 0},this.link={href:void 0,hreflang:void 0,rel:void 0,type:void 0,title:void 0,length:void 0},this.address=void 0,this.phoneNumber=void 0,this.snippet=void 0,this.extendedData=void 0}lu.prototype.update=function(e){const t=this._networkLinks;if(0===t.length)return!0;const i=fe.Z.now(),n=this;function r(e){const t=e._children,i=t.length;for(let e=0;e<i;++e){const i=t[e];uu.set(i.id,i),r(i)}}uu.removeAll();let o=!1;const s=this._lastCameraView,a=this.camera;!(0,f.Z)(a)||a.positionWC.equalsEpsilon(s.position,T.Z.EPSILON7)&&a.directionWC.equalsEpsilon(s.direction,T.Z.EPSILON7)&&a.upWC.equalsEpsilon(s.up,T.Z.EPSILON7)||(s.position=Y.Z.clone(a.positionWC),s.direction=Y.Z.clone(a.directionWC),s.up=Y.Z.clone(a.upWC),s.bbox=a.computeViewRectangle(),o=!0);const l=new $r.Z;let c=!1;return t.values.forEach((function(e){const t=e.entity;if(!uu.contains(t.id)){if(!e.updating){let a=!1;if(e.refreshMode===Qc.INTERVAL?fe.Z.secondsDifference(i,e.lastUpdated)>e.time&&(a=!0):e.refreshMode===Qc.EXPIRE?fe.Z.greaterThan(i,e.time)&&(a=!0):e.refreshMode===Qc.STOP&&(o&&(e.needsUpdate=!0,e.cameraUpdateTime=i),e.needsUpdate&&fe.Z.secondsDifference(i,e.cameraUpdateTime)>=e.time&&(a=!0)),a){r(t),e.updating=!0;const i=new P.Z,o=e.href.clone();o.setQueryParameters(e.cookie);const a=(0,p.Z)(n._ellipsoid,oe.Z.WGS84);ou(o,n.camera,n.canvas,e.viewBoundScale,s.bbox,a),au(n,i,o,{context:t.id}).then(function(e,t,i,n,r){return function(o){if(!n.contains(t.id))return;let s=!1;const a=Zc(o,"NetworkLinkControl",oc.kml);let l=0;if((0,f.Z)(a)){if((0,f.Z)(Zc(a,"Update",oc.kml)))return(0,so.Z)("kml-networkLinkControl-update","KML - NetworkLinkControl updates aren't supported."),t.updating=!1,void n.remove(t.id);t.cookie=(0,ao.Z)((0,p.Z)(xc(a,"cookie",oc.kml),"")),l=(0,p.Z)(wc(a,"minRefreshPeriod",oc.kml),0)}const c=fe.Z.now(),u=t.refreshMode;if(u===Qc.INTERVAL)(0,f.Z)(a)&&(t.time=Math.max(l,t.time));else if(u===Qc.EXPIRE){let e;if((0,f.Z)(a)&&(e=xc(a,"expires",oc.kml)),(0,f.Z)(e))try{const i=fe.Z.fromIso8601(e),n=fe.Z.secondsDifference(i,c);n>0&&n<l&&fe.Z.addSeconds(c,l,i),t.time=i}catch(e){(0,so.Z)("kml-networkLinkControl-expires","KML - NetworkLinkControl expires is not a valid date"),s=!0}else(0,so.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"),s=!0}const d=t.entity,h=e._entityCollection,m=i.values;function g(e){h.remove(e);const t=e._children,i=t.length;for(let e=0;e<i;++e)g(t[e])}h.suspendEvents();const _=h.values.slice();let y;for(y=0;y<_.length;++y){const e=_[y];e.parent===d&&(e.parent=void 0,g(e))}for(h.resumeEvents(),h.suspendEvents(),y=0;y<m.length;y++){const e=m[y];(0,f.Z)(e.parent)||(e.parent=d,cu(e)),h.add(e)}h.resumeEvents(),s?n.remove(t.id):t.lastUpdated=c;const Z=h.computeAvailability(),v=Z.start,b=Z.stop,w=fe.Z.equals(v,pe.Z.MINIMUM_VALUE),x=fe.Z.equals(b,pe.Z.MAXIMUM_VALUE);if(!w||!x){const t=e._clock;t.startTime===v&&t.stopTime===b||(t.startTime=v,t.stopTime=b,e._changed.raiseEvent(e))}t.updating=!1,t.needsUpdate=!1,e._refresh.raiseEvent(e,r.getUrlComponent(!0))}}(n,e,i,l,o)).catch((function(t){const i=`NetworkLink ${e.href} refresh failed: ${t}`;console.log(i),n._error.raiseEvent(n,i)})),c=!0}}l.set(e.id,e)}})),c&&(this._networkLinks=l,this._changed.raiseEvent(this)),!0},lu._DeferredLoading=ac,lu._getTimestamp=io.Z;const hu=lu;var pu=i(329243),fu=i(121221),mu=i(187036),gu=i(185871),_u=i(632209),yu=i(93419),Zu=i(559905),vu=i(147929),bu=i(55566),wu=i(731803),xu=i(463795),Cu=i(529343),Su=i(569686),Tu=i(546764),Au=i(781357),Pu=i(617726),Eu=i(29961),Mu=i(206484),ku=i(953988),Iu=i(47046);function Ou(){S.Z.throwInstantiationError()}Ou.prototype.update=S.Z.throwInstantiationError,Ou.prototype.getBoundingSphere=S.Z.throwInstantiationError,Ou.prototype.isDestroyed=S.Z.throwInstantiationError,Ou.prototype.destroy=S.Z.throwInstantiationError;const Bu=Ou;var Ru=i(830394),Fu=i(101970);const Du=32,Lu="http://www.google.com/kml/ext/2.2";function Vu(e){this._files={},this._promises=[],this._count=0,this._modelCallback=e}const Nu=/^data:image\/([^,;]+)/;function Uu(e,t){return function(i){e._files[t]=i}}function Gu(e){this._time=e}function zu(){this._ids={},this._styles={},this._count=0}function Ku(){this._ids={}}function qu(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).entities,i=(0,p.Z)(e.kmz,!1);if(!(0,f.Z)(t))throw new S.Z("entities is required.");const n=qu._createState(e),r=t.values.filter((function(e){return!(0,f.Z)(e.parent)})),o=n.kmlDoc,s=o.documentElement;s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",Lu);const a=o.createElement("Document");s.appendChild(a),Wu(n,a,r),n.styleCache.save(a);const l=n.externalFileHandler;return l.promise.then((function(){const e=(new XMLSerializer).serializeToString(n.kmlDoc);return i?function(e,t){const i=(0,Yr.Z)("ThirdParty/Workers/z-worker-pako.js");bs({workerScripts:{deflate:[i,"./pako_deflate.min.js"],inflate:[i,"./pako_inflate.min.js"]}});const n=new ka,r=new xl(n);return r.add("doc.kml",new Aa(e)).then((function(){const e=Object.keys(t);return Hu(r,e,t,0)})).then((function(){return r.close()})).then((function(e){return{kmz:e}}))}(e,l.files):{kml:e,externalFiles:l.files}}))}function Hu(e,t,i,n){if(t.length===n)return;const r=t[n];return e.add(r,new Ma(i[r])).then((function(){return Hu(e,t,i,n+1)}))}function Wu(e,t,i){const n=e.kmlDoc,r=e.styleCache,o=e.valueGetter,s=e.idManager,a=i.length;let l,c,u;for(let d=0;d<a;++d){const a=i[d];let h;l=[],c=[],u=[],$u(e,a,c,u),td(e,a.polyline,c,u),nd(e,a.rectangle,c,u,l),nd(e,a.polygon,c,u,l),od(e,a,a.model,c,u);const p=a.availability;(0,f.Z)(p)&&(h=n.createElement("TimeSpan"),fe.Z.equals(p.start,pe.Z.MINIMUM_VALUE)||h.appendChild(cd(n,"begin",fe.Z.toIso8601(p.start))),fe.Z.equals(p.stop,pe.Z.MAXIMUM_VALUE)||h.appendChild(cd(n,"end",fe.Z.toIso8601(p.stop))));for(let e=0;e<l.length;++e){const i=l[e];i.setAttribute("id",s.get(a.id)),i.appendChild(cd(n,"name",a.name)),i.appendChild(cd(n,"visibility",a.show)),i.appendChild(cd(n,"description",a.description)),(0,f.Z)(h)&&i.appendChild(h),t.appendChild(i)}const m=c.length;if(m>0){const e=n.createElement("Placemark");e.setAttribute("id",s.get(a.id));let i=a.name;const l=a.label;if((0,f.Z)(l)){const e=n.createElement("LabelStyle"),t=o.get(l.text);i=(0,f.Z)(t)&&t.length>0?t:i;const r=o.getColor(l.fillColor);(0,f.Z)(r)&&(e.appendChild(cd(n,"color",r)),e.appendChild(cd(n,"colorMode","normal")));const s=o.get(l.scale);(0,f.Z)(s)&&e.appendChild(cd(n,"scale",s)),u.push(e)}e.appendChild(cd(n,"name",i)),e.appendChild(cd(n,"visibility",a.show)),e.appendChild(cd(n,"description",a.description)),(0,f.Z)(h)&&e.appendChild(h),t.appendChild(e);const d=u.length;if(d>0){const t=n.createElement("Style");for(let e=0;e<d;++e)t.appendChild(u[e]);e.appendChild(cd(n,"styleUrl",r.get(t)))}if(1===c.length)e.appendChild(c[0]);else if(c.length>1){const t=n.createElement("MultiGeometry");for(let e=0;e<m;++e)t.appendChild(c[e]);e.appendChild(t)}}const g=a._children;if(g.length>0){const i=n.createElement("Folder");i.setAttribute("id",s.get(a.id)),i.appendChild(cd(n,"name",a.name)),i.appendChild(cd(n,"visibility",a.show)),i.appendChild(cd(n,"description",a.description)),t.appendChild(i),Wu(e,i,g)}}}Vu.prototype.texture=function(e){const t=this;let i;if("string"==typeof e||e instanceof we.Z){if(!(e=we.Z.createIfNeeded(e)).isDataUri)return e.url;const n=e.url.match(Nu);i="texture_"+ ++this._count,(0,f.Z)(n)&&(i+=`.${n[1]}`);const r=e.fetchBlob().then((function(e){t._files[i]=e}));return this._promises.push(r),i}if(e instanceof HTMLCanvasElement){i=`texture_${++this._count}.png`;const n=new Promise((n=>{e.toBlob((function(e){t._files[i]=e,n()}))}));return this._promises.push(n),i}return""},Vu.prototype.model=function(e,t){const i=this._modelCallback;if(!(0,f.Z)(i))throw new xe.Z("Encountered a model entity while exporting to KML, but no model callback was supplied.");const n={},r=i(e,t,n);for(const e in n)if(n.hasOwnProperty(e)){const t=Promise.resolve(n[e]);this._promises.push(t),t.then(Uu(this,e))}return r},Object.defineProperties(Vu.prototype,{promise:{get:function(){return Promise.all(this._promises)}},files:{get:function(){return this._files}}}),Gu.prototype.get=function(e,t,i){let n;return(0,f.Z)(e)&&(n=(0,f.Z)(e.getValue)?e.getValue(this._time,i):e),(0,p.Z)(n,t)},Gu.prototype.getColor=function(e,t){const i=this.get(e,t);if((0,f.Z)(i))return ud(i)},Gu.prototype.getMaterialType=function(e){if((0,f.Z)(e))return e.getType(this._time)},zu.prototype.get=function(e){const t=this._ids,i=e.innerHTML;if((0,f.Z)(t[i]))return t[i];let n="style-"+ ++this._count;return e.setAttribute("id",n),n=`#${n}`,t[i]=n,this._styles[i]=e,n},zu.prototype.save=function(e){const t=this._styles,i=e.childNodes[0];for(const n in t)t.hasOwnProperty(n)&&e.insertBefore(t[n],i)},Ku.prototype.get=function(e){if(!(0,f.Z)(e))return this.get((0,C.Z)());const t=this._ids;return(0,f.Z)(t[e])?`${e.toString()}-${++t[e]}`:(t[e]=0,e)},qu._createState=function(e){const t=e.entities,i=new zu,n=t.computeAvailability(),r=(0,f.Z)(e.time)?e.time:n.start;let o=(0,p.Z)(e.defaultAvailability,n);const s=(0,p.Z)(e.sampleDuration,60);o.start===pe.Z.MINIMUM_VALUE?o.stop===pe.Z.MAXIMUM_VALUE?o=new Ae.Z:fe.Z.addSeconds(o.stop,-10*s,o.start):o.stop===pe.Z.MAXIMUM_VALUE&&fe.Z.addSeconds(o.start,10*s,o.stop);const a=new Vu(e.modelCallback);return{kmlDoc:document.implementation.createDocument("http://www.opengis.net/kml/2.2","kml"),ellipsoid:(0,p.Z)(e.ellipsoid,oe.Z.WGS84),idManager:new Ku,styleCache:i,externalFileHandler:a,time:r,valueGetter:new Gu(r),sampleDuration:s,defaultAvailability:new Pe.Z([o])}};const ju=new Y.Z,Ju=new Q.Z,Xu=new fe.Z;function $u(e,t,i,r){const o=e.kmlDoc,s=e.ellipsoid,a=e.valueGetter,l=(0,p.Z)(t.billboard,t.point);if(!(0,f.Z)(l)&&!(0,f.Z)(t.path))return;const c=t.position;if(!c.isConstant)return void Yu(e,t,l,i,r);a.get(c,void 0,ju);const u=cd(o,"coordinates",ld(ju,s)),d=o.createElement("Point"),h=o.createElement("altitudeMode");h.appendChild(ad(e,l.heightReference)),d.appendChild(h),d.appendChild(u),i.push(d);const m=l instanceof n.Z?ed(e,l):Qu(e,l);r.push(m)}function Yu(e,t,i,r,o){const s=e.kmlDoc,a=e.ellipsoid,l=e.valueGetter;let c;const u=t.position;let d=!0;u instanceof G.Z?(c=u.intervals,d=!1):c=(0,p.Z)(t.availability,e.defaultAvailability);const h=i instanceof Qe.Z;let m,g,_;const y=[];for(m=0;m<c.length;++m){const t=c.get(m);let n=d?u:t.data;const r=s.createElement("altitudeMode");n instanceof jl.Z?(n=n._value,r.appendChild(ad(e,ke.Z.CLAMP_TO_GROUND))):(0,f.Z)(i)?r.appendChild(ad(e,i.heightReference)):r.appendChild(ad(e,ke.Z.NONE));const o=[],p=[];if(n.isConstant){l.get(n,void 0,ju);const e=cd(s,"coordinates",ld(ju,a));o.push(fe.Z.toIso8601(t.start)),p.push(e),o.push(fe.Z.toIso8601(t.stop)),p.push(e)}else if(n instanceof St.Z)for(_=n._property._times,g=0;g<_.length;++g)o.push(fe.Z.toIso8601(_[g])),n.getValueInReferenceFrame(_[g],be.Z.FIXED,ju),p.push(ld(ju,a));else if(n instanceof Tt.Z){_=n._times;const e=n._values;for(g=0;g<_.length;++g)o.push(fe.Z.toIso8601(_[g])),Y.Z.fromArray(e,3*g,ju),p.push(ld(ju,a))}else{const i=e.sampleDuration;t.start.clone(Xu),t.isStartIncluded||fe.Z.addSeconds(Xu,i,Xu);const r=t.stop;for(;fe.Z.lessThan(Xu,r);)n.getValue(Xu,ju),o.push(fe.Z.toIso8601(Xu)),p.push(ld(ju,a)),fe.Z.addSeconds(Xu,i,Xu);t.isStopIncluded&&fe.Z.equals(Xu,r)&&(n.getValue(Xu,ju),o.push(fe.Z.toIso8601(Xu)),p.push(ld(ju,a)))}const Z=s.createElementNS(Lu,"Track");Z.appendChild(r);for(let e=0;e<o.length;++e){const t=cd(s,"when",o[e]),i=cd(s,"coord",p[e],Lu);Z.appendChild(t),Z.appendChild(i)}h&&Z.appendChild(rd(e,i)),y.push(Z)}if(1===y.length)r.push(y[0]);else if(y.length>1){const e=s.createElementNS(Lu,"MultiTrack");for(m=0;m<y.length;++m)e.appendChild(y[m]);r.push(e)}if((0,f.Z)(i)&&!h){const t=i instanceof n.Z?ed(e,i):Qu(e,i);o.push(t)}const Z=t.path;if((0,f.Z)(Z)){const t=l.get(Z.width),i=Z.material;if((0,f.Z)(i)||(0,f.Z)(t)){const n=s.createElement("LineStyle");(0,f.Z)(t)&&n.appendChild(cd(s,"width",t)),sd(e,i,n),o.push(n)}}}function Qu(e,t){const i=e.kmlDoc,n=e.valueGetter,r=i.createElement("IconStyle"),o=n.getColor(t.color);(0,f.Z)(o)&&(r.appendChild(cd(i,"color",o)),r.appendChild(cd(i,"colorMode","normal")));const s=n.get(t.pixelSize);return(0,f.Z)(s)&&r.appendChild(cd(i,"scale",s/Du)),r}function ed(e,t){const i=e.kmlDoc,n=e.valueGetter,r=e.externalFileHandler,o=i.createElement("IconStyle");let s=n.get(t.image);if((0,f.Z)(s)){s=r.texture(s);const e=i.createElement("Icon");e.appendChild(cd(i,"href",s));const a=n.get(t.imageSubRegion);(0,f.Z)(a)&&(e.appendChild(cd(i,"x",a.x,Lu)),e.appendChild(cd(i,"y",a.y,Lu)),e.appendChild(cd(i,"w",a.width,Lu)),e.appendChild(cd(i,"h",a.height,Lu))),o.appendChild(e)}const a=n.getColor(t.color);(0,f.Z)(a)&&(o.appendChild(cd(i,"color",a)),o.appendChild(cd(i,"colorMode","normal")));let l=n.get(t.scale);(0,f.Z)(l)&&o.appendChild(cd(i,"scale",l));const c=n.get(t.pixelOffset);if((0,f.Z)(c)){l=(0,p.Z)(l,1),d.Z.divideByScalar(c,l,c);const e=n.get(t.width,Du),r=n.get(t.height,Du),s=n.get(t.horizontalOrigin,Ie.Z.CENTER);s===Ie.Z.CENTER?c.x-=.5*e:s===Ie.Z.RIGHT&&(c.x-=e);const a=n.get(t.verticalOrigin,Re.Z.CENTER);a===Re.Z.TOP?c.y+=r:a===Re.Z.CENTER&&(c.y+=.5*r);const u=i.createElement("hotSpot");u.setAttribute("x",-c.x),u.setAttribute("y",c.y),u.setAttribute("xunits","pixels"),u.setAttribute("yunits","pixels"),o.appendChild(u)}let u=n.get(t.rotation);const h=n.get(t.alignedAxis);return(0,f.Z)(u)&&Y.Z.equals(Y.Z.UNIT_Z,h)&&(u=T.Z.toDegrees(-u),0===u&&(u=360),o.appendChild(cd(i,"heading",u))),o}function td(e,t,i,n){const r=e.kmlDoc,o=e.ellipsoid,s=e.valueGetter;if(!(0,f.Z)(t))return;const a=r.createElement("LineString"),l=r.createElement("altitudeMode"),c=s.get(t.clampToGround,!1);let u;c?(a.appendChild(cd(r,"tessellate",!0)),u=r.createTextNode("clampToGround")):u=r.createTextNode("absolute"),l.appendChild(u),a.appendChild(l);const d=t.positions,h=cd(r,"coordinates",ld(s.get(d),o));a.appendChild(h);const p=s.get(t.zIndex);c&&(0,f.Z)(p)&&a.appendChild(cd(r,"drawOrder",p,Lu)),i.push(a);const m=r.createElement("LineStyle"),g=s.get(t.width);(0,f.Z)(g)&&m.appendChild(cd(r,"width",g)),sd(e,t.material,m),n.push(m)}function id(e,t,i,n){const r=e.kmlDoc,o=e.ellipsoid,s=[],a=t.length;for(let e=0;e<a;++e)Q.Z.fromCartesian(t[e],o,Ju),s.push(`${T.Z.toDegrees(Ju.longitude)},${T.Z.toDegrees(Ju.latitude)},${n?Ju.height:i}`);const l=cd(r,"coordinates",s.join(" ")),c=r.createElement("LinearRing");return c.appendChild(l),c}function nd(e,t,i,n,r){const o=e.kmlDoc,s=e.valueGetter;if(!(0,f.Z)(t))return;const a=t instanceof wt.Z;if(a&&"Image"===s.getMaterialType(t.material))return void function(e,t,i){const n=e.kmlDoc,r=e.valueGetter,o=e.externalFileHandler,s=n.createElement("GroundOverlay"),a=n.createElement("altitudeMode");a.appendChild(ad(e,t.heightReference)),s.appendChild(a);const l=r.get(t.height);(0,f.Z)(l)&&s.appendChild(cd(n,"altitude",l));const c=r.get(t.coordinates),u=n.createElement("LatLonBox");u.appendChild(cd(n,"north",T.Z.toDegrees(c.north))),u.appendChild(cd(n,"south",T.Z.toDegrees(c.south))),u.appendChild(cd(n,"east",T.Z.toDegrees(c.east))),u.appendChild(cd(n,"west",T.Z.toDegrees(c.west))),s.appendChild(u);const d=r.get(t.material),h=o.texture(d.image),p=n.createElement("Icon");p.appendChild(cd(n,"href",h)),s.appendChild(p);const m=d.color;(0,f.Z)(m)&&s.appendChild(cd(n,"color",ud(d.color))),i.push(s)}(e,t,r);const l=o.createElement("Polygon"),c=s.get(t.extrudedHeight,0);c>0&&l.appendChild(cd(o,"extrude",!0));const u=a?function(e,t,i){const n=e.kmlDoc,r=e.valueGetter;let o=r.get(t.height,0);i>0&&(o=i);const s=t.coordinates,a=r.get(s),l=[],c=[ve.Z.northeast,ve.Z.southeast,ve.Z.southwest,ve.Z.northwest];for(let e=0;e<4;++e)c[e](a,Ju),l.push(`${T.Z.toDegrees(Ju.longitude)},${T.Z.toDegrees(Ju.latitude)},${o}`);const u=cd(n,"coordinates",l.join(" ")),d=n.createElement("outerBoundaryIs"),h=n.createElement("LinearRing");return h.appendChild(u),d.appendChild(h),[d]}(e,t,c):function(e,t,i){const n=e.kmlDoc,r=e.valueGetter;let o=r.get(t.height,0);const s=r.get(t.perPositionHeight,!1);!s&&i>0&&(o=i);const a=[],l=t.hierarchy,c=r.get(l),u=Array.isArray(c)?c:c.positions,d=n.createElement("outerBoundaryIs");d.appendChild(id(e,u,o,s)),a.push(d);const h=c.holes;if((0,f.Z)(h)){const t=h.length;for(let i=0;i<t;++i){const t=n.createElement("innerBoundaryIs");t.appendChild(id(e,h[i].positions,o,s)),a.push(t)}}return a}(e,t,c),d=u.length;for(let e=0;e<d;++e)l.appendChild(u[e]);const p=o.createElement("altitudeMode");p.appendChild(ad(e,t.heightReference)),l.appendChild(p),i.push(l);const m=o.createElement("PolyStyle"),g=s.get(t.fill,!1);g&&m.appendChild(cd(o,"fill",g)),sd(e,t.material,m);const _=s.get(t.outline,!1);if(_){m.appendChild(cd(o,"outline",_));const e=o.createElement("LineStyle"),i=s.get(t.outlineWidth,1);e.appendChild(cd(o,"width",i));const r=s.getColor(t.outlineColor,h.Z.BLACK);e.appendChild(cd(o,"color",r)),e.appendChild(cd(o,"colorMode","normal")),n.push(e)}n.push(m)}function rd(e,t){const i=e.kmlDoc,n=e.valueGetter,r=e.externalFileHandler,o=i.createElement("Model"),s=n.get(t.scale);if((0,f.Z)(s)){const e=i.createElement("scale");e.appendChild(cd(i,"x",s)),e.appendChild(cd(i,"y",s)),e.appendChild(cd(i,"z",s)),o.appendChild(e)}const a=i.createElement("Link"),l=r.model(t,e.time);return a.appendChild(cd(i,"href",l)),o.appendChild(a),o}function od(e,t,i,n,r){const o=e.kmlDoc,s=e.ellipsoid,a=e.valueGetter;if(!(0,f.Z)(i))return;const l=t.position;if(!l.isConstant)return void Yu(e,t,i,n,r);const c=rd(e,i),u=o.createElement("altitudeMode");u.appendChild(ad(e,i.heightReference)),c.appendChild(u),a.get(l,void 0,ju),Q.Z.fromCartesian(ju,s,Ju);const d=o.createElement("Location");d.appendChild(cd(o,"longitude",T.Z.toDegrees(Ju.longitude))),d.appendChild(cd(o,"latitude",T.Z.toDegrees(Ju.latitude))),d.appendChild(cd(o,"altitude",Ju.height)),c.appendChild(d),n.push(c)}function sd(e,t,i){const n=e.kmlDoc,r=e.valueGetter;if(!(0,f.Z)(t))return;const o=r.get(t);if(!(0,f.Z)(o))return;let s,a,l;switch(r.getMaterialType(t)){case"Image":s=ud(h.Z.WHITE);break;case"Color":case"Grid":case"PolylineGlow":case"PolylineArrow":case"PolylineDash":s=ud(o.color);break;case"PolylineOutline":s=ud(o.color),a=ud(o.outlineColor),l=o.outlineWidth,i.appendChild(cd(n,"outerColor",a,Lu)),i.appendChild(cd(n,"outerWidth",l,Lu));break;case"Stripe":s=ud(o.oddColor)}(0,f.Z)(s)&&(i.appendChild(cd(n,"color",s)),i.appendChild(cd(n,"colorMode","normal")))}function ad(e,t){const i=e.kmlDoc;let n;switch(e.valueGetter.get(t,ke.Z.NONE)){case ke.Z.NONE:n=i.createTextNode("absolute");break;case ke.Z.CLAMP_TO_GROUND:n=i.createTextNode("clampToGround");break;case ke.Z.RELATIVE_TO_GROUND:n=i.createTextNode("relativeToGround")}return n}function ld(e,t){Array.isArray(e)||(e=[e]);const i=e.length,n=[];for(let r=0;r<i;++r)Q.Z.fromCartesian(e[r],t,Ju),n.push(`${T.Z.toDegrees(Ju.longitude)},${T.Z.toDegrees(Ju.latitude)},${Ju.height}`);return n.join(" ")}function cd(e,t,i,n){"boolean"==typeof(i=(0,p.Z)(i,""))&&(i=i?"1":"0");const r=(0,f.Z)(n)?e.createElementNS(n,t):e.createElement(t),o="string"===i&&-1!==i.indexOf("<")?e.createCDATASection(i):e.createTextNode(i);return r.appendChild(o),r}function ud(e){let t="";const i=e.toBytes();for(let e=3;e>=0;--e)t+=i[e]<16?`0${i[e].toString(16)}`:i[e].toString(16);return t}const dd=qu;var hd=i(628353),pd=i(286427),fd=i(379593),md=i(915323),gd=i(598020),_d=i(673314),yd=i(759304),Zd=i(678216),vd=i(591477),bd=i(136525),wd=i(536297),xd=i(661679),Cd=i(707258),Sd=i(12503),Td=i(741514),Ad=i(434972),Pd=i(431056),Ed=i(708800),Md=i(545870),kd=i(417148),Id=i(941537),Od=i(964695),Bd=i(497730),Rd=i(669133),Fd=i(341844),Dd=i(245929),Ld=i(285468),Vd=i(161632),Nd=i(437530),Ud=i(663305),Gd=i(609882),zd=i(342617),Kd=i(442429),qd=i(55248),Hd=i(49940),Wd=i(422113),jd=i(858371),Jd=i(379283),Xd=i(427599),$d=i(680864),Yd=i(98094),Qd=i(424142),eh=i(699012),th=i(642336),ih=i(729476),nh=i(63846),rh=i(751655),oh=i(161648),sh=i(338212),ah=i(293685),lh=i(96828),ch=i(649638),uh=i(709366),dh=i(931359);function hh(e){this.ellipsoid=(0,p.Z)(e.ellipsoid,oe.Z.WGS84),this.credit=void 0,this.tilingScheme=void 0,this.height=void 0,this.width=void 0,this.encoding=void 0,this.lodCount=void 0,this.hasAvailability=!1,this.tilesAvailable=void 0,this.tilesAvailabilityLoaded=void 0,this.levelZeroMaximumGeometricError=void 0,this.terrainDataStructure=void 0}async function ph(e,t,i){try{!function(e,t){const i=t.copyrightText;(0,f.Z)(i)&&(e.credit=new ne.Z(i));const n=t.spatialReference,r=(0,p.Z)(n.latestWkid,n.wkid),o=t.extent,s={ellipsoid:e.ellipsoid};if(4326===r)s.rectangle=ve.Z.fromDegrees(o.xmin,o.ymin,o.xmax,o.ymax),e.tilingScheme=new ih.Z(s);else{if(3857!==r)throw new xe.Z("Invalid spatial reference");{const i=Math.PI*e.ellipsoid.maximumRadius;t.extent.xmax>i&&(t.extent.xmax=i),t.extent.ymax>i&&(t.extent.ymax=i),t.extent.xmin<-i&&(t.extent.xmin=-i),t.extent.ymin<-i&&(t.extent.ymin=-i),s.rectangleSouthwestInMeters=new d.Z(o.xmin,o.ymin),s.rectangleNortheastInMeters=new d.Z(o.xmax,o.ymax),e.tilingScheme=new dh.Z(s)}}const a=t.tileInfo;if(!(0,f.Z)(a))throw new xe.Z("tileInfo is required");e.width=a.rows+1,e.height=a.cols+1,e.encoding="LERC"===a.format?nh.Z.LERC:nh.Z.NONE,e.lodCount=a.lods.length-1,(e.hasAvailability=-1!==t.capabilities.indexOf("Tilemap"))&&(e.tilesAvailable=new ch.Z(e.tilingScheme,e.lodCount),e.tilesAvailable.addAvailableTileRange(0,0,0,e.tilingScheme.getNumberOfXTilesAtLevel(0),e.tilingScheme.getNumberOfYTilesAtLevel(0)),e.tilesAvailabilityLoaded=new ch.Z(e.tilingScheme,e.lodCount)),e.levelZeroMaximumGeometricError=lh.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.tilingScheme.ellipsoid,e.width,e.tilingScheme.getNumberOfXTilesAtLevel(0)),t.bandCount>1&&console.log("ArcGISTiledElevationTerrainProvider: Terrain data has more than 1 band. Using the first one."),(0,f.Z)(t.minValues)&&(0,f.Z)(t.maxValues)?e.terrainDataStructure={elementMultiplier:1,lowestEncodedHeight:t.minValues[0],highestEncodedHeight:t.maxValues[0]}:e.terrainDataStructure={elementMultiplier:1}}(e,await t.fetchJson())}catch(e){const n=`An error occurred while accessing ${t}.`;throw uh.Z.reportError(void 0,i,(0,f.Z)(i)?i._errorEvent:void 0,n),e}}function fh(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._resource=void 0,this._credit=void 0,this._tilingScheme=void 0,this._levelZeroMaximumGeometricError=void 0,this._maxLevel=void 0,this._terrainDataStructure=void 0,this._width=void 0,this._height=void 0,this._encoding=void 0,this._lodCount=void 0;const t=e.token;if(this._hasAvailability=!1,this._tilesAvailable=void 0,this._tilesAvailabilityLoaded=void 0,this._availableCache={},this._ready=!1,this._errorEvent=new m.Z,(0,f.Z)(e.url)){(0,Rl.Z)("ArcGISTiledElevationTerrainProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGISTiledElevationTerrainProvider.fromUrl instead.");const i=this,n=new hh(e);this._readyPromise=Promise.resolve(e.url).then((async function(e){let r=we.Z.createIfNeeded(e);r.appendForwardSlash(),(0,f.Z)(t)&&(r=r.getDerivedResource({queryParameters:{token:t}})),i._resource=r;const o=r.getDerivedResource({queryParameters:{f:"pjson"}});return await ph(n,o,i),n.build(i),!0}))}}function mh(e,t,i,n){if(!e._hasAvailability)return;const r=e._tilesAvailabilityLoaded,o=e._tilesAvailable;return!(t>e._lodCount)&&(!!o.isTileAvailable(t,i,n)||!r.isTileAvailable(t,i,n)&&void 0)}function gh(e,t,i,n){const r=t-1,o=i-1,s=n[e.y*t+e.x],a=[],l={startX:e.x,startY:e.y,endX:0,endY:0},c=new d.Z(e.x+1,e.y+1);let u=!1,h=!1;for(;!u||!h;){let i=c.x;const p=h?c.y+1:c.y;if(!u){for(let i=e.y;i<p;++i)if(n[i*t+c.x]!==s){u=!0;break}u?(a.push(new d.Z(c.x,e.y)),--c.x,--i,l.endX=c.x):c.x===r?(l.endX=c.x,u=!0):++c.x}if(!h){const r=c.y*t;for(let t=e.x;t<=i;++t)if(n[r+t]!==s){h=!0;break}h?(a.push(new d.Z(e.x,c.y)),--c.y,l.endY=c.y):c.y===o?(l.endY=c.y,h=!0):++c.y}}return{endingIndices:a,range:l,value:s}}function _h(e,t,i,n){if(!e._hasAvailability)return{};const r=128*Math.floor(i/128),o=128*Math.floor(n/128),s=Math.min(1<<t,128),a=`tilemap/${t}/${o}/${r}/${s}/${s}`,l=e._availableCache;if((0,f.Z)(l[a]))return l[a];const c=new oh.Z({throttle:!1,throttleByServer:!0,type:ah.Z.TERRAIN});let u=e._resource.getDerivedResource({url:a,request:c}).fetchJson();return(0,f.Z)(u)?(u=u.then((function(a){const l=function(e,t,i,n,r){const o=[];if(r.every((function(e){return e===r[0]})))return 1===r[0]&&o.push({startX:e,startY:t,endX:e+i-1,endY:t+n-1}),o;let s=[new d.Z(0,0)];for(;s.length>0;){const a=gh(s.pop(),i,n,r);if(1===a.value){const i=a.range;i.startX+=e,i.endX+=e,i.startY+=t,i.endY+=t,o.push(i)}const l=a.endingIndices;l.length>0&&(s=s.concat(l))}return o}(r,o,s,s,a.data);e._tilesAvailabilityLoaded.addAvailableTileRange(t,r,o,r+s,o+s);const c=e._tilesAvailable;for(let e=0;e<l.length;++e){const i=l[e];c.addAvailableTileRange(t,i.startX,i.startY,i.endX,i.endY)}return mh(e,t,i,n)})),l[a]={promise:u,request:c},u=u.finally((function(e){return delete l[a],e})),{promise:u,request:c}):{}}hh.prototype.build=function(e){e._credit=this.credit,e._tilingScheme=this.tilingScheme,e._height=this.height,e._width=this.width,e._encoding=this.encoding,e._lodCount=this.lodCount,e._hasAvailability=this.hasAvailability,e._tilesAvailable=this.tilesAvailable,e._tilesAvailabilityLoaded=this.tilesAvailabilityLoaded,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._terrainDataStructure=this.terrainDataStructure,e._ready=!0},Object.defineProperties(fh.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,Rl.Z)("ArcGISTiledElevationTerrainProvider.ready","ArcGISTiledElevationTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGISTiledElevationTerrainProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,Rl.Z)("ArcGISTiledElevationTerrainProvider.readyPromise","ArcGISTiledElevationTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ArcGISTiledElevationTerrainProvider.fromUrl instead."),this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){return this._tilesAvailable}}}),fh.fromUrl=async function(e,t){Ce.Z.defined("url",e),t=(0,p.Z)(t,p.Z.EMPTY_OBJECT),e=await Promise.resolve(e);let i=we.Z.createIfNeeded(e);i.appendForwardSlash(),(0,f.Z)(t.token)&&(i=i.getDerivedResource({queryParameters:{token:t.token}}));const n=i.getDerivedResource({queryParameters:{f:"pjson"}}),r=new hh(t);await ph(r,n);const o=new fh(t);return r.build(o),o._resource=i,o},fh.prototype.requestTileGeometry=function(e,t,i,n){const r=this._resource.getDerivedResource({url:`tile/${i}/${t}/${e}`,request:n}),o=this._hasAvailability;let s,a=Promise.resolve(!0);if(o&&!(0,f.Z)(mh(this,i+1,2*e,2*t))){const n=_h(this,i+1,2*e,2*t);a=n.promise,s=n.request}const l=r.fetchArrayBuffer();if(!(0,f.Z)(l)||!(0,f.Z)(a))return;const c=this,u=this._tilesAvailable;return Promise.all([l,a]).then((function(n){return new rh.Z({buffer:n[0],width:c._width,height:c._height,childTileMask:o?u.computeChildMaskForTile(i,e,t):15,structure:c._terrainDataStructure,encoding:c._encoding})})).catch((function(e){return(0,f.Z)(s)&&s.state===sh.Z.CANCELLED?(n.cancel(),n.deferred.promise.finally((function(){return n.state=sh.Z.CANCELLED,Promise.reject(e)}))):Promise.reject(e)}))},fh.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},fh.prototype.getTileDataAvailable=function(e,t,i){if(!this._hasAvailability)return;const n=mh(this,i,e,t);if((0,f.Z)(n))return n;_h(this,i,e,t)},fh.prototype.loadTileDataAvailability=function(e,t,i){};const yh=fh;var Zh=i(979811),vh=i(393766),bh=i(352345);const wh="https://dev.virtualearth.net/REST/v1/Locations";function xh(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).key;if(!(0,f.Z)(t))throw new S.Z("options.key is required.");this._key=t;const i={key:t};(0,f.Z)(e.culture)&&(i.culture=e.culture),this._resource=new we.Z({url:wh,queryParameters:i}),this._credit=new ne.Z('<img src="http://dev.virtualearth.net/Branding/logo_powered_by.png"/>',!1)}Object.defineProperties(xh.prototype,{url:{get:function(){return wh}},key:{get:function(){return this._key}},credit:{get:function(){return this._credit}}}),xh.prototype.geocode=async function(e){return Ce.Z.typeOf.string("query",e),this._resource.getDerivedResource({queryParameters:{query:e}}).fetchJsonp("jsonp").then((function(e){return 0===e.resourceSets.length?[]:e.resourceSets[0].resources.map((function(e){const t=e.bbox,i=t[0],n=t[1],r=t[2],o=t[3];return{displayName:e.name,destination:ve.Z.fromDegrees(n,i,o,r)}}))}))};const Ch=xh;var Sh=i(418547),Th=i(77305),Ah=i(798336),Ph=i(830117),Eh=i(501121),Mh=i(659635),kh=i(361942);const Ih=new Ah.Z,Oh=new Y.Z,Bh=new Y.Z,Rh=new Y.Z,Fh=new Y.Z;function Dh(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).points,i=e.times;let n=e.firstTangent,r=e.lastTangent;if(Ce.Z.defined("points",t),Ce.Z.defined("times",i),Ce.Z.typeOf.number.greaterThanOrEquals("points.length",t.length,2),Ce.Z.typeOf.number.equals("times.length","points.length",i.length,t.length),t.length>2&&((0,f.Z)(n)||(n=Rh,Y.Z.multiplyByScalar(t[1],2,n),Y.Z.subtract(n,t[2],n),Y.Z.subtract(n,t[0],n),Y.Z.multiplyByScalar(n,.5,n)),!(0,f.Z)(r))){const e=t.length-1;r=Fh,Y.Z.multiplyByScalar(t[e-1],2,r),Y.Z.subtract(t[e],r,r),Y.Z.add(r,t[e-2],r),Y.Z.multiplyByScalar(r,.5,r)}this._times=i,this._points=t,this._firstTangent=Y.Z.clone(n),this._lastTangent=Y.Z.clone(r),this._evaluateFunction=function(e){const t=e.points,i=e.times;if(t.length<3){const e=i[0],n=1/(i[1]-e),r=t[0],o=t[1];return function(t,i){(0,f.Z)(i)||(i=new Y.Z);const s=(t-e)*n;return Y.Z.lerp(r,o,s,i)}}return function(n,r){(0,f.Z)(r)||(r=new Y.Z);const o=e._lastTimeIndex=e.findTimeInterval(n,e._lastTimeIndex),s=(n-i[o])/(i[o+1]-i[o]),a=Ih;let l,c,u,d,h;return a.z=s,a.y=s*s,a.x=a.y*s,a.w=1,0===o?(l=t[0],c=t[1],u=e.firstTangent,d=Y.Z.subtract(t[2],l,Oh),Y.Z.multiplyByScalar(d,.5,d),h=Mh.Z.multiplyByVector(Eh.Z.hermiteCoefficientMatrix,a,a)):o===t.length-2?(l=t[o],c=t[o+1],d=e.lastTangent,u=Y.Z.subtract(c,t[o-1],Oh),Y.Z.multiplyByScalar(u,.5,u),h=Mh.Z.multiplyByVector(Eh.Z.hermiteCoefficientMatrix,a,a)):(l=t[o-1],c=t[o],u=t[o+1],d=t[o+2],h=Mh.Z.multiplyByVector(Dh.catmullRomCoefficientMatrix,a,a)),r=Y.Z.multiplyByScalar(l,h.x,r),Y.Z.multiplyByScalar(c,h.y,Bh),Y.Z.add(r,Bh,r),Y.Z.multiplyByScalar(u,h.z,Bh),Y.Z.add(r,Bh,r),Y.Z.multiplyByScalar(d,h.w,Bh),Y.Z.add(r,Bh,r)}}(this),this._lastTimeIndex=0}Object.defineProperties(Dh.prototype,{times:{get:function(){return this._times}},points:{get:function(){return this._points}},firstTangent:{get:function(){return this._firstTangent}},lastTangent:{get:function(){return this._lastTangent}}}),Dh.catmullRomCoefficientMatrix=new Mh.Z(-.5,1,-.5,0,1.5,-2.5,0,1,-1.5,2,.5,0,.5,-.5,0,0),Dh.prototype.findTimeInterval=kh.Z.prototype.findTimeInterval,Dh.prototype.wrapTime=kh.Z.prototype.wrapTime,Dh.prototype.clampTime=kh.Z.prototype.clampTime,Dh.prototype.evaluate=function(e,t){return this._evaluateFunction(e,t)};const Lh=Dh;var Vh=i(849986),Nh=i(370271),Uh=i(427183);function Gh(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).radius;Ce.Z.typeOf.number("radius",t);const i={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,vertexFormat:e.vertexFormat,stRotation:e.stRotation,shadowVolume:e.shadowVolume};this._ellipseGeometry=new Nh.Z(i),this._workerName="createCircleGeometry"}Gh.packedLength=Nh.Z.packedLength,Gh.pack=function(e,t,i){return Ce.Z.typeOf.object("value",e),Nh.Z.pack(e._ellipseGeometry,t,i)};const zh=new Nh.Z({center:new Y.Z,semiMajorAxis:1,semiMinorAxis:1}),Kh={center:new Y.Z,radius:void 0,ellipsoid:oe.Z.clone(oe.Z.UNIT_SPHERE),height:void 0,extrudedHeight:void 0,granularity:void 0,vertexFormat:new Uh.Z,stRotation:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0,shadowVolume:void 0};Gh.unpack=function(e,t,i){const n=Nh.Z.unpack(e,t,zh);return Kh.center=Y.Z.clone(n._center,Kh.center),Kh.ellipsoid=oe.Z.clone(n._ellipsoid,Kh.ellipsoid),Kh.height=n._height,Kh.extrudedHeight=n._extrudedHeight,Kh.granularity=n._granularity,Kh.vertexFormat=Uh.Z.clone(n._vertexFormat,Kh.vertexFormat),Kh.stRotation=n._stRotation,Kh.shadowVolume=n._shadowVolume,(0,f.Z)(i)?(Kh.semiMajorAxis=n._semiMajorAxis,Kh.semiMinorAxis=n._semiMinorAxis,i._ellipseGeometry=new Nh.Z(Kh),i):(Kh.radius=n._semiMajorAxis,new Gh(Kh))},Gh.createGeometry=function(e){return Nh.Z.createGeometry(e._ellipseGeometry)},Gh.createShadowVolume=function(e,t,i){const n=e._ellipseGeometry._granularity,r=e._ellipseGeometry._ellipsoid,o=t(n,r),s=i(n,r);return new Gh({center:e._ellipseGeometry._center,radius:e._ellipseGeometry._semiMajorAxis,ellipsoid:r,stRotation:e._ellipseGeometry._stRotation,granularity:n,extrudedHeight:o,height:s,vertexFormat:Uh.Z.POSITION_ONLY,shadowVolume:!0})},Object.defineProperties(Gh.prototype,{rectangle:{get:function(){return this._ellipseGeometry.rectangle}},textureCoordinateRotationPoints:{get:function(){return this._ellipseGeometry.textureCoordinateRotationPoints}}});const qh=Gh;var Hh=i(794493);function Wh(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).radius;Ce.Z.typeOf.number("radius",t);const i={center:e.center,semiMajorAxis:t,semiMinorAxis:t,ellipsoid:e.ellipsoid,height:e.height,extrudedHeight:e.extrudedHeight,granularity:e.granularity,numberOfVerticalLines:e.numberOfVerticalLines};this._ellipseGeometry=new Hh.Z(i),this._workerName="createCircleOutlineGeometry"}Wh.packedLength=Hh.Z.packedLength,Wh.pack=function(e,t,i){return Ce.Z.typeOf.object("value",e),Hh.Z.pack(e._ellipseGeometry,t,i)};const jh=new Hh.Z({center:new Y.Z,semiMajorAxis:1,semiMinorAxis:1}),Jh={center:new Y.Z,radius:void 0,ellipsoid:oe.Z.clone(oe.Z.UNIT_SPHERE),height:void 0,extrudedHeight:void 0,granularity:void 0,numberOfVerticalLines:void 0,semiMajorAxis:void 0,semiMinorAxis:void 0};Wh.unpack=function(e,t,i){const n=Hh.Z.unpack(e,t,jh);return Jh.center=Y.Z.clone(n._center,Jh.center),Jh.ellipsoid=oe.Z.clone(n._ellipsoid,Jh.ellipsoid),Jh.height=n._height,Jh.extrudedHeight=n._extrudedHeight,Jh.granularity=n._granularity,Jh.numberOfVerticalLines=n._numberOfVerticalLines,(0,f.Z)(i)?(Jh.semiMajorAxis=n._semiMajorAxis,Jh.semiMinorAxis=n._semiMinorAxis,i._ellipseGeometry=new Hh.Z(Jh),i):(Jh.radius=n._semiMajorAxis,new Wh(Jh))},Wh.createGeometry=function(e){return Hh.Z.createGeometry(e._ellipseGeometry)};const Xh=Wh;var $h=i(376213),Yh=i(449809),Qh=i(138933),ep=i(809120),tp=i(586879),ip=i(857819),np=i(252888),rp=i(126301),op=i(977890),sp=i(842056),ap=i(619330),lp=i(737400);function cp(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),Ce.Z.defined("options.callback",e.callback),Ce.Z.defined("options.width",e.width),Ce.Z.defined("options.height",e.height),this._callback=e.callback,this._tilingScheme=e.tilingScheme,(0,f.Z)(this._tilingScheme)||(this._tilingScheme=new ih.Z({ellipsoid:(0,p.Z)(e.ellipsoid,oe.Z.WGS84)})),this._width=e.width,this._height=e.height;const t=Math.max(this._width,this._height);this._levelZeroMaximumGeometricError=lh.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(this._tilingScheme.ellipsoid,t,this._tilingScheme.getNumberOfXTilesAtLevel(0)),this._errorEvent=new m.Z;let i=e.credit;"string"==typeof i&&(i=new ne.Z(i)),this._credit=i,this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(cp.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,Rl.Z)("CustomHeightmapTerrainProvider.ready","CustomHeightmapTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,Rl.Z)("CustomHeightmapTerrainProvider.readyPromise","CustomHeightmapTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},width:{get:function(){return this._width}},height:{get:function(){return this._height}}}),cp.prototype.requestTileGeometry=function(e,t,i,n){const r=this._callback(e,t,i);if(!(0,f.Z)(r))return;const o=this._width,s=this._height;return Promise.resolve(r).then((function(e){let t=e;return Array.isArray(t)&&(t=new Float64Array(t)),new rh.Z({buffer:t,width:o,height:s})}))},cp.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},cp.prototype.getTileDataAvailable=function(e,t,i){},cp.prototype.loadTileDataAvailability=function(e,t,i){};const up=cp;var dp=i(6853),hp=i(407578),pp=i(923156),fp=i(428709),mp=i(669327),gp=i(999727),_p=i(416093),yp=i(283387),Zp=i(117565),vp=i(976337),bp=i(835189),wp=i(658912),xp=i(802877),Cp=i(161589),Sp=i(573777),Tp=i(250305),Ap=i(615651),Pp=i(180390),Ep=i(95296),Mp=i(499746),kp=i(918094),Ip=i(289325),Op=i(238466),Bp=i(232435),Rp=i(351047),Fp=i(87200),Dp=i(951775),Lp=i(263825);function Vp(){S.Z.throwInstantiationError()}Vp.createGeometry=function(e){S.Z.throwInstantiationError()};const Np=Vp;var Up=i(156905),Gp=i(685314),zp=i(61885),Kp=i(5450),qp=i(651530),Hp=i(364047),Wp=i.t(Hp,2);const jp=function(e,t){return!!(e&t)},Jp=[1,2,4,8];function Xp(e,t,i,n,r,o){this._bits=e,this.cnodeVersion=t,this.imageryVersion=i,this.terrainVersion=n,this.imageryProvider=r,this.terrainProvider=o,this.ancestorHasTerrain=!1,this.terrainState=void 0}Xp.clone=function(e,t){return(0,f.Z)(t)?(t._bits=e._bits,t.cnodeVersion=e.cnodeVersion,t.imageryVersion=e.imageryVersion,t.terrainVersion=e.terrainVersion,t.imageryProvider=e.imageryProvider,t.terrainProvider=e.terrainProvider):t=new Xp(e._bits,e.cnodeVersion,e.imageryVersion,e.terrainVersion,e.imageryProvider,e.terrainProvider),t.ancestorHasTerrain=e.ancestorHasTerrain,t.terrainState=e.terrainState,t},Xp.prototype.setParent=function(e){this.ancestorHasTerrain=e.ancestorHasTerrain||this.hasTerrain()},Xp.prototype.hasSubtree=function(){return jp(this._bits,16)},Xp.prototype.hasImagery=function(){return jp(this._bits,64)},Xp.prototype.hasTerrain=function(){return jp(this._bits,128)},Xp.prototype.hasChildren=function(){return jp(this._bits,15)},Xp.prototype.hasChild=function(e){return jp(this._bits,Jp[e])},Xp.prototype.getChildBitmask=function(){return 15&this._bits};const $p=Xp;var Yp=i(643217),Qp=i(511267);const ef=function(e){const t=new ArrayBuffer(1016),i=new Uint8Array(t);for(let t=0;t<1016;++t)i[t]=e.charCodeAt(t);return t}('Eô½\vyâjE",ÍqøIFgQ\0B%Æèa,f)\bÆ4Üjb%y\nwmiÖðk¡½NuàA[ß@V\fÙ»r|3SîOlÔq°{ÀEVZ­wUe\v3*¬l5Å0sø3>mF8J´Ýð.ÝuÚDt"úa"\f3"So¯9D\v9Ù9L¹¿«\\P_"uxéqh;ÁÄð<VqH\'UfYNeu£aF}a?A\0×´4MÎF°Õ¸\'{Ü+»Mg0ÈÑö\\Pú[/Fn5/\'C.ë\n\f^¥se4ål.jC\'c#U©?q{gC}:¯ÍâTUýKÆâ/(íË\\Æ-f§;/*"N°k.Ý\r}}GºC²²+>Mª>}æÎIÆæx\fa1-¤O¥~q ì\r1èN\v\0nPh}=\b\r¦n£h$[kó#ó¶s³\r\v@ÀØQ]ú".jßI\0¹ wUÆïj¿{GLîÜÜF©­S+S4ÿYä8è1N¹XFkË-#p\x005"Ï1²&/çÃu-6,rt°#G·ÓÑ&7râ\0DÏÚ3-Þ`i#i*|ÍKQ\rT9w.)ê¦P¢joP\\>TûïP[\vEm(w7ÛJfJo åpâ¹q~\fmI-zþrÇòY0»]såÉ êxì ðB|G`°½&·q¶ÇÑ3=Ó«îcÈ+S D\\qÆÌD2O<ÊÀ)=RÓaX©}e´ÜÏ\rô=ñ\b©BÚ#\tØ¿^PIøMÀËGLO÷{+ØÅ1;µoÜl\rÑÛ?âéÚ_ÔâFaZÞUÏ¤\0¾ýÎgñJiæ HØ]~®q N®ÀV©<rçvì)IÖ]-ãÛ6©;fjÕ¶=P^R¹KÇsWxÉô.YoÐKW>\'\'Ç`Û;íSD>?mw¢\në?R¨ÆU^1I7ôÅ&-©¿\'TÚÃj å*x°Öprªh½÷_H±~ÀXL?fù>áeÀp§Ï8i¯ðVldI\'­xtOÂÞV9\0Úw\vË-û5Oõ\bQ`Á\nZGM&30xÚÀFGâ[y`In7gS\n>éìF9²ñ4\rÆSuná\fYÙÞ){II¥wy¾IV.6ç\v:»Ob{ÒM1/½8{¨O!áìFpv})"x\nÝ\\ÚÞQÏðüYRe|3ßóHÚ»*uÛ`²Ôüíì5¨ÿ(1-ÈÜF|["');function tf(e){if(this.imageryPresent=!0,this.protoImagery=void 0,this.terrainPresent=!0,this.negativeAltitudeExponentBias=32,this.negativeAltitudeThreshold=T.Z.EPSILON12,this.providers={},this.key=void 0,this._resource=void 0,this._quadPacketVersion=1,this._tileInfo={},this._subtreePromises={},this._readyPromise=Promise.resolve(!0),(0,f.Z)(e)){(0,Rl.Z)("GoogleEarthEnterpriseMetadata options.url","GoogleEarthEnterpriseMetadata constructor parmeter resourceOrUrl was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseMetadata.fromUrl instead.");let t=e;"string"==typeof t||t instanceof we.Z||(t=e.url);const i=we.Z.createIfNeeded(t);i.appendForwardSlash(),this._resource=i;const n=this;this._readyPromise=lf(this).then((function(){return n.getQuadTreePacket("",n._quadPacketVersion)})).then((function(){return!0})).catch((function(e){const t=`An error occurred while accessing ${of(n,"",1).url}.`;return Promise.reject(new xe.Z(t))}))}}Object.defineProperties(tf.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},resource:{get:function(){return this._resource}},readyPromise:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseMetadata.readyPromise","GoogleEarthEnterpriseMetadata.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseMetadata.fromUrl instead."),this._readyPromise}}}),tf.fromUrl=async function(e){Ce.Z.defined("resourceOrUrl",e);let t=e;"string"==typeof t||t instanceof we.Z||(Ce.Z.typeOf.string("resourceOrUrl.url",e.url),t=e.url);const i=we.Z.createIfNeeded(t);i.appendForwardSlash();const n=new tf;n._resource=i;try{await lf(n),await n.getQuadTreePacket("",n._quadPacketVersion)}catch(e){const t=`An error occurred while accessing ${of(n,"",1).url}: ${e}`;throw new xe.Z(t)}return n},tf.tileXYToQuadKey=function(e,t,i){let n="";for(let r=i;r>=0;--r){const i=1<<r;let o=0;jp(t,i)?jp(e,i)&&(o|=1):(o|=2,jp(e,i)||(o|=1)),n+=o}return n},tf.quadKeyToTileXY=function(e){let t=0,i=0;const n=e.length-1;for(let r=n;r>=0;--r){const o=1<<r,s=+e[n-r];jp(s,2)?jp(s,1)||(t|=o):(i|=o,jp(s,1)&&(t|=o))}return{x:t,y:i,level:n}},tf.prototype.isValid=function(e){let t=this.getTileInformationFromQuadKey(e);if((0,f.Z)(t))return null!==t;let i,n=!0,r=e;for(;r.length>1;){if(i=r.substring(r.length-1),r=r.substring(0,r.length-1),t=this.getTileInformationFromQuadKey(r),(0,f.Z)(t)){t.hasSubtree()||t.hasChild(parseInt(i))||(n=!1);break}if(null===t){n=!1;break}}return n};const nf=new Qp.Z("decodeGoogleEarthEnterprisePacket");function rf(e,t,i){const n=e._tileInfo;let r,o=t,s=n[o];if((0,f.Z)(s)&&(!s.hasSubtree()||s.hasChildren()))return s;for(;void 0===s&&o.length>1;)o=o.substring(0,o.length-1),s=n[o];const a=e._subtreePromises;let l=a[o];return(0,f.Z)(l)?l.then((function(){return r=new oh.Z({throttle:i.throttle,throttleByServer:i.throttleByServer,type:i.type,priorityFunction:i.priorityFunction}),rf(e,t,r)})):(0,f.Z)(s)&&s.hasSubtree()?(l=e.getQuadTreePacket(o,s.cnodeVersion,i),(0,f.Z)(l)?(a[o]=l,l.then((function(){return r=new oh.Z({throttle:i.throttle,throttleByServer:i.throttleByServer,type:i.type,priorityFunction:i.priorityFunction}),rf(e,t,r)})).finally((function(){delete a[o]}))):void 0):Promise.reject(new xe.Z(`Couldn't load metadata for tile ${t}`))}function of(e,t,i,n){return e._resource.getDerivedResource({url:`flatfile?q2-0${t}-q.${i.toString()}`,request:n})}let sf,af;function lf(e){const t=e._resource.getDerivedResource({url:"dbRoot.v5",queryParameters:{output:"proto"}});if(!(0,f.Z)(af)){const e=(0,Yr.Z)("ThirdParty/google-earth-dbroot-parser.js"),t=window.cesiumGoogleEarthDbRootParser;af=(0,Yp.Z)(e).then((function(){sf=window.cesiumGoogleEarthDbRootParser(Wp),(0,f.Z)(t)?window.cesiumGoogleEarthDbRootParser=t:delete window.cesiumGoogleEarthDbRootParser}))}return af.then((function(){return t.fetchArrayBuffer()})).then((function(t){const i=sf.EncryptedDbRootProto.decode(new Uint8Array(t));let n=i.encryptionData,r=n.byteOffset,o=r+n.byteLength;const s=e.key=n.buffer.slice(r,o);n=i.dbrootData,r=n.byteOffset,o=r+n.byteLength;const a=n.buffer.slice(r,o);return nf.scheduleTask({buffer:a,type:"DbRoot",key:s},[a])})).then((function(t){const i=sf.DbRootProto.decode(new Uint8Array(t.buffer));if(e.imageryPresent=(0,p.Z)(i.imageryPresent,e.imageryPresent),e.protoImagery=i.protoImagery,e.terrainPresent=(0,p.Z)(i.terrainPresent,e.terrainPresent),(0,f.Z)(i.endSnippet)&&(0,f.Z)(i.endSnippet.model)){const t=i.endSnippet.model;e.negativeAltitudeExponentBias=(0,p.Z)(t.negativeAltitudeExponentBias,e.negativeAltitudeExponentBias),e.negativeAltitudeThreshold=(0,p.Z)(t.compressedNegativeAltitudeThreshold,e.negativeAltitudeThreshold)}(0,f.Z)(i.databaseVersion)&&(e._quadPacketVersion=(0,p.Z)(i.databaseVersion.quadtreeVersion,e._quadPacketVersion));const n=e.providers,r=(0,p.Z)(i.providerInfo,[]),o=r.length;for(let e=0;e<o;++e){const t=r[e],i=t.copyrightString;(0,f.Z)(i)&&(n[t.providerId]=new ne.Z(i.value))}})).catch((function(){console.log(`Failed to retrieve ${t.url}. Using defaults.`),e.key=ef}))}tf.prototype.getQuadTreePacket=function(e,t,i){t=(0,p.Z)(t,1);const n=of(this,e=(0,p.Z)(e,""),t,i).fetchArrayBuffer();if(!(0,f.Z)(n))return;const r=this._tileInfo,o=this.key;return n.then((function(t){return nf.scheduleTask({buffer:t,quadKey:e,type:"Metadata",key:o},[t]).then((function(t){let i,n=-1;if(""!==e){n=e.length+1;const o=t[e];i=r[e],i._bits|=o._bits,delete t[e]}const o=Object.keys(t);o.sort((function(e,t){return e.length-t.length}));const s=o.length;for(let e=0;e<s;++e){const s=o[e];if(null!==t[s]){const e=$p.clone(t[s]),o=s.length;if(o===n)e.setParent(i);else if(o>1){const t=r[s.substring(0,s.length-1)];e.setParent(t)}r[s]=e}else r[s]=null}}))}))},tf.prototype.populateSubtree=function(e,t,i,n){return rf(this,tf.tileXYToQuadKey(e,t,i),n)},tf.prototype.getTileInformation=function(e,t,i){const n=tf.tileXYToQuadKey(e,t,i);return this._tileInfo[n]},tf.prototype.getTileInformationFromQuadKey=function(e){return this._tileInfo[e]};const cf=tf;var uf=i(342209),df=i(820214),hf=i(237247),pf=i(402793),ff=i(910811),mf=i(502954),gf=i(178611);function _f(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),Ce.Z.typeOf.object("options.buffer",e.buffer),Ce.Z.typeOf.number("options.negativeAltitudeExponentBias",e.negativeAltitudeExponentBias),Ce.Z.typeOf.number("options.negativeElevationThreshold",e.negativeElevationThreshold),this._buffer=e.buffer,this._credits=e.credits,this._negativeAltitudeExponentBias=e.negativeAltitudeExponentBias,this._negativeElevationThreshold=e.negativeElevationThreshold;const t=(0,p.Z)(e.childTileMask,15);let i=3&t;i|=4&t?8:0,i|=8&t?4:0,this._childTileMask=i,this._createdByUpsampling=(0,p.Z)(e.createdByUpsampling,!1),this._skirtHeight=void 0,this._bufferType=this._buffer.constructor,this._mesh=void 0,this._minimumHeight=void 0,this._maximumHeight=void 0}Object.defineProperties(_f.prototype,{credits:{get:function(){return this._credits}},waterMask:{get:function(){}}});const yf="createVerticesFromGoogleEarthEnterpriseBuffer",Zf=new Qp.Z(yf),vf=new Qp.Z(yf,ff.Z.maximumAsynchronousTasks),bf=new ve.Z,wf=new ve.Z;_f.prototype.createMesh=function(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),Ce.Z.typeOf.object("options.tilingScheme",e.tilingScheme),Ce.Z.typeOf.number("options.x",e.x),Ce.Z.typeOf.number("options.y",e.y),Ce.Z.typeOf.number("options.level",e.level);const t=e.tilingScheme,i=e.x,n=e.y,r=e.level,o=(0,p.Z)(e.exaggeration,1),s=(0,p.Z)(e.exaggerationRelativeHeight,0),a=(0,p.Z)(e.throttle,!0),l=t.ellipsoid;t.tileXYToNativeRectangle(i,n,r,bf),t.tileXYToRectangle(i,n,r,wf);const c=l.cartographicToCartesian(ve.Z.center(wf)),u=40075.16/(1<<r);this._skirtHeight=Math.min(8*u,1e3);const d=(a?vf:Zf).scheduleTask({buffer:this._buffer,nativeRectangle:bf,rectangle:wf,relativeToCenter:c,ellipsoid:l,skirtHeight:this._skirtHeight,exaggeration:o,exaggerationRelativeHeight:s,includeWebMercatorT:!0,negativeAltitudeExponentBias:this._negativeAltitudeExponentBias,negativeElevationThreshold:this._negativeElevationThreshold});if(!(0,f.Z)(d))return;const h=this;return d.then((function(e){return h._mesh=new gf.Z(c,new Float32Array(e.vertices),new Uint16Array(e.indices),e.indexCountWithoutSkirts,e.vertexCountWithoutSkirts,e.minimumHeight,e.maximumHeight,Ul.Z.clone(e.boundingSphere3D),Y.Z.clone(e.occludeePointInScaledSpace),e.numberOfAttributes,hf.Z.clone(e.orientedBoundingBox),mf.Z.clone(e.encoding),e.westIndicesSouthToNorth,e.southIndicesEastToWest,e.eastIndicesNorthToSouth,e.northIndicesWestToEast),h._minimumHeight=e.minimumHeight,h._maximumHeight=e.maximumHeight,h._buffer=void 0,h._mesh}))},_f.prototype.interpolateHeight=function(e,t,i){const n=T.Z.clamp((t-e.west)/e.width,0,1),r=T.Z.clamp((i-e.south)/e.height,0,1);return(0,f.Z)(this._mesh)?function(e,t,i){const n=e._mesh,r=n.vertices,o=n.encoding,s=n.indices;for(let e=0,n=s.length;e<n;e+=3){const n=s[e],a=s[e+1],l=s[e+2],c=o.decodeTextureCoordinates(r,n,Cf),u=o.decodeTextureCoordinates(r,a,Sf),d=o.decodeTextureCoordinates(r,l,Tf),h=df.Z.computeBarycentricCoordinates(t,i,c.x,c.y,u.x,u.y,d.x,d.y,Af);if(h.x>=-1e-15&&h.y>=-1e-15&&h.z>=-1e-15){const e=o.decodeHeight(r,n),t=o.decodeHeight(r,a),i=o.decodeHeight(r,l);return h.x*e+h.y*t+h.z*i}}}(this,n,r):function(e,t,i,n){const r=e._buffer;let o=0,s=0,a=0;i>.5?(t>.5?(o=2,s=.5):o=3,a=.5):t>.5&&(o=1,s=.5);const l=new DataView(r);let c=0;for(let e=0;e<o;++e)c+=l.getUint32(c,!0),c+=Ef;c+=Ef,c+=2*If;const u=T.Z.toRadians(180*l.getFloat64(c,!0));c+=If;const d=T.Z.toRadians(180*l.getFloat64(c,!0));c+=If;const h=n.width/u/2,p=n.height/d/2,f=l.getInt32(c,!0);c+=Mf;const m=3*l.getInt32(c,!0);c+=Mf,c+=Mf;const g=new Array(f),_=new Array(f),y=new Array(f);let Z;for(Z=0;Z<f;++Z)g[Z]=s+l.getUint8(c++)*h,_[Z]=a+l.getUint8(c++)*p,y[Z]=6371010*l.getFloat32(c,!0),c+=kf;const v=new Array(m);for(Z=0;Z<m;++Z)v[Z]=l.getUint16(c,!0),c+=Pf;for(Z=0;Z<m;Z+=3){const e=v[Z],n=v[Z+1],r=v[Z+2],o=g[e],s=g[n],a=g[r],l=_[e],c=_[n],u=_[r],d=df.Z.computeBarycentricCoordinates(t,i,o,l,s,c,a,u,Af);if(d.x>=-1e-15&&d.y>=-1e-15&&d.z>=-1e-15)return d.x*y[e]+d.y*y[n]+d.z*y[r]}}(this,n,r,e)};const xf=new Qp.Z("upsampleQuantizedTerrainMesh",ff.Z.maximumAsynchronousTasks);_f.prototype.upsample=function(e,t,i,n,r,o,s){if(Ce.Z.typeOf.object("tilingScheme",e),Ce.Z.typeOf.number("thisX",t),Ce.Z.typeOf.number("thisY",i),Ce.Z.typeOf.number("thisLevel",n),Ce.Z.typeOf.number("descendantX",r),Ce.Z.typeOf.number("descendantY",o),Ce.Z.typeOf.number("descendantLevel",s),s-n>1)throw new S.Z("Upsampling through more than one level at a time is not currently supported.");const a=this._mesh;if(!(0,f.Z)(this._mesh))return;const l=2*t!==r,c=2*i===o,u=e.ellipsoid,d=e.tileXYToRectangle(r,o,s),h=xf.scheduleTask({vertices:a.vertices,indices:a.indices,indexCountWithoutSkirts:a.indexCountWithoutSkirts,vertexCountWithoutSkirts:a.vertexCountWithoutSkirts,encoding:a.encoding,minimumHeight:this._minimumHeight,maximumHeight:this._maximumHeight,isEastChild:l,isNorthChild:c,childRectangle:d,ellipsoid:u});if(!(0,f.Z)(h))return;const p=this;return h.then((function(e){const t=new Uint16Array(e.vertices),i=uf.Z.createTypedArray(t.length/3,e.indices),n=p._skirtHeight;return new pf.Z({quantizedVertices:t,indices:i,minimumHeight:e.minimumHeight,maximumHeight:e.maximumHeight,boundingSphere:Ul.Z.clone(e.boundingSphere),orientedBoundingBox:hf.Z.clone(e.orientedBoundingBox),horizonOcclusionPoint:Y.Z.clone(e.horizonOcclusionPoint),westIndices:e.westIndices,southIndices:e.southIndices,eastIndices:e.eastIndices,northIndices:e.northIndices,westSkirtHeight:n,southSkirtHeight:n,eastSkirtHeight:n,northSkirtHeight:n,childTileMask:0,createdByUpsampling:!0,credits:p._credits})}))},_f.prototype.isChildAvailable=function(e,t,i,n){Ce.Z.typeOf.number("thisX",e),Ce.Z.typeOf.number("thisY",t),Ce.Z.typeOf.number("childX",i),Ce.Z.typeOf.number("childY",n);let r=2;return i!==2*e&&++r,n!==2*t&&(r-=2),!!(this._childTileMask&1<<r)},_f.prototype.wasCreatedByUpsampling=function(){return this._createdByUpsampling};const Cf=new d.Z,Sf=new d.Z,Tf=new d.Z,Af=new Y.Z,Pf=Uint16Array.BYTES_PER_ELEMENT,Ef=Uint32Array.BYTES_PER_ELEMENT,Mf=Int32Array.BYTES_PER_ELEMENT,kf=Float32Array.BYTES_PER_ELEMENT,If=Float64Array.BYTES_PER_ELEMENT,Of=_f,Bf=new fe.Z;function Rf(){this._terrainCache={},this._lastTidy=fe.Z.now()}function Ff(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._tilingScheme=new ih.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new ve.Z(-T.Z.PI,-T.Z.PI,T.Z.PI,T.Z.PI),ellipsoid:e.ellipsoid});let t=e.credit;if("string"==typeof t&&(t=new ne.Z(t)),this._credit=t,this._levelZeroMaximumGeometricError=40075.16,this._terrainCache=new Rf,this._terrainPromises={},this._terrainRequests={},this._errorEvent=new m.Z,this._ready=!1,(0,f.Z)(e.url)){(0,Rl.Z)("GoogleEarthEnterpriseTerrainProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseTerrainProvider.fromMetadata instead.");const t=we.Z.createIfNeeded(e.url),i=this;let n;this._readyPromise=cf.fromUrl(t).then((e=>{if(!e.terrainPresent){const t=new xe.Z(`The server ${e.url} doesn't have terrain`);return Promise.reject(t)}return uh.Z.reportSuccess(n),i._metadata=e,i._ready=!0,!0})).catch((e=>{throw n=uh.Z.reportError(n,i,i._errorEvent,e.message,void 0,void 0,void 0,e),e}))}else if((0,f.Z)(e.metadata)){(0,Rl.Z)("GoogleEarthEnterpriseTerrainProvider options.metadata","options.metadata was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseTerrainProvider.fromMetadata instead.");const t=e.metadata;this._metadata=t;const i=this;this._readyPromise=Promise.resolve(this._metadata._readyPromise).then((()=>{if(!t.terrainPresent)throw new xe.Z(`The server ${t.url} doesn't have terrain`);i._ready=!0}))}}Rf.prototype.add=function(e,t){this._terrainCache[e]={buffer:t,timestamp:fe.Z.now()}},Rf.prototype.get=function(e){const t=this._terrainCache[e];if((0,f.Z)(t))return delete this._terrainCache[e],t.buffer},Rf.prototype.tidy=function(){if(fe.Z.now(Bf),fe.Z.secondsDifference(Bf,this._lastTidy)>10){const e=this._terrainCache,t=Object.keys(e),i=t.length;for(let n=0;n<i;++n){const i=t[n],r=e[i];fe.Z.secondsDifference(Bf,r.timestamp)>10&&delete e[i]}fe.Z.clone(Bf,this._lastTidy)}},Object.defineProperties(Ff.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tilingScheme:{get:function(){return this._tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseTerrainProvider.ready","GoogleEarthEnterpriseTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._ready}},readyPromise:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseTerrainProvider.readyPromise","GoogleEarthEnterpriseTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){return this._credit}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),Ff.fromMetadata=function(e,t){if(Ce.Z.defined("metadata",e),!e.terrainPresent)throw new xe.Z(`The server ${e.url} doesn't have terrain`);const i=new Ff(t);return i._metadata=e,i._readyPromise=Promise.resolve(!0),i._ready=!0,i};const Df=new Qp.Z("decodeGoogleEarthEnterprisePacket");function Lf(e,t,i){let n=t.getChildBitmask();if(3===t.terrainState){n=0;for(let t=0;t<4;++t){const r=i.getTileInformationFromQuadKey(e+t.toString());(0,f.Z)(r)&&r.hasTerrain()&&(n|=1<<t)}}return n}Ff.prototype.requestTileGeometry=function(e,t,i,n){const r=cf.tileXYToQuadKey(e,t,i),o=this._terrainCache,s=this._metadata,a=s.getTileInformationFromQuadKey(r);if(!(0,f.Z)(a))return Promise.reject(new xe.Z("Terrain tile doesn't exist"));let l=a.terrainState;(0,f.Z)(l)||(l=a.terrainState=0);const c=o.get(r);if((0,f.Z)(c)){const e=s.providers[a.terrainProvider];return Promise.resolve(new Of({buffer:c,childTileMask:Lf(r,a,s),credits:(0,f.Z)(e)?[e]:void 0,negativeAltitudeExponentBias:s.negativeAltitudeExponentBias,negativeElevationThreshold:s.negativeAltitudeThreshold}))}if(o.tidy(),!a.ancestorHasTerrain)return Promise.resolve(new rh.Z({buffer:new Uint8Array(256),width:16,height:16}));if(1===l)return Promise.reject(new xe.Z("Terrain tile doesn't exist"));let u,d=r,h=-1;switch(l){case 2:h=a.terrainVersion;break;case 3:d=d.substring(0,d.length-1),u=s.getTileInformationFromQuadKey(d),h=u.terrainVersion;break;case 0:a.hasTerrain()?h=a.terrainVersion:(d=d.substring(0,d.length-1),u=s.getTileInformationFromQuadKey(d),(0,f.Z)(u)&&u.hasTerrain()&&(h=u.terrainVersion))}if(h<0)return Promise.reject(new xe.Z("Terrain tile doesn't exist"));const p=this._terrainPromises,m=this._terrainRequests;let g,_;if((0,f.Z)(p[d]))g=p[d],_=m[d];else{_=n;const e=function(e,t,i,n){return i=(0,f.Z)(i)&&i>0?i:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1c-0${t}-t.${i.toString()}`,request:n})}(this,d,h,_).fetchArrayBuffer();if(!(0,f.Z)(e))return;g=e.then((function(e){return(0,f.Z)(e)?Df.scheduleTask({buffer:e,type:"Terrain",key:s.key},[e]).then((function(e){const t=s.getTileInformationFromQuadKey(d);t.terrainState=2,o.add(d,e[0]);const i=t.terrainProvider,n=e.length-1;for(let t=0;t<n;++t){const n=d+t.toString(),r=s.getTileInformationFromQuadKey(n);(0,f.Z)(r)&&(o.add(n,e[t+1]),r.terrainState=3,0===r.terrainProvider&&(r.terrainProvider=i))}})):Promise.reject(new xe.Z("Failed to load terrain."))})),p[d]=g,m[d]=_,g=g.finally((function(){delete p[d],delete m[d]}))}return g.then((function(){const e=o.get(r);if((0,f.Z)(e)){const t=s.providers[a.terrainProvider];return new Of({buffer:e,childTileMask:Lf(r,a,s),credits:(0,f.Z)(t)?[t]:void 0,negativeAltitudeExponentBias:s.negativeAltitudeExponentBias,negativeElevationThreshold:s.negativeAltitudeThreshold})}return Promise.reject(new xe.Z("Failed to load terrain."))})).catch((function(e){return _.state===sh.Z.CANCELLED?(n.state=_.state,Promise.reject(e)):(a.terrainState=1,Promise.reject(e))}))},Ff.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)},Ff.prototype.getTileDataAvailable=function(e,t,i){const n=this._metadata;let r=cf.tileXYToQuadKey(e,t,i);const o=n.getTileInformation(e,t,i);if(null===o)return!1;if((0,f.Z)(o)){if(!o.ancestorHasTerrain)return!0;const e=o.terrainState;if(1===e)return!1;if(!((0,f.Z)(e)&&0!==e||(o.terrainState=0,o.hasTerrain()))){r=r.substring(0,r.length-1);const e=n.getTileInformationFromQuadKey(r);if(!(0,f.Z)(e)||!e.hasTerrain())return!1}return!0}if(n.isValid(r)){const r=new oh.Z({throttle:!1,throttleByServer:!0,type:ah.Z.TERRAIN});n.populateSubtree(e,t,i,r)}return!1},Ff.prototype.loadTileDataAvailability=function(e,t,i){};const Vf=Ff;let Nf;const Uf="AIzaSyBqCv5lozjjhtIQ_pZuj2obyAL9bTJdY28",Gf={};Gf.defaultApiKey=Uf,Gf.mapTilesApiEndpoint=new we.Z({url:"https://tile.googleapis.com/v1/"}),Gf.getDefaultApiKeyCredit=function(e){if(e===Uf){if(!(0,f.Z)(Nf)){const e='<b>             This application is using CesiumJS\'s default Google Maps API key. Please assign <i>Cesium.GoogleMaps.defaultApiKey</i>             with <a href="https://developers.google.com/maps/documentation/embed/get-api-key">your API key for the Google Maps Platform</a>.</b>';Nf=new ne.Z(e,!0),Nf._isDefaultToken=!0}return Nf}};const zf=Gf;var Kf=i(17486),qf=i(331097),Hf=i(946843),Wf=i(800202),jf=i(99377),Jf=i(71272),Xf=i(459269),$f=i(266993),Yf=i(337389),Qf=i(636477);const em={type:void 0};em.getRequiredDataPoints=S.Z.throwInstantiationError,em.interpolateOrderZero=S.Z.throwInstantiationError,em.interpolate=S.Z.throwInstantiationError;const tm=em;var im=i(515604),nm=i(101496),rm=i(998537),om=i(774852),sm=i(865262),am=i(823024),lm=i(980382),cm=i(349430),um=i(568023),dm=i(844061),hm=i(27410),pm=i(189381);function fm(){S.Z.throwInstantiationError()}Object.defineProperties(fm.prototype,{ellipsoid:{get:S.Z.throwInstantiationError}}),fm.prototype.project=S.Z.throwInstantiationError,fm.prototype.unproject=S.Z.throwInstantiationError;const mm=fm;var gm=i(571945);function _m(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).weights,i=e.times;if(Ce.Z.defined("weights",t),Ce.Z.defined("times",i),Ce.Z.typeOf.number.greaterThanOrEquals("weights.length",t.length,3),t.length%i.length!=0)throw new S.Z("times.length must be a factor of weights.length.");this._times=i,this._weights=t,this._count=t.length/i.length,this._lastTimeIndex=0}Object.defineProperties(_m.prototype,{times:{get:function(){return this._times}},weights:{get:function(){return this._weights}}}),_m.prototype.findTimeInterval=kh.Z.prototype.findTimeInterval,_m.prototype.wrapTime=kh.Z.prototype.wrapTime,_m.prototype.clampTime=kh.Z.prototype.clampTime,_m.prototype.evaluate=function(e,t){const i=this.weights,n=this.times,r=this._lastTimeIndex=this.findTimeInterval(e,this._lastTimeIndex),o=(e-n[r])/(n[r+1]-n[r]);(0,f.Z)(t)||(t=new Array(this._count));for(let e=0;e<this._count;e++){const n=r*this._count+e;t[e]=i[n]*(1-o)+i[n+this._count]*o}return t};const ym=_m;var Zm=i(683278),vm=i(734726),bm=i(630114);function wm(e,t,i){Ce.Z.defined("url",e),Ce.Z.defined("apiKey",t),(0,f.Z)(i)&&Ce.Z.typeOf.object("params",i),(e=we.Z.createIfNeeded(e)).appendForwardSlash(),e.setQueryParameters({key:t}),this._url=e,this._params=(0,p.Z)(i,{}),this._credit=new ne.Z('Geodata copyright <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',!1)}Object.defineProperties(wm.prototype,{url:{get:function(){return this._url}},params:{get:function(){return this._params}},credit:{get:function(){return this._credit}}}),wm.prototype.geocode=async function(e){return Ce.Z.typeOf.string("query",e),this._url.getDerivedResource({url:"json",queryParameters:(0,Gl.Z)(this._params,{q:e})}).fetchJson().then((function(e){return e.results.map((function(e){let t;const i=e.bounds;if((0,f.Z)(i))t=ve.Z.fromDegrees(i.southwest.lng,i.southwest.lat,i.northeast.lng,i.northeast.lat);else{const i=e.geometry.lat,n=e.geometry.lng;t=Y.Z.fromDegrees(i,n)}return{displayName:e.formatted,destination:t}}))}))};const xm=wm;var Cm=i(223689),Sm=i(299594);const Tm={packedLength:void 0,pack:S.Z.throwInstantiationError,unpack:S.Z.throwInstantiationError},Am={packedInterpolationLength:void 0,convertPackedArrayForInterpolation:S.Z.throwInstantiationError,unpackInterpolationResult:S.Z.throwInstantiationError};var Pm=i(347599),Em=i(134282),Mm=i(296184),km=i(430886),Im=i(341633),Om=i(610161),Bm=i(95359),Rm=i(670594),Fm=i(161707),Dm=i(628254),Lm=i(798118),Vm=i(935173),Nm=i(151793),Um=i(169114),Gm=i(99631),zm=i(70618),Km=i(804868);function qm(){S.Z.throwInstantiationError()}qm.prototype.getURL=S.Z.throwInstantiationError;const Hm=qm;var Wm=i(544136),jm=i(998608),Jm=i(598220),Xm=i(125841),$m=i(638601),Ym=i(466294),Qm=i(749372),eg=i(619958),tg=i(75918),ig=i(709550),ng=i(596898),rg=i(686592),og=i(809069),sg=i(271533),ag=i(489381),lg=i(617703);function cg(e,t,i,n,r,o,s){const a=Nm.Z.numberOfPoints(e,t,r);let l;const c=i.red,u=i.green,d=i.blue,p=i.alpha,f=n.red,m=n.green,g=n.blue,_=n.alpha;if(h.Z.equals(i,n)){for(l=0;l<a;l++)o[s++]=h.Z.floatToByte(c),o[s++]=h.Z.floatToByte(u),o[s++]=h.Z.floatToByte(d),o[s++]=h.Z.floatToByte(p);return s}const y=(f-c)/a,Z=(m-u)/a,v=(g-d)/a,b=(_-p)/a;let w=s;for(l=0;l<a;l++)o[w++]=h.Z.floatToByte(c+l*y),o[w++]=h.Z.floatToByte(u+l*Z),o[w++]=h.Z.floatToByte(d+l*v),o[w++]=h.Z.floatToByte(p+l*b);return w}function ug(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).positions,i=e.colors,n=(0,p.Z)(e.colorsPerVertex,!1);if(!(0,f.Z)(t)||t.length<2)throw new S.Z("At least two positions are required.");if((0,f.Z)(i)&&(n&&i.length<t.length||!n&&i.length<t.length-1))throw new S.Z("colors has an invalid length.");this._positions=t,this._colors=i,this._colorsPerVertex=n,this._arcType=(0,p.Z)(e.arcType,X.Z.GEODESIC),this._granularity=(0,p.Z)(e.granularity,T.Z.RADIANS_PER_DEGREE),this._ellipsoid=(0,p.Z)(e.ellipsoid,oe.Z.WGS84),this._workerName="createSimplePolylineGeometry";let r=1+t.length*Y.Z.packedLength;r+=(0,f.Z)(i)?1+i.length*h.Z.packedLength:1,this.packedLength=r+oe.Z.packedLength+3}ug.pack=function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("value is required");if(!(0,f.Z)(t))throw new S.Z("array is required");let n;i=(0,p.Z)(i,0);const r=e._positions;let o=r.length;for(t[i++]=o,n=0;n<o;++n,i+=Y.Z.packedLength)Y.Z.pack(r[n],t,i);const s=e._colors;for(o=(0,f.Z)(s)?s.length:0,t[i++]=o,n=0;n<o;++n,i+=h.Z.packedLength)h.Z.pack(s[n],t,i);return oe.Z.pack(e._ellipsoid,t,i),i+=oe.Z.packedLength,t[i++]=e._colorsPerVertex?1:0,t[i++]=e._arcType,t[i]=e._granularity,t},ug.unpack=function(e,t,i){if(!(0,f.Z)(e))throw new S.Z("array is required");let n;t=(0,p.Z)(t,0);let r=e[t++];const o=new Array(r);for(n=0;n<r;++n,t+=Y.Z.packedLength)o[n]=Y.Z.unpack(e,t);r=e[t++];const s=r>0?new Array(r):void 0;for(n=0;n<r;++n,t+=h.Z.packedLength)s[n]=h.Z.unpack(e,t);const a=oe.Z.unpack(e,t);t+=oe.Z.packedLength;const l=1===e[t++],c=e[t++],u=e[t];return(0,f.Z)(i)?(i._positions=o,i._colors=s,i._ellipsoid=a,i._colorsPerVertex=l,i._arcType=c,i._granularity=u,i):new ug({positions:o,colors:s,ellipsoid:a,colorsPerVertex:l,arcType:c,granularity:u})};const dg=new Array(2),hg=new Array(2),pg={positions:dg,height:hg,ellipsoid:void 0,minDistance:void 0,granularity:void 0};ug.createGeometry=function(e){const t=e._positions,i=e._colors,n=e._colorsPerVertex,r=e._arcType,o=e._granularity,s=e._ellipsoid,a=T.Z.chordLength(o,s.maximumRadius),l=(0,f.Z)(i)&&!n;let c;const u=t.length;let d,p,m,g,_=0;if(r===X.Z.GEODESIC||r===X.Z.RHUMB){let e,n,p;r===X.Z.GEODESIC?(e=T.Z.chordLength(o,s.maximumRadius),n=Nm.Z.numberOfPoints,p=Nm.Z.generateArc):(e=o,n=Nm.Z.numberOfPointsRhumbLine,p=Nm.Z.generateRhumbArc);const y=Nm.Z.extractHeights(t,s),Z=pg;if(r===X.Z.GEODESIC?Z.minDistance=a:Z.granularity=o,Z.ellipsoid=s,l){let r=0;for(c=0;c<u-1;c++)r+=n(t[c],t[c+1],e)+1;d=new Float64Array(3*r),m=new Uint8Array(4*r),Z.positions=dg,Z.height=hg;let o=0;for(c=0;c<u-1;++c){dg[0]=t[c],dg[1]=t[c+1],hg[0]=y[c],hg[1]=y[c+1];const e=p(Z);if((0,f.Z)(i)){const t=e.length/3;g=i[c];for(let e=0;e<t;++e)m[o++]=h.Z.floatToByte(g.red),m[o++]=h.Z.floatToByte(g.green),m[o++]=h.Z.floatToByte(g.blue),m[o++]=h.Z.floatToByte(g.alpha)}d.set(e,_),_+=e.length}}else if(Z.positions=t,Z.height=y,d=new Float64Array(p(Z)),(0,f.Z)(i)){for(m=new Uint8Array(d.length/3*4),c=0;c<u-1;++c)_=cg(t[c],t[c+1],i[c],i[c+1],a,m,_);const e=i[u-1];m[_++]=h.Z.floatToByte(e.red),m[_++]=h.Z.floatToByte(e.green),m[_++]=h.Z.floatToByte(e.blue),m[_++]=h.Z.floatToByte(e.alpha)}}else{p=l?2*u-2:u,d=new Float64Array(3*p),m=(0,f.Z)(i)?new Uint8Array(4*p):void 0;let e=0,n=0;for(c=0;c<u;++c){const r=t[c];if(l&&c>0&&(Y.Z.pack(r,d,e),e+=3,g=i[c-1],m[n++]=h.Z.floatToByte(g.red),m[n++]=h.Z.floatToByte(g.green),m[n++]=h.Z.floatToByte(g.blue),m[n++]=h.Z.floatToByte(g.alpha)),l&&c===u-1)break;Y.Z.pack(r,d,e),e+=3,(0,f.Z)(i)&&(g=i[c],m[n++]=h.Z.floatToByte(g.red),m[n++]=h.Z.floatToByte(g.green),m[n++]=h.Z.floatToByte(g.blue),m[n++]=h.Z.floatToByte(g.alpha))}}const y=new Lp.Z;y.position=new Dp.Z({componentDatatype:Yh.Z.DOUBLE,componentsPerAttribute:3,values:d}),(0,f.Z)(i)&&(y.color=new Dp.Z({componentDatatype:Yh.Z.UNSIGNED_BYTE,componentsPerAttribute:4,values:m,normalize:!0})),p=d.length/3;const Z=2*(p-1),v=uf.Z.createTypedArray(p,Z);let b=0;for(c=0;c<p-1;++c)v[b++]=c,v[b++]=c+1;return new Fp.Z({attributes:y,indices:v,primitiveType:Km.Z.LINES,boundingSphere:Ul.Z.fromPoints(t)})};const fg=ug;function mg(e){const t=(0,p.Z)(e.radius,1),i={radii:new Y.Z(t,t,t),stackPartitions:e.stackPartitions,slicePartitions:e.slicePartitions,vertexFormat:e.vertexFormat};this._ellipsoidGeometry=new wp.Z(i),this._workerName="createSphereGeometry"}mg.packedLength=wp.Z.packedLength,mg.pack=function(e,t,i){return Ce.Z.typeOf.object("value",e),wp.Z.pack(e._ellipsoidGeometry,t,i)};const gg=new wp.Z,_g={radius:void 0,radii:new Y.Z,vertexFormat:new Uh.Z,stackPartitions:void 0,slicePartitions:void 0};mg.unpack=function(e,t,i){const n=wp.Z.unpack(e,t,gg);return _g.vertexFormat=Uh.Z.clone(n._vertexFormat,_g.vertexFormat),_g.stackPartitions=n._stackPartitions,_g.slicePartitions=n._slicePartitions,(0,f.Z)(i)?(Y.Z.clone(n._radii,_g.radii),i._ellipsoidGeometry=new wp.Z(_g),i):(_g.radius=n._radii.x,new mg(_g))},mg.createGeometry=function(e){return wp.Z.createGeometry(e._ellipsoidGeometry)};const yg=mg;var Zg=i(252054),vg=i(835511),bg=i(497286),wg=i(155772),xg=i(678308);function Cg(e){throw new S.Z("This type should not be instantiated directly.  Instead, use WebMercatorTilingScheme or GeographicTilingScheme.")}Object.defineProperties(Cg.prototype,{ellipsoid:{get:S.Z.throwInstantiationError},rectangle:{get:S.Z.throwInstantiationError},projection:{get:S.Z.throwInstantiationError}}),Cg.prototype.getNumberOfXTilesAtLevel=S.Z.throwInstantiationError,Cg.prototype.getNumberOfYTilesAtLevel=S.Z.throwInstantiationError,Cg.prototype.rectangleToNativeRectangle=S.Z.throwInstantiationError,Cg.prototype.tileXYToNativeRectangle=S.Z.throwInstantiationError,Cg.prototype.tileXYToRectangle=S.Z.throwInstantiationError,Cg.prototype.positionToTileXY=S.Z.throwInstantiationError;const Sg=Cg;var Tg=i(104407),Ag=i(318569),Pg=i(925799),Eg=i(731880),Mg=i(211669),kg=i(830472),Ig=i(483851);function Og(e,t){this.rectangle=e,this.maxLevel=t}function Bg(e){this.ellipsoid=(0,p.Z)(e.ellipsoid,oe.Z.WGS84),this.tilingScheme=void 0,this.heightmapWidth=void 0,this.heightmapHeight=void 0,this.levelZeroMaximumGeometricError=void 0,this.rectangles=[]}async function Rg(e,t,i){try{!function(e,t){const i=t.getElementsByTagName("SRS")[0].textContent;if("EPSG:4326"!==i)throw new xe.Z(`SRS ${i} is not supported`);e.tilingScheme=new ih.Z({ellipsoid:e.ellipsoid});const n=t.getElementsByTagName("TileFormat")[0];e.heightmapWidth=parseInt(n.getAttribute("width"),10),e.heightmapHeight=parseInt(n.getAttribute("height"),10),e.levelZeroMaximumGeometricError=lh.Z.getEstimatedLevelZeroGeometricErrorForAHeightmap(e.ellipsoid,Math.min(e.heightmapWidth,e.heightmapHeight),e.tilingScheme.getNumberOfXTilesAtLevel(0));const r=t.getElementsByTagName("DataExtent");for(let t=0;t<r.length;++t){const i=r[t],n=T.Z.toRadians(parseFloat(i.getAttribute("minx"))),o=T.Z.toRadians(parseFloat(i.getAttribute("miny"))),s=T.Z.toRadians(parseFloat(i.getAttribute("maxx"))),a=T.Z.toRadians(parseFloat(i.getAttribute("maxy"))),l=parseInt(i.getAttribute("maxlevel"),10);e.rectangles.push(new Og(new ve.Z(n,o,s,a),l))}}(e,await t.fetchXML())}catch(e){!function(e,t,i){let n=`An error occurred while accessing ${e.url}`;throw(0,f.Z)(t)&&(0,f.Z)(t.message)&&(n=`${n}: ${t.message}`),uh.Z.reportError(void 0,i,(0,f.Z)(i)?i._errorEvent:void 0,n),new xe.Z(n)}(t,e,i)}}function Fg(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._errorEvent=new m.Z,this._ready=!1,this._terrainDataStructure={heightScale:.001,heightOffset:-1e3,elementsPerHeight:3,stride:4,elementMultiplier:256,isBigEndian:!0,lowestEncodedHeight:0,highestEncodedHeight:16777215};let t=e.credit;if("string"==typeof t&&(t=new ne.Z(t)),this._credit=t,this._tilingScheme=void 0,this._rectangles=[],(0,f.Z)(e.url)){(0,Rl.Z)("VRTheWorldTerrainProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  VRTheWorldTerrainProvider.fromUrl instead.");const t=this,i=new Bg(e),n=we.Z.createIfNeeded(e.url);this._resource=n,this._readyPromise=Rg(i,n,t).then((()=>(i.build(t),!0)))}}Bg.prototype.build=function(e){e._tilingScheme=this.tilingScheme,e._heightmapWidth=this.heightmapWidth,e._heightmapHeight=this.heightmapHeight,e._levelZeroMaximumGeometricError=this.levelZeroMaximumGeometricError,e._rectangles=this.rectangles,e._ready=!0},Object.defineProperties(Fg.prototype,{errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){return this._credit}},tilingScheme:{get:function(){return this._tilingScheme}},ready:{get:function(){return(0,Rl.Z)("VRTheWorldTerrainProvider.ready","VRTheWorldTerrainProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use VRTheWorldTerrainProvider.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,Rl.Z)("VRTheWorldTerrainProvider.readyPromise","VRTheWorldTerrainProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use VRTheWorldTerrainProvider.fromUrl instead."),this._readyPromise}},hasWaterMask:{get:function(){return!1}},hasVertexNormals:{get:function(){return!1}},availability:{get:function(){}}}),Fg.fromUrl=async function(e,t){Ce.Z.defined("url",e);const i=new Bg(t=(0,p.Z)(t,p.Z.EMPTY_OBJECT)),n=we.Z.createIfNeeded(e);await Rg(i,n);const r=new Fg(t);return i.build(r),r._resource=n,r},Fg.prototype.requestTileGeometry=function(e,t,i,n){const r=this._tilingScheme.getNumberOfYTilesAtLevel(i),o=this._resource.getDerivedResource({url:`${i}/${e}/${r-t-1}.tif`,queryParameters:{cesium:!0},request:n}).fetchImage({preferImageBitmap:!0});if(!(0,f.Z)(o))return;const s=this;return Promise.resolve(o).then((function(n){return new rh.Z({buffer:(0,Ig.Z)(n),width:s._heightmapWidth,height:s._heightmapHeight,childTileMask:Lg(s,e,t,i),structure:s._terrainDataStructure})}))},Fg.prototype.getLevelMaximumGeometricError=function(e){return this._levelZeroMaximumGeometricError/(1<<e)};const Dg=new ve.Z;function Lg(e,t,i,n){const r=e._tilingScheme,o=e._rectangles,s=r.tileXYToRectangle(t,i,n);let a=0;for(let e=0;e<o.length&&15!==a;++e){const l=o[e];if(l.maxLevel<=n)continue;const c=l.rectangle,u=ve.Z.intersection(c,s,Dg);(0,f.Z)(u)&&(Vg(r,c,2*t,2*i,n+1)&&(a|=4),Vg(r,c,2*t+1,2*i,n+1)&&(a|=8),Vg(r,c,2*t,2*i+1,n+1)&&(a|=1),Vg(r,c,2*t+1,2*i+1,n+1)&&(a|=2))}return a}function Vg(e,t,i,n,r){const o=e.tileXYToRectangle(i,n,r);return(0,f.Z)(ve.Z.intersection(o,t,Dg))}Fg.prototype.getTileDataAvailable=function(e,t,i){},Fg.prototype.loadTileDataAvailability=function(e,t,i){};const Ng=Fg;var Ug=i(722313);function Gg(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._clock=void 0,this._element=void 0,this._clockSubscription=void 0,this._seekFunction=void 0,this._lastPlaybackRate=void 0,this.clock=e.clock,this.element=e.element,this.epoch=(0,p.Z)(e.epoch,pe.Z.MINIMUM_VALUE),this.tolerance=(0,p.Z)(e.tolerance,1),this._seeking=!1,this._seekFunction=void 0,this._firstTickAfterSeek=!1}Object.defineProperties(Gg.prototype,{clock:{get:function(){return this._clock},set:function(e){const t=this._clock;t!==e&&((0,f.Z)(t)&&(this._clockSubscription(),this._clockSubscription=void 0),(0,f.Z)(e)&&(this._clockSubscription=e.onTick.addEventListener(Gg.prototype._onTick,this)),this._clock=e)}},element:{get:function(){return this._element},set:function(e){const t=this._element;var i;t!==e&&((0,f.Z)(t)&&t.removeEventListener("seeked",this._seekFunction,!1),(0,f.Z)(e)&&(this._seeking=!1,this._seekFunction=(i=this,function(){i._seeking=!1,i._firstTickAfterSeek=!0}),e.addEventListener("seeked",this._seekFunction,!1)),this._element=e,this._seeking=!1,this._firstTickAfterSeek=!1)}}}),Gg.prototype.destroy=function(){return this.element=void 0,this.clock=void 0,(0,Ug.Z)(this)},Gg.prototype.isDestroyed=function(){return!1},Gg.prototype._trySetPlaybackRate=function(e){if(this._lastPlaybackRate===e.multiplier)return;const t=this._element;try{t.playbackRate=e.multiplier}catch(e){t.playbackRate=0}this._lastPlaybackRate=e.multiplier},Gg.prototype._onTick=function(e){const t=this._element;if(!(0,f.Z)(t)||t.readyState<2)return;const i=t.paused,n=e.shouldAnimate;if(n===i&&(n?t.play():t.pause()),this._seeking||this._firstTickAfterSeek)return void(this._firstTickAfterSeek=!1);this._trySetPlaybackRate(e);const r=e.currentTime,o=(0,p.Z)(this.epoch,pe.Z.MINIMUM_VALUE);let s=fe.Z.secondsDifference(r,o);const a=t.duration;let l;const c=t.currentTime;t.loop?(s%=a,s<0&&(s=a-s),l=s):l=s>a?a:s<0?0:s;const u=n?(0,p.Z)(this.tolerance,1):.001;Math.abs(l-c)>u&&(this._seeking=!0,t.currentTime=l)};const zg=Gg;var Kg=i(140874);const qg=Object.freeze({VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033});var Hg=i(412058),Wg=i(897664),jg=i(111567),Jg=i(248894),Xg=i(709855),$g=i(126729),Yg=i(103287),Qg=i(264659),e_=i(334389),t_=i(140291),i_=i(486598);const n_=function(e){(0,Rl.Z)("createWorldTerrain","createWorldTerrain was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use createWorldTerrainAsync instead."),e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=new Vh.Z({requestVertexNormals:(0,p.Z)(e.requestVertexNormals,!1),requestWaterMask:(0,p.Z)(e.requestWaterMask,!1)});return t._readyPromise=Vh.Z._initializeReadyPromise({url:lm.Z.fromAssetId(1),requestVertexNormals:(0,p.Z)(e.requestVertexNormals,!1),requestWaterMask:(0,p.Z)(e.requestWaterMask,!1)},t),t};var r_=i(877290);function o_(e,t){if(o_.passThroughDataForTesting)return t;Ce.Z.typeOf.object("key",e),Ce.Z.typeOf.object("data",t);const i=e.byteLength;if(0===i||i%4!=0)throw new xe.Z("The length of key must be greater than 0 and a multiple of 4.");const n=new DataView(t),r=n.getUint32(0,!0);if(1953029805===r||2917034100===r)return t;const o=new DataView(e);let s=0;const a=t.byteLength,l=a-a%8,c=i;let u,d=8;for(;s<l;)for(d=(d+8)%24,u=d;s<l&&u<c;)n.setUint32(s,n.getUint32(s,!0)^o.getUint32(u,!0),!0),n.setUint32(s+4,n.getUint32(s+4,!0)^o.getUint32(u+4,!0),!0),s+=8,u+=24;if(s<a)for(u>=c&&(d=(d+8)%24,u=d);s<a;)n.setUint8(s,n.getUint8(s)^o.getUint8(u)),s++,u++}o_.passThroughDataForTesting=!1;const s_=o_;var a_=i(796712),l_=i(765453),c_=i(115272),u_=i(70554),d_=i(111441),h_=i(911698),p_=i(252376),f_=i(932799),m_=i(371034),g_=i(44908),__=i(51891),y_=i(614031),Z_=i(143073),v_=i(684910),b_=i(849391),w_=i(64181);const x_=new Y.Z,C_=function(e,t,i,n){const r=(0,t_.Z)(e,t,i,n,x_);return!!(0,f.Z)(r)&&r.x>0&&r.y>0&&r.z>0};var S_=i(804376),T_=i(503939),A_=i(888340),P_=i(976768),E_=i(81045);const M_=function(e){switch(e){case Jg.Z.FLOAT:return"float";case Jg.Z.FLOAT_VEC2:return"vec2";case Jg.Z.FLOAT_VEC3:return"vec3";case Jg.Z.FLOAT_VEC4:return"vec4";case Jg.Z.FLOAT_MAT2:return"mat2";case Jg.Z.FLOAT_MAT3:return"mat3";case Jg.Z.FLOAT_MAT4:return"mat4";case Jg.Z.SAMPLER_2D:return"sampler2D";case Jg.Z.BOOL:return"bool"}},k_=function(e,t,i){if("function"!=typeof t)throw new S.Z("oldFunction is required to be a function.");if("function"!=typeof i)throw new S.Z("oldFunction is required to be a function.");return function(){i.apply(e,arguments),t.apply(e,arguments)}};var I_=i(148483),O_=i(64941),B_=i(644114),R_=i(214366),F_=i(439051),D_=i(672495);const L_="uniform sampler2D u_noiseTexture;\nuniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nin vec2 v_offset;\nin vec3 v_maximumSize;\nin vec4 v_color;\nin float v_slice;\nin float v_brightness;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nvec2 voxelToUV(vec3 voxelIndex) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float noiseTextureRows = u_noiseTextureDimensions.y;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n\n    float textureSliceWidthSquared = textureSliceWidth * textureSliceWidth;\n    vec2 inverseNoiseTextureDimensions = vec2(noiseTextureRows / textureSliceWidthSquared,\n                                            inverseNoiseTextureRows / textureSliceWidth);\n    vec3 wrappedIndex = wrapVec(voxelIndex, textureSliceWidth);\n    float column = mod(wrappedIndex.z, textureSliceWidth * inverseNoiseTextureRows);\n    float row = floor(wrappedIndex.z / textureSliceWidth * noiseTextureRows);\n\n    float xPixelCoord = wrappedIndex.x + column * textureSliceWidth;\n    float yPixelCoord = wrappedIndex.y + row * textureSliceWidth;\n    return vec2(xPixelCoord, yPixelCoord) * inverseNoiseTextureDimensions;\n}\n\n// Interpolate a voxel with its neighbor (along the positive X-axis)\nvec4 lerpSamplesX(vec3 voxelIndex, float x) {\n    vec2 uv0 = voxelToUV(voxelIndex);\n    vec2 uv1 = voxelToUV(voxelIndex + vec3(1.0, 0.0, 0.0));\n    vec4 sample0 = texture(u_noiseTexture, uv0);\n    vec4 sample1 = texture(u_noiseTexture, uv1);\n    return mix(sample0, sample1, x);\n}\n\nvec4 sampleNoiseTexture(vec3 position) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    vec3 recenteredPos = position + vec3(textureSliceWidth / 2.0);\n    vec3 lerpValue = fract(recenteredPos);\n    vec3 voxelIndex = floor(recenteredPos);\n\n    vec4 xLerp00 = lerpSamplesX(voxelIndex, lerpValue.x);\n    vec4 xLerp01 = lerpSamplesX(voxelIndex + vec3(0.0, 0.0, 1.0), lerpValue.x);\n    vec4 xLerp10 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 0.0), lerpValue.x);\n    vec4 xLerp11 = lerpSamplesX(voxelIndex + vec3(0.0, 1.0, 1.0), lerpValue.x);\n\n    vec4 yLerp0 = mix(xLerp00, xLerp10, lerpValue.y);\n    vec4 yLerp1 = mix(xLerp01, xLerp11, lerpValue.y);\n    return mix(yLerp0, yLerp1, lerpValue.z);\n}\n\n// Intersection with a unit sphere with radius 0.5 at center (0, 0, 0).\nbool intersectSphere(vec3 origin, vec3 dir, float slice,\n                     out vec3 point, out vec3 normal) {\n    float A = dot(dir, dir);\n    float B = dot(origin, dir);\n    float C = dot(origin, origin) - 0.25;\n    float discriminant = (B * B) - (A * C);\n    if(discriminant < 0.0) {\n        return false;\n    }\n    float root = sqrt(discriminant);\n    float t = (-B - root) / A;\n    if(t < 0.0) {\n        t = (-B + root) / A;\n    }\n    point = origin + t * dir;\n\n    if(slice >= 0.0) {\n        point.z = (slice / 2.0) - 0.5;\n        if(length(point) > 0.5) {\n            return false;\n        }\n    }\n\n    normal = normalize(point);\n    point -= czm_epsilon2 * normal;\n    return true;\n}\n\n// Transforms the ray origin and direction into unit sphere space,\n// then transforms the result back into the ellipsoid's space.\nbool intersectEllipsoid(vec3 origin, vec3 dir, vec3 center, vec3 scale, float slice,\n                        out vec3 point, out vec3 normal) {\n    if(scale.x <= 0.01 || scale.y < 0.01 || scale.z < 0.01) {\n        return false;\n    }\n\n    vec3 o = (origin - center) / scale;\n    vec3 d = dir / scale;\n    vec3 p, n;\n    bool intersected = intersectSphere(o, d, slice, p, n);\n    if(intersected) {\n        point = (p * scale) + center;\n        normal = n;\n    }\n    return intersected;\n}\n\n// Assume that if phase shift is being called for octave i,\n// the frequency is of i - 1. This saves us from doing extra\n// division / multiplication operations.\nvec2 phaseShift2D(vec2 p, vec2 freq) {\n    return (czm_pi / 2.0) * sin(freq.yx * p.yx);\n}\n\nvec2 phaseShift3D(vec3 p, vec2 freq) {\n    return phaseShift2D(p.xy, freq) + czm_pi * vec2(sin(freq.x * p.z));\n}\n\n// The cloud texture function derived from Gardner's 1985 paper,\n// \"Visual Simulation of Clouds.\"\n// https://www.cs.drexel.edu/~david/Classes/Papers/p297-gardner.pdf\nconst float T0    = 0.6;  // contrast of the texture pattern\nconst float k     = 0.1;  // computed to produce a maximum value of 1\nconst float C0    = 0.8;  // coefficient\nconst float FX0   = 0.6;  // frequency X\nconst float FY0   = 0.6;  // frequency Y\nconst int octaves = 5;\n\nfloat T(vec3 point) {\n    vec2 sum = vec2(0.0);\n    float Ci = C0;\n    vec2 FXY = vec2(FX0, FY0);\n    vec2 PXY = vec2(0.0);\n    for(int i = 1; i <= octaves; i++) {\n        PXY = phaseShift3D(point, FXY);\n        Ci *= 0.707;\n        FXY *= 2.0;\n        vec2 sinTerm = sin(FXY * point.xy + PXY);\n        sum += Ci * sinTerm + vec2(T0);\n    }\n    return k * sum.x * sum.y;\n}\n\nconst float a = 0.5;  // fraction of surface reflection due to ambient or scattered light,\nconst float t = 0.4;  // fraction of texture shading\nconst float s = 0.25; // fraction of specular reflection\n\nfloat I(float Id, float Is, float It) {\n    return (1.0 - a) * ((1.0 - t) * ((1.0 - s) * Id + s * Is) + t * It) + a;\n}\n\nconst vec3 lightDir = normalize(vec3(0.2, -1.0, 0.7));\n\nvec4 drawCloud(vec3 rayOrigin, vec3 rayDir, vec3 cloudCenter, vec3 cloudScale, float cloudSlice,\n               float brightness) {\n    vec3 cloudPoint, cloudNormal;\n    if(!intersectEllipsoid(rayOrigin, rayDir, cloudCenter, cloudScale, cloudSlice,\n                            cloudPoint, cloudNormal)) {\n        return vec4(0.0);\n    }\n\n    float Id = clamp(dot(cloudNormal, -lightDir), 0.0, 1.0);  // diffuse reflection\n    float Is = max(pow(dot(-lightDir, -rayDir), 2.0), 0.0);   // specular reflection\n    float It = T(cloudPoint);                                 // texture function\n    float intensity = I(Id, Is, It);\n    vec3 color = vec3(intensity * clamp(brightness, 0.1, 1.0));\n\n    vec4 noise = sampleNoiseTexture(u_noiseDetail * cloudPoint);\n    float W = noise.x;\n    float W2 = noise.y;\n    float W3 = noise.z;\n\n    // The dot product between the cloud's normal and the ray's direction is greatest\n    // in the center of the ellipsoid's surface. It decreases towards the edge.\n    // Thus, it is used to blur the areas leading to the edges of the ellipsoid,\n    // so that no harsh lines appear.\n\n    // The first (and biggest) layer of worley noise is then subtracted from this.\n    // The final result is scaled up so that the base cloud is not too translucent.\n    float ndDot = clamp(dot(cloudNormal, -rayDir), 0.0, 1.0);\n    float TR = pow(ndDot, 3.0) - W; // translucency\n    TR *= 1.3;\n\n    // Subtracting the second and third layers of worley noise is more complicated.\n    // If these layers of noise were simply subtracted from the current translucency,\n    // the shape derived from the first layer of noise would be completely deleted.\n    // The erosion of this noise should thus be constricted to the edges of the cloud.\n    // However, because the edges of the ellipsoid were already blurred away, mapping\n    // the noise to (1.0 - ndDot) will have no impact on most of the cloud's appearance.\n    // The value of (0.5 - ndDot) provides the best compromise.\n    float minusDot = 0.5 - ndDot;\n\n    // Even with the previous calculation, subtracting the second layer of wnoise\n    // erode too much of the cloud. The addition of it, however, will detailed\n    // volume to the cloud. As long as the noise is only added and not subtracted,\n    // the results are aesthetically pleasing.\n\n    // The minusDot product is mapped in a way that it is larger at the edges of\n    // the ellipsoid, so a subtraction and min operation are used instead of\n    // an addition and max one.\n    TR -= min(minusDot * W2, 0.0);\n\n    // The third level of worley noise is subtracted from the result, with some\n    // modifications. First, a scalar is added to minusDot so that the noise\n    // starts affecting the shape farther away from the center of the ellipsoid's\n    // surface. Then, it is scaled down so its impact is not too intense.\n    TR -= 0.8 * (minusDot + 0.25) * W3;\n\n    // The texture function's shading does not correlate with the shape of the cloud\n    // produced by the layers of noise, so an extra shading scalar is calculated.\n    // The darkest areas of the cloud are assigned to be where the noise erodes\n    // the cloud the most. This is then interpolated based on the translucency\n    // and the diffuse shading term of that point in the cloud.\n    float shading = mix(1.0 - 0.8 * W * W, 1.0, Id * TR);\n\n    // To avoid values that are too dark, this scalar is increased by a small amount\n    // and clamped so it never goes to zero.\n    shading = clamp(shading + 0.2, 0.3, 1.0);\n\n    // Finally, the contrast of the cloud's color is increased.\n    vec3 finalColor = mix(vec3(0.5), shading * color, 1.15);\n    return vec4(finalColor, clamp(TR, 0.0, 1.0)) * v_color;\n}\n\nvoid main() {\n#ifdef DEBUG_BILLBOARDS\n    out_FragColor = vec4(0.0, 0.5, 0.5, 1.0);\n#endif\n    // To avoid calculations with high values,\n    // we raycast from an arbitrarily smaller space.\n    vec2 coordinate = v_maximumSize.xy * v_offset;\n\n    vec3 ellipsoidScale = 0.82 * v_maximumSize;\n    vec3 ellipsoidCenter = vec3(0.0);\n\n    float zOffset = max(ellipsoidScale.z - 10.0, 0.0);\n    vec3 eye = vec3(0, 0, -10.0 - zOffset);\n    vec3 rayDir = normalize(vec3(coordinate, 1.0) - eye);\n    vec3 rayOrigin = eye;\n#ifdef DEBUG_ELLIPSOIDS\n    vec3 point, normal;\n    if(intersectEllipsoid(rayOrigin, rayDir, ellipsoidCenter, ellipsoidScale, v_slice,\n                          point, normal)) {\n        out_FragColor = v_brightness * v_color;\n    }\n#else\n#ifndef DEBUG_BILLBOARDS\n    vec4 cloud = drawCloud(rayOrigin, rayDir,\n                           ellipsoidCenter, ellipsoidScale, v_slice, v_brightness);\n    if(cloud.w < 0.01) {\n        discard;\n    }\n    out_FragColor = cloud;\n#endif\n#endif\n}\n",V_="#ifdef INSTANCED\nin vec2 direction;\n#endif\nin vec4 positionHighAndScaleX;\nin vec4 positionLowAndScaleY;\nin vec4 packedAttribute0;\nin vec4 packedAttribute1;\nin vec4 color;\n\nout vec2 v_offset;\nout vec3 v_maximumSize;\nout vec4 v_color;\nout float v_slice;\nout float v_brightness;\n\nvoid main() {\n    // Unpack attributes.\n    vec3 positionHigh = positionHighAndScaleX.xyz;\n    vec3 positionLow = positionLowAndScaleY.xyz;\n    vec2 scale = vec2(positionHighAndScaleX.w, positionLowAndScaleY.w);\n\n    float show = packedAttribute0.x;\n    float brightness = packedAttribute0.y;\n    vec2 coordinates = packedAttribute0.wz;\n    vec3 maximumSize = packedAttribute1.xyz;\n    float slice = packedAttribute1.w;\n\n#ifdef INSTANCED\n    vec2 dir = direction;\n#else\n    vec2 dir = coordinates;\n#endif\n\n    vec2 offset = dir - vec2(0.5, 0.5);\n    vec2 scaledOffset = scale * offset;\n    vec4 p = czm_translateRelativeToEye(positionHigh, positionLow);\n    vec4 positionEC = czm_modelViewRelativeToEye * p;\n    positionEC.xy += scaledOffset;\n    \n    positionEC.xyz *= show;\n    gl_Position = czm_projection * positionEC;\n\n    v_offset = offset;\n    v_maximumSize = maximumSize;\n    v_color = color;\n    v_slice = slice;\n    v_brightness = brightness;\n}\n",N_="uniform vec3 u_noiseTextureDimensions;\nuniform float u_noiseDetail;\nuniform vec3 u_noiseOffset;\nin vec2 v_position;\n\nfloat wrap(float value, float rangeLength) {\n    if(value < 0.0) {\n        float absValue = abs(value);\n        float modValue = mod(absValue, rangeLength);\n        return mod(rangeLength - modValue, rangeLength);\n    }\n    return mod(value, rangeLength);\n}\n\nvec3 wrapVec(vec3 value, float rangeLength) {\n    return vec3(wrap(value.x, rangeLength),\n                wrap(value.y, rangeLength),\n                wrap(value.z, rangeLength));\n}\n\nvec3 random3(vec3 p) {\n    float dot1 = dot(p, vec3(127.1, 311.7, 932.8));\n    float dot2 = dot(p, vec3(269.5, 183.3, 421.4));\n    return fract(vec3(sin(dot1 - dot2), cos(dot1 * dot2), dot1 * dot2));\n}\n\n// Frequency corresponds to cell size.\n// The higher the frequency, the smaller the cell size.\nvec3 getWorleyCellPoint(vec3 centerCell, vec3 offset, float freq) {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    vec3 cell = centerCell + offset;\n    cell = wrapVec(cell, textureSliceWidth / u_noiseDetail);\n    cell += floor(u_noiseOffset / u_noiseDetail);\n    vec3 p = offset + random3(cell);\n    return p;\n}\n\nfloat worleyNoise(vec3 p, float freq) {\n    vec3 centerCell = floor(p * freq);\n    vec3 pointInCell = fract(p * freq);\n    float shortestDistance = 1000.0;\n\n    for(float z = -1.0; z <= 1.0; z++) {\n        for(float y = -1.0; y <= 1.0; y++) {\n            for(float x = -1.0; x <= 1.0; x++) {\n                vec3 offset = vec3(x, y, z);\n                vec3 point = getWorleyCellPoint(centerCell, offset, freq);\n\n                float distance = length(pointInCell - point);\n                if(distance < shortestDistance) {\n                    shortestDistance = distance;\n                }\n            }\n        }\n    }\n\n    return shortestDistance;\n}\n\nconst float MAX_FBM_ITERATIONS = 10.0;\n\nfloat worleyFBMNoise(vec3 p, float octaves, float scale) {\n    float noise = 0.0;\n    float freq = 1.0;\n    float persistence = 0.625;\n    for(float i = 0.0; i < MAX_FBM_ITERATIONS; i++) {\n        if(i >= octaves) {\n            break;\n        }\n\n        noise += worleyNoise(p * scale, freq * scale) * persistence;\n        persistence *= 0.5;\n        freq *= 2.0;\n    }\n    return noise;\n}\n\nvoid main() {\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n    float x = mod(v_position.x, textureSliceWidth);\n    float y = mod(v_position.y, textureSliceWidth);\n    float sliceRow = floor(v_position.y / textureSliceWidth);\n    float z = floor(v_position.x / textureSliceWidth) + sliceRow * inverseNoiseTextureRows * textureSliceWidth;\n\n    vec3 position = vec3(x, y, z);\n    position /= u_noiseDetail;\n    float worley0 = clamp(worleyFBMNoise(position, 3.0, 1.0), 0.0, 1.0);\n    float worley1 = clamp(worleyFBMNoise(position, 3.0, 2.0), 0.0, 1.0);\n    float worley2 = clamp(worleyFBMNoise(position, 3.0, 3.0), 0.0, 1.0);\n    out_FragColor = vec4(worley0, worley1, worley2, 1.0);\n}\n",U_="uniform vec3 u_noiseTextureDimensions;\nin vec2 position;\n\nout vec2 v_position;\n\nvoid main()\n{\n    gl_Position = vec4(position, 0.1, 1.0);\n\n    float textureSliceWidth = u_noiseTextureDimensions.x;\n    float noiseTextureRows = u_noiseTextureDimensions.y;\n    float inverseNoiseTextureRows = u_noiseTextureDimensions.z;\n    vec2 transformedPos = (position * 0.5) + vec2(0.5);\n    transformedPos *= textureSliceWidth;\n    transformedPos.x *= textureSliceWidth * inverseNoiseTextureRows;\n    transformedPos.y *= noiseTextureRows;\n    v_position = transformedPos;\n}\n";var G_=i(469585),z_=i(766359),K_=i(652870),q_=i(552516),H_=i(771970),W_=i(571690),j_=i(705665),J_=i(643267),X_=i(454854),$_=i(679498),Y_=i(194926),Q_=i(884260),ey=i(314903),ty=i(600894),iy=i(818105),ny=i(614435),ry=i(851295),oy=i(763339),sy=i(644361),ay=i(60965),ly=i(441450),cy=i(389617),uy=i(64801),dy=i(840054),hy=i(275122),py=i(647653),fy=i(112042),my=i(92078),gy=i(917085),_y=i(965087),yy=i(944067),Zy=i(148679),vy=i(902370),by=i(680721),wy=i(409207),xy=i(79768),Cy=i(509762),Sy=i(132052),Ty=i(456060);const Ay="\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n    \n    materialInput.s = v_textureCoordinates.s;\n    materialInput.st = v_textureCoordinates;\n    materialInput.str = vec3(v_textureCoordinates, 0.0);\n    materialInput.normalEC = vec3(0.0, 0.0, -1.0);\n    \n    czm_material material = czm_getMaterial(materialInput);\n\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n}\n";var Py=i(215432),Ey=i(475285),My=i(285185),ky=i(680844),Iy=i(565756),Oy=i(210442),By=i(388402),Ry=i(79816),Fy=i(418371),Dy=i(287043),Ly=i(906981),Vy=i(978730),Ny=i(974914),Uy=i(163882),Gy=i(472568),zy=i(271834),Ky=i(605943),qy=i(25563),Hy=i(667046),Wy=i(175327),jy=i(973591);const Jy=new Y.Z(1,1,1);function Xy(e){e=(0,p.Z)(e,Jy),Ce.Z.defined("dimensions",e),Ce.Z.typeOf.number.greaterThanOrEquals("dimensions.x",e.x,0),Ce.Z.typeOf.number.greaterThanOrEquals("dimensions.y",e.y,0),Ce.Z.typeOf.number.greaterThanOrEquals("dimensions.z",e.z,0),this._dimensions=Y.Z.clone(e)}Object.defineProperties(Xy.prototype,{dimensions:{get:function(){return this._dimensions},set:function(e){Ce.Z.defined("value",e),Ce.Z.typeOf.number.greaterThanOrEquals("value.x",e.x,0),Ce.Z.typeOf.number.greaterThanOrEquals("value.y",e.y,0),Ce.Z.typeOf.number.greaterThanOrEquals("value.z",e.z,0),Y.Z.clone(e,this._dimensions)}}});const $y=new Y.Z;Xy.prototype.emit=function(e){const t=this._dimensions,i=Y.Z.multiplyByScalar(t,.5,$y),n=T.Z.randomBetween(-i.x,i.x),r=T.Z.randomBetween(-i.y,i.y),o=T.Z.randomBetween(-i.z,i.z);e.position=Y.Z.fromElements(n,r,o,e.position),e.velocity=Y.Z.normalize(e.position,e.velocity)};const Yy=Xy;var Qy=i(186120),eZ=i(275062),tZ=i(518931),iZ=i(899546),nZ=i(335517),rZ=i(673644),oZ=i(612634),sZ=i(164507),aZ=i(533424),lZ=i(461448);function cZ(){this.featurePropertiesDirty=!1}Object.defineProperties(cZ.prototype,{featuresLength:{get:function(){S.Z.throwInstantiationError()}},pointsLength:{get:function(){S.Z.throwInstantiationError()}},trianglesLength:{get:function(){S.Z.throwInstantiationError()}},geometryByteLength:{get:function(){S.Z.throwInstantiationError()}},texturesByteLength:{get:function(){S.Z.throwInstantiationError()}},batchTableByteLength:{get:function(){S.Z.throwInstantiationError()}},innerContents:{get:function(){S.Z.throwInstantiationError()}},ready:{get:function(){S.Z.throwInstantiationError()}},readyPromise:{get:function(){S.Z.throwInstantiationError()}},tileset:{get:function(){S.Z.throwInstantiationError()}},tile:{get:function(){S.Z.throwInstantiationError()}},url:{get:function(){S.Z.throwInstantiationError()}},batchTable:{get:function(){S.Z.throwInstantiationError()}},metadata:{get:function(){S.Z.throwInstantiationError()},set:function(e){S.Z.throwInstantiationError()}},group:{get:function(){S.Z.throwInstantiationError()},set:function(e){S.Z.throwInstantiationError()}}}),cZ.prototype.hasProperty=function(e,t){S.Z.throwInstantiationError()},cZ.prototype.getFeature=function(e){S.Z.throwInstantiationError()},cZ.prototype.applyDebugSettings=function(e,t){S.Z.throwInstantiationError()},cZ.prototype.applyStyle=function(e){S.Z.throwInstantiationError()},cZ.prototype.update=function(e,t){S.Z.throwInstantiationError()},cZ.prototype.isDestroyed=function(){S.Z.throwInstantiationError()},cZ.prototype.destroy=function(){S.Z.throwInstantiationError()};const uZ=cZ;var dZ=i(577094),hZ=i(472525),pZ=i(864238),fZ=i(812693),mZ=i(179869),gZ=i(298810),_Z=i(457145),yZ=i(684236),ZZ=i(423842),vZ=i(867328),bZ=i(48066),wZ=i(14069),xZ=i(335327),CZ=i(830904),SZ=i(717341),TZ=i(475203);function AZ(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._maximumSubtreeCount=(0,p.Z)(e.maximumSubtreeCount,0),this._subtreeRequestCounter=0,this._queue=new gp.Z({comparator:AZ.comparator})}function PZ(e,t){this.subtree=e,this.stamp=t}AZ.prototype.addSubtree=function(e){const t=new PZ(e,this._subtreeRequestCounter);this._subtreeRequestCounter++,this._queue.insert(t);const i=e.implicitCoordinates;if(i.level>0){const e=i.getParentSubtreeCoordinates();if(void 0===this.find(e))throw new S.Z("parent node needs to exist")}if(this._maximumSubtreeCount>0)for(;this._queue.length>this._maximumSubtreeCount&&this._queue.getMinimum()!==t;)this._queue.removeMinimum()},AZ.prototype.find=function(e){const t=this._queue,i=t.internalArray,n=t.length;for(let t=0;t<n;t++){const n=i[t],r=n.subtree.implicitCoordinates;if(e.isEqual(r))return n.subtree}},AZ.comparator=function(e,t){const i=e.subtree.implicitCoordinates,n=t.subtree.implicitCoordinates;return i.isAncestor(n)?1:n.isAncestor(i)?-1:e.stamp-t.stamp};const EZ=AZ;var MZ=i(146251),kZ=i(513277),IZ=i(817787),OZ=i(784246),BZ=i(926040),RZ=i(518065),FZ=i(711241),DZ=i(878942);function LZ(e){Ce.Z.typeOf.object("resource",e),this._resource=e,this._metadataTable=void 0}Object.defineProperties(LZ.prototype,{metadataTable:{get:function(){return this._metadataTable}}}),LZ.fromJson=async function(e,t,i,n){if(Ce.Z.typeOf.object("resource",e),(0,f.Z)(t)===(0,f.Z)(i))throw new S.Z("One of json and binary must be defined.");let r;r=(0,f.Z)(t)?{json:t,binary:void 0}:function(e){const t=!0,i=new DataView(e.buffer,e.byteOffset);let n=8;const r=i.getUint32(n,t);n+=8;const o=i.getUint32(n,t);n+=8;const s=(0,h_.Z)(e,n,r);n+=r;return{json:s,binary:e.subarray(n,n+o)}}(i);const o=await function(e,t,i){const n=t.buffers.length,r=new Array(n);for(let o=0;o<n;o++){const n=t.buffers[o];if((0,f.Z)(n.uri)){const t=e.getDerivedResource({url:n.uri});r[o]=t.fetchArrayBuffer().then((function(e){return new Uint8Array(e)}))}else r[o]=Promise.resolve(i)}return Promise.all(r)}(e,r.json,r.binary),s={},a=r.json.bufferViews.length;for(let e=0;e<a;++e){const t=r.json.bufferViews[e],i=t.byteOffset,n=i+t.byteLength,a=o[t.buffer].subarray(i,n);s[e]=a}const l=r.json.voxelTable,c=r.json.propertyTables[l],u=new LZ(e);return u._metadataTable=new DZ.Z({count:c.count,properties:c.properties,class:n.classes[c.class],bufferViews:s}),u};const VZ=LZ;var NZ=i(483077),UZ=i(95478);function GZ(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._ready=!1,this.shapeTransform=void 0,this.globalTransform=void 0,this.shape=void 0,this.minBounds=void 0,this.maxBounds=void 0,this.dimensions=void 0,this.paddingBefore=void 0,this.paddingAfter=void 0,this.names=void 0,this.types=void 0,this.componentTypes=void 0,this.minimumValues=void 0,this.maximumValues=void 0,this.maximumTileCount=void 0,this._implicitTileset=void 0,this._subtreeCache=new EZ;const t=this;let i;(0,f.Z)(e.url)&&((0,Rl.Z)("Cesium3DTilesVoxelProvider options.url","Cesium3DTilesVoxelProvider constructor parameter options.url was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTilesVoxelProvider.fromUrl instead."),this._readyPromise=Promise.resolve(e.url).then((function(e){const n=we.Z.createIfNeeded(e);return n.fetchJson().then((function(e){return i=e,KZ(i),HZ(i,n).load()})).then((function(e){const r=i.root,o=r.content.extensions["3DTILES_content_voxels"],s=o.class,a=(0,SZ.Z)(i,"3DTILES_metadata")?i.extensions["3DTILES_metadata"]:i,l=e.schema,c=new CZ.Z({metadataJson:a,schema:l});WZ(t,c,s);const u=new kZ.Z(n,r,l),{shape:d,minBounds:h,maxBounds:p,shapeTransform:m,globalTransform:g}=qZ(r);let _,y;return t.shape=d,t.minBounds=h,t.maxBounds=p,t.dimensions=Y.Z.unpack(o.dimensions),t.shapeTransform=m,t.globalTransform=g,t.maximumTileCount=zZ(c),(0,f.Z)(o.padding)&&(_=Y.Z.unpack(o.padding.before),y=Y.Z.unpack(o.padding.after)),t.paddingBefore=_,t.paddingAfter=y,t._implicitTileset=u,RZ.Z.unload(e),t._ready=!0,t}))})))}function zZ(e){if((0,f.Z)(e.tileset))return e.tileset.getPropertyBySemantic(IZ.Z.TILESET_TILE_COUNT)}function KZ(e){const t=e.root;if(!(0,f.Z)(t.content))throw new xe.Z("Root must have content");if(!(0,SZ.Z)(t.content,"3DTILES_content_voxels"))throw new xe.Z("Root tile content must have 3DTILES_content_voxels extension");if(!(0,SZ.Z)(t,"3DTILES_implicit_tiling")&&!(0,f.Z)(t.implicitTiling))throw new xe.Z("Root tile must have implicit tiling");if(!(0,f.Z)(e.schema)&&!(0,f.Z)(e.schemaUri)&&!(0,SZ.Z)(e,"3DTILES_metadata"))throw new xe.Z("Tileset must have a metadata schema")}function qZ(e){const t=e.boundingVolume;let i;if(i=(0,f.Z)(e.transform)?Mh.Z.unpack(e.transform):Mh.Z.clone(Mh.Z.IDENTITY),(0,f.Z)(t.box))return function(e,t){const i=hf.Z.unpack(e),n=Mh.Z.fromRotationTranslation(i.halfAxes,i.center);return{shape:UZ.Z.BOX,minBounds:Y.Z.clone(FZ.Z.DefaultMinBounds),maxBounds:Y.Z.clone(FZ.Z.DefaultMaxBounds),shapeTransform:n,globalTransform:t}}(t.box,i);if((0,f.Z)(t.region))return function(e){const t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],s=e[5],a=Mh.Z.fromScale(oe.Z.WGS84.radii),l=t,c=n,u=i,d=r,h=o,p=s,f=new Y.Z(l,u,h),m=new Y.Z(c,d,p);return{shape:UZ.Z.ELLIPSOID,minBounds:f,maxBounds:m,shapeTransform:a,globalTransform:Mh.Z.clone(Mh.Z.IDENTITY)}}(t.region);if((0,SZ.Z)(t,"3DTILES_bounding_volume_cylinder"))return function(e,t){const i=hf.Z.unpack(e),n=Mh.Z.fromRotationTranslation(i.halfAxes,i.center);return{shape:UZ.Z.CYLINDER,minBounds:Y.Z.clone(NZ.Z.DefaultMinBounds),maxBounds:Y.Z.clone(NZ.Z.DefaultMaxBounds),shapeTransform:n,globalTransform:t}}(t.extensions["3DTILES_bounding_volume_cylinder"].cylinder,i);throw new xe.Z("Only box, region and 3DTILES_bounding_volume_cylinder are supported in Cesium3DTilesVoxelProvider")}function HZ(e,t){const{schemaUri:i,schema:n}=e;return(0,f.Z)(i)?RZ.Z.getSchemaLoader({resource:t.getDerivedResource({url:i})}):RZ.Z.getSchemaLoader({schema:n})}function WZ(e,t,i){const{schema:n,statistics:r}=t,o=r?.classes[i],s=n.classes[i].properties,a=Object.entries(s).map((([e,t])=>{const{type:i,componentType:n}=t,r=o?.properties[e].min,s=o?.properties[e].max,a=OZ.Z.getComponentCount(i);return{id:e,type:i,componentType:n,minValue:jZ(r,a),maxValue:jZ(s,a)}}));e.names=a.map((e=>e.id)),e.types=a.map((e=>e.type)),e.componentTypes=a.map((e=>e.componentType));const l=a.map((e=>e.minValue)),c=a.map((e=>e.maxValue)),u=l.some(f.Z);e.minimumValues=u?l:void 0,e.maximumValues=u?c:void 0}function jZ(e,t){if(!(0,f.Z)(e))return;const i=Array.isArray(e)?e:[e];return Array.from({length:t},((e,t)=>i[t]))}Object.defineProperties(GZ.prototype,{readyPromise:{get:function(){return(0,Rl.Z)("Cesium3DTilesVoxelProvider.readyPromise","Cesium3DTilesVoxelProvider.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTilesVoxelProvider.fromUrl instead."),this._readyPromise}},ready:{get:function(){return(0,Rl.Z)("Cesium3DTilesVoxelProvider.ready","Cesium3DTilesVoxelProvider.ready was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use Cesium3DTilesVoxelProvider.fromUrl instead."),this._ready}}}),GZ.fromUrl=async function(e){Ce.Z.defined("url",e);const t=we.Z.createIfNeeded(e),i=await t.fetchJson();KZ(i);const n=HZ(i,t);await n.load();const r=i.root,o=r.content.extensions["3DTILES_content_voxels"],s=o.class,a=(0,SZ.Z)(i,"3DTILES_metadata")?i.extensions["3DTILES_metadata"]:i,l=n.schema,c=new CZ.Z({metadataJson:a,schema:l}),u=new GZ;WZ(u,c,s);const d=new kZ.Z(t,r,l),{shape:h,minBounds:p,maxBounds:m,shapeTransform:g,globalTransform:_}=qZ(r);let y,Z;return u.shape=h,u.minBounds=p,u.maxBounds=m,u.dimensions=Y.Z.unpack(o.dimensions),u.shapeTransform=g,u.globalTransform=_,u.maximumTileCount=zZ(c),(0,f.Z)(o.padding)&&(y=Y.Z.unpack(o.padding.before),Z=Y.Z.unpack(o.padding.after)),u.paddingBefore=y,u.paddingAfter=Z,u._implicitTileset=d,RZ.Z.unload(n),u._ready=!0,u._readyPromise=Promise.resolve(u),u},GZ.prototype.requestData=function(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=(0,p.Z)(e.tileLevel,0),i=(0,p.Z)(e.tileX,0),n=(0,p.Z)(e.tileY,0),r=(0,p.Z)(e.tileZ,0);if(0!==(0,p.Z)(e.keyframe,0))return;const o=this._implicitTileset,s=this.names,a=new MZ.Z({subdivisionScheme:o.subdivisionScheme,subtreeLevels:o.subtreeLevels,level:t,x:i,y:n,z:r}),l=a.isSubtreeRoot()&&a.level>0;return async function(e,t){const i=e._implicitTileset,n=e._subtreeCache;let r=n.find(t);if((0,f.Z)(r))return r;const o=i.subtreeUriTemplate.getDerivedResource({templateValues:t.getTemplateValues()}),s=i.baseResource.getDerivedResource({url:o.url}),a=await s.fetchArrayBuffer();if(r=n.find(t),(0,f.Z)(r))return r;const l=(0,BZ.Z)(a);return r=await TZ.Z.fromSubtreeJson(s,l.jsonPayload,l.binaryPayload,i,t),n.addSubtree(r),r}(this,l?a.getParentSubtreeCoordinates():a.getSubtreeCoordinates()).then((function(e){return(l?e.childSubtreeIsAvailableAtCoordinates(a):e.tileIsAvailableAtCoordinates(a))?async function(e,t){const i=e.contentUriTemplates[0].getDerivedResource({templateValues:t.getTemplateValues()}),n=e.baseResource.getDerivedResource({url:i.url}),r=await n.fetchArrayBuffer(),o=(0,BZ.Z)(r);return await VZ.fromJson(n,o.jsonPayload,o.binaryPayload,e.metadataSchema)}(o,a):Promise.reject("Tile is not available")})).then((function(e){return s.map((function(t){return e.metadataTable.getPropertyTypedArray(t)}))}))};const JZ=GZ;var XZ=i(204476),$Z=i(60308),YZ=i(888463),QZ=i(73360),ev=i(449743),tv=i(8e3),iv=i(654125),nv=i(25765);function rv(e){e=(0,p.Z)(e,1),Ce.Z.typeOf.number.greaterThan("radius",e,0),this._radius=(0,p.Z)(e,1)}Object.defineProperties(rv.prototype,{radius:{get:function(){return this._radius},set:function(e){Ce.Z.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),rv.prototype.emit=function(e){const t=T.Z.randomBetween(0,T.Z.TWO_PI),i=T.Z.randomBetween(0,this._radius),n=i*Math.cos(t),r=i*Math.sin(t);e.position=Y.Z.fromElements(n,r,0,e.position),e.velocity=Y.Z.clone(Y.Z.UNIT_Z,e.velocity)};const ov=rv;var sv=i(19554),av=i(234871),lv=i(753577);const cv={CUMULUS:0,validate:function(e){return e===cv.CUMULUS}},uv=Object.freeze(cv);function dv(e,t){if(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._show=(0,p.Z)(e.show,!0),this._position=Y.Z.clone((0,p.Z)(e.position,Y.Z.ZERO)),!(0,f.Z)(e.scale)&&(0,f.Z)(e.maximumSize))this._maximumSize=Y.Z.clone(e.maximumSize),this._scale=new d.Z(this._maximumSize.x,this._maximumSize.y);else{this._scale=d.Z.clone((0,p.Z)(e.scale,new d.Z(20,12)));const t=new Y.Z(this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=Y.Z.clone((0,p.Z)(e.maximumSize,t))}this._slice=(0,p.Z)(e.slice,-1),this._color=h.Z.clone((0,p.Z)(e.color,h.Z.WHITE)),this._brightness=(0,p.Z)(e.brightness,1),this._cloudCollection=t,this._index=-1}const hv=dv.SHOW_INDEX=0,pv=dv.POSITION_INDEX=1,fv=dv.SCALE_INDEX=2,mv=dv.MAXIMUM_SIZE_INDEX=3,gv=dv.SLICE_INDEX=4,_v=dv.BRIGHTNESS_INDEX=5,yv=dv.COLOR_INDEX=6;function Zv(e,t){const i=e._cloudCollection;(0,f.Z)(i)&&(i._updateCloud(e,t),e._dirty=!0)}dv.NUMBER_OF_PROPERTIES=7,Object.defineProperties(dv.prototype,{show:{get:function(){return this._show},set:function(e){Ce.Z.typeOf.bool("value",e),this._show!==e&&(this._show=e,Zv(this,hv))}},position:{get:function(){return this._position},set:function(e){Ce.Z.typeOf.object("value",e);const t=this._position;Y.Z.equals(t,e)||(Y.Z.clone(e,t),Zv(this,pv))}},scale:{get:function(){return this._scale},set:function(e){Ce.Z.typeOf.object("value",e);const t=this._scale;d.Z.equals(t,e)||(d.Z.clone(e,t),Zv(this,fv))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){Ce.Z.typeOf.object("value",e);const t=this._maximumSize;Y.Z.equals(t,e)||(Y.Z.clone(e,t),Zv(this,mv))}},color:{get:function(){return this._color},set:function(e){Ce.Z.typeOf.object("value",e);const t=this._color;h.Z.equals(t,e)||(h.Z.clone(e,t),Zv(this,yv))}},slice:{get:function(){return this._slice},set:function(e){Ce.Z.typeOf.number("value",e),this._slice!==e&&(this._slice=e,Zv(this,gv))}},brightness:{get:function(){return this._brightness},set:function(e){Ce.Z.typeOf.number("value",e),this._brightness!==e&&(this._brightness=e,Zv(this,_v))}}}),dv.prototype._destroy=function(){this._cloudCollection=void 0};const vv=dv;let bv;const wv=new Y.Z,xv={positionHighAndScaleX:0,positionLowAndScaleY:1,packedAttribute0:2,packedAttribute1:3,color:4},Cv={direction:0,positionHighAndScaleX:1,positionLowAndScaleY:2,packedAttribute0:3,packedAttribute1:4,color:5},Sv=vv.SHOW_INDEX,Tv=vv.POSITION_INDEX,Av=vv.SCALE_INDEX,Pv=vv.MAXIMUM_SIZE_INDEX,Ev=vv.SLICE_INDEX,Mv=vv.BRIGHTNESS_INDEX,kv=vv.NUMBER_OF_PROPERTIES,Iv=vv.COLOR_INDEX;function Ov(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(kv),this._noiseTexture=void 0,this._textureSliceWidth=128,this._noiseTextureRows=4,this.noiseDetail=(0,p.Z)(e.noiseDetail,16),this.noiseOffset=Y.Z.clone((0,p.Z)(e.noiseOffset,Y.Z.ZERO)),this._loading=!1,this._ready=!1;const t=this;this._uniforms={u_noiseTexture:function(){return t._noiseTexture},u_noiseTextureDimensions:Bv(t),u_noiseDetail:function(){return t.noiseDetail}},this._vaNoise=void 0,this._spNoise=void 0,this._spCreated=!1,this._sp=void 0,this._rs=void 0,this.show=(0,p.Z)(e.show,!0),this._colorCommands=[],this.debugBillboards=(0,p.Z)(e.debugBillboards,!1),this._compiledDebugBillboards=!1,this.debugEllipsoids=(0,p.Z)(e.debugEllipsoids,!1),this._compiledDebugEllipsoids=!1}function Bv(e){return function(){return wv.x=e._textureSliceWidth,wv.y=e._noiseTextureRows,wv.z=1/e._noiseTextureRows,wv}}function Rv(e){const t=e.length;for(let i=0;i<t;++i)e[i]&&e[i]._destroy()}function Fv(e){if(e._cloudsRemoved){e._cloudsRemoved=!1;const t=[],i=e._clouds,n=i.length;for(let e=0,r=0;e<n;++e){const n=i[e];(0,f.Z)(n)&&(i._index=r++,t.push(n))}e._clouds=t}}Object.defineProperties(Ov.prototype,{length:{get:function(){return Fv(this),this._clouds.length}}}),Ov.prototype.add=function(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=(0,p.Z)(e.cloudType,uv.CUMULUS);if(!uv.validate(t))throw new S.Z("invalid cloud type");let i;return t===uv.CUMULUS&&(i=new vv(e,this),i._index=this._clouds.length,this._clouds.push(i),this._createVertexArray=!0),i},Ov.prototype.remove=function(e){return!!this.contains(e)&&(this._clouds[e._index]=void 0,this._cloudsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},Ov.prototype.removeAll=function(){Rv(this._clouds),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!0},Ov.prototype._updateCloud=function(e,t){e._dirty||(this._cloudsToUpdate[this._cloudsToUpdateIndex++]=e),++this._propertiesChanged[t]},Ov.prototype.contains=function(e){return(0,f.Z)(e)&&e._cloudCollection===this},Ov.prototype.get=function(e){return Ce.Z.typeOf.number("index",e),Fv(this),this._clouds[e]};const Dv=new Float32Array([-1,-1,1,-1,1,1,-1,1]),Lv=new Uint16Array([0,1,2,0,2,3]);let Vv;function Nv(e){let t=e.cache.cloudCollection_indexBufferBatched;if((0,f.Z)(t))return t;const i=new Uint16Array(98298);for(let e=0,t=0;e<98298;e+=6,t+=4)i[e]=t,i[e+1]=t+1,i[e+2]=t+2,i[e+3]=t,i[e+4]=t+2,i[e+5]=t+3;return t=fd.Z.createIndexBuffer({context:e,typedArray:i,usage:md.Z.STATIC_DRAW,indexDatatype:uf.Z.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferBatched=t,t}function Uv(e){let t=e.cache.cloudCollection_indexBufferInstanced;return(0,f.Z)(t)||(t=fd.Z.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:md.Z.STATIC_DRAW,indexDatatype:uf.Z.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferInstanced=t),t}function Gv(e){let t=e.cache.cloudCollection_vertexBufferInstanced;return(0,f.Z)(t)||(t=fd.Z.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:md.Z.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_vertexBufferInstanced=t),t}const zv=new Pp.Z;function Kv(e,t,i,n){let r;const o=i[bv.positionHighAndScaleX],s=i[bv.positionLowAndScaleY],a=n.position;Pp.Z.fromCartesian(a,zv);const l=n.scale,c=zv.high,u=zv.low;e._instanced?(r=n._index,o(r,c.x,c.y,c.z,l.x),s(r,u.x,u.y,u.z,l.y)):(r=4*n._index,o(r+0,c.x,c.y,c.z,l.x),o(r+1,c.x,c.y,c.z,l.x),o(r+2,c.x,c.y,c.z,l.x),o(r+3,c.x,c.y,c.z,l.x),s(r+0,u.x,u.y,u.z,l.y),s(r+1,u.x,u.y,u.z,l.y),s(r+2,u.x,u.y,u.z,l.y),s(r+3,u.x,u.y,u.z,l.y))}function qv(e,t,i,n){let r;const o=i[bv.packedAttribute0],s=n.show,a=n.brightness;e._instanced?(r=n._index,o(r,s,a,0,0)):(r=4*n._index,o(r+0,s,a,0,0),o(r+1,s,a,1,0),o(r+2,s,a,1,1),o(r+3,s,a,0,1))}function Hv(e,t,i,n){let r;const o=i[bv.packedAttribute1],s=n.maximumSize,a=n.slice;e._instanced?(r=n._index,o(r,s.x,s.y,s.z,a)):(r=4*n._index,o(r+0,s.x,s.y,s.z,a),o(r+1,s.x,s.y,s.z,a),o(r+2,s.x,s.y,s.z,a),o(r+3,s.x,s.y,s.z,a))}function Wv(e,t,i,n){let r;const o=i[bv.color],s=n.color,a=h.Z.floatToByte(s.red),l=h.Z.floatToByte(s.green),c=h.Z.floatToByte(s.blue),u=h.Z.floatToByte(s.alpha);e._instanced?(r=n._index,o(r,a,l,c,u)):(r=4*n._index,o(r+0,a,l,c,u),o(r+1,a,l,c,u),o(r+2,a,l,c,u),o(r+3,a,l,c,u))}function jv(e,t,i,n){Kv(e,0,i,n),qv(e,0,i,n),Hv(e,0,i,n),Wv(e,0,i,n)}const Jv=[];Ov.prototype.update=function(e){if(Fv(this),!this.show)return;const t=this.debugBillboards||this.debugEllipsoids;this._ready=!!t||(0,f.Z)(this._noiseTexture),this._ready||this._loading||t||function(e,t,i,n){const r=e,o=r._textureSliceWidth,s=r._noiseTextureRows;if(o/s<1||o%s!=0)throw new S.Z("noiseTextureRows must evenly divide textureSliceWidth");const a=t.context;r._vaNoise=function(e){const t=fd.Z.createVertexBuffer({context:e,typedArray:Dv,usage:md.Z.STATIC_DRAW}),i=fd.Z.createIndexBuffer({context:e,typedArray:Lv,usage:md.Z.STATIC_DRAW,indexDatatype:uf.Z.UNSIGNED_SHORT}),n=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:Yh.Z.FLOAT}];return new jd.Z({context:e,attributes:n,indexBuffer:i})}(a),r._spNoise=Vd.Z.fromCache({context:a,vertexShaderSource:i,fragmentShaderSource:n,attributeLocations:{position:0}});const l=r.noiseDetail,c=r.noiseOffset;r._noiseTexture=new Gd.Z({context:a,width:o*o/s,height:o*s,pixelDatatype:Md.Z.UNSIGNED_BYTE,pixelFormat:km.Z.RGBA,sampler:new Bd.Z({wrapS:Hd.Z.REPEAT,wrapT:Hd.Z.REPEAT,minificationFilter:qd.Z.NEAREST,magnificationFilter:Kd.Z.NEAREST})});const u=new _d.Z({vertexArray:r._vaNoise,shaderProgram:r._spNoise,outputTexture:r._noiseTexture,uniformMap:{u_noiseTextureDimensions:Bv(r),u_noiseDetail:function(){return l},u_noiseOffset:function(){return c}},persists:!1,owner:e,postExecute:function(e){r._ready=!0,r._loading=!1}});t.commandList.push(u),r._loading=!0}(this,e,U_,N_),this._instanced=e.context.instancedArrays,bv=this._instanced?Cv:xv,Vv=this._instanced?Uv:Nv;const i=this._clouds.length,n=this._cloudsToUpdate,r=this._cloudsToUpdateIndex;this._createVertexArray?function(e,t){const i=e,n=t.context;i._createVertexArray=!1,i._vaf=i._vaf&&i._vaf.destroy();const r=e._clouds,o=r.length;if(o>0){i._vaf=function(e,t,i){const n=[{index:bv.positionHighAndScaleX,componentsPerAttribute:4,componentDatatype:Yh.Z.FLOAT,usage:md.Z.STATIC_DRAW},{index:bv.positionLowAndScaleY,componentsPerAttribute:4,componentDatatype:Yh.Z.FLOAT,usage:md.Z.STATIC_DRAW},{index:bv.packedAttribute0,componentsPerAttribute:4,componentDatatype:Yh.Z.FLOAT,usage:md.Z.STATIC_DRAW},{index:bv.packedAttribute1,componentsPerAttribute:4,componentDatatype:Yh.Z.FLOAT,usage:md.Z.STATIC_DRAW},{index:bv.color,componentsPerAttribute:4,componentDatatype:Yh.Z.UNSIGNED_BYTE,normalize:!0,usage:md.Z.STATIC_DRAW}];i&&n.push({index:bv.direction,componentsPerAttribute:2,componentDatatype:Yh.Z.FLOAT,vertexBuffer:Gv(e)});const r=i?t:4*t;return new Jd.Z(e,n,r,i)}(n,o,i._instanced);const t=i._vaf.writers;let s;for(s=0;s<o;++s)jv(e,0,t,r[s]);i._vaf.commit(Vv(n))}}(this,e):r>0&&function(e,t){const i=t.context,n=e,r=n._clouds.length,o=n._cloudsToUpdate,s=n._cloudsToUpdateIndex,a=n._propertiesChanged,l=Jv;l.length=0,(a[Tv]||a[Av])&&l.push(Kv),(a[Sv]||a[Mv])&&l.push(qv),(a[Pv]||a[Ev])&&l.push(Hv),a[Iv]&&l.push(Wv);const c=l.length,u=n._vaf.writers;let d,h,p;if(s/r>.1){for(d=0;d<s;++d)for(h=o[d],h._dirty=!1,p=0;p<c;++p)l[p](e,t,u,h);n._vaf.commit(Vv(i))}else{for(d=0;d<s;++d){for(h=o[d],h._dirty=!1,p=0;p<c;++p)l[p](e,t,u,h);n._instanced?n._vaf.subCommit(h._index,1):n._vaf.subCommit(4*h._index,4)}n._vaf.endSubCommits()}n._cloudsToUpdateIndex=0}(this,e),r>1.5*i&&(n.length=i),!(0,f.Z)(this._vaf)||!(0,f.Z)(this._vaf.va)||!this._ready&!t||(this._spCreated&&this.debugBillboards===this._compiledDebugBillboards&&this.debugEllipsoids===this._compiledDebugEllipsoids||function(e,t,i,n){const r=t.context,o=e,s=new Nd.Z({defines:[],sources:[i]});o._instanced&&s.defines.push("INSTANCED");const a=new Nd.Z({defines:[],sources:[n]});o.debugBillboards&&a.defines.push("DEBUG_BILLBOARDS"),o.debugEllipsoids&&a.defines.push("DEBUG_ELLIPSOIDS"),o._sp=Vd.Z.replaceCache({context:r,shaderProgram:o._sp,vertexShaderSource:s,fragmentShaderSource:a,attributeLocations:bv}),o._rs=kd.Z.fromCache({depthTest:{enabled:!0,func:Jg.Z.LESS},depthMask:!1,blending:jy.Z.ALPHA_BLEND}),o._spCreated=!0,o._compiledDebugBillboards=o.debugBillboards,o._compiledDebugEllipsoids=o.debugEllipsoids}(this,e,V_,L_),function(e,t){const i=e,n=t.passes,r=i._uniforms,o=t.commandList;if(n.render){const t=i._colorCommands,n=i._vaf.va,s=n.length;t.length=s;for(let a=0;a<s;a++){let s=t[a];(0,f.Z)(s)||(s=t[a]=new xd.Z),s.pass=Pd.Z.TRANSLUCENT,s.owner=e,s.uniformMap=r,s.count=n[a].indicesCount,s.vertexArray=n[a].va,s.shaderProgram=i._sp,s.renderState=i._rs,i._instanced&&(s.count=6,s.instanceCount=i._clouds.length),o.push(s)}}}(this,e))},Ov.prototype.isDestroyed=function(){return!1},Ov.prototype.destroy=function(){return this._noiseTexture=this._noiseTexture&&this._noiseTexture.destroy(),this._sp=this._sp&&this._sp.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),Rv(this._clouds),(0,Ug.Z)(this)};const Xv=Ov;var $v=i(151802),Yv=i(354620);const Qv=T.Z.toRadians(30);function eb(e){this._angle=(0,p.Z)(e,Qv)}Object.defineProperties(eb.prototype,{angle:{get:function(){return this._angle},set:function(e){Ce.Z.typeOf.number("value",e),this._angle=e}}}),eb.prototype.emit=function(e){const t=Math.tan(this._angle),i=T.Z.randomBetween(0,T.Z.TWO_PI),n=T.Z.randomBetween(0,t),r=n*Math.cos(i),o=n*Math.sin(i);e.velocity=Y.Z.fromElements(r,o,1,e.velocity),Y.Z.normalize(e.velocity,e.velocity),e.position=Y.Z.clone(Y.Z.ZERO,e.position)};const tb=eb;var ib=i(792617),nb=i(628031),rb=i(53839);function ob(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).attributeName;let i=e.perInstanceAttribute;if(!(0,f.Z)(t))throw new S.Z("options.attributeName is required.");(0,f.Z)(i)||(i=!1);let n=(0,p.Z)(e.glslDatatype,"vec3");const r=`v_${t}`;let o;if("normal"===t||"tangent"===t||"bitangent"===t)o=`vec4 getColor() { return vec4((${r} + vec3(1.0)) * 0.5, 1.0); }\n`;else switch("st"===t&&(n="vec2"),n){case"float":o=`vec4 getColor() { return vec4(vec3(${r}), 1.0); }\n`;break;case"vec2":o=`vec4 getColor() { return vec4(${r}, 0.0, 1.0); }\n`;break;case"vec3":o=`vec4 getColor() { return vec4(${r}, 1.0); }\n`;break;case"vec4":o=`vec4 getColor() { return ${r}; }\n`;break;default:throw new S.Z("options.glslDatatype must be float, vec2, vec3, or vec4.")}const s=`in vec3 position3DHigh;\nin vec3 position3DLow;\nin float batchId;\n${i?"":`in ${n} ${t};\n`}out ${n} ${r};\nvoid main()\n{\nvec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n${i?`${r} = czm_batchTable_${t}(batchId);\n`:`${r} = ${t};\n`}gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}`,a=`in ${n} ${r};\n${o}\nvoid main()\n{\nout_FragColor = getColor();\n}`;this.material=void 0,this.translucent=(0,p.Z)(e.translucent,!1),this._vertexShaderSource=(0,p.Z)(e.vertexShaderSource,s),this._fragmentShaderSource=(0,p.Z)(e.fragmentShaderSource,a),this._renderState=My.Z.getDefaultRenderState(!1,!1,e.renderState),this._closed=(0,p.Z)(e.closed,!1),this._attributeName=t,this._glslDatatype=n}Object.defineProperties(ob.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),ob.prototype.getFragmentShaderSource=My.Z.prototype.getFragmentShaderSource,ob.prototype.isTranslucent=My.Z.prototype.isTranslucent,ob.prototype.getRenderState=My.Z.prototype.getRenderState;const sb=ob;var ab=i(868817),lb=i(211547),cb=i(396324),ub=i(759398);function db(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this.length=(0,p.Z)(e.length,1e7),this._length=void 0,this.width=(0,p.Z)(e.width,2),this._width=void 0,this.show=(0,p.Z)(e.show,!0),this.modelMatrix=Mh.Z.clone((0,p.Z)(e.modelMatrix,Mh.Z.IDENTITY)),this._modelMatrix=new Mh.Z,this.id=e.id,this._id=void 0,this._primitive=void 0}db.prototype.update=function(e){if(this.show){if(!(0,f.Z)(this._primitive)||!Mh.Z.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=Mh.Z.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,(0,f.Z)(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);const e=new Up.Z({geometry:new Vm.Z({positions:[Y.Z.ZERO,Y.Z.UNIT_X],width:this.width,vertexFormat:cb.Z.VERTEX_FORMAT,colors:[h.Z.RED,h.Z.RED],arcType:X.Z.NONE}),modelMatrix:Mh.Z.multiplyByUniformScale(this.modelMatrix,this.length,new Mh.Z),id:this.id,pickPrimitive:this}),t=new Up.Z({geometry:new Vm.Z({positions:[Y.Z.ZERO,Y.Z.UNIT_Y],width:this.width,vertexFormat:cb.Z.VERTEX_FORMAT,colors:[h.Z.GREEN,h.Z.GREEN],arcType:X.Z.NONE}),modelMatrix:Mh.Z.multiplyByUniformScale(this.modelMatrix,this.length,new Mh.Z),id:this.id,pickPrimitive:this}),i=new Up.Z({geometry:new Vm.Z({positions:[Y.Z.ZERO,Y.Z.UNIT_Z],width:this.width,vertexFormat:cb.Z.VERTEX_FORMAT,colors:[h.Z.BLUE,h.Z.BLUE],arcType:X.Z.NONE}),modelMatrix:Mh.Z.multiplyByUniformScale(this.modelMatrix,this.length,new Mh.Z),id:this.id,pickPrimitive:this});this._primitive=new ub.Z({geometryInstances:[e,t,i],appearance:new cb.Z,asynchronous:!1})}this._primitive.update(e)}},db.prototype.isDestroyed=function(){return!1},db.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,Ug.Z)(this)};const hb=db;var pb=i(800640),fb=i(460135),mb=i(40368),gb=i(92962);const _b=function(e){if(Ce.Z.typeOf.object("options",e),Ce.Z.typeOf.object("options.direction",e.direction),Y.Z.equals(e.direction,Y.Z.ZERO))throw new S.Z("options.direction cannot be zero-length");this.direction=Y.Z.clone(e.direction),this.color=h.Z.clone((0,p.Z)(e.color,h.Z.WHITE)),this.intensity=(0,p.Z)(e.intensity,1)};var yb=i(48449),Zb=i(516925),vb=i(982960),bb=i(905278);const wb="in vec3 v_positionMC;\nin vec3 v_positionEC;\nin vec2 v_st;\n\nvoid main()\n{\n    czm_materialInput materialInput;\n\n    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\n#ifdef FACE_FORWARD\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n#endif\n\n    materialInput.s = v_st.s;\n    materialInput.st = v_st;\n    materialInput.str = vec3(v_st, 0.0);\n\n    // Convert tangent space material normal to eye space\n    materialInput.normalEC = normalEC;\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\n\n    // Convert view vector to world space\n    vec3 positionToEyeEC = -v_positionEC;\n    materialInput.positionToEyeEC = positionToEyeEC;\n\n    czm_material material = czm_getMaterial(materialInput);\n\n#ifdef FLAT\n    out_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n#else\n    out_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n#endif\n}\n",xb="in vec3 position3DHigh;\nin vec3 position3DLow;\nin vec2 st;\nin float batchId;\n\nout vec3 v_positionMC;\nout vec3 v_positionEC;\nout vec2 v_st;\n\nvoid main()\n{\n    vec4 p = czm_computePosition();\n\n    v_positionMC = position3DHigh + position3DLow;           // position in model coordinates\n    v_positionEC = (czm_modelViewRelativeToEye * p).xyz;     // position in eye coordinates\n    v_st = st;\n\n    gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}\n";var Cb=i(420171);function Sb(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=(0,p.Z)(e.translucent,!0),i=(0,p.Z)(e.aboveGround,!1);this.material=(0,f.Z)(e.material)?e.material:Cb.Z.fromType(Cb.Z.ColorType),this.translucent=(0,p.Z)(e.translucent,!0),this._vertexShaderSource=(0,p.Z)(e.vertexShaderSource,xb),this._fragmentShaderSource=(0,p.Z)(e.fragmentShaderSource,wb),this._renderState=My.Z.getDefaultRenderState(t,!i,e.renderState),this._closed=!1,this._flat=(0,p.Z)(e.flat,!1),this._faceForward=(0,p.Z)(e.faceForward,i),this._aboveGround=i}Object.defineProperties(Sb.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return Sb.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),Sb.VERTEX_FORMAT=Uh.Z.POSITION_AND_ST,Sb.prototype.getFragmentShaderSource=My.Z.prototype.getFragmentShaderSource,Sb.prototype.isTranslucent=My.Z.prototype.isTranslucent,Sb.prototype.getRenderState=My.Z.prototype.getRenderState;const Tb=Sb;var Ab=i(342569),Pb=i(237646),Eb=i(313167),Mb=i(699765);function kb(e){if(!(0,f.Z)(e)||!(0,f.Z)(e.scene))throw new S.Z("options.scene is required.");this._scene=e.scene,this.samplingWindow=(0,p.Z)(e.samplingWindow,kb.defaultSettings.samplingWindow),this.quietPeriod=(0,p.Z)(e.quietPeriod,kb.defaultSettings.quietPeriod),this.warmupPeriod=(0,p.Z)(e.warmupPeriod,kb.defaultSettings.warmupPeriod),this.minimumFrameRateDuringWarmup=(0,p.Z)(e.minimumFrameRateDuringWarmup,kb.defaultSettings.minimumFrameRateDuringWarmup),this.minimumFrameRateAfterWarmup=(0,p.Z)(e.minimumFrameRateAfterWarmup,kb.defaultSettings.minimumFrameRateAfterWarmup),this._lowFrameRate=new m.Z,this._nominalFrameRate=new m.Z,this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;const t=this;this._preUpdateRemoveListener=this._scene.preUpdate.addEventListener((function(e,i){!function(e,t){if(e._pauseCount>0)return;const i=(0,io.Z)();if(e._needsQuietPeriod)e._needsQuietPeriod=!1,e._frameTimes.length=0,e._quietPeriodEndTime=i+e.quietPeriod/Tg.Z.SECONDS_PER_MILLISECOND,e._warmupPeriodEndTime=e._quietPeriodEndTime+(e.warmupPeriod+e.samplingWindow)/Tg.Z.SECONDS_PER_MILLISECOND;else if(i>=e._quietPeriodEndTime){e._frameTimes.push(i);const t=i-e.samplingWindow/Tg.Z.SECONDS_PER_MILLISECOND;if(e._frameTimes.length>=2&&e._frameTimes[0]<=t){for(;e._frameTimes.length>=2&&e._frameTimes[1]<t;)e._frameTimes.shift();const n=(i-e._frameTimes[0])/(e._frameTimes.length-1);e._lastFramesPerSecond=1e3/n,n>1e3/(i>e._warmupPeriodEndTime?e.minimumFrameRateAfterWarmup:e.minimumFrameRateDuringWarmup)?e._frameRateIsLow||(e._frameRateIsLow=!0,e._needsQuietPeriod=!0,e.lowFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond)):e._frameRateIsLow&&(e._frameRateIsLow=!1,e._needsQuietPeriod=!0,e.nominalFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond))}}}(t)})),this._hiddenPropertyName=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;const i=void 0!==document.hidden?"visibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychange":void 0;function n(){var e;e=t,document[e._hiddenPropertyName]?e.pause():e.unpause()}this._visibilityChangeRemoveListener=void 0,(0,f.Z)(i)&&(document.addEventListener(i,n,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(i,n,!1)})}kb.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8},kb.fromScene=function(e){if(!(0,f.Z)(e))throw new S.Z("scene is required.");return(0,f.Z)(e._frameRateMonitor)&&!e._frameRateMonitor.isDestroyed()||(e._frameRateMonitor=new kb({scene:e})),e._frameRateMonitor},Object.defineProperties(kb.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}}),kb.prototype.pause=function(){++this._pauseCount,1===this._pauseCount&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)},kb.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)},kb.prototype.isDestroyed=function(){return!1},kb.prototype.destroy=function(){return this._preUpdateRemoveListener(),(0,f.Z)(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),(0,Ug.Z)(this)};const Ib=kb;var Ob=i(987315),Bb=i(482787),Rb=i(648034),Fb=i(792560),Db=i(228672),Lb=i(166570),Vb=i(749754),Nb=i(59707),Ub=i(208311),Gb=i(812305),zb=i(761288),Kb=i(722866),qb=i(106899),Hb=i(513581),Wb=i(676674),jb=i(912017),Jb=i(533763),Xb=i(272424),$b=i(822518),Yb=i(261804),Qb=i(941826),ew=i(32018);function tw(){this._image=new Image}function iw(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=new ih.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new ve.Z(-T.Z.PI,-T.Z.PI,T.Z.PI,T.Z.PI),ellipsoid:e.ellipsoid});let t=e.credit;"string"==typeof t&&(t=new ne.Z(t)),this._credit=t,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=23,(0,f.Z)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new tw),this._errorEvent=new m.Z,this._ready=!1;const i=this;let n,r;if((0,f.Z)(e.url)){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider options.url","options.url was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseImageryProvider.fromMetadata instead.");const t=we.Z.createIfNeeded(e.url);r=new cf(t)}(0,f.Z)(e.metadata)&&((0,Rl.Z)("GoogleEarthEnterpriseImageryProvider options.metadata","options.metadata was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use GoogleEarthEnterpriseImageryProvider.fromMetadata instead."),r=e.metadata),this._metadata=r,(0,f.Z)(r)&&(this._readyPromise=r.readyPromise.then((function(e){if(!r.imageryPresent){const e=new xe.Z(`The server ${r.url} doesn't have imagery`);return n=uh.Z.reportError(n,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}return uh.Z.reportSuccess(n),i._ready=e,e})).catch((function(e){return n=uh.Z.reportError(n,i,i._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)})))}tw.prototype.isReady=function(){return!0},tw.prototype.shouldDiscardImage=function(e){return e===this._image},Object.defineProperties(iw.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){return this._maximumLevel}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.ready","GoogleEarthEnterpriseImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseImageryProvider.fromMetadata instead."),this._ready}},readyPromise:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.readyPromise","GoogleEarthEnterpriseImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107. Use GoogleEarthEnterpriseImageryProvider.fromMetadata instead."),this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}},defaultAlpha:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultAlpha","GoogleEarthEnterpriseImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultAlpha","GoogleEarthEnterpriseImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultNightAlpha","GoogleEarthEnterpriseImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultNightAlpha","GoogleEarthEnterpriseImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultDayAlpha","GoogleEarthEnterpriseImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultDayAlpha","GoogleEarthEnterpriseImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultBrightness","GoogleEarthEnterpriseImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultBrightness","GoogleEarthEnterpriseImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultContrast","GoogleEarthEnterpriseImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultContrast","GoogleEarthEnterpriseImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultHue","GoogleEarthEnterpriseImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultHue","GoogleEarthEnterpriseImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultSaturation","GoogleEarthEnterpriseImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultSaturation","GoogleEarthEnterpriseImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultGamma","GoogleEarthEnterpriseImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultGamma","GoogleEarthEnterpriseImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultMinificationFilter","GoogleEarthEnterpriseImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultMinificationFilter","GoogleEarthEnterpriseImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultMagnificationFilter","GoogleEarthEnterpriseImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,Rl.Z)("GoogleEarthEnterpriseImageryProvider.defaultMagnificationFilter","GoogleEarthEnterpriseImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),iw.fromMetadata=function(e,t){if(Ce.Z.defined("metadata",e),!e.imageryPresent)throw new xe.Z(`The server ${e.url} doesn't have imagery`);const i=new iw(t);return i._metadata=e,i._ready=!0,i._readyPromise=Promise.resolve(!0),i},iw.prototype.getTileCredits=function(e,t,i){const n=this._metadata,r=n.getTileInformation(e,t,i);if((0,f.Z)(r)){const e=n.providers[r.imageryProvider];if((0,f.Z)(e))return[e]}},iw.prototype.requestImage=function(e,t,i,n){const r=this._tileDiscardPolicy._image,o=this._metadata,s=cf.tileXYToQuadKey(e,t,i),a=o.getTileInformation(e,t,i);if(!(0,f.Z)(a)){if(o.isValid(s)){const r=new oh.Z({throttle:n.throttle,throttleByServer:n.throttleByServer,type:n.type,priorityFunction:n.priorityFunction});return void o.populateSubtree(e,t,i,r)}return Promise.resolve(r)}if(!a.hasImagery())return Promise.resolve(r);const l=function(e,t,i,n,r,o){const s=cf.tileXYToQuadKey(i,n,r);let a=t.imageryVersion;return a=(0,f.Z)(a)&&a>0?a:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1-0${s}-i.${a.toString()}`,request:o})}(this,a,e,t,i,n).fetchArrayBuffer();return(0,f.Z)(l)?l.then((function(e){s_(o.key,e);let t,i=new Uint8Array(e);const n=o.protoImagery;if((0,f.Z)(n)&&n||(t=function(e){const t="JFIF";if(e[6]===t.charCodeAt(0)&&e[7]===t.charCodeAt(1)&&e[8]===t.charCodeAt(2)&&e[9]===t.charCodeAt(3))return"image/jpeg";const i="PNG";return e[1]===i.charCodeAt(0)&&e[2]===i.charCodeAt(1)&&e[3]===i.charCodeAt(2)?"image/png":void 0}(i)),!(0,f.Z)(t)&&(!(0,f.Z)(n)||n)){const e=function(e){const t=Hp.Reader.create(e),i=t.len,n={};for(;t.pos<i;){const e=t.uint32();let i;switch(e>>>3){case 1:n.imageType=t.uint32();break;case 2:n.imageData=t.bytes();break;case 3:n.alphaType=t.uint32();break;case 4:n.imageAlpha=t.bytes();break;case 5:if(i=n.copyrightIds,(0,f.Z)(i)||(i=n.copyrightIds=[]),2==(7&e)){const e=t.uint32()+t.pos;for(;t.pos<e;)i.push(t.uint32())}else i.push(t.uint32());break;default:t.skipType(7&e)}}const r=n.imageType;if((0,f.Z)(r))switch(r){case 0:n.imageType="image/jpeg";break;case 4:n.imageType="image/png";break;default:throw new xe.Z("GoogleEarthEnterpriseImageryProvider: Unsupported image type.")}const o=n.alphaType;return(0,f.Z)(o)&&0!==o&&(console.log("GoogleEarthEnterpriseImageryProvider: External alpha not supported."),delete n.alphaType,delete n.imageAlpha),n}(i);t=e.imageType,i=e.imageData}return(0,f.Z)(t)&&(0,f.Z)(i)?(0,Z_.Z)({uint8Array:i,format:t,flipY:!0}):r})):void 0},iw.prototype.pickFeatures=function(e,t,i,n,r){};const nw=iw;var rw=i(578049);const ow=new h.Z(1,1,1,.4),sw=new h.Z(0,1,0,.05),aw=new h.Z(0,.5,0,.2);function lw(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0,this._tilingScheme=(0,f.Z)(e.tilingScheme)?e.tilingScheme:new ih.Z({ellipsoid:e.ellipsoid}),this._cells=(0,p.Z)(e.cells,8),this._color=(0,p.Z)(e.color,ow),this._glowColor=(0,p.Z)(e.glowColor,sw),this._glowWidth=(0,p.Z)(e.glowWidth,6),this._backgroundColor=(0,p.Z)(e.backgroundColor,aw),this._errorEvent=new m.Z,this._tileWidth=(0,p.Z)(e.tileWidth,256),this._tileHeight=(0,p.Z)(e.tileHeight,256),this._canvasSize=(0,p.Z)(e.canvasSize,256),this._canvas=this._createGridCanvas(),this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(lw.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,Rl.Z)("GridImageryProvider.ready","GridImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,Rl.Z)("GridImageryProvider.readyPromise","GridImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultAlpha","GridImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultAlpha","GridImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultNightAlpha","GridImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultNightAlpha","GridImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this.defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultDayAlpha","GridImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultDayAlpha","GridImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultBrightness","GridImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultBrightness","GridImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultContrast","GridImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultContrast","GridImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultHue","GridImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultHue","GridImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultSaturation","GridImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultSaturation","GridImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultGamma","GridImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultGamma","GridImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultMinificationFilter","GridImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultMinificationFilter","GridImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,Rl.Z)("GridImageryProvider.defaultMagnificationFilter","GridImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,Rl.Z)("GridImageryProvider.defaultMagnificationFilter","GridImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),lw.prototype._drawGrid=function(e){const t=this._canvasSize;for(let i=0;i<=this._cells;++i){const n=1+i/this._cells*(t-1);e.moveTo(n,0),e.lineTo(n,t),e.moveTo(0,n),e.lineTo(t,n)}e.stroke()},lw.prototype._createGridCanvas=function(){const e=document.createElement("canvas");e.width=this._canvasSize,e.height=this._canvasSize;const t=this._canvasSize,i=e.getContext("2d"),n=this._backgroundColor.toCssColorString();i.fillStyle=n,i.fillRect(0,0,t,t);const r=this._glowColor.toCssColorString();i.strokeStyle=r,i.lineWidth=this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i),i.lineWidth=.5*this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i);const o=this._color.toCssColorString();return i.strokeStyle=o,i.lineWidth=2,i.strokeRect(0,0,t,t),i.lineWidth=1,this._drawGrid(i),e},lw.prototype.getTileCredits=function(e,t,i){},lw.prototype.requestImage=function(e,t,i,n){return Promise.resolve(this._canvas)},lw.prototype.pickFeatures=function(e,t,i,n,r){};const cw=lw;var uw=i(958913),dw=i(604274),hw=i(66922);function pw(e,t){this._parent=e,this._dataProvider=e._dataProvider,this._layer=e._layer,(0,f.Z)(this._parent._nodeIndex)?this._resource=this._parent._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.attribute.resource}/${t}`}):this._resource=this._parent.resource.getDerivedResource({url:t})}Object.defineProperties(pw.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}}}),pw.prototype.load=async function(){return this._data=await Kw.loadJson(this._resource,this._dataProvider._traceFetches),this._data};const fw=pw;function mw(e,t){this._storageInfo=t,this._parent=e,this._dataProvider=e._dataProvider;const i=`attributes/${t.key}/0`;(0,f.Z)(this._parent._nodeIndex)?this._resource=this._parent._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.attribute.resource}/${i}`}):this._resource=this._parent.resource.getDerivedResource({url:i})}Object.defineProperties(mw.prototype,{resource:{get:function(){return this._resource}},header:{get:function(){return this._header}},values:{get:function(){return(0,f.Z)(this._values)&&(0,f.Z)(this._values.attributeValues)?this._values.attributeValues:[]}},name:{get:function(){return this._storageInfo.name}}}),mw.prototype.load=function(){const e=this;return this._dataProvider._loadBinary(this._resource).then((function(t){const i=new DataView(t);let n=!0;if(i.getUint8(0)==="{".charCodeAt(0)&&(new TextDecoder).decode(t).includes("404")&&(n=!1,console.error(`Failed to load: ${e.resource.url}`)),n){e._data=t;let n=e._parseHeader(i);const o="UInt8"===(r=e._storageInfo.attributeValues.valueType)||"Int8"===r?1:"UInt16"===r||"Int16"===r?2:"UInt32"===r||"Int32"===r||"Oid32"===r||"Float32"===r?4:"UInt64"===r||"Int64"===r||"Float64"===r?8:0;o>0&&(n=Math.ceil(n/o)*o),e._parseBody(i,n)}var r}))},mw.prototype._parseValue=function(e,t,i){let n;if("UInt8"===t)n=e.getUint8(i),i+=1;else if("Int8"===t)n=e.getInt8(i),i+=1;else if("UInt16"===t)n=e.getUint16(i,!0),i+=2;else if("Int16"===t)n=e.getInt16(i,!0),i+=2;else if("UInt32"===t)n=e.getUint32(i,!0),i+=4;else if("Oid32"===t)n=e.getUint32(i,!0),i+=4;else if("Int32"===t)n=e.getInt32(i,!0),i+=4;else if("UInt64"===t){const t=e.getUint32(i,!0),r=e.getUint32(i+4,!0);n=t+Math.pow(2,32)*r,i+=8}else if("Int64"===t){const t=e.getUint32(i,!0),r=e.getUint32(i+4,!0);n=r<Math.pow(2,31)?t+Math.pow(2,32)*r:t+Math.pow(2,32)*(r-Math.pow(2,32)),i+=8}else"Float32"===t?(n=e.getFloat32(i,!0),i+=4):"Float64"===t?(n=e.getFloat64(i,!0),i+=8):"String"===t&&(n=String.fromCharCode(e.getUint8(i)),i+=1);return{value:n,offset:i}},mw.prototype._parseHeader=function(e){let t=0;this._header={};for(let i=0;i<this._storageInfo.header.length;i++){const n=this._storageInfo.header[i],r=this._parseValue(e,n.valueType,t);this._header[n.property]=r.value,t=r.offset}return t},mw.prototype._parseBody=function(e,t){this._values={};for(let i=0;i<this._storageInfo.ordering.length;i++){const n=this._storageInfo.ordering[i],r=this._storageInfo[n];if((0,f.Z)(r)){this._values[n]=[];for(let i=0;i<this._header.count;++i)if("String"!==r.valueType){const i=this._parseValue(e,r.valueType,t);this._values[n].push(i.value),t=i.offset}else{const o=this._values.attributeByteCounts[i];let s="";for(let i=0;i<o;++i){const i=this._parseValue(e,r.valueType,t);0!==i.value.charCodeAt(0)&&(s+=i.value),t=i.offset}this._values[n].push(s)}}}};const gw=mw;function _w(e,t){const i=e._dataProvider,n=e._layer;let r;r=(0,f.Z)(e._nodeIndex)?n.resource.getDerivedResource({url:`nodes/${e._data.mesh.geometry.resource}/${t}`}):e.resource.getDerivedResource({url:t}),this._parent=e,this._dataProvider=i,this._layer=n,this._resource=r,this._customAttributes=void 0}Object.defineProperties(_w.prototype,{resource:{get:function(){return this._resource}},data:{get:function(){return this._data}},customAttributes:{get:function(){return this._customAttributes}}}),_w.prototype.load=function(){const e=this;return this._dataProvider._loadBinary(this._resource).then((function(t){return e._data=t,t}))};const yw=new Y.Z,Zw=new Y.Z,vw=new Y.Z,bw=new Y.Z,ww=new Y.Z;function xw(e,t,i,n){const r=Y.Z.subtract(n,i,yw),o=Y.Z.cross(r,Y.Z.subtract(e,i,Zw),bw),s=Y.Z.cross(r,Y.Z.subtract(t,i,vw),ww);return Y.Z.dot(o,s)>=0}const Cw=new Y.Z,Sw=new Y.Z,Tw=new Y.Z,Aw=new Y.Z,Pw=new Y.Z,Ew=new Y.Z,Mw=new Y.Z,kw=new Y.Z,Iw=new Y.Z,Ow=new Y.Z;_w.prototype.getClosestPointIndexOnTriangle=function(e,t,i){if((0,f.Z)(this._customAttributes)&&(0,f.Z)(this._customAttributes.positions)){const n=new Y.Z(e,t,i);n.x-=this._customAttributes.cartesianCenter.x,n.y-=this._customAttributes.cartesianCenter.y,n.z-=this._customAttributes.cartesianCenter.z,Ft.Z.multiplyByVector(this._customAttributes.parentRotation,n,n);let r,o,s,a,l=Number.MAX_VALUE;const c=this._customAttributes.positions,u=this._customAttributes.indices;let d;d=(0,f.Z)(u)?u.length:c.length/3;for(let e=0;e<d;e++){let t,i,d;(0,f.Z)(u)?(t=u[e],i=u[e+1],d=u[e+2]):(t=3*e,i=3*e+1,d=3*e+2);const h=Y.Z.fromElements(c[3*t],c[3*t+1],c[3*t+2],Cw),p=Y.Z.fromElements(c[3*i],c[3*i+1],c[3*i+2],Sw),m=new Y.Z(c[3*d],c[3*d+1],c[3*d+2],Tw);if(!xw(n,h,p,m)||!xw(n,p,h,m)||!xw(n,m,h,p))continue;const g=Y.Z.subtract(p,h,Aw),_=Y.Z.subtract(m,h,Pw),y=Y.Z.cross(g,_,Ew);if(0===Y.Z.magnitude(y))continue;const Z=Y.Z.normalize(y,Mw),v=Y.Z.subtract(n,h,kw),b=Math.abs(Y.Z.dot(v,Z));if(b<l){l=b,r=e;const c=Y.Z.magnitudeSquared(Y.Z.subtract(n,h,v)),u=Y.Z.magnitudeSquared(Y.Z.subtract(n,p,Iw)),f=Y.Z.magnitudeSquared(Y.Z.subtract(n,m,Ow));c<u&&c<f?(s=t,a=h,o=c):u<f?(s=i,a=p,o=u):(s=d,a=m,o=f)}}if((0,f.Z)(r))return{index:s,distanceSquared:o,distance:Math.sqrt(o),queriedPosition:n,closestPosition:Y.Z.clone(a)}}return{index:-1,distanceSquared:Number.Infinity,distance:Number.Infinity}},_w.prototype._generateGltf=function(e,t,i,n,r,o){let s,a={pbrMetallicRoughness:{metallicFactor:0},doubleSided:!0,name:"Material"},l=!1,c="";if((0,f.Z)(this._parent._data.mesh)&&(0,f.Z)(this._layer._data.materialDefinitions)){const e=this._parent._data.mesh.material.definition;if(e>=0&&e<this._layer._data.materialDefinitions.length&&(s=this._layer._data.materialDefinitions[e],a=s,(0,f.Z)(a.pbrMetallicRoughness)&&(0,f.Z)(a.pbrMetallicRoughness.baseColorTexture))){l=!0,a.pbrMetallicRoughness.baseColorTexture.index=0;let e="0";if((0,f.Z)(this._layer._data.textureSetDefinitions))for(let t=0;t<this._layer._data.textureSetDefinitions.length;t++){const i=this._layer._data.textureSetDefinitions[t];for(let t=0;t<i.formats.length;t++){const n=i.formats[t];if("jpg"===n.format){e=n.name;break}}}(0,f.Z)(this._parent._data.mesh)&&this._parent._data.mesh.material.resource>=0&&(c=this._layer.resource.getDerivedResource({url:`nodes/${this._parent._data.mesh.material.resource}/textures/${e}`}).url)}}else(0,f.Z)(this._parent._data.textureData)&&(l=!0,c=this._parent.resource.getDerivedResource({url:`${this._parent._data.textureData[0].href}`}).url,a.pbrMetallicRoughness.baseColorTexture={index:0});let u=[],d=[],h=[];return l&&(u=[{sampler:0,source:0}],d=[{uri:c}],h=[{magFilter:9729,minFilter:9986,wrapS:10497,wrapT:10497}]),{scene:0,scenes:[{nodes:e}],nodes:t,meshes:i,buffers:n,bufferViews:r,accessors:o,materials:[a],textures:u,images:d,samplers:h,asset:{version:"2.0"}}};const Bw=_w;function Rw(e,t,i){let n,r,o,s;i?(n=0,r=e):(n=e._level+1,r=e._layer),"number"==typeof t?o=t:s=e.resource.getDerivedResource({url:`${t}/`}),this._parent=e,this._dataProvider=e._dataProvider,this._isRoot=i,this._level=n,this._layer=r,this._nodeIndex=o,this._resource=s,this._isLoading=!1,this._tile=void 0,this._data=void 0,this._geometryData=[],this._featureData=[],this._fields={},this._children=[],this._childrenReadyPromise=void 0,this._globalTransform=void 0,this._inverseGlobalTransform=void 0,this._inverseRotationMatrix=void 0}function Fw(e,t,i,n){return n[e+t*i]}function Dw(e,t,i){const n=i.nativeExtent;let r=(e-n.west)/(n.east-n.west)*(i.width-1),o=(t-n.south)/(n.north-n.south)*(i.height-1);const s=Math.floor(r);let a=Math.floor(o);r-=s,o-=a;const l=s<i.width?s+1:s;let c=a<i.height?a+1:a;a=i.height-1-a,c=i.height-1-c;let u=(d=r,h=o,p=Fw(s,a,i.width,i.buffer),f=Fw(l,a,i.width,i.buffer),m=Fw(s,c,i.width,i.buffer),g=Fw(l,c,i.width,i.buffer),(p*(1-d)+f*d)*(1-h)+(m*(1-d)+g*d)*h);var d,h,p,f,m,g;return u=u*i.scale+i.offset,u}Object.defineProperties(Rw.prototype,{resource:{get:function(){return this._resource}},layer:{get:function(){return this._layer}},parent:{get:function(){return this._parent}},children:{get:function(){return this._children}},geometryData:{get:function(){return this._geometryData}},featureData:{get:function(){return this._featureData}},fields:{get:function(){return this._fields}},tile:{get:function(){return this._tile}},data:{get:function(){return this._data}}}),Rw.prototype.load=async function(){const e=this;function t(){if(!e._isRoot){const t=e._create3DTileDefinition();e._tile=new sZ.Z(e._layer._tileset,e._dataProvider.resource,t,e._parent._tile),e._tile._i3sNode=e}}if(!(0,f.Z)(this._nodeIndex)){const i=await Kw.loadJson(this._resource,this._dataProvider._traceFetches);return e._data=i,void t()}const i=await this._layer._getNodeInNodePages(this._nodeIndex);let n;e._data=i,e._isRoot?n="nodes/root/":(0,f.Z)(i.mesh)&&(n=`../${i.mesh.geometry.resource}/`),(0,f.Z)(n)&&(e._resource=e._parent.resource.getDerivedResource({url:n})),t()},Rw.prototype.loadFields=function(){const e=this._layer._data.attributeStorageInfo,t=this;function i(e,i){const n=new gw(t,e[i]);return t._fields[n._storageInfo.name]=n,n.load()}const n=[];if((0,f.Z)(e))for(let t=0;t<e.length;t++)n.push(i(e,t));return Promise.all(n)},Rw.prototype.getFieldsForPickedPosition=function(e){const t=this.geometryData[0];if(!(0,f.Z)(t.customAttributes.featureIndex))return{};const i=t.getClosestPointIndexOnTriangle(e.x,e.y,e.z);if(-1===i.index||i.index>t.customAttributes.featureIndex.length)return{};const n=t.customAttributes.featureIndex[i.index];return this.getFieldsForFeature(n)},Rw.prototype.getFieldsForFeature=function(e){const t={};for(const i in this.fields)if(this.fields.hasOwnProperty(i)){const n=this.fields[i];e>=0&&e<n.values.length&&(t[n.name]=n.values[e])}return t},Rw.prototype._loadChildren=function(){const e=this;if((0,f.Z)(this._childrenReadyPromise))return this._childrenReadyPromise;const t=[];if((0,f.Z)(e._data.children))for(let i=0;i<e._data.children.length;i++){const n=e._data.children[i],r=new Rw(e,(0,p.Z)(n.href,n),!1);e._children.push(r),t.push(r.load())}return this._childrenReadyPromise=Promise.all(t).then((function(){for(let t=0;t<e._children.length;t++)e._tile.children.push(e._children[t]._tile)})),this._childrenReadyPromise},Rw.prototype._loadGeometryData=function(){const e=[];if((0,f.Z)(this._data.geometryData))for(let t=0;t<this._data.geometryData.length;t++){const i=new Bw(this,this._data.geometryData[t].href);this._geometryData.push(i),e.push(i.load())}else if((0,f.Z)(this._data.mesh)){const t=this._layer._findBestGeometryBuffers(this._data.mesh.geometry.definition,["position","uv0"]),i=`./geometries/${t.bufferIndex}/`,n=new Bw(this,i);n._geometryDefinitions=t.definition,n._geometryBufferInfo=t.geometryBufferInfo,this._geometryData.push(n),e.push(n.load())}return Promise.all(e)},Rw.prototype._loadFeatureData=function(){const e=[];if((0,f.Z)(this._data.featureData))for(let t=0;t<this._data.featureData.length;t++){const i=new fw(this,this._data.featureData[t].href);this._featureData.push(i),e.push(i.load())}return Promise.all(e)},Rw.prototype._clearGeometryData=function(){this._geometryData=[]},Rw.prototype._create3DTileDefinition=function(){const e=this._data.obb,t=this._data.mbs;if(!(0,f.Z)(e)&&!(0,f.Z)(t))return void console.error("Failed to load I3S node. Bounding volume is required.");let i;if(i=(0,f.Z)(e)?Q.Z.fromDegrees(e.center[0],e.center[1],e.center[2]):Q.Z.fromDegrees(t[0],t[1],t[2]),(0,f.Z)(this._dataProvider._geoidDataList)&&(0,f.Z)(i))for(let e=0;e<this._dataProvider._geoidDataList.length;e++){const t=this._dataProvider._geoidDataList[e],n=t.projection.project(i);if(n.x>t.nativeExtent.west&&n.x<t.nativeExtent.east&&n.y>t.nativeExtent.south&&n.y<t.nativeExtent.north){i.height+=Dw(n.x,n.y,t);break}}let n,r={},o=0;(0,f.Z)(e)?(r={box:[0,0,0,e.halfSize[0],0,0,0,e.halfSize[1],0,0,0,e.halfSize[2]]},o=Math.max(Math.max(this._data.obb.halfSize[0],this._data.obb.halfSize[1]),this._data.obb.halfSize[2]),n=oe.Z.WGS84.cartographicToCartesian(i)):(r={sphere:[0,0,0,t[3]]},n=oe.Z.WGS84.cartographicToCartesian(i),o=this._data.mbs[3]),o*=2;let s=1/0;if((0,f.Z)(this._data.lodThreshold))"maxScreenThresholdSQ"===this._layer._data.nodePages.lodSelectionMetricType?s=o/Math.sqrt(this._data.lodThreshold/(.25*Math.PI)):"maxScreenThreshold"===this._layer._data.nodePages.lodSelectionMetricType?s=o/this._data.lodThreshold:console.error("Invalid lodSelectionMetricType in Layer");else if((0,f.Z)(this._data.lodSelection))for(let e=0;e<this._data.lodSelection.length;e++)"maxScreenThreshold"===this._data.lodSelection[e].metricType&&(s=o/this._data.lodSelection[e].maxError);s===1/0&&(s=1e5);const a=16*s,l=new ro.Z(0,0,0);let c=Dt.Z.headingPitchRollQuaternion(n,l);(0,f.Z)(this._data.obb)&&(c=new Ze.Z(this._data.obb.quaternion[0],this._data.obb.quaternion[1],this._data.obb.quaternion[2],this._data.obb.quaternion[3]));const u=Ft.Z.fromQuaternion(c),d=Ft.Z.inverse(u,new Ft.Z),h=new Mh.Z(u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,n.x,n.y,n.z,1),p=Mh.Z.inverse(h,new Mh.Z),m=Mh.Z.clone(h);(0,f.Z)(this._parent._globalTransform)&&Mh.Z.multiply(h,this._parent._inverseGlobalTransform,m),this._globalTransform=h,this._inverseGlobalTransform=p,this._inverseRotationMatrix=d;const g=[];for(let e=0;e<this._children.length;e++)g.push(this._children[e]._create3DTileDefinition());return{children:g,refine:"REPLACE",boundingVolume:r,transform:[m[0],m[4],m[8],m[12],m[1],m[5],m[9],m[13],m[2],m[6],m[10],m[14],m[3],m[7],m[11],m[15]],content:{uri:(0,f.Z)(this._resource)?this._resource.url:void 0},geometricError:a}},Rw.prototype._createI3SDecoderTask=async function(e,t){const i=t.geometryData._parent._data,n=t.geometryData._parent._inverseRotationMatrix;let r=0,o=0,s=0;(0,f.Z)(i.obb)?(r=i.obb.center[0],o=i.obb.center[1],s=i.obb.center[2]):(0,f.Z)(i.mbs)&&(r=i.mbs[0],o=i.mbs[1],s=i.mbs[2]);const a=Ft.Z.fromRotationX(-T.Z.PI_OVER_TWO),l=new Ft.Z;Ft.Z.multiply(a,n,l);const c=Q.Z.fromDegrees(r,o,s),u=oe.Z.WGS84.cartographicToCartesian(c),d={binaryData:t.geometryData._data,featureData:(0,f.Z)(t.featureData)&&(0,f.Z)(t.featureData[0])?t.featureData[0].data:void 0,schema:t.defaultGeometrySchema,bufferInfo:t.geometryData._geometryBufferInfo,ellipsoidRadiiSquare:oe.Z.WGS84.radiiSquared,url:t.url,geoidDataList:t.geometryData._dataProvider._geoidDataList,cartographicCenter:c,cartesianCenter:u,parentRotation:l};return e.scheduleTask(d,[])},Rw.prototype._createContentURL=async function(){let e={scene:0,scenes:[{nodes:[0]}],nodes:[{name:"singleNode"}],meshes:[],buffers:[],bufferViews:[],accessors:[],materials:[],textures:[],images:[],samplers:[],asset:{version:"2.0"}};const t=await this._dataProvider.getDecoderTaskProcessor(),i=[this._loadGeometryData()];this._dataProvider.legacyVersion16&&i.push(this._loadFeatureData());const n=this;return Promise.all(i).then((function(){let i=Promise.resolve();if((0,f.Z)(n._geometryData)&&n._geometryData.length>0){const r={geometryData:n._geometryData[0],featureData:n._featureData,defaultGeometrySchema:n._layer._data.store.defaultGeometrySchema,url:n._geometryData[0].resource.url,tile:n._tile},o=n._createI3SDecoderTask(t,r);if(!(0,f.Z)(o))return;i=o.then((function(t){e=r.geometryData._generateGltf(t.meshData.nodesInScene,t.meshData.nodes,t.meshData.meshes,t.meshData.buffers,t.meshData.bufferViews,t.meshData.accessors),n._geometryData[0]._customAttributes=t.meshData._customAttributes}))}return i.then((function(){const t=n._dataProvider._binarizeGltf(e),i=new Blob([t],{type:"application/binary"});return URL.createObjectURL(i)}))}))},sZ.Z.prototype._hookedRequestContent=sZ.Z.prototype.requestContent,sZ.Z.prototype.requestContent=function(){return this.tileset._isI3STileSet?this._isLoading?void 0:(this._isLoading=!0,this._i3sNode._createContentURL().then((e=>{if((0,f.Z)(e))return this._contentResource=new we.Z({url:e}),this._hookedRequestContent();this._isLoading=!1})).then((e=>(this._isLoading=!1,e)))):this._hookedRequestContent()},Object.defineProperties(sZ.Z.prototype,{i3sNode:{get:function(){return this._i3sNode}}});const Lw=Rw;function Vw(e,t,i){this._dataProvider=e,(0,f.Z)(t.href)||(t.href=`./layers/${i}`);const n=this._dataProvider.resource.getUrlComponent();let r="";r=n.match(/layers\/\d/)?`${n}`.replace(/\/+$/,""):`${n}`.replace(/\/?$/,"/").concat(`${t.href}`),this._version=t.store.version;const o=this._version.split(".");this._majorVersion=parseInt(o[0]),this._minorVersion=o.length>1?parseInt(o[1]):0,this._resource=new we.Z({url:r}),this._resource.setQueryParameters(this._dataProvider.resource.queryParameters),this._resource.appendForwardSlash(),this._data=t,this._rootNode=void 0,this._nodePages={},this._nodePageFetches={},this._extent=void 0,this._tileset=void 0,this._geometryDefinitions=void 0,this._computeGeometryDefinitions(!0),this._computeExtent()}Object.defineProperties(Vw.prototype,{resource:{get:function(){return this._resource}},rootNode:{get:function(){return this._rootNode}},tileset:{get:function(){return this._tileset}},data:{get:function(){return this._data}},version:{get:function(){return this._version}},majorVersion:{get:function(){return this._majorVersion}},minorVersion:{get:function(){return this._minorVersion}},legacyVersion16:{get:function(){if((0,f.Z)(this.version))return this.majorVersion<1||1===this.majorVersion&&this.minorVersion<=6}}}),Vw.prototype.load=async function(){if(4326!==this._data.spatialReference.wkid)throw new xe.Z(`Unsupported spatial reference: ${this._data.spatialReference.wkid}`);if(await this._dataProvider.loadGeoidData(),await this._loadRootNode(),await this._create3DTileset(),this._rootNode._tile=this._tileset._root,this._tileset._root._i3sNode=this._rootNode,this.legacyVersion16)return this._rootNode._loadChildren()},Vw.prototype._computeGeometryDefinitions=function(e){if(this._geometryDefinitions=[],(0,f.Z)(this._data.geometryDefinitions))for(let t=0;t<this._data.geometryDefinitions.length;t++){const i=[],n=this._data.geometryDefinitions[t].geometryBuffers;for(let t=0;t<n.length;t++){const r=n[t],o=[];let s=!1;if((0,f.Z)(r.compressedAttributes)&&e){s=!0;const e=r.compressedAttributes.attributes;for(let t=0;t<e.length;t++)o.push(e[t])}else for(const e in r)"offset"!==e&&o.push(e);i.push({compressed:s,attributes:o,index:n.indexOf(r)})}i.sort((function(e,t){return e.compressed&&!t.compressed?-1:!e.compressed&&t.compressed?1:e.attributes.length-t.attributes.length})),this._geometryDefinitions.push(i)}},Vw.prototype._findBestGeometryBuffers=function(e,t){const i=this._geometryDefinitions[e];if((0,f.Z)(i))for(let e=0;e<i.length;++e){const n=i[e];let r=!1;const o=n.attributes;for(let e=0;e<t.length;e++)if(!o.includes(t[e])){r=!0;break}if(!r)return{bufferIndex:n.index,definition:i,geometryBufferInfo:n}}return 0},Vw.prototype._loadRootNode=function(){if((0,f.Z)(this._data.nodePages)){let e=0;(0,f.Z)(this._data.nodePages.rootIndex)&&(e=this._data.nodePages.rootIndex),this._rootNode=new Lw(this,e,!0)}else this._rootNode=new Lw(this,this._data.store.rootNode,!0);return this._rootNode.load()},Vw.prototype._getNodeInNodePages=function(e){const t=Math.floor(e/this._data.nodePages.nodesPerPage),i=e%this._data.nodePages.nodesPerPage,n=this;return this._loadNodePage(t).then((function(){return n._nodePages[t][i]}))},Vw._fetchJson=function(e){return e.fetchJson()},Vw.prototype._loadNodePage=function(e){const t=this;if(!(0,f.Z)(this._nodePageFetches[e])){const i=this.resource.getDerivedResource({url:`nodepages/${e}/`}),n=Vw._fetchJson(i).then((function(i){return(0,f.Z)(i.error)&&200!==i.error.code?Promise.reject(i.error):(t._nodePages[e]=i.nodes,i)}));this._nodePageFetches[e]=n}return this._nodePageFetches[e]},Vw.prototype._computeExtent=function(){(0,f.Z)(this._data.fullExtent)?this._extent=ve.Z.fromDegrees(this._data.fullExtent.xmin,this._data.fullExtent.ymin,this._data.fullExtent.xmax,this._data.fullExtent.ymax):(0,f.Z)(this._data.store.extent)&&(this._extent=ve.Z.fromDegrees(this._data.store.extent[0],this._data.store.extent[1],this._data.store.extent[2],this._data.store.extent[3]))},Vw.prototype._create3DTileset=async function(){const e={asset:{version:"1.0"},geometricError:Number.MAX_VALUE,root:this._rootNode._create3DTileDefinition()},t=new Blob([JSON.stringify(e)],{type:"application/json"}),i=URL.createObjectURL(t),n={};if((0,f.Z)(this._dataProvider._cesium3dTilesetOptions))for(const e in this._dataProvider._cesium3dTilesetOptions)this._dataProvider._cesium3dTilesetOptions.hasOwnProperty(e)&&(n[e]=this._dataProvider._cesium3dTilesetOptions[e]);this._tileset=await XZ.Z.fromUrl(i,n),this._tileset.show=this._dataProvider.show,this._tileset._isI3STileSet=!0,this._tileset.tileUnload.addEventListener((function(e){e._i3sNode._clearGeometryData(),URL.revokeObjectURL(e._contentResource._url),e._contentResource=e._i3sNode.resource})),this._tileset.tileVisible.addEventListener((function(e){(0,f.Z)(e._i3sNode)&&e._i3sNode._loadChildren()}))};const Nw=Vw;var Uw=i(967197);function Gw(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._name=e.name,this._show=(0,p.Z)(e.show,!0),this._geoidTiledTerrainProvider=e.geoidTiledTerrainProvider,this._traceFetches=(0,p.Z)(e.traceFetches,!1),this._cesium3dTilesetOptions=(0,p.Z)(e.cesium3dTilesetOptions,p.Z.EMPTY_OBJECT),this._layers=[],this._data=void 0,this._extent=void 0,this._geoidDataPromise=void 0,this._geoidDataList=void 0,this._decoderTaskProcessor=void 0,this._taskProcessorReadyPromise=void 0,(0,f.Z)(e.url)&&((0,Rl.Z)("I3SDataProvider options.url","I3SDataProvider constructor parameter options.url was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use I3SDataProvider.fromUrl instead."),this._readyPromise=void 0,this._ready=!1,this._resource=we.Z.createIfNeeded(e.url),this._load())}Object.defineProperties(Gw.prototype,{name:{get:function(){return this._name}},show:{get:function(){return this._show},set:function(e){Ce.Z.defined("value",e),this._show=e;for(let e=0;e<this._layers.length;e++)(0,f.Z)(this._layers[e]._tileset)&&(this._layers[e]._tileset.show=this._show)}},traceFetches:{get:function(){return this._traceFetches},set:function(e){Ce.Z.defined("value",e),this._traceFetches=e}},geoidTiledTerrainProvider:{get:function(){return this._geoidTiledTerrainProvider}},layers:{get:function(){return this._layers}},data:{get:function(){return this._data}},extent:{get:function(){return this._extent}},readyPromise:{get:function(){return(0,Rl.Z)("I3SDataProvider.readyPromise","I3SDataProvider.readyPromise was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use I3SDataProvider.fromUrl instead."),this._readyPromise}},ready:{get:function(){return(0,Rl.Z)("I3SDataProvider.ready","I3SDataProvider.ready was deprecated in CesiumJS 1.104. It will be removed in 1.107. Use I3SDataProvider.fromUrl instead."),this._ready}},resource:{get:function(){return this._resource}}}),Gw.prototype.destroy=function(){for(let e=0;e<this._layers.length;e++)(0,f.Z)(this._layers[e]._tileset)&&this._layers[e]._tileset.destroy();return(0,Ug.Z)(this)},Gw.prototype.isDestroyed=function(){return!1},Gw.prototype.update=function(e){for(let t=0;t<this._layers.length;t++)(0,f.Z)(this._layers[t]._tileset)&&this._layers[t]._tileset.update(e)},Gw.prototype.prePassesUpdate=function(e){for(let t=0;t<this._layers.length;t++)(0,f.Z)(this._layers[t]._tileset)&&this._layers[t]._tileset.prePassesUpdate(e)},Gw.prototype.postPassesUpdate=function(e){for(let t=0;t<this._layers.length;t++)(0,f.Z)(this._layers[t]._tileset)&&this._layers[t]._tileset.postPassesUpdate(e)},Gw.prototype.updateForPass=function(e,t){for(let i=0;i<this._layers.length;i++)(0,f.Z)(this._layers[i]._tileset)&&this._layers[i]._tileset.updateForPass(e,t)},Gw.fromUrl=async function(e,t){Ce.Z.defined("url",e),t=(0,p.Z)(t,p.Z.EMPTY_OBJECT);const i=we.Z.createIfNeeded(e),n=await Gw.loadJson(i),r=new Gw(t);if(r._resource=i,r._data=n,(0,f.Z)(n.layers))for(let e=0;e<n.layers.length;e++){const t=new Nw(r,n.layers[e],e);r._layers.push(t)}else{const e=new Nw(r,n,n.id);r._layers.push(e)}r._computeExtent();const o=[];for(let e=0;e<r._layers.length;e++)o.push(r._layers[e].load());return await Promise.all(o),r._ready=!0,r._readyPromise=Promise.resolve(r),r},Gw.prototype._load=function(){const e=this;return this._readyPromise=Gw.loadJson(this._resource,this._traceFetches).then((function(t){if(e._data=t,(0,f.Z)(t.layers))for(let i=0;i<t.layers.length;i++){const n=new Nw(e,t.layers[i],i);e._layers.push(n)}else{const i=new Nw(e,t,t.id);e._layers.push(i)}e._computeExtent();const i=[];for(let t=0;t<e._layers.length;t++)i.push(e._layers[t].load());return Promise.all(i).then((function(){return e._ready=!0,e}))})),this._readyPromise},Gw._fetchJson=function(e){return e.fetchJson()},Gw.loadJson=async function(e,t){t&&console.log("I3S FETCH:",e.url);const i=await Gw._fetchJson(e);if((0,f.Z)(i.error)){if(console.error("Failed to fetch I3S ",e.url),(0,f.Z)(i.error.message)&&console.error(i.error.message),(0,f.Z)(i.error.details))for(let e=0;e<i.error.details.length;e++)console.log(i.error.details[e]);throw new xe.Z(i.error)}return i},Gw.prototype._loadBinary=function(e){return this._traceFetches&&console.log("I3S FETCH:",e.url),e.fetchArrayBuffer()},Gw.prototype._binarizeGltf=function(e){const t=(new TextEncoder).encode(JSON.stringify(e)),i=new Uint8Array(t.byteLength+20),n={magic:new Uint8Array(i.buffer,0,4),version:new Uint32Array(i.buffer,4,1),length:new Uint32Array(i.buffer,8,1),chunkLength:new Uint32Array(i.buffer,12,1),chunkType:new Uint32Array(i.buffer,16,1),chunkData:new Uint8Array(i.buffer,20,t.byteLength)};return n.magic[0]="g".charCodeAt(),n.magic[1]="l".charCodeAt(),n.magic[2]="T".charCodeAt(),n.magic[3]="F".charCodeAt(),n.version[0]=2,n.length[0]=i.byteLength,n.chunkLength[0]=t.byteLength,n.chunkType[0]=1313821514,n.chunkData.set(t),i},Gw.prototype.getDecoderTaskProcessor=function(){if((0,f.Z)(this._taskProcessorReadyPromise))return this._taskProcessorReadyPromise;if(!(0,f.Z)(this._decoderTaskProcessor)){const e=new Qp.Z("decodeI3S");this._taskProcessorReadyPromise=e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((()=>e)),this._decoderTaskProcessor=e}return this._taskProcessorReadyPromise};const zw=new d.Z;Gw.prototype.loadGeoidData=async function(){return(0,f.Z)(this._geoidDataPromise)||(this._geoidDataPromise=async function(e){const t=e._geoidTiledTerrainProvider;if((0,f.Z)(t))try{const r=await(i=t,n=e._extent,function(e,t){const i=e.tilingScheme,n=[],r={},o=e._lodCount,s=Q.Z.fromRadians(t.west,t.north),a=Q.Z.fromRadians(t.east,t.south),l=i.positionToTileXY(s,o),c=i.positionToTileXY(a,o);for(let t=l.x;t<=c.x;t++)for(let s=l.y;s<=c.y;s++){const a=d.Z.fromElements(t,s,zw),l=a.toString();if(!r.hasOwnProperty(l)){const t={x:a.x,y:a.y,level:o,tilingScheme:i,terrainProvider:e,positions:[]};r[l]=t,n.push(t)}}const u=[];for(let e=0;e<n.length;++e){const t=n[e],i=t.terrainProvider.requestTileGeometry(t.x,t.y,t.level);u.push(i)}return Promise.all(u).then((function(e){const t=[];for(let r=0;r<e.length;r++){const o={tilingScheme:i,x:n[r].x,y:n[r].y,level:n[r].level},s=e[r];let a="Geographic";i._projection instanceof Xg.Z&&(a="WebMercator");const l={projectionType:a,projection:i._projection,nativeExtent:i.tileXYToNativeRectangle(o.x,o.y,o.level),height:s._height,width:s._width,scale:s._structure.heightScale,offset:s._structure.heightOffset};if(s._encoding===nh.Z.LERC){const e=Uw.decode(s._buffer);l.buffer=e.pixels[0]}else l.buffer=s._buffer;t.push(l)}return t}))}(i,n));e._geoidDataList=r}catch(e){console.log("Error retrieving Geoid Terrain tiles - no geoid conversion will be performed.")}else console.log("No Geoid Terrain service provided - no geoid conversion will be performed.");var i,n}(this)),this._geoidDataPromise},Gw.prototype._computeExtent=function(){let e;for(let t=0;t<this._layers.length;t++)if((0,f.Z)(this._layers[t]._extent)){const i=this._layers[t]._extent;(0,f.Z)(e)?ve.Z.union(e,i,e):e=ve.Z.clone(i)}this._extent=e};const Kw=Gw;var qw=i(301330),Hw=i(135595),Ww=i(975409),jw=i(18929),Jw=i(244167),Xw=i(663630),$w=i(769426),Yw=i(544930),Qw=i(447261),ex=i(781495),tx=i(666093),ix=i(616130),nx=i(299260),rx=i(272490),ox=i(183839),sx=i(588632),ax=i(741741),lx=i(11951),cx=i(754672),ux=i(788844),dx=i(548410),hx=i(951663),px=i(185447);function fx(){}Object.defineProperties(fx.prototype,{color:{get:S.Z.throwInstantiationError},intensity:{get:S.Z.throwInstantiationError}});const mx=fx;var gx=i(305515),_x=i(636452),yx=i(267428);const Zx=/\/$/,vx=new ne.Z('&copy; <a href="https://www.mapbox.com/about/maps/">Mapbox</a> &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> <strong><a href="https://www.mapbox.com/map-feedback/">Improve this map</a></strong>');function bx(e){const t=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).styleId;if(!(0,f.Z)(t))throw new S.Z("options.styleId is required.");const i=e.accessToken;if(!(0,f.Z)(i))throw new S.Z("options.accessToken is required.");this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0;const n=we.Z.createIfNeeded((0,p.Z)(e.url,"https://api.mapbox.com/styles/v1/"));this._styleId=t,this._accessToken=i;const r=(0,p.Z)(e.tilesize,512);this._tilesize=r;const o=(0,p.Z)(e.username,"mapbox");this._username=o;const s=(0,f.Z)(e.scaleFactor)?"@2x":"";let a,l=n.getUrlComponent();Zx.test(l)||(l+="/"),l+=`${this._username}/${t}/tiles/${this._tilesize}/{z}/{x}/{y}${s}`,n.url=l,n.setQueryParameters({access_token:i}),(0,f.Z)(e.credit)?(a=e.credit,"string"==typeof a&&(a=new ne.Z(a))):a=vx,this._resource=n,this._imageryProvider=new yx.Z({url:n,credit:a,ellipsoid:e.ellipsoid,minimumLevel:e.minimumLevel,maximumLevel:e.maximumLevel,rectangle:e.rectangle}),this._ready=!0,this._readyPromise=Promise.resolve(!0)}Object.defineProperties(bx.prototype,{url:{get:function(){return this._imageryProvider.url}},ready:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.ready","MapboxStyleImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider.ready}},readyPromise:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.readyPromise","MapboxStyleImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._imageryProvider.readyPromise}},rectangle:{get:function(){return this._imageryProvider.rectangle}},tileWidth:{get:function(){return this._imageryProvider.tileWidth}},tileHeight:{get:function(){return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._imageryProvider.errorEvent}},credit:{get:function(){return this._imageryProvider.credit}},proxy:{get:function(){return this._imageryProvider.proxy}},hasAlphaChannel:{get:function(){return this._imageryProvider.hasAlphaChannel}},defaultAlpha:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultAlpha","MapboxStyleImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultAlpha","MapboxStyleImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultNightAlpha","MapboxStyleImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultNightAlpha","MapboxStyleImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultDayAlpha","MapboxStyleImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultDayAlpha","MapboxStyleImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultBrightness","MapboxStyleImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultBrightness","MapboxStyleImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultContrast","MapboxStyleImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultContrast","MapboxStyleImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultHue","MapboxStyleImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultHue","MapboxStyleImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultSaturation","MapboxStyleImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultSaturation","MapboxStyleImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultGamma","MapboxStyleImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultGamma","MapboxStyleImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultMinificationFilter","MapboxStyleImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultMinificationFilter","MapboxStyleImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,Rl.Z)("MapboxStyleImageryProvider.defaultMagnificationFilter","MapboxStyleImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,Rl.Z)("MapboxStyleImageryProvider.defaultMagnificationFilter","MapboxStyleImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),bx.prototype.getTileCredits=function(e,t,i){},bx.prototype.requestImage=function(e,t,i,n){return this._imageryProvider.requestImage(e,t,i,n)},bx.prototype.pickFeatures=function(e,t,i,n,r){return this._imageryProvider.pickFeatures(e,t,i,n,r)},bx._defaultCredit=vx;const wx=bx;var xx=i(71880),Cx=i(536814),Sx=i(943881),Tx=i(132866),Ax=i(832670),Px=i(529394),Ex=i(868129),Mx=i(700627),kx=i(640397),Ix=i(756366),Ox=i(62935),Bx=i(285605),Rx=i(607441),Fx=i(583982),Dx=i(511877),Lx=i(284134),Vx=i(395075),Nx=i(578990),Ux=i(394472),Gx=i(586360),zx=i(762041);const Kx=new d.Z(1,1);function qx(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this.mass=(0,p.Z)(e.mass,1),this.position=Y.Z.clone((0,p.Z)(e.position,Y.Z.ZERO)),this.velocity=Y.Z.clone((0,p.Z)(e.velocity,Y.Z.ZERO)),this.life=(0,p.Z)(e.life,Number.MAX_VALUE),this.image=e.image,this.startColor=h.Z.clone((0,p.Z)(e.startColor,h.Z.WHITE)),this.endColor=h.Z.clone((0,p.Z)(e.endColor,h.Z.WHITE)),this.startScale=(0,p.Z)(e.startScale,1),this.endScale=(0,p.Z)(e.endScale,1),this.imageSize=d.Z.clone((0,p.Z)(e.imageSize,Kx)),this._age=0,this._normalizedAge=0,this._billboard=void 0}Object.defineProperties(qx.prototype,{age:{get:function(){return this._age}},normalizedAge:{get:function(){return this._normalizedAge}}});const Hx=new Y.Z;qx.prototype.update=function(e,t){return Y.Z.multiplyByScalar(this.velocity,e,Hx),Y.Z.add(this.position,Hx,this.position),(0,f.Z)(t)&&t(this,e),this._age+=e,this.life===Number.MAX_VALUE?this._normalizedAge=0:this._normalizedAge=this._age/this.life,this._age<=this.life};const Wx=qx;function jx(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this.time=(0,p.Z)(e.time,0),this.minimum=(0,p.Z)(e.minimum,0),this.maximum=(0,p.Z)(e.maximum,50),this._complete=!1}Object.defineProperties(jx.prototype,{complete:{get:function(){return this._complete}}});const Jx=jx;function Xx(e){throw new S.Z("This type should not be instantiated directly.  Instead, use BoxEmitter, CircleEmitter, ConeEmitter or SphereEmitter.")}Xx.prototype.emit=function(e){S.Z.throwInstantiationError()};const $x=Xx,Yx=new d.Z(1,1);function Qx(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this.show=(0,p.Z)(e.show,!0),this.updateCallback=e.updateCallback,this.loop=(0,p.Z)(e.loop,!0),this.image=(0,p.Z)(e.image,void 0);let t=e.emitter;(0,f.Z)(t)||(t=new ov(.5)),this._emitter=t,this._bursts=e.bursts,this._modelMatrix=Mh.Z.clone((0,p.Z)(e.modelMatrix,Mh.Z.IDENTITY)),this._emitterModelMatrix=Mh.Z.clone((0,p.Z)(e.emitterModelMatrix,Mh.Z.IDENTITY)),this._matrixDirty=!0,this._combinedMatrix=new Mh.Z,this._startColor=h.Z.clone((0,p.Z)(e.color,(0,p.Z)(e.startColor,h.Z.WHITE))),this._endColor=h.Z.clone((0,p.Z)(e.color,(0,p.Z)(e.endColor,h.Z.WHITE))),this._startScale=(0,p.Z)(e.scale,(0,p.Z)(e.startScale,1)),this._endScale=(0,p.Z)(e.scale,(0,p.Z)(e.endScale,1)),this._emissionRate=(0,p.Z)(e.emissionRate,5),this._minimumSpeed=(0,p.Z)(e.speed,(0,p.Z)(e.minimumSpeed,1)),this._maximumSpeed=(0,p.Z)(e.speed,(0,p.Z)(e.maximumSpeed,1)),this._minimumParticleLife=(0,p.Z)(e.particleLife,(0,p.Z)(e.minimumParticleLife,5)),this._maximumParticleLife=(0,p.Z)(e.particleLife,(0,p.Z)(e.maximumParticleLife,5)),this._minimumMass=(0,p.Z)(e.mass,(0,p.Z)(e.minimumMass,1)),this._maximumMass=(0,p.Z)(e.mass,(0,p.Z)(e.maximumMass,1)),this._minimumImageSize=d.Z.clone((0,p.Z)(e.imageSize,(0,p.Z)(e.minimumImageSize,Yx))),this._maximumImageSize=d.Z.clone((0,p.Z)(e.imageSize,(0,p.Z)(e.maximumImageSize,Yx))),this._sizeInMeters=(0,p.Z)(e.sizeInMeters,!1),this._lifetime=(0,p.Z)(e.lifetime,Number.MAX_VALUE),this._billboardCollection=void 0,this._particles=[],this._particlePool=[],this._previousTime=void 0,this._currentTime=0,this._carryOver=0,this._complete=new m.Z,this._isComplete=!1,this._updateParticlePool=!0,this._particleEstimate=0}function eC(e){let t=e._particlePool.pop();return(0,f.Z)(t)||(t=new Wx),t}function tC(e,t){e._particlePool.push(t)}function iC(e){(0,f.Z)(e._billboard)&&(e._billboard.show=!1)}function nC(e,t){let i=t._billboard;(0,f.Z)(i)||(i=t._billboard=e._billboardCollection.add({image:t.image})),i.width=t.imageSize.x,i.height=t.imageSize.y,i.position=t.position,i.sizeInMeters=e.sizeInMeters,i.show=!0;const n=T.Z.lerp(t.startColor.red,t.endColor.red,t.normalizedAge),r=T.Z.lerp(t.startColor.green,t.endColor.green,t.normalizedAge),o=T.Z.lerp(t.startColor.blue,t.endColor.blue,t.normalizedAge),s=T.Z.lerp(t.startColor.alpha,t.endColor.alpha,t.normalizedAge);i.color=new h.Z(n,r,o,s),i.scale=T.Z.lerp(t.startScale,t.endScale,t.normalizedAge)}function rC(e,t){t.startColor=h.Z.clone(e._startColor,t.startColor),t.endColor=h.Z.clone(e._endColor,t.endColor),t.startScale=e._startScale,t.endScale=e._endScale,t.image=e.image,t.life=T.Z.randomBetween(e._minimumParticleLife,e._maximumParticleLife),t.mass=T.Z.randomBetween(e._minimumMass,e._maximumMass),t.imageSize.x=T.Z.randomBetween(e._minimumImageSize.x,e._maximumImageSize.x),t.imageSize.y=T.Z.randomBetween(e._minimumImageSize.y,e._maximumImageSize.y),t._normalizedAge=0,t._age=0;const i=T.Z.randomBetween(e._minimumSpeed,e._maximumSpeed);Y.Z.multiplyByScalar(t.velocity,i,t.velocity),e._particles.push(t)}Object.defineProperties(Qx.prototype,{emitter:{get:function(){return this._emitter},set:function(e){Ce.Z.defined("value",e),this._emitter=e}},bursts:{get:function(){return this._bursts},set:function(e){this._bursts=e,this._updateParticlePool=!0}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){Ce.Z.defined("value",e),this._matrixDirty=this._matrixDirty||!Mh.Z.equals(this._modelMatrix,e),Mh.Z.clone(e,this._modelMatrix)}},emitterModelMatrix:{get:function(){return this._emitterModelMatrix},set:function(e){Ce.Z.defined("value",e),this._matrixDirty=this._matrixDirty||!Mh.Z.equals(this._emitterModelMatrix,e),Mh.Z.clone(e,this._emitterModelMatrix)}},startColor:{get:function(){return this._startColor},set:function(e){Ce.Z.defined("value",e),h.Z.clone(e,this._startColor)}},endColor:{get:function(){return this._endColor},set:function(e){Ce.Z.defined("value",e),h.Z.clone(e,this._endColor)}},startScale:{get:function(){return this._startScale},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._startScale=e}},endScale:{get:function(){return this._endScale},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._endScale=e}},emissionRate:{get:function(){return this._emissionRate},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._emissionRate=e,this._updateParticlePool=!0}},minimumSpeed:{get:function(){return this._minimumSpeed},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumSpeed=e}},maximumSpeed:{get:function(){return this._maximumSpeed},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumSpeed=e}},minimumParticleLife:{get:function(){return this._minimumParticleLife},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumParticleLife=e}},maximumParticleLife:{get:function(){return this._maximumParticleLife},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumParticleLife=e,this._updateParticlePool=!0}},minimumMass:{get:function(){return this._minimumMass},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumMass=e}},maximumMass:{get:function(){return this._maximumMass},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMass=e}},minimumImageSize:{get:function(){return this._minimumImageSize},set:function(e){Ce.Z.typeOf.object("value",e),Ce.Z.typeOf.number.greaterThanOrEquals("value.x",e.x,0),Ce.Z.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._minimumImageSize=e}},maximumImageSize:{get:function(){return this._maximumImageSize},set:function(e){Ce.Z.typeOf.object("value",e),Ce.Z.typeOf.number.greaterThanOrEquals("value.x",e.x,0),Ce.Z.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._maximumImageSize=e}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){Ce.Z.typeOf.bool("value",e),this._sizeInMeters=e}},lifetime:{get:function(){return this._lifetime},set:function(e){Ce.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._lifetime=e}},complete:{get:function(){return this._complete}},isComplete:{get:function(){return this._isComplete}}});const oC=new Y.Z;Qx.prototype.update=function(e){if(!this.show)return;(0,f.Z)(this._billboardCollection)||(this._billboardCollection=new Gy.Z),this._updateParticlePool&&(function(e){const t=e._emissionRate,i=e._maximumParticleLife;let n=0;const r=e._bursts;if((0,f.Z)(r)){const e=r.length;for(let t=0;t<e;++t)n+=r[t].maximum}const o=e._billboardCollection,s=e.image,a=Math.ceil(t*i+n),l=e._particles,c=e._particlePool,u=Math.max(a-l.length-c.length,0);for(let e=0;e<u;++e){const e=new Wx;e._billboard=o.add({image:s,show:!1}),c.push(e)}e._particleEstimate=a}(this),this._updateParticlePool=!1);let t=0;this._previousTime&&(t=fe.Z.secondsDifference(e.time,this._previousTime)),t<0&&(t=0);const i=this._particles,n=this._emitter,r=this.updateCallback;let o,s,a=i.length;for(o=0;o<a;++o)s=i[o],s.update(t,r)?nC(this,s):(iC(s),tC(this,s),i[o]=i[a-1],--o,--a);i.length=a;const l=function(e,t){if(e._isComplete)return 0;const i=(t=T.Z.mod(t,e._lifetime))*e._emissionRate;let n=Math.floor(i);if(e._carryOver+=i-n,e._carryOver>1&&(n++,e._carryOver-=1),(0,f.Z)(e.bursts)){const t=e.bursts.length;for(let i=0;i<t;i++){const t=e.bursts[i],r=e._currentTime;(0,f.Z)(t)&&!t._complete&&r>t.time&&(n+=T.Z.randomBetween(t.minimum,t.maximum),t._complete=!0)}}return n}(this,t);if(l>0&&(0,f.Z)(n)){this._matrixDirty&&(this._combinedMatrix=Mh.Z.multiply(this.modelMatrix,this.emitterModelMatrix,this._combinedMatrix),this._matrixDirty=!1);const e=this._combinedMatrix;for(o=0;o<l;o++)s=eC(this),this._emitter.emit(s),Y.Z.add(s.position,s.velocity,oC),Mh.Z.multiplyByPoint(e,oC,oC),s.position=Mh.Z.multiplyByPoint(e,s.position,s.position),Y.Z.subtract(oC,s.position,s.velocity),Y.Z.normalize(s.velocity,s.velocity),rC(this,s),nC(this,s)}if(this._billboardCollection.update(e),this._previousTime=fe.Z.clone(e.time,this._previousTime),this._currentTime+=t,this._lifetime!==Number.MAX_VALUE&&this._currentTime>this._lifetime)if(this.loop){if(this._currentTime=T.Z.mod(this._currentTime,this._lifetime),this.bursts){const e=this.bursts.length;for(o=0;o<e;o++)this.bursts[o]._complete=!1}}else this._isComplete=!0,this._complete.raiseEvent(this);e.frameNumber%120==0&&function(e){const t=e._particles,i=e._particlePool,n=e._billboardCollection,r=t.length,o=i.length,s=e._particleEstimate,a=o-Math.max(s-r-o,0);for(let e=a;e<o;++e){const t=i[e];n.remove(t._billboard)}i.length=a}(this)},Qx.prototype.isDestroyed=function(){return!1},Qx.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),(0,Ug.Z)(this)};const sC=Qx;var aC=i(104763),lC=i(95166),cC=i(982886),uC=i(536464),dC=i(656506),hC=i(229029),pC=i(773517),fC=i(978701),mC=i(270550),gC=i(993910),_C=i(197025),yC=i(127004),ZC=i(763543),vC=i(999604),bC=i(44799),wC=i(152127),xC=i(998964),CC=i(121853),SC=i(502144),TC=i(343761),AC=i(108839),PC=i(883900),EC=i(831970),MC=i(232613),kC=i(23178),IC=i(557073),OC=i(845449),BC=i(600959),RC=i(870320),FC=i(642898),DC=i(990735),LC=i(640365),VC=i(145615),NC=i(715372);function UC(){S.Z.throwInstantiationError()}UC.computeDefaultLevelZeroMaximumGeometricError=function(e){return 2*e.ellipsoid.maximumRadius*Math.PI*.25/(65*e.getNumberOfXTilesAtLevel(0))},Object.defineProperties(UC.prototype,{quadtree:{get:S.Z.throwInstantiationError,set:S.Z.throwInstantiationError},ready:{get:S.Z.throwInstantiationError},tilingScheme:{get:S.Z.throwInstantiationError},errorEvent:{get:S.Z.throwInstantiationError}}),UC.prototype.update=S.Z.throwInstantiationError,UC.prototype.beginUpdate=S.Z.throwInstantiationError,UC.prototype.endUpdate=S.Z.throwInstantiationError,UC.prototype.getLevelMaximumGeometricError=S.Z.throwInstantiationError,UC.prototype.loadTile=S.Z.throwInstantiationError,UC.prototype.computeTileVisibility=S.Z.throwInstantiationError,UC.prototype.showTileThisFrame=S.Z.throwInstantiationError,UC.prototype.computeDistanceToTile=S.Z.throwInstantiationError,UC.prototype.isDestroyed=S.Z.throwInstantiationError,UC.prototype.destroy=S.Z.throwInstantiationError;const GC=UC;var zC=i(236879),KC=i(919490),qC=i(757587),HC=i(897955),WC=i(851986),jC=i(817271),JC=i(17993),XC=i(638452),$C=i(645875),YC=i(741469),QC=i(878354),eS=i(857373),tS=i(773983),iS=i(586085),nS=i(987411),rS=i(106233),oS=i(548567);function sS(e){e=(0,p.Z)(e,1),Ce.Z.typeOf.number.greaterThan("radius",e,0),this._radius=(0,p.Z)(e,1)}Object.defineProperties(sS.prototype,{radius:{get:function(){return this._radius},set:function(e){Ce.Z.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),sS.prototype.emit=function(e){const t=T.Z.randomBetween(0,T.Z.TWO_PI),i=T.Z.randomBetween(0,T.Z.PI),n=T.Z.randomBetween(0,this._radius),r=n*Math.cos(t)*Math.sin(i),o=n*Math.sin(t)*Math.sin(i),s=n*Math.cos(i);e.position=Y.Z.fromElements(r,o,s,e.position),e.velocity=Y.Z.normalize(e.position,e.velocity)};const aS=sS;var lS=i(347962),cS=i(37002),uS=i(822948),dS=i(489709),hS=i(721902),pS=i(764172);function fS(){}fS.prototype.evaluate=function(e,t){S.Z.throwInstantiationError()},fS.prototype.evaluateColor=function(e,t){S.Z.throwInstantiationError()},fS.prototype.getShaderFunction=function(e,t,i,n){S.Z.throwInstantiationError()},fS.prototype.getVariables=function(){S.Z.throwInstantiationError()};const mS=fS;var gS=i(450634),_S=i(582304),yS=i(963478),ZS=i(748990),vS=i(728779),bS=i(228714),wS=i(388973),xS=i(146708),CS=i(473493),SS=i(525387),TS=i(175084);function AS(){}AS.prototype.boundingVolume=void 0,AS.prototype.boundingSphere=void 0,AS.prototype.distanceToCamera=function(e){S.Z.throwInstantiationError()},AS.prototype.intersectPlane=function(e){S.Z.throwInstantiationError()},AS.prototype.createDebugVolume=function(e){S.Z.throwInstantiationError()};const PS=AS;function ES(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT),this._tilingScheme=(0,f.Z)(e.tilingScheme)?e.tilingScheme:new ih.Z({ellipsoid:e.ellipsoid}),this._color=(0,p.Z)(e.color,h.Z.YELLOW),this._errorEvent=new m.Z,this._tileWidth=(0,p.Z)(e.tileWidth,256),this._tileHeight=(0,p.Z)(e.tileHeight,256),this._ready=!0,this._readyPromise=Promise.resolve(!0),this._defaultAlpha=void 0,this._defaultNightAlpha=void 0,this._defaultDayAlpha=void 0,this._defaultBrightness=void 0,this._defaultContrast=void 0,this._defaultHue=void 0,this._defaultSaturation=void 0,this._defaultGamma=void 0,this._defaultMinificationFilter=void 0,this._defaultMagnificationFilter=void 0}Object.defineProperties(ES.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.ready","TileCoordinatesImageryProvider.ready was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),!0}},readyPromise:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.readyPromise","TileCoordinatesImageryProvider.readyPromise was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107."),this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}},defaultAlpha:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultAlpha","TileCoordinatesImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultAlpha","TileCoordinatesImageryProvider.defaultAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.alpha instead."),this._defaultAlpha=e}},defaultNightAlpha:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultNightAlpha","TileCoordinatesImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultNightAlpha","TileCoordinatesImageryProvider.defaultNightAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.nightAlpha instead."),this._defaultNightAlpha=e}},defaultDayAlpha:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultDayAlpha","TileCoordinatesImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultDayAlpha","TileCoordinatesImageryProvider.defaultDayAlpha was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.dayAlpha instead."),this._defaultDayAlpha=e}},defaultBrightness:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultBrightness","TileCoordinatesImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultBrightness","TileCoordinatesImageryProvider.defaultBrightness was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.brightness instead."),this._defaultBrightness=e}},defaultContrast:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultContrast","TileCoordinatesImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultContrast","TileCoordinatesImageryProvider.defaultContrast was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.contrast instead."),this._defaultContrast=e}},defaultHue:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultHue","TileCoordinatesImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultHue","TileCoordinatesImageryProvider.defaultHue was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.hue instead."),this._defaultHue=e}},defaultSaturation:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultSaturation","TileCoordinatesImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultSaturation","TileCoordinatesImageryProvider.defaultSaturation was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.saturation instead."),this._defaultSaturation=e}},defaultGamma:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultGamma","TileCoordinatesImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultGamma","TileCoordinatesImageryProvider.defaultGamma was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.gamma instead."),this._defaultGamma=e}},defaultMinificationFilter:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultMinificationFilter","TileCoordinatesImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultMinificationFilter","TileCoordinatesImageryProvider.defaultMinificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.minificationFilter instead."),this._defaultMinificationFilter=e}},defaultMagnificationFilter:{get:function(){return(0,Rl.Z)("TileCoordinatesImageryProvider.defaultMagnificationFilter","TileCoordinatesImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter},set:function(e){(0,Rl.Z)("TileCoordinatesImageryProvider.defaultMagnificationFilter","TileCoordinatesImageryProvider.defaultMagnificationFilter was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use ImageryLayer.magnificationFilter instead."),this._defaultMagnificationFilter=e}}}),ES.prototype.getTileCredits=function(e,t,i){},ES.prototype.requestImage=function(e,t,i,n){const r=document.createElement("canvas");r.width=256,r.height=256;const o=r.getContext("2d"),s=this._color.toCssColorString();return o.strokeStyle=s,o.lineWidth=2,o.strokeRect(1,1,255,255),o.font="bold 25px Arial",o.textAlign="center",o.fillStyle=s,o.fillText(`L: ${i}`,124,86),o.fillText(`X: ${e}`,124,136),o.fillText(`Y: ${t}`,124,186),Promise.resolve(r)},ES.prototype.pickFeatures=function(e,t,i,n,r){};const MS=ES;function kS(e){S.Z.throwInstantiationError()}kS.prototype.isReady=S.Z.throwInstantiationError,kS.prototype.shouldDiscardImage=S.Z.throwInstantiationError;const IS=kS;var OS=i(701077),BS=i(619233),RS=i(740929),FS=i(256927),DS=i(403391),LS=i(565760);const VS=Object.freeze({START:0,LOADING:1,READY:2,UPSAMPLED_ONLY:3});var NS=i(914238),US=i(971437),GS=i(587939),zS=i(91575),KS=i(951552),qS=i(886855),HS=i(268295),WS=i(579229),jS=i(529032),JS=i(142943),XS=i(505368),$S=i(17202),YS=i(659398),QS=i(843955),eT=i(193030),tT=i(677684),iT=i(720813);function nT(e,t){this.show=!0,(0,f.Z)(e)||(e=new $.Z),this.rectangle=$.Z.clone(e),(0,f.Z)(t)||(t=Cb.Z.fromType(Cb.Z.ColorType,{color:new h.Z(1,1,1,1)})),this.material=t,this._material=void 0,this._overlayCommand=void 0,this._rs=void 0}nT.prototype.update=function(e){if(!this.show)return;if(!(0,f.Z)(this.material))throw new S.Z("this.material must be defined.");if(!(0,f.Z)(this.rectangle))throw new S.Z("this.rectangle must be defined.");const t=this._rs;if((0,f.Z)(t)&&$.Z.equals(t.viewport,this.rectangle)||(this._rs=kd.Z.fromCache({blending:jy.Z.ALPHA_BLEND,viewport:this.rectangle})),e.passes.render){const t=e.context;if(this._material!==this.material||!(0,f.Z)(this._overlayCommand)){this._material=this.material,(0,f.Z)(this._overlayCommand)&&this._overlayCommand.shaderProgram.destroy();const e=new Nd.Z({sources:[this._material.shaderSource,Ay]});this._overlayCommand=t.createViewportQuadCommand(e,{renderState:this._rs,uniformMap:this._material._uniforms,owner:this}),this._overlayCommand.pass=Pd.Z.OVERLAY}this._material.update(t),this._overlayCommand.renderState=this._rs,this._overlayCommand.uniformMap=this._material._uniforms,e.commandList.push(this._overlayCommand)}},nT.prototype.isDestroyed=function(){return!1},nT.prototype.destroy=function(){return(0,f.Z)(this._overlayCommand)&&(this._overlayCommand.shaderProgram=this._overlayCommand.shaderProgram&&this._overlayCommand.shaderProgram.destroy()),(0,Ug.Z)(this)};const rT=nT;var oT=i(699192),sT=i(744715);function aT(){S.Z.throwInstantiationError()}Object.defineProperties(aT.prototype,{ready:{get:S.Z.throwInstantiationError},readyPromise:{get:S.Z.throwInstantiationError},globalTransform:{get:S.Z.throwInstantiationError},shapeTransform:{get:S.Z.throwInstantiationError},shape:{get:S.Z.throwInstantiationError},minBounds:{get:S.Z.throwInstantiationError},maxBounds:{get:S.Z.throwInstantiationError},dimensions:{get:S.Z.throwInstantiationError},paddingBefore:{get:S.Z.throwInstantiationError},paddingAfter:{get:S.Z.throwInstantiationError},names:{get:S.Z.throwInstantiationError},types:{get:S.Z.throwInstantiationError},componentTypes:{get:S.Z.throwInstantiationError},minimumValues:{get:S.Z.throwInstantiationError},maximumValues:{get:S.Z.throwInstantiationError},maximumTileCount:{get:S.Z.throwInstantiationError},keyframeCount:{get:S.Z.throwInstantiationError},timeIntervalCollection:{get:S.Z.throwInstantiationError}}),aT.prototype.requestData=S.Z.throwInstantiationError;const lT=aT;var cT=i(559594);function uT(){S.Z.throwInstantiationError()}Object.defineProperties(uT.prototype,{orientedBoundingBox:{get:S.Z.throwInstantiationError},boundingSphere:{get:S.Z.throwInstantiationError},boundTransform:{get:S.Z.throwInstantiationError},shapeTransform:{get:S.Z.throwInstantiationError},shaderUniforms:{get:S.Z.throwInstantiationError},shaderDefines:{get:S.Z.throwInstantiationError},shaderMaximumIntersectionsLength:{get:S.Z.throwInstantiationError}}),uT.prototype.update=S.Z.throwInstantiationError,uT.prototype.computeOrientedBoundingBoxForTile=S.Z.throwInstantiationError,uT.prototype.computeApproximateStepSize=S.Z.throwInstantiationError,uT.DefaultMinBounds=S.Z.throwInstantiationError,uT.DefaultMaxBounds=S.Z.throwInstantiationError;const dT=uT;var hT=i(669725),pT=i(604450),fT=i(203230),mT=i(878),gT=i(282556),_T=i(200659);const yT=new h.Z,ZT=new h.Z,vT=new h.Z,bT=new h.Z,wT=new Ah.Z,xT=new Uint8Array(4);function CT(e,t,i,n){const r=t.height===i.height?0:(e-t.height)/(i.height-t.height);return h.Z.lerp(t.color,i.color,r,n)}function ST(e,t){return{height:e,color:h.Z.clone(t)}}function TT(e){return(e=(e=e.filter((function(e,t,i){const n=t>0,r=t<i.length-1,o=!n||e.height===i[t-1].height,s=!r||e.height===i[t+1].height;return!o||!s}))).filter((function(e,t,i){const n=t>0,r=t<i.length-1,o=!!n&&h.Z.equals(e.color,i[t-1].color),s=!!r&&h.Z.equals(e.color,i[t+1].color);return!o||!s}))).filter((function(e,t,i){const n=t>0,r=!!n&&h.Z.equals(e.color,i[t-1].color),o=!n||e.height===i[t-1].height;return!r||!o}))}function AT(e){const{scene:t,layers:i}=(0,p.Z)(e,p.Z.EMPTY_OBJECT);Ce.Z.typeOf.object("options.scene",t),Ce.Z.defined("options.layers",i),Ce.Z.typeOf.number.greaterThan("options.layers.length",i.length,0);const{context:n}=t,r=function(e){const t=function(e){let t,i;const n=[],r=e.length;for(t=0;t<r;t++){const r=e[t],o=r.entries,s=o.length;if(!Array.isArray(o)||0===s)throw new S.Z("entries must be an array with size > 0.");let a=[];for(i=0;i<s;i++){const e=o[i];if(!(0,f.Z)(e.height))throw new S.Z("entry requires a height.");if(!(0,f.Z)(e.color))throw new S.Z("entry requires a color.");const t=T.Z.clamp(e.height,AT._minimumHeight,AT._maximumHeight),n=h.Z.clone(e.color,yT);n.red*=n.alpha,n.green*=n.alpha,n.blue*=n.alpha,a.push(ST(t,n))}let l=!0,c=!0;for(i=0;i<s-1;i++){const e=a[i+0],t=a[i+1];l=l&&e.height<=t.height,c=c&&e.height>=t.height}c?a=a.reverse():l||(0,b_.Z)(a,(function(e,t){return T.Z.sign(e.height-t.height)}));let u=(0,p.Z)(r.extendDownwards,!1),d=(0,p.Z)(r.extendUpwards,!1);1!==a.length||u||d||(u=!0,d=!0),u&&a.splice(0,0,ST(AT._minimumHeight,a[0].color)),d&&a.splice(a.length,0,ST(AT._maximumHeight,a[a.length-1].color)),a=TT(a),n.push(a)}return n}(e);let i,n=[],r=[];function o(e,t){n.push(ST(e,t))}function s(e,t,i){let n=h.Z.multiplyByScalar(i,1-t.alpha,bT);n=h.Z.add(n,t,n),o(e,n)}const a=t.length;for(i=0;i<a;i++){const e=t[i];let a=0,l=0;r=n,n=[];const c=e.length,u=r.length;for(;a<c||l<u;){const t=a<c?e[a]:void 0,i=a>0?e[a-1]:void 0,n=a<c-1?e[a+1]:void 0,d=l<u?r[l]:void 0,h=l>0?r[l-1]:void 0,p=l<u-1?r[l+1]:void 0;if((0,f.Z)(t)&&(0,f.Z)(d)&&t.height===d.height){const e=(0,f.Z)(p)&&d.height===p.height,r=!(0,f.Z)(h),c=!(0,f.Z)(p),u=(0,f.Z)(n)&&t.height===n.height,m=!(0,f.Z)(i),g=!(0,f.Z)(n);e?u?(s(t.height,t.color,d.color),s(t.height,n.color,p.color)):m?(o(t.height,d.color),s(t.height,t.color,p.color)):g?(s(t.height,t.color,d.color),o(t.height,p.color)):(s(t.height,t.color,d.color),s(t.height,t.color,p.color)):r?u?(o(t.height,t.color),s(t.height,n.color,d.color)):g?(o(t.height,t.color),o(t.height,d.color)):(m||o(t.height,t.color),s(t.height,t.color,d.color)):c?u?(s(t.height,t.color,d.color),o(t.height,n.color)):m?(o(t.height,d.color),o(t.height,t.color)):g?s(t.height,t.color,d.color):(s(t.height,t.color,d.color),o(t.height,t.color)):u?(s(t.height,t.color,d.color),s(t.height,n.color,d.color)):m?(o(t.height,d.color),s(t.height,t.color,d.color)):g?(s(t.height,t.color,d.color),o(t.height,d.color)):s(t.height,t.color,d.color),a+=u?2:1,l+=e?2:1}else if((0,f.Z)(t)&&(0,f.Z)(d)&&(0,f.Z)(h)&&t.height<d.height){const e=CT(t.height,h,d,vT);(0,f.Z)(i)?(0,f.Z)(n)?s(t.height,t.color,e):(s(t.height,t.color,e),o(t.height,e)):(o(t.height,e),s(t.height,t.color,e)),a++}else if((0,f.Z)(d)&&(0,f.Z)(t)&&(0,f.Z)(i)&&d.height<t.height){const e=CT(d.height,i,t,ZT);(0,f.Z)(h)?(0,f.Z)(p)?s(d.height,e,d.color):(s(d.height,e,d.color),o(d.height,e)):(o(d.height,e),s(d.height,e,d.color)),l++}else(0,f.Z)(t)&&(!(0,f.Z)(d)||t.height<d.height)?(!(0,f.Z)(d)||(0,f.Z)(h)||(0,f.Z)(n)?((0,f.Z)(d)||!(0,f.Z)(h)||(0,f.Z)(i)||(o(h.height,AT._emptyColor),o(t.height,AT._emptyColor)),o(t.height,t.color)):(o(t.height,t.color),o(t.height,AT._emptyColor),o(d.height,AT._emptyColor)),a++):(0,f.Z)(d)&&(!(0,f.Z)(t)||d.height<t.height)&&(o(d.height,d.color),l++)}}return TT(n)}(i),o=r.length;let s,a,l;if(AT._useFloatTexture(n)){a=Md.Z.FLOAT,l=n.webgl2?km.Z.RED:km.Z.LUMINANCE,s=new Float32Array(o);for(let e=0;e<o;e++)s[e]=r[e].height}else{a=Md.Z.UNSIGNED_BYTE,l=km.Z.RGBA,s=new Uint8Array(4*o);for(let e=0;e<o;e++)Ah.Z.packFloat(r[e].height,wT),Ah.Z.pack(wT,s,4*e)}const c=Gd.Z.create({context:n,pixelFormat:l,pixelDatatype:a,source:{arrayBufferView:s,width:o,height:1},sampler:new Bd.Z({wrapS:Hd.Z.CLAMP_TO_EDGE,wrapT:Hd.Z.CLAMP_TO_EDGE,minificationFilter:qd.Z.NEAREST,magnificationFilter:Kd.Z.NEAREST})}),u=new Uint8Array(4*o);for(let e=0;e<o;e++)r[e].color.toBytes(xT),u[4*e+0]=xT[0],u[4*e+1]=xT[1],u[4*e+2]=xT[2],u[4*e+3]=xT[3];const d=Gd.Z.create({context:n,pixelFormat:km.Z.RGBA,pixelDatatype:Md.Z.UNSIGNED_BYTE,source:{arrayBufferView:u,width:o,height:1},sampler:new Bd.Z({wrapS:Hd.Z.CLAMP_TO_EDGE,wrapT:Hd.Z.CLAMP_TO_EDGE,minificationFilter:qd.Z.LINEAR,magnificationFilter:Kd.Z.LINEAR})});return Cb.Z.fromType("ElevationBand",{heights:c,colors:d})}AT._useFloatTexture=function(e){return e.floatingPointTexture},AT._maximumHeight=5906376425472,AT._minimumHeight=-5906376425472,AT._emptyColor=new h.Z(0,0,0,0);const PT=AT,ET=async function(e,t){let i;e=(0,p.Z)(e,zf.defaultApiKey);const n=zf.getDefaultApiKeyCredit(e);(0,f.Z)(n)&&(i=[n]),(t=(0,p.Z)(t,{})).showCreditsOnScreen=!0;const r=new we.Z({url:`${zf.mapTilesApiEndpoint}3dtiles/root.json`,queryParameters:{key:e},credits:i});return XZ.Z.fromUrl(r,t)},MT=function(e){(0,Rl.Z)("createOsmBuildings","createOsmBuildings was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use createOsmBuildingsAsync instead."),e=(0,Gl.Z)(e,{url:lm.Z.fromAssetId(96188)});const t=new XZ.Z(e);let i=e.style;if(!(0,f.Z)(i)){const t=(0,p.Z)(e.defaultColor,h.Z.WHITE).toCssColorString();i=new wZ.Z({color:`Boolean(\${feature['cesium#color']}) ? color(\${feature['cesium#color']}) : ${t}`})}return t.style=i,t},kT=async function(e){const t=await XZ.Z.fromIonAssetId(96188,e);let i=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).style;if(!(0,f.Z)(i)){const t=(0,p.Z)(e.defaultColor,h.Z.WHITE).toCssColorString();i=new wZ.Z({color:`Boolean(\${feature['cesium#color']}) ? color(\${feature['cesium#color']}) : ${t}`})}return t.style=i,t},IT=function(e){const t=[];let i=(e=(0,p.Z)(e,p.Z.EMPTY_OBJECT)).geometry;if(!(0,f.Z)(i))throw new S.Z("options.geometry is required.");(0,f.Z)(i.attributes)&&(0,f.Z)(i.primitiveType)||(i=i.constructor.createGeometry(i));const n=i.attributes,r=Mh.Z.clone((0,p.Z)(e.modelMatrix,Mh.Z.IDENTITY)),o=(0,p.Z)(e.length,1e4);if((0,f.Z)(n.normal)&&t.push(new Up.Z({geometry:Kp.Z.createLineSegmentsForVectors(i,"normal",o),attributes:{color:new $h.Z(1,0,0,1)},modelMatrix:r})),(0,f.Z)(n.tangent)&&t.push(new Up.Z({geometry:Kp.Z.createLineSegmentsForVectors(i,"tangent",o),attributes:{color:new $h.Z(0,1,0,1)},modelMatrix:r})),(0,f.Z)(n.bitangent)&&t.push(new Up.Z({geometry:Kp.Z.createLineSegmentsForVectors(i,"bitangent",o),attributes:{color:new $h.Z(0,0,1,1)},modelMatrix:r})),t.length>0)return new ub.Z({asynchronous:!1,geometryInstances:t,appearance:new aC.Z({flat:!0,translucent:!1})})},OT=function(e){(0,Rl.Z)("createWorldImagery","createWorldImagery was deprecated in CesiumJS 1.104.  It will be removed in CesiumJS 1.107.  Use createWorldImageryAsync instead."),e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=(0,p.Z)(e.style,ax.Z.AERIAL),i=new sx.Z;return sx.Z._initialize(i,t,e),i};var BT=i(272802),RT=i(849515),FT=i(106215),DT=i(390523),LT=i(708895),VT=i(591055),NT=i(807549),UT=i(943618),GT=i(377559),zT=i(532298),KT=i(963951),qT=i(367896),HT=i(484718),WT=i(89234),jT=i(176935),JT=i(449899),XT=i(198178),$T=i(466109),YT=i(108623),QT=i(705378),eA=i(156180),tA=i(517567),iA=i(848146),nA=i(412748),rA=i(46698),oA=i(732246),sA=i(921689),aA=i(793457),lA=i(530129),cA=i(503341),uA=i(91707),dA=i(408694),hA=i(398265),pA=i(14733),fA=i(374806),mA=i(961537),gA=i(246114),_A=i(736151),yA=i(462281),ZA=i(888535),vA=i(233684),bA=i(59905),wA=i(515984),xA=i(928407),CA=i(422039),SA=i(713554),TA=i(66574),AA=i(908484),PA=i(822225),EA=i(391504),MA=i(512766),kA=i(838873),IA=i(533708),OA=i(645957),BA=i(952901),RA=i(742910),FA=i(104029),DA=i(93876),LA=i(776499),VA=i(242172),NA=i(931980),UA=i(831402),GA=i(147679),zA=i(912182),KA=i(567389),qA=i(560665),HA=i(402426),WA=i(222167),jA=i(404233),JA=i(409583),XA=i(874327),$A=i(777860),YA=i(764367),QA=i(877640),eP=i(842633),tP=i(520193),iP=i(228434),nP=i(251186),rP=i(709932),oP=i(409292),sP=i(380337),aP=i(182029),lP=i(102625),cP=i(838744),uP=i(280900);const dP="uniform sampler2D u_depthTexture;\n\nin vec2 v_textureCoordinates;\n\nvoid main()\n{\n    float z_window = czm_unpackDepth(texture(u_depthTexture, v_textureCoordinates));\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    float z_ndc = (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n    float scale = pow(z_ndc * 0.5 + 0.5, 8.0);\n    out_FragColor = vec4(mix(vec3(0.0), vec3(1.0), scale), 1.0);\n}\n";var hP=i(958154),pP=i(462864),fP=i(874096),mP=i(471159),gP=i(770297),_P=i(730264),yP=i(639164),ZP=i(58038),vP=i(622388),bP=i(638442),wP=i(783775),xP=i(938178),CP=i(749159),SP=i(933495),TP=i(397974),AP=i(49964),PP=i(200356),EP=i(279081),MP=i(363813),kP=i(271653),IP=i(126563),OP=i(948548),BP=i(500404),RP=i(357759),FP=i(353542),DP=i(811151),LP=i(616671),VP=i(600789),NP=i(895007),UP=i(412827),GP=i(297720),zP=i(780131),KP=i(304982),qP=i(738067),HP=i(476265),WP=i(882366),jP=i(207412),JP=i(284625),XP=i(67293),$P=i(600593),YP=i(867089),QP=i(148759),eE=i(934157),tE=i(824640),iE=i(611129),nE=i(770404),rE=i(835198),oE=i(796157),sE=i(887719),aE=i(21629),lE=i(443674),cE=i(381009),uE=i(653384),dE=i(922778),hE=i(391639),pE=i(705917),fE=i(641746),mE=i(806055),gE=i(414885),_E=i(386978),yE=i(257867),ZE=i(98869),vE=i(148746),bE=i(362167),wE=i(435154),xE=i(651643),CE=i(740228),SE=i(240524),TE=i(825571),AE=i(84618),PE=i(436106),EE=i(849507),ME=i(630194),kE=i(248525),IE=i(952941),OE=i(107117),BE=i(585623),RE=i(90111),FE=i(153918),DE=i(612588),LE=i(147714),VE=i(127828),NE=i(493863),UE=i(584934),GE=i(506721),zE=i(648665),KE=i(601691),qE=i(512502),HE=i(255801),WE=i(954154),jE=i(474508),JE=i(664752),XE=i(574750),$E=i(963940),YE=i(872862),QE=i(420136),eM=i(708956),tM=i(470780),iM=i(492067),nM=i(705669),rM=i(86036),oM=i(854519),sM=i(451510),aM=i(669873),lM=i(662691),cM=i(240302),uM=i(423194),dM=i(406501),hM=i(427709),pM=i(276194),fM=i(629011),mM=i(32492);const gM=function(e){e=(0,p.Z)(e,p.Z.EMPTY_OBJECT);const t=(0,f.Z)(e.typedArray);if(t===(0,f.Z)(e.url))throw new S.Z("exactly one of options.typedArray, options.url must be defined");if(t&&(!(0,f.Z)(e.width)||!(0,f.Z)(e.height)))throw new S.Z("options.width and options.height are required when options.typedArray is defined");this.typedArray=e.typedArray,this.width=e.width,this.height=e.height,this.pixelFormat=(0,p.Z)(e.pixelFormat,km.Z.RGBA),this.pixelDatatype=(0,p.Z)(e.pixelDatatype,Md.Z.UNSIGNED_BYTE);let i=e.url;"string"==typeof i&&(i=we.Z.createIfNeeded(i)),this.resource=i;const n=(0,p.Z)(e.repeat,!0)?Hd.Z.REPEAT:Hd.Z.CLAMP_TO_EDGE;this.sampler=new Bd.Z({wrapS:n,wrapT:n,minificationFilter:e.minificationFilter,magnificationFilter:e.magnificationFilter,maximumAnisotropy:e.maximumAnisotropy})};var _M=i(505117),yM=i(564438);const ZM=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4"});var vM=i(7901),bM=i(789576),wM=i(503506),xM=i(312559),CM=i(652891),SM=i(794342),TM=i(890532),AM=i(553735),PM=i(950171),EM=i(676627),MM=i(134599),kM=i(166065),IM=i(527135),OM=i(884668),BM=i(996755),RM=i(288707),FM=i(170007),DM=i(535488),LM=i(515577),VM=i(607753),NM=i(500932),UM=i(29619),GM=i(78387),zM=i(891348),KM=i(223738),qM=i(569813),HM=i(227315),WM=i(671371),jM=i(76279),JM=i(90975),XM=i(630524),$M=i(151084),YM=i(775907),QM=i(158974),ek=i(476459),tk=i(281911),ik=i(298220),nk=i(437585),rk=i(555966),ok=i(353693),sk=i(138344),ak=i(160913),lk=i(941290),ck=i(338774),uk=i(23906),dk=i(579176),hk=i(293680),pk=i(850041),fk=i(6369),mk=i(606261),gk=i(342390),_k=i(637328),yk=i(379438),Zk=i(426515),vk=i(381484),bk=i(277426),wk=i(633986),xk=i(415514),Ck=i(753022),Sk=i(903219),Tk=i(706194),Ak=i(934611),Pk=i(365474),Ek=i(768616),Mk=i(789205),kk=i(807126),Ik=i(583040),Ok=i(471545),Bk=i(43133),Rk=i(511114),Fk=i(965554),Dk=i(447948),Lk=i(952328),Vk=i(475405),Nk=i(682571),Uk=i(574494),Gk=i(333159),zk=i(983145),Kk=i(503e3),qk=i(670055),Hk=i(33987),Wk=i(789107),jk=i(798250),Jk=i(177552),Xk=i(956452),$k=i(843705),Yk=i(454592),Qk=i(661365),eI=i(59797),tI=i(500234),iI=i(649439),nI=i(563903),rI=i(751602),oI=i(575995),sI=i(968545),aI=i(138165),lI=i(19774),cI=i(705539),uI=i(263002),dI=i(908438),hI=i(161204),pI=i(613351),fI=i(36181),mI=i(280161),gI=i(178313),_I=i(551324),yI=i(471398),ZI=i(24380),vI=i(627125),bI=i(91348),wI=i(947079),xI=i(605387),CI=i(190287),SI=i(692132),TI=i(87047),AI=i(643978),PI=i(512388),EI=i(808363),MI=i(467134),kI=i(616425),II=i(495456),OI=i(625640),BI=i(931509),RI=i(815896),FI=i(808900),DI=i(382672),LI=i(417781),VI=i(421814),NI=i(768680),UI=i(303652),GI=i(634348),zI=i(106525),KI=i(148292);const qI=function(e){let t;return function(i){const n=i.data,r=[],o={id:n.id,result:void 0,error:void 0};return Promise.resolve(function(e,t,i){let n;try{return n=e(t,i),n}catch(e){return Promise.reject(e)}}(e,n.parameters,r)).then((function(e){o.result=e})).catch((function(e){e instanceof Error?o.error={name:e.name,message:e.message,stack:e.stack}:o.error=e})).finally((function(){(0,f.Z)(t)||(t=(0,p.Z)(self.webkitPostMessage,self.postMessage)),n.canTransferArrayBuffer||(r.length=0);try{t(o,r)}catch(e){o.result=void 0,o.error=`postMessage failed with error: ${(0,l_.Z)(e)}\n  with responseMessage: ${JSON.stringify(o)}`,t(o)}}))}};var HI=i(653186);const WI=function(){this.canExecute=void 0,this.beforeExecute=void 0,this.afterExecute=void 0,S.Z.throwInstantiationError()},jI={createCheckbox:function(e,t,i){Ce.Z.typeOf.string("labelText",e),Ce.Z.typeOf.string("checkedBinding",t);const n=document.createElement("div"),r=document.createElement("label"),o=document.createElement("input");o.type="checkbox";let s=`checked: ${t}`;return(0,f.Z)(i)&&(s+=`, enable: ${i}`),o.setAttribute("data-bind",s),r.appendChild(o),r.appendChild(document.createTextNode(e)),n.appendChild(r),n},createSection:function(e,t,i,n){Ce.Z.defined("panel",e),Ce.Z.typeOf.string("headerText",t),Ce.Z.typeOf.string("sectionVisibleBinding",i),Ce.Z.typeOf.string("toggleSectionVisibilityBinding",n);const r=document.createElement("div");r.className="cesium-cesiumInspector-section",r.setAttribute("data-bind",`css: { "cesium-cesiumInspector-section-collapsed": !${i} }`),e.appendChild(r);const o=document.createElement("h3");o.className="cesium-cesiumInspector-sectionHeader",o.appendChild(document.createTextNode(t)),o.setAttribute("data-bind",`click: ${n}`),r.appendChild(o);const s=document.createElement("div");return s.className="cesium-cesiumInspector-sectionContent",r.appendChild(s),s},createRangeInput:function(e,t,i,n,r,o){Ce.Z.typeOf.string("rangeText",e),Ce.Z.typeOf.string("sliderValueBinding",t),Ce.Z.typeOf.number("min",i),Ce.Z.typeOf.number("max",n),o=(0,p.Z)(o,t);const s=document.createElement("input");s.setAttribute("data-bind",`value: ${o}`),s.type="number";const a=document.createElement("input");a.type="range",a.min=i,a.max=n,a.step=(0,p.Z)(r,"any"),a.setAttribute("data-bind",`valueUpdate: "input", value: ${t}`);const l=document.createElement("div");l.appendChild(a);const c=document.createElement("div");return c.className="cesium-cesiumInspector-slider",c.appendChild(document.createTextNode(e)),c.appendChild(s),c.appendChild(l),c},createButton:function(e,t,i){Ce.Z.typeOf.string("buttonText",e),Ce.Z.typeOf.string("clickedBinding",t);const n=document.createElement("button");n.type="button",n.textContent=e,n.className="cesium-cesiumInspector-pickButton";let r=`click: ${t}`;return(0,f.Z)(i)&&(r+=`, css: {"cesium-cesiumInspector-pickButtonHighlight" : ${i}}`),n.setAttribute("data-bind",r),n}},JI=jI;var XI=i(623115),$I=i(119277),YI=i(818881),QI=i(294798),eO=i(492417),tO=i(716013),iO=i(473549),nO=i(567404),rO=i(909463),oO=i(759504),sO=i(746574),aO=i(689460);function lO(e,t){t?e._eventHandler.setInputAction((function(t){const i=e._scene.pick(t.endPosition);(0,f.Z)(i)&&i.primitive instanceof XZ.Z&&(e.tileset=i.primitive)}),sg.Z.MOUSE_MOVE):(e._eventHandler.removeInputAction(sg.Z.MOUSE_MOVE),e.picking=e.picking)}const cO={maximumFractionDigits:3};function uO(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,cO):Math.round(t).toLocaleString()}function dO(e,t){if(!(0,f.Z)(e))return"";const i=t?e._statisticsPerPass[yZ.Z.PICK]:e._statisticsPerPass[yZ.Z.RENDER];let n='<ul class="cesium-cesiumInspector-statistics">';return n+=`<li><strong>Visited: </strong>${i.visited.toLocaleString()}</li><li><strong>Selected: </strong>${i.selected.toLocaleString()}</li><li><strong>Commands: </strong>${i.numberOfCommands.toLocaleString()}</li>`,n+="</ul>",t||(n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Requests: </strong>${i.numberOfPendingRequests.toLocaleString()}</li><li><strong>Attempted: </strong>${i.numberOfAttemptedRequests.toLocaleString()}</li><li><strong>Processing: </strong>${i.numberOfTilesProcessing.toLocaleString()}</li><li><strong>Content Ready: </strong>${i.numberOfTilesWithContentReady.toLocaleString()}</li><li><strong>Total: </strong>${i.numberOfTilesTotal.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Features Selected: </strong>${i.numberOfFeaturesSelected.toLocaleString()}</li><li><strong>Features Loaded: </strong>${i.numberOfFeaturesLoaded.toLocaleString()}</li><li><strong>Points Selected: </strong>${i.numberOfPointsSelected.toLocaleString()}</li><li><strong>Points Loaded: </strong>${i.numberOfPointsLoaded.toLocaleString()}</li><li><strong>Triangles Selected: </strong>${i.numberOfTrianglesSelected.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Tiles styled: </strong>${i.numberOfTilesStyled.toLocaleString()}</li><li><strong>Features styled: </strong>${i.numberOfFeaturesStyled.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Children Union Culled: </strong>${i.numberOfTilesCulledWithChildrenUnion.toLocaleString()}</li>`,n+="</ul>",n+='<ul class="cesium-cesiumInspector-statistics">',n+=`<li><strong>Geometry Memory (MB): </strong>${uO(i.geometryByteLength)}</li><li><strong>Texture Memory (MB): </strong>${uO(i.texturesByteLength)}</li><li><strong>Batch Table Memory (MB): </strong>${uO(i.batchTableByteLength)}</li>`,n+="</ul>"),n}function hO(){const e=RZ.Z.statistics;return`\n  <ul class="cesium-cesiumInspector-statistics">\n    <li><strong>Geometry Memory (MB): </strong>${uO(e.geometryByteLength)}</li>\n    <li><strong>Texture Memory (MB): </strong>${uO(e.texturesByteLength)}</li>\n  </ul>\n  `}const pO=[{text:"Highlight",value:lZ.Z.HIGHLIGHT},{text:"Replace",value:lZ.Z.REPLACE},{text:"Mix",value:lZ.Z.MIX}],fO=new h.Z(1,1,0,.4),mO=new h.Z,gO=new h.Z;function _O(e,t){Ce.Z.typeOf.object("scene",e),Ce.Z.typeOf.object("performanceContainer",t);const i=this,n=e.canvas;this._eventHandler=new og.Z(n),this._scene=e,this._performanceContainer=t,this._canvas=n,this._performanceDisplay=new lC.Z({container:t}),this._statisticsText="",this._pickStatisticsText="",this._resourceCacheStatisticsText="",this._editorError="",this.performance=!1,this.showStatistics=!0,this.showPickStatistics=!0,this.showResourceCacheStatistics=!1,this.inspectorVisible=!0,this.tilesetVisible=!1,this.displayVisible=!1,this.updateVisible=!1,this.loggingVisible=!1,this.styleVisible=!1,this.tileDebugLabelsVisible=!1,this.optimizationVisible=!1,this.styleString="{}",this.hasEnabledWireframe=!1,this._tileset=void 0,this._feature=void 0,this._tile=void 0,aO.Z.track(this,["performance","inspectorVisible","_statisticsText","_pickStatisticsText","_resourceCacheStatisticsText","_editorError","showPickStatistics","showStatistics","showResourceCacheStatistics","tilesetVisible","displayVisible","updateVisible","loggingVisible","styleVisible","optimizationVisible","tileDebugLabelsVisible","styleString","_feature","_tile","_tileset","hasEnabledWireframe"]),this._properties=aO.Z.observable({}),this.properties=[],aO.Z.defineProperty(this,"properties",(function(){const e=[],t=i._properties();for(const i in t)t.hasOwnProperty(i)&&e.push(i);return e}));const r=aO.Z.observable();aO.Z.defineProperty(this,"dynamicScreenSpaceError",{get:function(){return r()},set:function(e){r(e),(0,f.Z)(i._tileset)&&(i._tileset.dynamicScreenSpaceError=e)}}),this.dynamicScreenSpaceError=!1;const o=aO.Z.observable();aO.Z.defineProperty(this,"colorBlendMode",{get:function(){return o()},set:function(e){o(e),(0,f.Z)(i._tileset)&&(i._tileset.colorBlendMode=e,i._scene.requestRender())}}),this.colorBlendMode=lZ.Z.HIGHLIGHT;const s=aO.Z.observable(),a=aO.Z.observable();aO.Z.defineProperty(this,"picking",{get:function(){return a()},set:function(t){a(t),t?i._eventHandler.setInputAction((function(t){const n=e.pick(t.endPosition);if(n instanceof fZ.Z?(i.feature=n,i.tile=n.content.tile):(0,f.Z)(n)&&(0,f.Z)(n.content)?(i.feature=void 0,i.tile=n.content.tile):(i.feature=void 0,i.tile=void 0),(0,f.Z)(i._tileset)){if(s&&(0,f.Z)(n)&&(0,f.Z)(n.content)){let r;e.pickPositionSupported&&(r=e.pickPosition(t.endPosition),(0,f.Z)(r)&&(i._tileset.debugPickPosition=r)),i._tileset.debugPickedTile=n.content.tile}else i._tileset.debugPickedTile=void 0;i._scene.requestRender()}}),sg.Z.MOUSE_MOVE):(i.feature=void 0,i.tile=void 0,i._eventHandler.removeInputAction(sg.Z.MOUSE_MOVE))}}),this.picking=!0;const l=aO.Z.observable();aO.Z.defineProperty(this,"colorize",{get:function(){return l()},set:function(e){l(e),(0,f.Z)(i._tileset)&&(i._tileset.debugColorizeTiles=e,i._scene.requestRender())}}),this.colorize=!1;const c=aO.Z.observable();aO.Z.defineProperty(this,"wireframe",{get:function(){return c()},set:function(e){c(e),(0,f.Z)(i._tileset)&&(i._tileset.debugWireframe=e,i._scene.requestRender())}}),this.wireframe=!1;const u=aO.Z.observable();aO.Z.defineProperty(this,"showBoundingVolumes",{get:function(){return u()},set:function(e){u(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowBoundingVolume=e,i._scene.requestRender())}}),this.showBoundingVolumes=!1;const d=aO.Z.observable();aO.Z.defineProperty(this,"showContentBoundingVolumes",{get:function(){return d()},set:function(e){d(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowContentBoundingVolume=e,i._scene.requestRender())}}),this.showContentBoundingVolumes=!1;const h=aO.Z.observable();aO.Z.defineProperty(this,"showRequestVolumes",{get:function(){return h()},set:function(e){h(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowViewerRequestVolume=e,i._scene.requestRender())}}),this.showRequestVolumes=!1;const p=aO.Z.observable();aO.Z.defineProperty(this,"freezeFrame",{get:function(){return p()},set:function(e){p(e),(0,f.Z)(i._tileset)&&(i._tileset.debugFreezeFrame=e,i._scene.debugShowFrustumPlanes=e,i._scene.requestRender())}}),this.freezeFrame=!1,aO.Z.defineProperty(this,"showOnlyPickedTileDebugLabel",{get:function(){return s()},set:function(e){s(e),(0,f.Z)(i._tileset)&&(i._tileset.debugPickedTileLabelOnly=e,i._scene.requestRender())}}),this.showOnlyPickedTileDebugLabel=!1;const m=aO.Z.observable();aO.Z.defineProperty(this,"showGeometricError",{get:function(){return m()},set:function(e){m(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowGeometricError=e,i._scene.requestRender())}}),this.showGeometricError=!1;const g=aO.Z.observable();aO.Z.defineProperty(this,"showRenderingStatistics",{get:function(){return g()},set:function(e){g(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowRenderingStatistics=e,i._scene.requestRender())}}),this.showRenderingStatistics=!1;const _=aO.Z.observable();aO.Z.defineProperty(this,"showMemoryUsage",{get:function(){return _()},set:function(e){_(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowMemoryUsage=e,i._scene.requestRender())}}),this.showMemoryUsage=!1;const y=aO.Z.observable();aO.Z.defineProperty(this,"showUrl",{get:function(){return y()},set:function(e){y(e),(0,f.Z)(i._tileset)&&(i._tileset.debugShowUrl=e,i._scene.requestRender())}}),this.showUrl=!1;const Z=aO.Z.observable();aO.Z.defineProperty(this,"maximumScreenSpaceError",{get:function(){return Z()},set:function(e){e=Number(e),isNaN(e)||(Z(e),(0,f.Z)(i._tileset)&&(i._tileset.maximumScreenSpaceError=e))}}),this.maximumScreenSpaceError=16;const v=aO.Z.observable();aO.Z.defineProperty(this,"dynamicScreenSpaceErrorDensity",{get:function(){return v()},set:function(e){e=Number(e),isNaN(e)||(v(e),(0,f.Z)(i._tileset)&&(i._tileset.dynamicScreenSpaceErrorDensity=e))}}),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorDensitySliderValue=void 0,aO.Z.defineProperty(this,"dynamicScreenSpaceErrorDensitySliderValue",{get:function(){return Math.pow(v(),1/6)},set:function(e){v(Math.pow(e,6))}});const b=aO.Z.observable();aO.Z.defineProperty(this,"dynamicScreenSpaceErrorFactor",{get:function(){return b()},set:function(e){e=Number(e),isNaN(e)||(b(e),(0,f.Z)(i._tileset)&&(i._tileset.dynamicScreenSpaceErrorFactor=e))}}),this.dynamicScreenSpaceErrorFactor=4;const w=(x=this,function(e){const t=x._scene.pick(e.position);(0,f.Z)(t)&&t.primitive instanceof XZ.Z&&(x.tileset=t.primitive),x.pickActive=!1});var x;const C=aO.Z.observable();aO.Z.defineProperty(this,"pickActive",{get:function(){return C()},set:function(e){C(e),e?i._eventHandler.setInputAction(w,sg.Z.LEFT_CLICK):i._eventHandler.removeInputAction(sg.Z.LEFT_CLICK)}});const S=aO.Z.observable();aO.Z.defineProperty(this,"pointCloudShading",{get:function(){return S()},set:function(e){S(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.attenuation=e)}}),this.pointCloudShading=!1;const T=aO.Z.observable();aO.Z.defineProperty(this,"geometricErrorScale",{get:function(){return T()},set:function(e){e=Number(e),isNaN(e)||(T(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.geometricErrorScale=e))}}),this.geometricErrorScale=1;const A=aO.Z.observable();aO.Z.defineProperty(this,"maximumAttenuation",{get:function(){return A()},set:function(e){e=Number(e),isNaN(e)||(A(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.maximumAttenuation=0===e?void 0:e))}}),this.maximumAttenuation=0;const P=aO.Z.observable();aO.Z.defineProperty(this,"baseResolution",{get:function(){return P()},set:function(e){e=Number(e),isNaN(e)||(P(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.baseResolution=0===e?void 0:e))}}),this.baseResolution=0;const E=aO.Z.observable();aO.Z.defineProperty(this,"eyeDomeLighting",{get:function(){return E()},set:function(e){E(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLighting=e)}}),this.eyeDomeLighting=!1;const M=aO.Z.observable();aO.Z.defineProperty(this,"eyeDomeLightingStrength",{get:function(){return M()},set:function(e){e=Number(e),isNaN(e)||(M(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLightingStrength=e))}}),this.eyeDomeLightingStrength=1;const k=aO.Z.observable();aO.Z.defineProperty(this,"eyeDomeLightingRadius",{get:function(){return k()},set:function(e){e=Number(e),isNaN(e)||(k(e),(0,f.Z)(i._tileset)&&(i._tileset.pointCloudShading.eyeDomeLightingRadius=e))}}),this.eyeDomeLightingRadius=1,this.pickActive=!1;const I=aO.Z.observable();aO.Z.defineProperty(this,"skipLevelOfDetail",{get:function(){return I()},set:function(e){I(e),(0,f.Z)(i._tileset)&&(i._tileset.skipLevelOfDetail=e)}}),this.skipLevelOfDetail=!0;const O=aO.Z.observable();aO.Z.defineProperty(this,"skipScreenSpaceErrorFactor",{get:function(){return O()},set:function(e){e=Number(e),isNaN(e)||(O(e),(0,f.Z)(i._tileset)&&(i._tileset.skipScreenSpaceErrorFactor=e))}}),this.skipScreenSpaceErrorFactor=16;const B=aO.Z.observable();aO.Z.defineProperty(this,"baseScreenSpaceError",{get:function(){return B()},set:function(e){e=Number(e),isNaN(e)||(B(e),(0,f.Z)(i._tileset)&&(i._tileset.baseScreenSpaceError=e))}}),this.baseScreenSpaceError=1024;const R=aO.Z.observable();aO.Z.defineProperty(this,"skipLevels",{get:function(){return R()},set:function(e){e=Number(e),isNaN(e)||(R(e),(0,f.Z)(i._tileset)&&(i._tileset.skipLevels=e))}}),this.skipLevels=1;const F=aO.Z.observable();aO.Z.defineProperty(this,"immediatelyLoadDesiredLevelOfDetail",{get:function(){return F()},set:function(e){F(e),(0,f.Z)(i._tileset)&&(i._tileset.immediatelyLoadDesiredLevelOfDetail=e)}}),this.immediatelyLoadDesiredLevelOfDetail=!1;const D=aO.Z.observable();aO.Z.defineProperty(this,"loadSiblings",{get:function(){return D()},set:function(e){D(e),(0,f.Z)(i._tileset)&&(i._tileset.loadSiblings=e)}}),this.loadSiblings=!1,this._style=void 0,this._shouldStyle=!1,this._definedProperties=["properties","dynamicScreenSpaceError","colorBlendMode","picking","colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","maximumScreenSpaceError","dynamicScreenSpaceErrorDensity","baseScreenSpaceError","skipScreenSpaceErrorFactor","skipLevelOfDetail","skipLevels","immediatelyLoadDesiredLevelOfDetail","loadSiblings","dynamicScreenSpaceErrorDensitySliderValue","dynamicScreenSpaceErrorFactor","pickActive","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl","pointCloudShading","geometricErrorScale","maximumAttenuation","baseResolution","eyeDomeLighting","eyeDomeLightingStrength","eyeDomeLightingRadius"],this._removePostRenderEvent=e.postRender.addEventListener((function(){i._update()})),(0,f.Z)(this._tileset)||lO(this,!0)}function yO(e){if(!(0,f.Z)(e))return!1;if(e.featuresLength>0)return!0;const t=e.innerContents;if((0,f.Z)(t)){const e=t.length;for(let i=0;i<e;++i)if(!yO(t[i]))return!1;return!0}return!1}Object.defineProperties(_O.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},statisticsText:{get:function(){return this._statisticsText}},pickStatisticsText:{get:function(){return this._pickStatisticsText}},resourceCacheStatisticsText:{get:function(){return this._resourceCacheStatisticsText}},colorBlendModes:{get:function(){return pO}},editorError:{get:function(){return this._editorError}},tileset:{get:function(){return this._tileset},set:function(e){if(this._tileset=e,this._style=void 0,this.styleString="{}",this.feature=void 0,this.tile=void 0,(0,f.Z)(e)){const t=this;e._readyPromise.then((function(e){t.isDestroyed()||t._properties(e.properties)}));const i=["colorize","wireframe","showBoundingVolumes","showContentBoundingVolumes","showRequestVolumes","freezeFrame","showOnlyPickedTileDebugLabel","showGeometricError","showRenderingStatistics","showMemoryUsage","showUrl"],n=i.length;for(let e=0;e<n;++e){const t=i[e];this[t]=this[t]}this.maximumScreenSpaceError=e.maximumScreenSpaceError,this.dynamicScreenSpaceError=e.dynamicScreenSpaceError,this.dynamicScreenSpaceErrorDensity=e.dynamicScreenSpaceErrorDensity,this.dynamicScreenSpaceErrorFactor=e.dynamicScreenSpaceErrorFactor,this.colorBlendMode=e.colorBlendMode,this.skipLevelOfDetail=e.skipLevelOfDetail,this.skipScreenSpaceErrorFactor=e.skipScreenSpaceErrorFactor,this.baseScreenSpaceError=e.baseScreenSpaceError,this.skipLevels=e.skipLevels,this.immediatelyLoadDesiredLevelOfDetail=e.immediatelyLoadDesiredLevelOfDetail,this.loadSiblings=e.loadSiblings,this.hasEnabledWireframe=e._enableDebugWireframe;const r=e.pointCloudShading;this.pointCloudShading=r.attenuation,this.geometricErrorScale=r.geometricErrorScale,this.maximumAttenuation=r.maximumAttenuation?r.maximumAttenuation:0,this.baseResolution=r.baseResolution?r.baseResolution:0,this.eyeDomeLighting=r.eyeDomeLighting,this.eyeDomeLightingStrength=r.eyeDomeLightingStrength,this.eyeDomeLightingRadius=r.eyeDomeLightingRadius,this._scene.requestRender()}else this._properties({});this._statisticsText=dO(e,!1),this._pickStatisticsText=dO(e,!0),this._resourceCacheStatisticsText=hO(),lO(this,!1)}},feature:{get:function(){return this._feature},set:function(e){if(this._feature===e)return;const t=this._feature;(0,f.Z)(t)&&!t.content.isDestroyed()&&(!this.colorize&&(0,f.Z)(this._style)?t.color=(0,f.Z)(this._style.color)?this._style.color.evaluateColor(t,mO):h.Z.WHITE:t.color=gO,this._scene.requestRender()),(0,f.Z)(e)&&(h.Z.clone(e.color,gO),e.color=fO,this._scene.requestRender()),this._feature=e}},tile:{get:function(){return this._tile},set:function(e){if(this._tile===e)return;const t=this._tile;!(0,f.Z)(t)||t.isDestroyed()||yO(t.content)||(t.color=gO,this._scene.requestRender()),(0,f.Z)(e)&&!yO(e.content)&&(h.Z.clone(e.color,gO),e.color=fO,this._scene.requestRender()),this._tile=e}}}),_O.prototype.togglePickTileset=function(){this.pickActive=!this.pickActive},_O.prototype.toggleInspector=function(){this.inspectorVisible=!this.inspectorVisible},_O.prototype.toggleTileset=function(){this.tilesetVisible=!this.tilesetVisible},_O.prototype.toggleDisplay=function(){this.displayVisible=!this.displayVisible},_O.prototype.toggleUpdate=function(){this.updateVisible=!this.updateVisible},_O.prototype.toggleLogging=function(){this.loggingVisible=!this.loggingVisible},_O.prototype.toggleStyle=function(){this.styleVisible=!this.styleVisible},_O.prototype.toggleTileDebugLabels=function(){this.tileDebugLabelsVisible=!this.tileDebugLabelsVisible},_O.prototype.toggleOptimization=function(){this.optimizationVisible=!this.optimizationVisible},_O.prototype.trimTilesCache=function(){(0,f.Z)(this._tileset)&&this._tileset.trimLoadedTiles()},_O.prototype.compileStyle=function(){const e=this._tileset;if((0,f.Z)(e)&&this.styleString!==JSON.stringify(e.style)){this._editorError="";try{0===this.styleString.length&&(this.styleString="{}"),this._style=new wZ.Z(JSON.parse(this.styleString)),this._shouldStyle=!0,this._scene.requestRender()}catch(e){this._editorError=e.toString()}this.feature=this._feature,this.tile=this._tile}},_O.prototype.styleEditorKeyPress=function(e,t){if(9===t.keyCode){t.preventDefault();const e=t.target,i=e.selectionStart,n=e.selectionEnd;let r=n;const o=e.value.slice(i,n).split("\n"),s=o.length;let a;if(t.shiftKey)for(a=0;a<s;++a)" "===o[a][0]&&(" "===o[a][1]?(o[a]=o[a].substr(2),r-=2):(o[a]=o[a].substr(1),r-=1));else for(a=0;a<s;++a)o[a]=`  ${o[a]}`,r+=2;const l=o.join("\n");e.value=e.value.slice(0,i)+l+e.value.slice(n),e.selectionStart=i!==n?i:r,e.selectionEnd=r}else!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||this.compileStyle();return!0},_O.prototype._update=function(){const e=this._tileset;if(this.performance&&this._performanceDisplay.update(),(0,f.Z)(e)){if(e.isDestroyed())return this.tile=void 0,this.feature=void 0,void(this.tileset=void 0);const t=e.style;this._style!==e.style&&(this._shouldStyle?(e.style=this._style,this._shouldStyle=!1):(this._style=t,this.styleString=JSON.stringify(t.style,null,"  ")))}this.showStatistics&&(this._statisticsText=dO(e,!1),this._pickStatisticsText=dO(e,!0),this._resourceCacheStatisticsText=hO())},_O.prototype.isDestroyed=function(){return!1},_O.prototype.destroy=function(){this._eventHandler.destroy(),this._removePostRenderEvent();const e=this;return this._definedProperties.forEach((function(t){aO.Z.getObservable(e,t).dispose()})),(0,Ug.Z)(this)},_O.getStatistics=dO;const ZO=_O;function vO(e,t){Ce.Z.defined("container",e),Ce.Z.typeOf.object("scene",t),e=(0,Ol.Z)(e);const i=document.createElement("div"),n=document.createElement("div");n.setAttribute("data-bind","visible: performance");const r=new ZO(t,n);this._viewModel=r,this._container=e,this._element=i;const o=document.createElement("div");o.textContent="3D Tiles Inspector",o.className="cesium-cesiumInspector-button",o.setAttribute("data-bind","click: toggleInspector"),i.appendChild(o),i.className="cesium-cesiumInspector cesium-3DTilesInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);const s=document.createElement("div");s.className="cesium-cesiumInspector-dropDown",i.appendChild(s);const a=JI.createSection,l=JI.createCheckbox,c=JI.createRangeInput,u=JI.createButton,d=a(s,"Tileset","tilesetVisible","toggleTileset"),h=a(s,"Display","displayVisible","toggleDisplay"),p=a(s,"Update","updateVisible","toggleUpdate"),f=a(s,"Logging","loggingVisible","toggleLogging"),m=a(s,"Tile Debug Labels","tileDebugLabelsVisible","toggleTileDebugLabels"),g=a(s,"Style","styleVisible","toggleStyle"),_=a(s,"Optimization","optimizationVisible","toggleOptimization"),y=document.createElement("div");y.className="field-group";const Z=document.createElement("label");Z.className="field-label",Z.appendChild(document.createTextNode("Properties: "));const v=document.createElement("div");v.setAttribute("data-bind","text: properties"),y.appendChild(Z),y.appendChild(v),d.appendChild(y),d.appendChild(u("Pick Tileset","togglePickTileset","pickActive")),d.appendChild(u("Trim Tiles Cache","trimTilesCache")),d.appendChild(l("Enable Picking","picking")),h.appendChild(l("Colorize","colorize"));const b=h.appendChild(l("Wireframe","wireframe","_tileset === undefined || hasEnabledWireframe")),w=document.createElement("p");w.setAttribute("data-bind","visible: _tileset !== undefined && !hasEnabledWireframe"),w.setAttribute("class","cesium-3DTilesInspector-disabledElementsInfo"),w.innerText="Set enableDebugWireframe to true in the tileset constructor to enable this option.",b.appendChild(w),h.appendChild(l("Bounding Volumes","showBoundingVolumes")),h.appendChild(l("Content Volumes","showContentBoundingVolumes")),h.appendChild(l("Request Volumes","showRequestVolumes")),h.appendChild(l("Point Cloud Shading","pointCloudShading"));const x=document.createElement("div");x.setAttribute("data-bind","visible: pointCloudShading"),x.appendChild(c("Geometric Error Scale","geometricErrorScale",0,2,.01)),x.appendChild(c("Maximum Attenuation","maximumAttenuation",0,32,1)),x.appendChild(c("Base Resolution","baseResolution",0,1,.01)),x.appendChild(l("Eye Dome Lighting (EDL)","eyeDomeLighting")),h.appendChild(x);const C=document.createElement("div");C.setAttribute("data-bind","visible: eyeDomeLighting"),C.appendChild(c("EDL Strength","eyeDomeLightingStrength",0,2,.1)),C.appendChild(c("EDL Radius","eyeDomeLightingRadius",0,4,.1)),x.appendChild(C),p.appendChild(l("Freeze Frame","freezeFrame")),p.appendChild(l("Dynamic Screen Space Error","dynamicScreenSpaceError"));const S=document.createElement("div");S.appendChild(c("Maximum Screen Space Error","maximumScreenSpaceError",0,128,1)),p.appendChild(S);const T=document.createElement("div");T.setAttribute("data-bind","visible: dynamicScreenSpaceError"),T.appendChild(c("Screen Space Error Density","dynamicScreenSpaceErrorDensitySliderValue",0,1,.005,"dynamicScreenSpaceErrorDensity")),T.appendChild(c("Screen Space Error Factor","dynamicScreenSpaceErrorFactor",1,10,.1)),p.appendChild(T),f.appendChild(l("Performance","performance")),f.appendChild(n),f.appendChild(l("Statistics","showStatistics"));const A=document.createElement("div");A.className="cesium-3dTilesInspector-statistics",A.setAttribute("data-bind","html: statisticsText, visible: showStatistics"),f.appendChild(A),f.appendChild(l("Pick Statistics","showPickStatistics"));const P=document.createElement("div");P.className="cesium-3dTilesInspector-statistics",P.setAttribute("data-bind","html: pickStatisticsText, visible: showPickStatistics"),f.appendChild(P),f.appendChild(l("Resource Cache Statistics","showResourceCacheStatistics"));const E=document.createElement("div");E.className="cesium-3dTilesInspector-statistics",E.setAttribute("data-bind","html: resourceCacheStatisticsText, visible: showResourceCacheStatistics"),f.appendChild(E);const M=document.createElement("div");g.appendChild(M),M.appendChild(document.createTextNode("Color Blend Mode: "));const k=document.createElement("select");k.setAttribute("data-bind",'options: colorBlendModes, optionsText: "text", optionsValue: "value", value: colorBlendMode'),M.appendChild(k);const I=document.createElement("textarea");I.setAttribute("data-bind","textInput: styleString, event: { keydown: styleEditorKeyPress }"),M.className="cesium-cesiumInspector-styleEditor",M.appendChild(I);const O=u("Compile (Ctrl+Enter)","compileStyle");M.appendChild(O);const B=document.createElement("div");B.className="cesium-cesiumInspector-error",B.setAttribute("data-bind","text: editorError"),M.appendChild(B),m.appendChild(l("Show Picked Only","showOnlyPickedTileDebugLabel")),m.appendChild(l("Geometric Error","showGeometricError")),m.appendChild(l("Rendering Statistics","showRenderingStatistics")),m.appendChild(l("Memory Usage (MB)","showMemoryUsage")),m.appendChild(l("Url","showUrl")),_.appendChild(l("Skip Tile LODs","skipLevelOfDetail"));const R=document.createElement("div");R.appendChild(c("Skip SSE Factor","skipScreenSpaceErrorFactor",1,50,1)),_.appendChild(R);const F=document.createElement("div");F.appendChild(c("SSE before skipping LOD","baseScreenSpaceError",0,4096,1)),_.appendChild(F);const D=document.createElement("div");D.appendChild(c("Min. levels to skip","skipLevels",0,10,1)),_.appendChild(D),_.appendChild(l("Load only tiles that meet the max SSE.","immediatelyLoadDesiredLevelOfDetail")),_.appendChild(l("Load siblings of visible tiles","loadSiblings")),aO.Z.applyBindings(r,i)}Object.defineProperties(vO.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),vO.prototype.isDestroyed=function(){return!1},vO.prototype.destroy=function(){return aO.Z.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,Ug.Z)(this)};const bO=vO;function wO(e,t,i){let n=Math.min(i,t);return n=Math.max(n,e),n}const xO=new $m.Z,CO=new Y.Z;function SO(e,t){if(!(0,f.Z)(e))throw new S.Z("scene is required");if(!(0,f.Z)(t))throw new S.Z("performanceContainer is required");const i=this,n=e.canvas,r=new og.Z(n);this._eventHandler=r,this._scene=e,this._canvas=n,this._primitive=void 0,this._tile=void 0,this._modelMatrixPrimitive=void 0,this._performanceDisplay=void 0,this._performanceContainer=t;const o=this._scene.globe;let s;function a(e){const t=i._scene.pick({x:e.position.x,y:e.position.y});(0,f.Z)(t)&&(i.primitive=(0,f.Z)(t.collection)?t.collection:t.primitive),i._scene.requestRender(),i.pickPrimitiveActive=!1}function l(e){let t;const n=o.ellipsoid,r=i._scene.camera.getPickRay(e.position,xO),s=o.pick(r,i._scene,CO);if((0,f.Z)(s)){const e=n.cartesianToCartographic(s),i=o._surface.tileProvider._tilesToRenderByTextureCount;for(let n=0;!t&&n<i.length;++n){const r=i[n];if((0,f.Z)(r))for(let i=0;!t&&i<r.length;++i){const n=r[i];ve.Z.contains(n.rectangle,e)&&(t=n)}}}i.tile=t,i.pickTileActive=!1}o.depthTestAgainstTerrain=!0,this.frustums=!1,this.frustumPlanes=!1,this.performance=!1,this.shaderCacheText="",this.primitiveBoundingSphere=!1,this.primitiveReferenceFrame=!1,this.filterPrimitive=!1,this.tileBoundingSphere=!1,this.filterTile=!1,this.wireframe=!1,this.depthFrustum=1,this._numberOfFrustums=1,this.suspendUpdates=!1,this.tileCoordinates=!1,this.frustumStatisticText=!1,this.tileText="",this.hasPickedPrimitive=!1,this.hasPickedTile=!1,this.pickPrimitiveActive=!1,this.pickTileActive=!1,this.dropDownVisible=!0,this.generalVisible=!0,this.primitivesVisible=!1,this.terrainVisible=!1,this.depthFrustumText="",aO.Z.track(this,["frustums","frustumPlanes","performance","shaderCacheText","primitiveBoundingSphere","primitiveReferenceFrame","filterPrimitive","tileBoundingSphere","filterTile","wireframe","depthFrustum","suspendUpdates","tileCoordinates","frustumStatisticText","tileText","hasPickedPrimitive","hasPickedTile","pickPrimitiveActive","pickTileActive","dropDownVisible","generalVisible","primitivesVisible","terrainVisible","depthFrustumText"]),this._toggleDropDown=(0,YI.Z)((function(){i.dropDownVisible=!i.dropDownVisible})),this._toggleGeneral=(0,YI.Z)((function(){i.generalVisible=!i.generalVisible})),this._togglePrimitives=(0,YI.Z)((function(){i.primitivesVisible=!i.primitivesVisible})),this._toggleTerrain=(0,YI.Z)((function(){i.terrainVisible=!i.terrainVisible})),this._frustumsSubscription=aO.Z.getObservable(this,"frustums").subscribe((function(e){i._scene.debugShowFrustums=e,i._scene.requestRender()})),this._frustumPlanesSubscription=aO.Z.getObservable(this,"frustumPlanes").subscribe((function(e){i._scene.debugShowFrustumPlanes=e,i._scene.requestRender()})),this._performanceSubscription=aO.Z.getObservable(this,"performance").subscribe((function(e){e?i._performanceDisplay=new lC.Z({container:i._performanceContainer}):i._performanceContainer.innerHTML=""})),this._showPrimitiveBoundingSphere=(0,YI.Z)((function(){return i._primitive.debugShowBoundingVolume=i.primitiveBoundingSphere,i._scene.requestRender(),!0})),this._primitiveBoundingSphereSubscription=aO.Z.getObservable(this,"primitiveBoundingSphere").subscribe((function(){i._showPrimitiveBoundingSphere()})),this._showPrimitiveReferenceFrame=(0,YI.Z)((function(){if(i.primitiveReferenceFrame){const e=i._primitive.modelMatrix;i._modelMatrixPrimitive=new hb({modelMatrix:e}),i._scene.primitives.add(i._modelMatrixPrimitive)}else(0,f.Z)(i._modelMatrixPrimitive)&&(i._scene.primitives.remove(i._modelMatrixPrimitive),i._modelMatrixPrimitive=void 0);return i._scene.requestRender(),!0})),this._primitiveReferenceFrameSubscription=aO.Z.getObservable(this,"primitiveReferenceFrame").subscribe((function(){i._showPrimitiveReferenceFrame()})),this._doFilterPrimitive=(0,YI.Z)((function(){return i.filterPrimitive?i._scene.debugCommandFilter=function(e){return!(!(0,f.Z)(i._modelMatrixPrimitive)||e.owner!==i._modelMatrixPrimitive._primitive)||!!(0,f.Z)(i._primitive)&&(e.owner===i._primitive||e.owner===i._primitive._billboardCollection||e.owner.primitive===i._primitive)}:i._scene.debugCommandFilter=void 0,!0})),this._filterPrimitiveSubscription=aO.Z.getObservable(this,"filterPrimitive").subscribe((function(){i._doFilterPrimitive(),i._scene.requestRender()})),this._wireframeSubscription=aO.Z.getObservable(this,"wireframe").subscribe((function(e){o._surface.tileProvider._debug.wireframe=e,i._scene.requestRender()})),this._depthFrustumSubscription=aO.Z.getObservable(this,"depthFrustum").subscribe((function(e){i._scene.debugShowDepthFrustum=e,i._scene.requestRender()})),this._incrementDepthFrustum=(0,YI.Z)((function(){const e=i.depthFrustum+1;return i.depthFrustum=wO(1,i._numberOfFrustums,e),i._scene.requestRender(),!0})),this._decrementDepthFrustum=(0,YI.Z)((function(){const e=i.depthFrustum-1;return i.depthFrustum=wO(1,i._numberOfFrustums,e),i._scene.requestRender(),!0})),this._suspendUpdatesSubscription=aO.Z.getObservable(this,"suspendUpdates").subscribe((function(e){o._surface._debug.suspendLodUpdate=e,e||(i.filterTile=!1)})),this._showTileCoordinates=(0,YI.Z)((function(){return i.tileCoordinates&&!(0,f.Z)(s)?s=e.imageryLayers.addImageryProvider(new MS({tilingScheme:e.terrainProvider.tilingScheme})):!i.tileCoordinates&&(0,f.Z)(s)&&(e.imageryLayers.remove(s),s=void 0),!0})),this._tileCoordinatesSubscription=aO.Z.getObservable(this,"tileCoordinates").subscribe((function(){i._showTileCoordinates(),i._scene.requestRender()})),this._tileBoundingSphereSubscription=aO.Z.getObservable(this,"tileBoundingSphere").subscribe((function(){i._showTileBoundingSphere(),i._scene.requestRender()})),this._showTileBoundingSphere=(0,YI.Z)((function(){return i.tileBoundingSphere?o._surface.tileProvider._debug.boundingSphereTile=i._tile:o._surface.tileProvider._debug.boundingSphereTile=void 0,i._scene.requestRender(),!0})),this._doFilterTile=(0,YI.Z)((function(){return i.filterTile?(i.suspendUpdates=!0,o._surface._tilesToRender=[],(0,f.Z)(i._tile)&&i._tile.renderable&&o._surface._tilesToRender.push(i._tile)):i.suspendUpdates=!1,!0})),this._filterTileSubscription=aO.Z.getObservable(this,"filterTile").subscribe((function(){i.doFilterTile(),i._scene.requestRender()})),this._pickPrimitive=(0,YI.Z)((function(){i.pickPrimitiveActive=!i.pickPrimitiveActive})),this._pickPrimitiveActiveSubscription=aO.Z.getObservable(this,"pickPrimitiveActive").subscribe((function(e){e?r.setInputAction(a,sg.Z.LEFT_CLICK):r.removeInputAction(sg.Z.LEFT_CLICK)})),this._pickTile=(0,YI.Z)((function(){i.pickTileActive=!i.pickTileActive})),this._pickTileActiveSubscription=aO.Z.getObservable(this,"pickTileActive").subscribe((function(e){e?r.setInputAction(l,sg.Z.LEFT_CLICK):r.removeInputAction(sg.Z.LEFT_CLICK)})),this._removePostRenderEvent=e.postRender.addEventListener((function(){i._update()}))}Object.defineProperties(SO.prototype,{scene:{get:function(){return this._scene}},performanceContainer:{get:function(){return this._performanceContainer}},toggleDropDown:{get:function(){return this._toggleDropDown}},showPrimitiveBoundingSphere:{get:function(){return this._showPrimitiveBoundingSphere}},showPrimitiveReferenceFrame:{get:function(){return this._showPrimitiveReferenceFrame}},doFilterPrimitive:{get:function(){return this._doFilterPrimitive}},incrementDepthFrustum:{get:function(){return this._incrementDepthFrustum}},decrementDepthFrustum:{get:function(){return this._decrementDepthFrustum}},showTileCoordinates:{get:function(){return this._showTileCoordinates}},showTileBoundingSphere:{get:function(){return this._showTileBoundingSphere}},doFilterTile:{get:function(){return this._doFilterTile}},toggleGeneral:{get:function(){return this._toggleGeneral}},togglePrimitives:{get:function(){return this._togglePrimitives}},toggleTerrain:{get:function(){return this._toggleTerrain}},pickPrimitive:{get:function(){return this._pickPrimitive}},pickTile:{get:function(){return this._pickTile}},selectParent:{get:function(){const e=this;return(0,YI.Z)((function(){e.tile=e.tile.parent}))}},selectNW:{get:function(){const e=this;return(0,YI.Z)((function(){e.tile=e.tile.northwestChild}))}},selectNE:{get:function(){const e=this;return(0,YI.Z)((function(){e.tile=e.tile.northeastChild}))}},selectSW:{get:function(){const e=this;return(0,YI.Z)((function(){e.tile=e.tile.southwestChild}))}},selectSE:{get:function(){const e=this;return(0,YI.Z)((function(){e.tile=e.tile.southeastChild}))}},primitive:{get:function(){return this._primitive},set:function(e){const t=this._primitive;e!==t&&(this.hasPickedPrimitive=!0,(0,f.Z)(t)&&(t.debugShowBoundingVolume=!1),this._scene.debugCommandFilter=void 0,(0,f.Z)(this._modelMatrixPrimitive)&&(this._scene.primitives.remove(this._modelMatrixPrimitive),this._modelMatrixPrimitive=void 0),this._primitive=e,e.show=!1,setTimeout((function(){e.show=!0}),50),this.showPrimitiveBoundingSphere(),this.showPrimitiveReferenceFrame(),this.doFilterPrimitive())}},tile:{get:function(){return this._tile},set:function(e){if((0,f.Z)(e)){if(this.hasPickedTile=!0,e!==this._tile){this.tileText=`L: ${e.level} X: ${e.x} Y: ${e.y}`,this.tileText+=`<br>SW corner: ${e.rectangle.west}, ${e.rectangle.south}`,this.tileText+=`<br>NE corner: ${e.rectangle.east}, ${e.rectangle.north}`;const t=e.data;(0,f.Z)(t)&&(0,f.Z)(t.tileBoundingRegion)?this.tileText+=`<br>Min: ${t.tileBoundingRegion.minimumHeight} Max: ${t.tileBoundingRegion.maximumHeight}`:this.tileText+="<br>(Tile is not loaded)"}this._tile=e,this.showTileBoundingSphere(),this.doFilterTile()}else this.hasPickedTile=!1,this._tile=void 0}}}),SO.prototype._update=function(){this.frustums&&(this.frustumStatisticText=function(e){let t;if((0,f.Z)(e)){t="Command Statistics";const i=e.commandsInFrustums;for(const e in i)if(i.hasOwnProperty(e)){let n,r=parseInt(e,10);if(7===r)n="1, 2 and 3";else{const e=[];for(let t=2;t>=0;t--){const i=Math.pow(2,t);r>=i&&(e.push(t+1),r-=i)}n=e.reverse().join(" and ")}t+=`<br>&nbsp;&nbsp;&nbsp;&nbsp;${i[e]} in frustum ${n}`}t+=`<br>Total: ${e.totalCommands}`}return t}(this._scene.debugFrustumStatistics));const e=this._scene.numberOfFrustums;this._numberOfFrustums=e,this.depthFrustum=wO(1,e,this.depthFrustum),this.depthFrustumText=`${this.depthFrustum} of ${e}`,this.performance&&this._performanceDisplay.update(),this.primitiveReferenceFrame&&(this._modelMatrixPrimitive.modelMatrix=this._primitive.modelMatrix),this.shaderCacheText=`Cached shaders: ${this._scene.context.shaderCache.numberOfShaders}`},SO.prototype.isDestroyed=function(){return!1},SO.prototype.destroy=function(){return this._eventHandler.destroy(),this._removePostRenderEvent(),this._frustumsSubscription.dispose(),this._frustumPlanesSubscription.dispose(),this._performanceSubscription.dispose(),this._primitiveBoundingSphereSubscription.dispose(),this._primitiveReferenceFrameSubscription.dispose(),this._filterPrimitiveSubscription.dispose(),this._wireframeSubscription.dispose(),this._depthFrustumSubscription.dispose(),this._suspendUpdatesSubscription.dispose(),this._tileCoordinatesSubscription.dispose(),this._tileBoundingSphereSubscription.dispose(),this._filterTileSubscription.dispose(),this._pickPrimitiveActiveSubscription.dispose(),this._pickTileActiveSubscription.dispose(),(0,Ug.Z)(this)};const TO=SO;function AO(e,t){if(!(0,f.Z)(e))throw new S.Z("container is required.");if(!(0,f.Z)(t))throw new S.Z("scene is required.");e=(0,Ol.Z)(e);const i=document.createElement("div"),n=new TO(t,i);this._viewModel=n,this._container=e;const r=document.createElement("div");this._element=r;const o=document.createElement("div");o.textContent="Cesium Inspector",o.className="cesium-cesiumInspector-button",o.setAttribute("data-bind","click: toggleDropDown"),r.appendChild(o),r.className="cesium-cesiumInspector",r.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : dropDownVisible, "cesium-cesiumInspector-hidden" : !dropDownVisible }'),e.appendChild(this._element);const s=document.createElement("div");s.className="cesium-cesiumInspector-dropDown",r.appendChild(s);const a=JI.createSection,l=JI.createCheckbox,c=a(s,"General","generalVisible","toggleGeneral"),u=l("Show Frustums","frustums"),d=document.createElement("div");d.className="cesium-cesiumInspector-frustumStatistics",d.setAttribute("data-bind","visible: frustums, html: frustumStatisticText"),u.appendChild(d),c.appendChild(u),c.appendChild(l("Show Frustum Planes","frustumPlanes")),c.appendChild(l("Performance Display","performance")),i.className="cesium-cesiumInspector-performanceDisplay",c.appendChild(i);const h=document.createElement("div");h.className="cesium-cesiumInspector-shaderCache",h.setAttribute("data-bind","html: shaderCacheText"),c.appendChild(h);const p=document.createElement("div");c.appendChild(p);const m=document.createElement("span");m.setAttribute("data-bind",'html: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Frustum:"'),p.appendChild(m);const g=document.createElement("span");g.setAttribute("data-bind","text: depthFrustumText"),p.appendChild(g);const _=document.createElement("input");_.type="button",_.value="-",_.className="cesium-cesiumInspector-pickButton",_.setAttribute("data-bind","click: decrementDepthFrustum"),p.appendChild(_);const y=document.createElement("input");y.type="button",y.value="+",y.className="cesium-cesiumInspector-pickButton",y.setAttribute("data-bind","click: incrementDepthFrustum"),p.appendChild(y);const Z=a(s,"Primitives","primitivesVisible","togglePrimitives"),v=document.createElement("div");v.className="cesium-cesiumInspector-pickSection",Z.appendChild(v);const b=document.createElement("input");b.type="button",b.value="Pick a primitive",b.className="cesium-cesiumInspector-pickButton",b.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickPrimitiveActive}, click: pickPrimitive');let w=document.createElement("div");w.className="cesium-cesiumInspector-center",w.appendChild(b),v.appendChild(w),v.appendChild(l("Show bounding sphere","primitiveBoundingSphere","hasPickedPrimitive")),v.appendChild(l("Show reference frame","primitiveReferenceFrame","hasPickedPrimitive")),this._primitiveOnly=l("Show only selected","filterPrimitive","hasPickedPrimitive"),v.appendChild(this._primitiveOnly);const x=a(s,"Terrain","terrainVisible","toggleTerrain"),C=document.createElement("div");C.className="cesium-cesiumInspector-pickSection",x.appendChild(C);const T=document.createElement("input");T.type="button",T.value="Pick a tile",T.className="cesium-cesiumInspector-pickButton",T.setAttribute("data-bind",'css: {"cesium-cesiumInspector-pickButtonHighlight" : pickTileActive}, click: pickTile'),w=document.createElement("div"),w.appendChild(T),w.className="cesium-cesiumInspector-center",C.appendChild(w);const A=document.createElement("div");C.appendChild(A);const P=document.createElement("input");P.type="button",P.value="Parent",P.className="cesium-cesiumInspector-pickButton",P.setAttribute("data-bind","click: selectParent");const E=document.createElement("input");E.type="button",E.value="NW",E.className="cesium-cesiumInspector-pickButton",E.setAttribute("data-bind","click: selectNW");const M=document.createElement("input");M.type="button",M.value="NE",M.className="cesium-cesiumInspector-pickButton",M.setAttribute("data-bind","click: selectNE");const k=document.createElement("input");k.type="button",k.value="SW",k.className="cesium-cesiumInspector-pickButton",k.setAttribute("data-bind","click: selectSW");const I=document.createElement("input");I.type="button",I.value="SE",I.className="cesium-cesiumInspector-pickButton",I.setAttribute("data-bind","click: selectSE");const O=document.createElement("div");O.className="cesium-cesiumInspector-tileText",A.className="cesium-cesiumInspector-frustumStatistics",A.appendChild(O),A.setAttribute("data-bind","visible: hasPickedTile"),O.setAttribute("data-bind","html: tileText");const B=document.createElement("div");B.className="cesium-cesiumInspector-relativeText",B.textContent="Select relative:",A.appendChild(B);const R=document.createElement("table"),F=document.createElement("tr"),D=document.createElement("tr"),L=document.createElement("td");L.appendChild(P);const V=document.createElement("td");V.appendChild(E);const N=document.createElement("td");N.appendChild(M),F.appendChild(L),F.appendChild(V),F.appendChild(N);const U=document.createElement("td"),G=document.createElement("td");G.appendChild(k);const z=document.createElement("td");z.appendChild(I),D.appendChild(U),D.appendChild(G),D.appendChild(z),R.appendChild(F),R.appendChild(D),A.appendChild(R),C.appendChild(l("Show bounding volume","tileBoundingSphere","hasPickedTile")),C.appendChild(l("Show only selected","filterTile","hasPickedTile")),x.appendChild(l("Wireframe","wireframe")),x.appendChild(l("Suspend LOD update","suspendUpdates")),x.appendChild(l("Show tile coordinates","tileCoordinates")),aO.Z.applyBindings(n,this._element)}Object.defineProperties(AO.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),AO.prototype.isDestroyed=function(){return!1},AO.prototype.destroy=function(){return aO.Z.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,Ug.Z)(this)};const PO=AO;var EO=i(642178),MO=i(473158),kO=i(257766),IO=i(188395),OO=i(969908),BO=i(869930),RO=i(517410),FO=i(338590),DO=i(935929),LO=i(237516);function VO(e){if(!(0,f.Z)(e)||!(0,f.Z)(e.scene))throw new S.Z("options.scene is required.");this._scene=e.scene,this.lowFrameRateMessage=(0,p.Z)(e.lowFrameRateMessage,"This application appears to be performing poorly on your system.  Please try using a different web browser or updating your video drivers."),this.lowFrameRateMessageDismissed=!1,this.showingLowFrameRateMessage=!1,aO.Z.track(this,["lowFrameRateMessage","lowFrameRateMessageDismissed","showingLowFrameRateMessage"]);const t=this;this._dismissMessage=(0,YI.Z)((function(){t.showingLowFrameRateMessage=!1,t.lowFrameRateMessageDismissed=!0}));const i=Ib.fromScene(e.scene);this._unsubscribeLowFrameRate=i.lowFrameRate.addEventListener((function(){t.lowFrameRateMessageDismissed||(t.showingLowFrameRateMessage=!0)})),this._unsubscribeNominalFrameRate=i.nominalFrameRate.addEventListener((function(){t.showingLowFrameRateMessage=!1}))}Object.defineProperties(VO.prototype,{scene:{get:function(){return this._scene}},dismissMessage:{get:function(){return this._dismissMessage}}}),VO.prototype.destroy=function(){return this._unsubscribeLowFrameRate(),this._unsubscribeNominalFrameRate(),(0,Ug.Z)(this)};const NO=VO;function UO(e){if(!(0,f.Z)(e)||!(0,f.Z)(e.container))throw new S.Z("options.container is required.");if(!(0,f.Z)(e.scene))throw new S.Z("options.scene is required.");const t=(0,Ol.Z)(e.container),i=new NO(e),n=document.createElement("div");n.className="cesium-performance-watchdog-message-area",n.setAttribute("data-bind","visible: showingLowFrameRateMessage");const r=document.createElement("button");r.setAttribute("type","button"),r.className="cesium-performance-watchdog-message-dismiss",r.innerHTML="&times;",r.setAttribute("data-bind","click: dismissMessage"),n.appendChild(r);const o=document.createElement("div");o.className="cesium-performance-watchdog-message",o.setAttribute("data-bind","html: lowFrameRateMessage"),n.appendChild(o),t.appendChild(n),aO.Z.applyBindings(i,n),this._container=t,this._viewModel=i,this._element=n}Object.defineProperties(UO.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),UO.prototype.isDestroyed=function(){return!1},UO.prototype.destroy=function(){return this._viewModel.destroy(),aO.Z.cleanNode(this._element),this._container.removeChild(this._element),(0,Ug.Z)(this)};const GO=UO;var zO=i(427529),KO=i(227567),qO=i(310166),HO=i(789284),WO=i(965691),jO=i(494349),JO=i(334678),XO=i(769647),$O=i(566035),YO=i(584181),QO=i(987744),eB=i(663940),tB=i(910269),iB=i(29379);const nB=function(e){Ce.Z.typeOf.object("viewer",e);const t=document.createElement("div");t.className="cesium-viewer-cesium3DTilesInspectorContainer",e.container.appendChild(t);const i=new bO(t,e.scene);Object.defineProperties(e,{cesium3DTilesInspector:{get:function(){return i}}})},rB=function(e){if(!(0,f.Z)(e))throw new S.Z("viewer is required.");const t=document.createElement("div");t.className="cesium-viewer-cesiumInspectorContainer",e.container.appendChild(t);const i=new PO(t,e.scene);Object.defineProperties(e,{cesiumInspector:{get:function(){return i}}})};function oB(e){e.stopPropagation(),e.preventDefault()}function sB(e,t){const i=e;(0,f.Z)(i)&&(i.removeEventListener("drop",t,!1),i.removeEventListener("dragenter",oB,!1),i.removeEventListener("dragover",oB,!1),i.removeEventListener("dragexit",oB,!1))}function aB(e,t){e.addEventListener("drop",t,!1),e.addEventListener("dragenter",oB,!1),e.addEventListener("dragover",oB,!1),e.addEventListener("dragexit",oB,!1)}function lB(e,t,i,n){const r=e.scene;return function(o){const s=t.name;try{let a;if(/\.czml$/i.test(s))a=zi.load(JSON.parse(o.target.result),{sourceUri:s});else if(/\.geojson$/i.test(s)||/\.json$/i.test(s)||/\.topojson$/i.test(s))a=$i.Z.load(JSON.parse(o.target.result),{sourceUri:s,clampToGround:n});else if(/\.(kml|kmz)$/i.test(s))a=hu.load(t,{sourceUri:s,proxy:i,camera:r.camera,canvas:r.canvas,clampToGround:n,screenOverlayContainer:e.container});else{if(!/\.gpx$/i.test(s))return void e.dropError.raiseEvent(e,s,`Unrecognized file: ${s}`);a=jr.load(t,{sourceUri:s,proxy:i})}(0,f.Z)(a)&&e.dataSources.add(a).then((function(t){e.flyToOnDrop&&e.flyTo(t)})).catch((function(t){e.dropError.raiseEvent(e,s,t)}))}catch(t){e.dropError.raiseEvent(e,s,t)}}}function cB(e,t){return function(i){e.dropError.raiseEvent(e,t.name,i.target.error)}}const uB=function(e,t){if(!(0,f.Z)(e))throw new S.Z("viewer is required.");if(e.hasOwnProperty("dropTarget"))throw new S.Z("dropTarget is already defined by another mixin.");if(e.hasOwnProperty("dropEnabled"))throw new S.Z("dropEnabled is already defined by another mixin.");if(e.hasOwnProperty("dropError"))throw new S.Z("dropError is already defined by another mixin.");if(e.hasOwnProperty("clearOnDrop"))throw new S.Z("clearOnDrop is already defined by another mixin.");if(e.hasOwnProperty("flyToOnDrop"))throw new S.Z("flyToOnDrop is already defined by another mixin.");t=(0,p.Z)(t,p.Z.EMPTY_OBJECT);let i=!0,n=(0,p.Z)(t.flyToOnDrop,!0);const r=new m.Z;let o=(0,p.Z)(t.clearOnDrop,!0),s=(0,p.Z)(t.dropTarget,e.container),a=(0,p.Z)(t.clampToGround,!0),l=t.proxy;function c(t){oB(t),o&&(e.entities.removeAll(),e.dataSources.removeAll());const i=t.dataTransfer.files,n=i.length;for(let t=0;t<n;t++){const n=i[t],r=new FileReader;r.onload=lB(e,n,l,a),r.onerror=cB(e,n),r.readAsText(n)}}s=(0,Ol.Z)(s),Object.defineProperties(e,{dropTarget:{get:function(){return s},set:function(e){if(!(0,f.Z)(e))throw new S.Z("value is required.");sB(s,c),s=e,aB(s,c)}},dropEnabled:{get:function(){return i},set:function(e){e!==i&&(e?aB(s,c):sB(s,c),i=e)}},dropError:{get:function(){return r}},clearOnDrop:{get:function(){return o},set:function(e){o=e}},flyToOnDrop:{get:function(){return n},set:function(e){n=e}},proxy:{get:function(){return l},set:function(e){l=e}},clampToGround:{get:function(){return a},set:function(e){a=e}}}),aB(s,c),e.destroy=k_(e,e.destroy,(function(){e.dropEnabled=!1})),e._handleDrop=c},dB=function(e,t){if(!(0,f.Z)(e))throw new S.Z("viewer is required.");t=(0,p.Z)(t,p.Z.EMPTY_OBJECT);const i=new GO({scene:e.scene,container:e.bottomContainer,lowFrameRateMessage:t.lowFrameRateMessage});Object.defineProperties(e,{performanceWatchdog:{get:function(){return i}}})};function hB(e){const t=e.split("\n");let i;for(i=0;i<t.length&&!t[i].match(/\S/);i++);if(i===t.length)return"";let n="";const r=/^\s*/,o=t[i].match(r)[0].length;for(let e=i;e<t.length;e++){let i=t[e];i.match(r)[0].length>=o&&(i=i.slice(o)),n+=`${i}\n`}return n}function pB(e){Ce.Z.typeOf.object("scene",e),this._scene=e,this._voxelPrimitive=void 0,this._customShaderCompilationRemoveCallback=void 0,this._definedProperties=[],this._getPrimitiveFunctions=[],this._modelMatrixReady=!1;const t=this;function i(i){const{name:n,initialValue:r}=i;t._definedProperties.push(n);let o=i.setPrimitiveFunction;!0===o&&(o=function(e){t._voxelPrimitive[n]=e});let s=i.getPrimitiveFunction;!0===s&&(s=function(){t[n]=t._voxelPrimitive[n]}),(0,f.Z)(s)&&t._getPrimitiveFunctions.push(s);const a=aO.Z.observable();return aO.Z.defineProperty(t,n,{get:function(){return a()},set:function(i){"number"==typeof r&&"string"==typeof i&&(i=Number(i),isNaN(i)&&(i=r)),"boolean"==typeof r&&"number"==typeof i&&(i=1===i),a(i),(0,f.Z)(o)&&(0,f.Z)(t._voxelPrimitive)&&(o(i),e.requestRender())}}),t[n]=r,a}function n(e,i){return function(n){const r=t._voxelPrimitive[e].clone();r[i]=n,t._voxelPrimitive[e]=r}}i({name:"inspectorVisible",initialValue:!0}),i({name:"displayVisible",initialValue:!1}),i({name:"transformVisible",initialValue:!1}),i({name:"boundsVisible",initialValue:!1}),i({name:"clippingVisible",initialValue:!1}),i({name:"shaderVisible",initialValue:!1}),i({name:"shaderString",initialValue:"",getPrimitiveFunction:function(){const e=t._voxelPrimitive.customShader.fragmentShaderText;t.shaderString=hB(e)}}),i({name:"shaderCompilationMessage",initialValue:""}),i({name:"shaderCompilationSuccess",initialValue:!0}),i({name:"depthTest",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"show",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"disableUpdate",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"debugDraw",initialValue:!1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"jitter",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"nearestSampling",initialValue:!0,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"screenSpaceError",initialValue:4,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"stepSize",initialValue:1,setPrimitiveFunction:!0,getPrimitiveFunction:!0}),i({name:"shapeIsBox",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsBox=e===UZ.Z.BOX}}),i({name:"shapeIsEllipsoid",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsEllipsoid=e===UZ.Z.ELLIPSOID}}),i({name:"shapeIsCylinder",getPrimitiveFunction:function(){const e=t._voxelPrimitive.shape;t.shapeIsCylinder=e===UZ.Z.CYLINDER}}),i({name:"boundsBoxMaxX",initialValue:0,setPrimitiveFunction:n("maxBounds","x"),getPrimitiveFunction:function(){t.boundsBoxMaxX=t._voxelPrimitive.maxBounds.x}}),i({name:"boundsBoxMinX",initialValue:0,setPrimitiveFunction:n("minBounds","x"),getPrimitiveFunction:function(){t.boundsBoxMinX=t._voxelPrimitive.minBounds.x}}),i({name:"boundsBoxMaxY",initialValue:0,setPrimitiveFunction:n("maxBounds","y"),getPrimitiveFunction:function(){t.boundsBoxMaxY=t._voxelPrimitive.maxBounds.y}}),i({name:"boundsBoxMinY",initialValue:0,setPrimitiveFunction:n("minBounds","y"),getPrimitiveFunction:function(){t.boundsBoxMinY=t._voxelPrimitive.minBounds.y}}),i({name:"boundsBoxMaxZ",initialValue:0,setPrimitiveFunction:n("maxBounds","z"),getPrimitiveFunction:function(){t.boundsBoxMaxZ=t._voxelPrimitive.maxBounds.z}}),i({name:"boundsBoxMinZ",initialValue:0,setPrimitiveFunction:n("minBounds","z"),getPrimitiveFunction:function(){t.boundsBoxMinZ=t._voxelPrimitive.minBounds.z}}),i({name:"boundsEllipsoidMaxLongitude",initialValue:0,setPrimitiveFunction:n("maxBounds","x"),getPrimitiveFunction:function(){t.boundsEllipsoidMaxLongitude=t._voxelPrimitive.maxBounds.x}}),i({name:"boundsEllipsoidMinLongitude",initialValue:0,setPrimitiveFunction:n("minBounds","x"),getPrimitiveFunction:function(){t.boundsEllipsoidMinLongitude=t._voxelPrimitive.minBounds.x}}),i({name:"boundsEllipsoidMaxLatitude",initialValue:0,setPrimitiveFunction:n("maxBounds","y"),getPrimitiveFunction:function(){t.boundsEllipsoidMaxLatitude=t._voxelPrimitive.maxBounds.y}}),i({name:"boundsEllipsoidMinLatitude",initialValue:0,setPrimitiveFunction:n("minBounds","y"),getPrimitiveFunction:function(){t.boundsEllipsoidMinLatitude=t._voxelPrimitive.minBounds.y}}),i({name:"boundsEllipsoidMaxHeight",initialValue:0,setPrimitiveFunction:n("maxBounds","z"),getPrimitiveFunction:function(){t.boundsEllipsoidMaxHeight=t._voxelPrimitive.maxBounds.z}}),i({name:"boundsEllipsoidMinHeight",initialValue:0,setPrimitiveFunction:n("minBounds","z"),getPrimitiveFunction:function(){t.boundsEllipsoidMinHeight=t._voxelPrimitive.minBounds.z}}),i({name:"boundsCylinderMaxRadius",initialValue:0,setPrimitiveFunction:n("maxBounds","x"),getPrimitiveFunction:function(){t.boundsCylinderMaxRadius=t._voxelPrimitive.maxBounds.x}}),i({name:"boundsCylinderMinRadius",initialValue:0,setPrimitiveFunction:n("minBounds","x"),getPrimitiveFunction:function(){t.boundsCylinderMinRadius=t._voxelPrimitive.minBounds.x}}),i({name:"boundsCylinderMaxHeight",initialValue:0,setPrimitiveFunction:n("maxBounds","y"),getPrimitiveFunction:function(){t.boundsCylinderMaxHeight=t._voxelPrimitive.maxBounds.y}}),i({name:"boundsCylinderMinHeight",initialValue:0,setPrimitiveFunction:n("minBounds","y"),getPrimitiveFunction:function(){t.boundsCylinderMinHeight=t._voxelPrimitive.minBounds.y}}),i({name:"boundsCylinderMaxAngle",initialValue:0,setPrimitiveFunction:n("maxBounds","z"),getPrimitiveFunction:function(){t.boundsCylinderMaxAngle=t._voxelPrimitive.maxBounds.z}}),i({name:"boundsCylinderMinAngle",initialValue:0,setPrimitiveFunction:n("minBounds","z"),getPrimitiveFunction:function(){t.boundsCylinderMinAngle=t._voxelPrimitive.minBounds.z}}),i({name:"clippingBoxMaxX",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingBoxMaxX=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingBoxMinX",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingBoxMinX=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingBoxMaxY",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingBoxMaxY=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingBoxMinY",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingBoxMinY=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingBoxMaxZ",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingBoxMaxZ=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingBoxMinZ",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingBoxMinZ=t._voxelPrimitive.minClippingBounds.z}}),i({name:"clippingEllipsoidMaxLongitude",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxLongitude=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingEllipsoidMinLongitude",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingEllipsoidMinLongitude=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingEllipsoidMaxLatitude",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxLatitude=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingEllipsoidMinLatitude",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingEllipsoidMinLatitude=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingEllipsoidMaxHeight",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingEllipsoidMaxHeight=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingEllipsoidMinHeight",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingEllipsoidMinHeight=t._voxelPrimitive.minClippingBounds.z}}),i({name:"clippingCylinderMaxRadius",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","x"),getPrimitiveFunction:function(){t.clippingCylinderMaxRadius=t._voxelPrimitive.maxClippingBounds.x}}),i({name:"clippingCylinderMinRadius",initialValue:0,setPrimitiveFunction:n("minClippingBounds","x"),getPrimitiveFunction:function(){t.clippingCylinderMinRadius=t._voxelPrimitive.minClippingBounds.x}}),i({name:"clippingCylinderMaxHeight",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","y"),getPrimitiveFunction:function(){t.clippingCylinderMaxHeight=t._voxelPrimitive.maxClippingBounds.y}}),i({name:"clippingCylinderMinHeight",initialValue:0,setPrimitiveFunction:n("minClippingBounds","y"),getPrimitiveFunction:function(){t.clippingCylinderMinHeight=t._voxelPrimitive.minClippingBounds.y}}),i({name:"clippingCylinderMaxAngle",initialValue:0,setPrimitiveFunction:n("maxClippingBounds","z"),getPrimitiveFunction:function(){t.clippingCylinderMaxAngle=t._voxelPrimitive.maxClippingBounds.z}}),i({name:"clippingCylinderMinAngle",initialValue:0,setPrimitiveFunction:n("minClippingBounds","z"),getPrimitiveFunction:function(){t.clippingCylinderMinAngle=t._voxelPrimitive.minClippingBounds.z}}),i({name:"translationX",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.translationX=Mh.Z.getTranslation(t._voxelPrimitive.modelMatrix,new Y.Z).x}}),i({name:"translationY",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.translationY=Mh.Z.getTranslation(t._voxelPrimitive.modelMatrix,new Y.Z).y}}),i({name:"translationZ",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.translationZ=Mh.Z.getTranslation(t._voxelPrimitive.modelMatrix,new Y.Z).z}}),i({name:"scaleX",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.scaleX=Mh.Z.getScale(t._voxelPrimitive.modelMatrix,new Y.Z).x}}),i({name:"scaleY",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.scaleY=Mh.Z.getScale(t._voxelPrimitive.modelMatrix,new Y.Z).y}}),i({name:"scaleZ",initialValue:1,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)},getPrimitiveFunction:function(){t.scaleZ=Mh.Z.getScale(t._voxelPrimitive.modelMatrix,new Y.Z).z}}),i({name:"angleX",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)}}),i({name:"angleY",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)}}),i({name:"angleZ",initialValue:0,setPrimitiveFunction:function(){t._modelMatrixReady&&yB(t)}})}const fB=new Y.Z,mB=new Y.Z,gB=new ro.Z,_B=new Ft.Z;function yB(e){const t=Y.Z.fromElements(e.translationX,e.translationY,e.translationZ,fB),i=Y.Z.fromElements(e.scaleX,e.scaleY,e.scaleZ,mB),n=gB;n.heading=e.angleX,n.pitch=e.angleY,n.roll=e.angleZ;const r=Ft.Z.fromHeadingPitchRoll(n,_B),o=Ft.Z.multiplyByScale(r,i,r);e._voxelPrimitive.modelMatrix=Mh.Z.fromRotationTranslation(o,t,e._voxelPrimitive.modelMatrix)}Object.defineProperties(pB.prototype,{scene:{get:function(){return this._scene}},voxelPrimitive:{get:function(){return this._voxelPrimitive},set:function(e){if((0,f.Z)(this._customShaderCompilationRemoveCallback)&&this._customShaderCompilationRemoveCallback(),(0,f.Z)(e)){this._voxelPrimitive=e;const t=this;t._voxelPrimitive._readyPromise.then((function(){t._customShaderCompilationRemoveCallback=t._voxelPrimitive.customShaderCompilationEvent.addEventListener((function(e){const i=t._voxelPrimitive.customShader.fragmentShaderText;t.shaderString=hB(i),(0,f.Z)(e)?(t.shaderCompilationMessage=e.message,t.shaderCompilationSuccess=!1):(t.shaderCompilationMessage="Shader compiled successfully!",t.shaderCompilationSuccess=!0)})),t._modelMatrixReady=!1;for(let e=0;e<t._getPrimitiveFunctions.length;e++)t._getPrimitiveFunctions[e]();t._modelMatrixReady=!0,yB(t)}))}}}}),pB.prototype.toggleInspector=function(){this.inspectorVisible=!this.inspectorVisible},pB.prototype.toggleDisplay=function(){this.displayVisible=!this.displayVisible},pB.prototype.toggleTransform=function(){this.transformVisible=!this.transformVisible},pB.prototype.toggleBounds=function(){this.boundsVisible=!this.boundsVisible},pB.prototype.toggleClipping=function(){this.clippingVisible=!this.clippingVisible},pB.prototype.toggleShader=function(){this.shaderVisible=!this.shaderVisible},pB.prototype.compileShader=function(){(0,f.Z)(this._voxelPrimitive)&&(this._voxelPrimitive.customShader=new fE.Z({fragmentShaderText:this.shaderString,uniforms:this._voxelPrimitive.customShader.uniforms}))},pB.prototype.shaderEditorKeyPress=function(e,t){if(9===t.keyCode){t.preventDefault();const e=t.target,i=e.selectionStart,n=e.selectionEnd;let r=n;const o=e.value.slice(i,n).split("\n"),s=o.length;let a;if(t.shiftKey)for(a=0;a<s;++a)" "===o[a][0]&&(" "===o[a][1]?(o[a]=o[a].substr(2),r-=2):(o[a]=o[a].substr(1),r-=1));else for(a=0;a<s;++a)o[a]=`  ${o[a]}`,r+=2;const l=o.join("\n");e.value=e.value.slice(0,i)+l+e.value.slice(n),e.selectionStart=i!==n?i:r,e.selectionEnd=r}else!t.ctrlKey||10!==t.keyCode&&13!==t.keyCode||this.compileShader();return!0},pB.prototype.isDestroyed=function(){return!1},pB.prototype.destroy=function(){const e=this;return this._definedProperties.forEach((function(t){aO.Z.getObservable(e,t).dispose()})),(0,Ug.Z)(this)};const ZB=pB;function vB(e,t){Ce.Z.defined("container",e),Ce.Z.typeOf.object("scene",t),e=(0,Ol.Z)(e);const i=document.createElement("div"),n=new ZB(t);this._viewModel=n,this._container=e,this._element=i;const r=document.createElement("div");r.textContent="Voxel Inspector",r.className="cesium-cesiumInspector-button",r.setAttribute("data-bind","click: toggleInspector"),i.appendChild(r),i.className="cesium-cesiumInspector cesium-VoxelInspector",i.setAttribute("data-bind",'css: { "cesium-cesiumInspector-visible" : inspectorVisible, "cesium-cesiumInspector-hidden" : !inspectorVisible}'),e.appendChild(i);const o=document.createElement("div");o.className="cesium-cesiumInspector-dropDown",i.appendChild(o);const s=JI.createSection,a=JI.createCheckbox,l=JI.createRangeInput,c=JI.createButton,u=s(o,"Display","displayVisible","toggleDisplay"),d=s(o,"Transform","transformVisible","toggleTransform"),h=s(o,"Bounds","boundsVisible","toggleBounds"),p=s(o,"Clipping","clippingVisible","toggleClipping"),f=s(o,"Shader","shaderVisible","toggleShader");u.appendChild(a("Depth Test","depthTest")),u.appendChild(a("Show","show")),u.appendChild(a("Disable Update","disableUpdate")),u.appendChild(a("Debug Draw","debugDraw")),u.appendChild(a("Jitter","jitter")),u.appendChild(a("Nearest Sampling","nearestSampling")),u.appendChild(l("Screen Space Error","screenSpaceError",0,128)),u.appendChild(l("Step Size","stepSize",0,2));const m=T.Z.PI;d.appendChild(l("Translation X","translationX",-10,10)),d.appendChild(l("Translation Y","translationY",-10,10)),d.appendChild(l("Translation Z","translationZ",-10,10)),d.appendChild(l("Scale X","scaleX",0,10)),d.appendChild(l("Scale Y","scaleY",0,10)),d.appendChild(l("Scale Z","scaleZ",0,10)),d.appendChild(l("Heading","angleX",-m,+m)),d.appendChild(l("Pitch","angleY",-m,+m)),d.appendChild(l("Roll","angleZ",-m,+m));const g=UZ.Z.getMinBounds(UZ.Z.BOX),_=UZ.Z.getMaxBounds(UZ.Z.BOX),y=Y.Z.fromElements(UZ.Z.getMinBounds(UZ.Z.ELLIPSOID).x,UZ.Z.getMinBounds(UZ.Z.ELLIPSOID).y,-oe.Z.WGS84.maximumRadius,new Y.Z),Z=Y.Z.fromElements(UZ.Z.getMaxBounds(UZ.Z.ELLIPSOID).x,UZ.Z.getMaxBounds(UZ.Z.ELLIPSOID).y,1e7,new Y.Z),v=UZ.Z.getMinBounds(UZ.Z.CYLINDER),b=UZ.Z.getMaxBounds(UZ.Z.CYLINDER);bB("Max X","Min X","Max Y","Min Y","Max Z","Min Z","boundsBoxMaxX","boundsBoxMinX","boundsBoxMaxY","boundsBoxMinY","boundsBoxMaxZ","boundsBoxMinZ",g,_,"shapeIsBox",h),bB("Max Longitude","Min Longitude","Max Latitude","Min Latitude","Max Height","Min Height","boundsEllipsoidMaxLongitude","boundsEllipsoidMinLongitude","boundsEllipsoidMaxLatitude","boundsEllipsoidMinLatitude","boundsEllipsoidMaxHeight","boundsEllipsoidMinHeight",y,Z,"shapeIsEllipsoid",h),bB("Max Radius","Min Radius","Max Height","Min Height","Max Angle","Min Angle","boundsCylinderMaxRadius","boundsCylinderMinRadius","boundsCylinderMaxHeight","boundsCylinderMinHeight","boundsCylinderMaxAngle","boundsCylinderMinAngle",v,b,"shapeIsCylinder",h),bB("Max X","Min X","Max Y","Min Y","Max Z","Min Z","clippingBoxMaxX","clippingBoxMinX","clippingBoxMaxY","clippingBoxMinY","clippingBoxMaxZ","clippingBoxMinZ",g,_,"shapeIsBox",p),bB("Max Longitude","Min Longitude","Max Latitude","Min Latitude","Max Height","Min Height","clippingEllipsoidMaxLongitude","clippingEllipsoidMinLongitude","clippingEllipsoidMaxLatitude","clippingEllipsoidMinLatitude","clippingEllipsoidMaxHeight","clippingEllipsoidMinHeight",y,Z,"shapeIsEllipsoid",p),bB("Max Radius","Min Radius","Max Height","Min Height","Max Angle","Min Angle","clippingCylinderMaxRadius","clippingCylinderMinRadius","clippingCylinderMaxHeight","clippingCylinderMinHeight","clippingCylinderMaxAngle","clippingCylinderMinAngle",v,b,"shapeIsCylinder",p);const w=document.createElement("div");f.appendChild(w);const x=document.createElement("textarea");x.setAttribute("data-bind","textInput: shaderString, event: { keydown: shaderEditorKeyPress }"),w.className="cesium-cesiumInspector-styleEditor",w.appendChild(x);const C=c("Compile (Ctrl+Enter)","compileShader");w.appendChild(C);const S=document.createElement("label");S.style.display="block",S.setAttribute("data-bind","text: shaderCompilationMessage, style: {color: shaderCompilationSuccess ? 'green' : 'red'}"),w.appendChild(S),aO.Z.applyBindings(n,i)}function bB(e,t,i,n,r,o,s,a,l,c,u,d,h,p,f,m){const g=JI.createRangeInput,_=h,y=p,Z=m.appendChild(document.createElement("div"));Z.setAttribute("data-bind",`if: ${f}`),Z.appendChild(g(e,s,_.x,y.x)),Z.appendChild(g(t,a,_.x,y.x)),Z.appendChild(g(i,l,_.y,y.y)),Z.appendChild(g(n,c,_.y,y.y)),Z.appendChild(g(r,u,_.z,y.z)),Z.appendChild(g(o,d,_.z,y.z))}Object.defineProperties(vB.prototype,{container:{get:function(){return this._container}},viewModel:{get:function(){return this._viewModel}}}),vB.prototype.isDestroyed=function(){return!1},vB.prototype.destroy=function(){return aO.Z.cleanNode(this._element),this._container.removeChild(this._element),this.viewModel.destroy(),(0,Ug.Z)(this)};const wB=vB,xB=function(e){Ce.Z.typeOf.object("viewer",e);const t=document.createElement("div");t.className="cesium-viewer-voxelInspectorContainer",e.container.appendChild(t);const i=new wB(t,e.scene);Object.defineProperties(e,{voxelInspector:{get:function(){return i}}})},CB="1.106.1"},967197:(e,t)=>{var i,n,r,o,s,a,l,c,u,d,h,p,f;n={defaultNoDataValue:-34027999387901484e22,decode:function(e,t){var i=(t=t||{}).encodedMaskData||null===t.encodedMaskData,l=a(e,t.inputOffset||0,i),c=null!==t.noDataValue?t.noDataValue:n.defaultNoDataValue,u=r(l,t.pixelType||Float32Array,t.encodedMaskData,c,t.returnMask),d={width:l.width,height:l.height,pixelData:u.resultPixels,minValue:u.minValue,maxValue:l.pixels.maxValue,noDataValue:c};return u.resultMask&&(d.maskData=u.resultMask),t.returnEncodedMask&&l.mask&&(d.encodedMaskData=l.mask.bitset?l.mask.bitset:null),t.returnFileInfo&&(d.fileInfo=o(l),t.computeUsedBitDepths&&(d.fileInfo.bitDepths=s(l))),d}},r=function(e,t,i,n,r){var o,s,a,c=0,u=e.pixels.numBlocksX,d=e.pixels.numBlocksY,h=Math.floor(e.width/u),p=Math.floor(e.height/d),f=2*e.maxZError,m=Number.MAX_VALUE;i=i||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),r&&i&&(a=new Uint8Array(e.width*e.height));for(var g,_,y=new Float32Array(h*p),Z=0;Z<=d;Z++){var v=Z!==d?p:e.height%d;if(0!==v)for(var b=0;b<=u;b++){var w=b!==u?h:e.width%u;if(0!==w){var x,C,S,T,A=Z*e.width*p+b*h,P=e.width-w,E=e.pixels.blocks[c];if(E.encoding<2?(0===E.encoding?x=E.rawData:(l(E.stuffedData,E.bitsPerPixel,E.numValidPixels,E.offset,f,y,e.pixels.maxValue),x=y),C=0):S=2===E.encoding?0:E.offset,i)for(_=0;_<v;_++){for(7&A&&(T=i[A>>3],T<<=7&A),g=0;g<w;g++)7&A||(T=i[A>>3]),128&T?(a&&(a[A]=1),m=m>(o=E.encoding<2?x[C++]:S)?o:m,s[A++]=o):(a&&(a[A]=0),s[A++]=n),T<<=1;A+=P}else if(E.encoding<2)for(_=0;_<v;_++){for(g=0;g<w;g++)m=m>(o=x[C++])?o:m,s[A++]=o;A+=P}else for(m=m>S?S:m,_=0;_<v;_++){for(g=0;g<w;g++)s[A++]=S;A+=P}if(1===E.encoding&&C!==E.numValidPixels)throw"Block and Mask do not match";c++}}}return{resultPixels:s,resultMask:a,minValue:m}},o=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,noDataValue:e.noDataValue}}},s=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,i={},n=0;n<t;n++){var r=e.pixels.blocks[n];0===r.encoding?i.float32=!0:1===r.encoding?i[r.bitsPerPixel]=!0:i[0]=!0}return Object.keys(i)},a=function(e,t,i){var n={},r=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,r),"CntZImage"!==n.fileIdentifierString.trim())throw"Unexpected file identifier string: "+n.fileIdentifierString;t+=10;var o=new DataView(e,t,24);if(n.fileVersion=o.getInt32(0,!0),n.imageType=o.getInt32(4,!0),n.height=o.getUint32(8,!0),n.width=o.getUint32(12,!0),n.maxZError=o.getFloat64(16,!0),t+=24,!i)if(o=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=o.getUint32(0,!0),n.mask.numBlocksX=o.getUint32(4,!0),n.mask.numBytes=o.getUint32(8,!0),n.mask.maxValue=o.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var s=new Uint8Array(Math.ceil(n.width*n.height/8)),a=(o=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),l=2,c=0;do{if(a>0)for(;a--;)s[c++]=o.getUint8(l++);else{var u=o.getUint8(l++);for(a=-a;a--;)s[c++]=u}a=o.getInt16(l,!0),l+=2}while(l<n.mask.numBytes);if(-32768!==a||c<s.length)throw"Unexpected end of mask RLE encoding";n.mask.bitset=s,t+=n.mask.numBytes}else n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue||(n.mask.bitset=new Uint8Array(Math.ceil(n.width*n.height/8)));o=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=o.getUint32(0,!0),n.pixels.numBlocksX=o.getUint32(4,!0),n.pixels.numBytes=o.getUint32(8,!0),n.pixels.maxValue=o.getFloat32(12,!0),t+=16;var d=n.pixels.numBlocksX,h=n.pixels.numBlocksY,p=d+(n.width%d>0?1:0),f=h+(n.height%h>0?1:0);n.pixels.blocks=new Array(p*f);for(var m=0,g=0;g<f;g++)for(var _=0;_<p;_++){var y=0,Z=e.byteLength-t;o=new DataView(e,t,Math.min(10,Z));var v={};n.pixels.blocks[m++]=v;var b=o.getUint8(0);if(y++,v.encoding=63&b,v.encoding>3)throw"Invalid block encoding ("+v.encoding+")";if(2!==v.encoding){if(0!==b&&2!==b){if(b>>=6,v.offsetType=b,2===b)v.offset=o.getInt8(1),y++;else if(1===b)v.offset=o.getInt16(1,!0),y+=2;else{if(0!==b)throw"Invalid block offset type";v.offset=o.getFloat32(1,!0),y+=4}if(1===v.encoding)if(b=o.getUint8(y),y++,v.bitsPerPixel=63&b,b>>=6,v.numValidPixelsType=b,2===b)v.numValidPixels=o.getUint8(y),y++;else if(1===b)v.numValidPixels=o.getUint16(y,!0),y+=2;else{if(0!==b)throw"Invalid valid pixel count type";v.numValidPixels=o.getUint32(y,!0),y+=4}}var w;if(t+=y,3!==v.encoding)if(0===v.encoding){var x=(n.pixels.numBytes-1)/4;if(x!==Math.floor(x))throw"uncompressed block has invalid length";w=new ArrayBuffer(4*x),new Uint8Array(w).set(new Uint8Array(e,t,4*x));var C=new Float32Array(w);v.rawData=C,t+=4*x}else if(1===v.encoding){var S=Math.ceil(v.numValidPixels*v.bitsPerPixel/8),T=Math.ceil(S/4);w=new ArrayBuffer(4*T),new Uint8Array(w).set(new Uint8Array(e,t,S)),v.stuffedData=new Uint32Array(w),t+=S}}else t++}return n.eofOffset=t,n},l=function(e,t,i,n,r,o,s){var a,l,c,u=(1<<t)-1,d=0,h=0,p=Math.ceil((s-n)/r),f=4*e.length-Math.ceil(t*i/8);for(e[e.length-1]<<=8*f,a=0;a<i;a++){if(0===h&&(c=e[d++],h=32),h>=t)l=c>>>h-t&u,h-=t;else{var m=t-h;l=(c&u)<<m&u,l+=(c=e[d++])>>>(h=32-m)}o[a]=l<p?n+l*r:s}return o},d=n,h=function(){"use strict";var e=function(e,t,i,n,r,o,s,a){var l,c,u,d,h,p=(1<<i)-1,f=0,m=0,g=4*e.length-Math.ceil(i*n/8);if(e[e.length-1]<<=8*g,r)for(l=0;l<n;l++)0===m&&(u=e[f++],m=32),m>=i?(c=u>>>m-i&p,m-=i):(c=(u&p)<<(d=i-m)&p,c+=(u=e[f++])>>>(m=32-d)),t[l]=r[c];else for(h=Math.ceil((a-o)/s),l=0;l<n;l++)0===m&&(u=e[f++],m=32),m>=i?(c=u>>>m-i&p,m-=i):(c=(u&p)<<(d=i-m)&p,c+=(u=e[f++])>>>(m=32-d)),t[l]=c<h?o+c*s:a},t=function(e,t,i,n,r,o,s,a){var l,c,u,d,h=(1<<i)-1,p=0,f=0,m=0;if(r)for(l=0;l<n;l++)0===f&&(u=e[p++],f=32,m=0),f>=i?(c=u>>>m&h,f-=i,m+=i):(c=u>>>m&h,f=32-(d=i-f),c|=((u=e[p++])&(1<<d)-1)<<i-d,m=d),t[l]=r[c];else{var g=Math.ceil((a-o)/s);for(l=0;l<n;l++)0===f&&(u=e[p++],f=32,m=0),f>=i?(c=u>>>m&h,f-=i,m+=i):(c=u>>>m&h,f=32-(d=i-f),c|=((u=e[p++])&(1<<d)-1)<<i-d,m=d),t[l]=c<g?o+c*s:a}return t},i={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,i=65535,n=e.length,r=Math.floor(n/2),o=0;r;){var s=r>=359?359:r;r-=s;do{t+=e[o++]<<8,i+=t+=e[o++]}while(--s);t=(65535&t)+(t>>>16),i=(65535&i)+(i>>>16)}return 1&n&&(i+=t+=e[o]<<8),((i=(65535&i)+(i>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var i=t.ptr,n=new Uint8Array(e,i,6),r={};if(r.fileIdentifierString=String.fromCharCode.apply(null,n),0!==r.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+r.fileIdentifierString;i+=6;var o,s=new DataView(e,i,8),a=s.getInt32(0,!0);if(r.fileVersion=a,i+=4,a>=3&&(r.checksum=s.getUint32(4,!0),i+=4),s=new DataView(e,i,12),r.height=s.getUint32(0,!0),r.width=s.getUint32(4,!0),i+=8,a>=4?(r.numDims=s.getUint32(8,!0),i+=4):r.numDims=1,s=new DataView(e,i,40),r.numValidPixel=s.getUint32(0,!0),r.microBlockSize=s.getInt32(4,!0),r.blobSize=s.getInt32(8,!0),r.imageType=s.getInt32(12,!0),r.maxZError=s.getFloat64(16,!0),r.zMin=s.getFloat64(24,!0),r.zMax=s.getFloat64(32,!0),i+=40,t.headerInfo=r,t.ptr=i,a>=3&&(o=a>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,i-o,r.blobSize-14))!==r.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var i=t.headerInfo,n=this.getDataTypeArray(i.imageType),r=i.numDims*this.getDataTypeSize(i.imageType),o=this.readSubArray(e,t.ptr,n,r),s=this.readSubArray(e,t.ptr+r,n,r);t.ptr+=2*r;var a,l=!0;for(a=0;a<i.numDims;a++)if(o[a]!==s[a]){l=!1;break}return i.minValues=o,i.maxValues=s,l},readSubArray:function(e,t,i,n){var r;if(i===Uint8Array)r=new Uint8Array(e,t,n);else{var o=new ArrayBuffer(n);new Uint8Array(o).set(new Uint8Array(e,t,n)),r=new i(o)}return r},readMask:function(e,t){var i,n,r=t.ptr,o=t.headerInfo,s=o.width*o.height,a=o.numValidPixel,l=new DataView(e,r,4),c={};if(c.numBytes=l.getUint32(0,!0),r+=4,(0===a||s===a)&&0!==c.numBytes)throw"invalid mask";if(0===a)i=new Uint8Array(Math.ceil(s/8)),c.bitset=i,n=new Uint8Array(s),t.pixels.resultMask=n,r+=c.numBytes;else if(c.numBytes>0){i=new Uint8Array(Math.ceil(s/8));var u=(l=new DataView(e,r,c.numBytes)).getInt16(0,!0),d=2,h=0,p=0;do{if(u>0)for(;u--;)i[h++]=l.getUint8(d++);else for(p=l.getUint8(d++),u=-u;u--;)i[h++]=p;u=l.getInt16(d,!0),d+=2}while(d<c.numBytes);if(-32768!==u||h<i.length)throw"Unexpected end of mask RLE encoding";n=new Uint8Array(s);var f=0,m=0;for(m=0;m<s;m++)7&m?(f=i[m>>3],f<<=7&m):f=i[m>>3],128&f&&(n[m]=1);t.pixels.resultMask=n,c.bitset=i,r+=c.numBytes}return t.ptr=r,t.mask=c,!0},readDataOneSweep:function(e,t,n){var r,o=t.ptr,s=t.headerInfo,a=s.numDims,l=s.width*s.height,c=s.imageType,u=s.numValidPixel*i.getDataTypeSize(c)*a,d=t.pixels.resultMask;if(n===Uint8Array)r=new Uint8Array(e,o,u);else{var h=new ArrayBuffer(u);new Uint8Array(h).set(new Uint8Array(e,o,u)),r=new n(h)}if(r.length===l*a)t.pixels.resultPixels=r;else{t.pixels.resultPixels=new n(l*a);var p=0,f=0,m=0,g=0;if(a>1)for(m=0;m<a;m++)for(g=m*l,f=0;f<l;f++)d[f]&&(t.pixels.resultPixels[g+f]=r[p++]);else for(f=0;f<l;f++)d[f]&&(t.pixels.resultPixels[f]=r[p++])}return o+=u,t.ptr=o,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,o=new DataView(e,t.ptr,16);if(t.ptr+=16,o.getInt32(0,!0)<2)throw"unsupported Huffman version";var s=o.getInt32(4,!0),a=o.getInt32(8,!0),l=o.getInt32(12,!0);if(a>=l)return!1;var c=new Uint32Array(l-a);i.decodeBits(e,t,c);var u,d,h,p,f=[];for(u=a;u<l;u++)f[d=u-(u<s?0:s)]={first:c[u-a],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),_=new ArrayBuffer(4*g);new Uint8Array(_).set(new Uint8Array(e,t.ptr,m));var y,Z=new Uint32Array(_),v=0,b=0;for(y=Z[0],u=a;u<l;u++)(p=f[d=u-(u<s?0:s)].first)>0&&(f[d].second=y<<v>>>32-p,32-v>=p?32===(v+=p)&&(v=0,y=Z[++b]):(v+=p-32,y=Z[++b],f[d].second|=y>>>32-v));var w,x=0,C=new n;for(u=0;u<f.length;u++)void 0!==f[u]&&(x=Math.max(x,f[u].first));w=x>=r?r:x,x>=30&&console.log("WARning, large NUM LUT BITS IS "+x);var S,T,A,P,E,M=[];for(u=a;u<l;u++)if((p=f[d=u-(u<s?0:s)].first)>0)if(S=[p,d],p<=w)for(T=f[d].second<<w-p,A=1<<w-p,h=0;h<A;h++)M[T|h]=S;else for(T=f[d].second,E=C,P=p-1;P>=0;P--)T>>>P&1?(E.right||(E.right=new n),E=E.right):(E.left||(E.left=new n),E=E.left),0!==P||E.val||(E.val=S[1]);return{decodeLut:M,numBitsLUTQick:w,numBitsLUT:x,tree:C,stuffedData:Z,srcPtr:b,bitPos:v}},readHuffman:function(e,t,i){var n,r,o,s,a,l,c,u,d,h=t.headerInfo,p=h.numDims,f=t.headerInfo.height,m=t.headerInfo.width,g=m*f,_=this.readHuffmanTree(e,t),y=_.decodeLut,Z=_.tree,v=_.stuffedData,b=_.srcPtr,w=_.bitPos,x=_.numBitsLUTQick,C=_.numBitsLUT,S=0===t.headerInfo.imageType?128:0,T=t.pixels.resultMask,A=0;w>0&&(b++,w=0);var P,E=v[b],M=1===t.encodeMode,k=new i(g*p),I=k;for(P=0;P<h.numDims;P++){if(p>1&&(I=new i(k.buffer,g*P,g),A=0),t.headerInfo.numValidPixel===m*f)for(u=0,l=0;l<f;l++)for(c=0;c<m;c++,u++){if(r=0,a=s=E<<w>>>32-x,32-w<x&&(a=s|=v[b+1]>>>64-w-x),y[a])r=y[a][1],w+=y[a][0];else for(a=s=E<<w>>>32-C,32-w<C&&(a=s|=v[b+1]>>>64-w-C),n=Z,d=0;d<C;d++)if(!(n=s>>>C-d-1&1?n.right:n.left).left&&!n.right){r=n.val,w=w+d+1;break}w>=32&&(w-=32,E=v[++b]),o=r-S,M?(o+=c>0?A:l>0?I[u-m]:A,o&=255,I[u]=o,A=o):I[u]=o}else for(u=0,l=0;l<f;l++)for(c=0;c<m;c++,u++)if(T[u]){if(r=0,a=s=E<<w>>>32-x,32-w<x&&(a=s|=v[b+1]>>>64-w-x),y[a])r=y[a][1],w+=y[a][0];else for(a=s=E<<w>>>32-C,32-w<C&&(a=s|=v[b+1]>>>64-w-C),n=Z,d=0;d<C;d++)if(!(n=s>>>C-d-1&1?n.right:n.left).left&&!n.right){r=n.val,w=w+d+1;break}w>=32&&(w-=32,E=v[++b]),o=r-S,M?(c>0&&T[u-1]?o+=A:l>0&&T[u-m]?o+=I[u-m]:o+=A,o&=255,I[u]=o,A=o):I[u]=o}t.ptr=t.ptr+4*(b+1)+(w>0?4:0)}t.pixels.resultPixels=k},decodeBits:function(i,n,r,o,s){var a=n.headerInfo,l=a.fileVersion,c=0,u=new DataView(i,n.ptr,5),d=u.getUint8(0);c++;var h=d>>6,p=0===h?4:3-h,f=(32&d)>0,m=31&d,g=0;if(1===p)g=u.getUint8(c),c++;else if(2===p)g=u.getUint16(c,!0),c+=2;else{if(4!==p)throw"Invalid valid pixel count type";g=u.getUint32(c,!0),c+=4}var _,y,Z,v,b,w,x,C,S,T=2*a.maxZError,A=a.numDims>1?a.maxValues[s]:a.zMax;if(f){for(n.counter.lut++,C=u.getUint8(c),c++,v=Math.ceil((C-1)*m/8),b=Math.ceil(v/4),y=new ArrayBuffer(4*b),Z=new Uint8Array(y),n.ptr+=c,Z.set(new Uint8Array(i,n.ptr,v)),x=new Uint32Array(y),n.ptr+=v,S=0;C-1>>>S;)S++;v=Math.ceil(g*S/8),b=Math.ceil(v/4),y=new ArrayBuffer(4*b),(Z=new Uint8Array(y)).set(new Uint8Array(i,n.ptr,v)),_=new Uint32Array(y),n.ptr+=v,w=l>=3?function(e,t,i,n,r,o){var s,a=(1<<t)-1,l=0,c=0,u=0,d=0,h=0,p=0,f=[],m=Math.ceil((o-n)/r);for(c=0;c<i;c++)0===d&&(s=e[l++],d=32,p=0),d>=t?(h=s>>>p&a,d-=t,p+=t):(h=s>>>p&a,d=32-(u=t-d),h|=((s=e[l++])&(1<<u)-1)<<t-u,p=u),f[c]=h<m?n+h*r:o;return f.unshift(n),f}(x,m,C-1,o,T,A):function(e,t,i,n,r,o){var s,a=(1<<t)-1,l=0,c=0,u=0,d=0,h=0,p=[],f=4*e.length-Math.ceil(t*i/8);e[e.length-1]<<=8*f;var m=Math.ceil((o-n)/r);for(c=0;c<i;c++)0===d&&(s=e[l++],d=32),d>=t?(h=s>>>d-t&a,d-=t):(h=(s&a)<<(u=t-d)&a,h+=(s=e[l++])>>>(d=32-u)),p[c]=h<m?n+h*r:o;return p.unshift(n),p}(x,m,C-1,o,T,A),l>=3?t(_,r,S,g,w):e(_,r,S,g,w)}else n.counter.bitstuffer++,S=m,n.ptr+=c,S>0&&(v=Math.ceil(g*S/8),b=Math.ceil(v/4),y=new ArrayBuffer(4*b),(Z=new Uint8Array(y)).set(new Uint8Array(i,n.ptr,v)),_=new Uint32Array(y),n.ptr+=v,l>=3?null==o?function(e,t,i,n){var r,o,s,a,l=(1<<i)-1,c=0,u=0,d=0;for(r=0;r<n;r++)0===u&&(s=e[c++],u=32,d=0),u>=i?(o=s>>>d&l,u-=i,d+=i):(o=s>>>d&l,u=32-(a=i-u),o|=((s=e[c++])&(1<<a)-1)<<i-a,d=a),t[r]=o}(_,r,S,g):t(_,r,S,g,!1,o,T,A):null==o?function(e,t,i,n){var r,o,s,a,l=(1<<i)-1,c=0,u=0,d=4*e.length-Math.ceil(i*n/8);for(e[e.length-1]<<=8*d,r=0;r<n;r++)0===u&&(s=e[c++],u=32),u>=i?(o=s>>>u-i&l,u-=i):(o=(s&l)<<(a=i-u)&l,o+=(s=e[c++])>>>(u=32-a)),t[r]=o}(_,r,S,g):e(_,r,S,g,!1,o,T,A))},readTiles:function(e,t,n){var r=t.headerInfo,o=r.width,s=r.height,a=r.microBlockSize,l=r.imageType,c=i.getDataTypeSize(l),u=Math.ceil(o/a),d=Math.ceil(s/a);t.pixels.numBlocksY=d,t.pixels.numBlocksX=u,t.pixels.ptr=0;var h,p,f,m,g,_,y,Z,v=0,b=0,w=0,x=0,C=0,S=0,T=0,A=0,P=0,E=0,M=0,k=0,I=0,O=0,B=0,R=new n(a*a),F=s%a||a,D=o%a||a,L=r.numDims,V=t.pixels.resultMask,N=t.pixels.resultPixels;for(w=0;w<d;w++)for(C=w!==d-1?a:F,x=0;x<u;x++)for(E=w*o*a+x*a,M=o-(S=x!==u-1?a:D),Z=0;Z<L;Z++){if(L>1&&(N=new n(t.pixels.resultPixels.buffer,o*s*Z*c,o*s)),T=e.byteLength-t.ptr,p={},B=0,B++,P=(A=(h=new DataView(e,t.ptr,Math.min(10,T))).getUint8(0))>>6&255,(A>>2&15)!=(x*a>>3&15))throw"integrity issue";if((g=3&A)>3)throw t.ptr+=B,"Invalid block encoding ("+g+")";if(2!==g)if(0===g){if(t.counter.uncompressed++,t.ptr+=B,k=(k=C*S*c)<(I=e.byteLength-t.ptr)?k:I,f=new ArrayBuffer(k%c==0?k:k+c-k%c),new Uint8Array(f).set(new Uint8Array(e,t.ptr,k)),m=new n(f),O=0,V)for(v=0;v<C;v++){for(b=0;b<S;b++)V[E]&&(N[E]=m[O++]),E++;E+=M}else for(v=0;v<C;v++){for(b=0;b<S;b++)N[E++]=m[O++];E+=M}t.ptr+=O*c}else if(_=i.getDataTypeUsed(l,P),y=i.getOnePixel(p,B,_,h),B+=i.getDataTypeSize(_),3===g)if(t.ptr+=B,t.counter.constantoffset++,V)for(v=0;v<C;v++){for(b=0;b<S;b++)V[E]&&(N[E]=y),E++;E+=M}else for(v=0;v<C;v++){for(b=0;b<S;b++)N[E++]=y;E+=M}else if(t.ptr+=B,i.decodeBits(e,t,R,y,Z),B=0,V)for(v=0;v<C;v++){for(b=0;b<S;b++)V[E]&&(N[E]=R[B++]),E++;E+=M}else for(v=0;v<C;v++){for(b=0;b<S;b++)N[E++]=R[B++];E+=M}else t.counter.constant++,t.ptr+=B}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:i.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var t=e.headerInfo.zMax,i=e.headerInfo.numDims,n=e.headerInfo.height*e.headerInfo.width,r=n*i,o=0,s=0,a=0,l=e.pixels.resultMask;if(l)if(i>1)for(o=0;o<i;o++)for(a=o*n,s=0;s<n;s++)l[s]&&(e.pixels.resultPixels[a+s]=t);else for(s=0;s<n;s++)l[s]&&(e.pixels.resultPixels[s]=t);else if(e.pixels.resultPixels.fill)e.pixels.resultPixels.fill(t);else for(s=0;s<r;s++)e.pixels.resultPixels[s]=t},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(null==t)return!1;var i;switch(e){case 0:i=t>=-128&&t<=127;break;case 1:i=t>=0&&t<=255;break;case 2:i=t>=-32768&&t<=32767;break;case 3:i=t>=0&&t<=65536;break;case 4:i=t>=-2147483648&&t<=2147483647;break;case 5:i=t>=0&&t<=4294967296;break;case 6:i=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:i=t>=5e-324&&t<=17976931348623157e292;break;default:i=!1}return i},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var i=e;switch(e){case 2:case 4:i=e-t;break;case 3:case 5:i=e-2*t;break;case 6:i=0===t?e:1===t?2:1;break;case 7:i=0===t?e:e-2*t+1;break;default:i=e}return i},getOnePixel:function(e,t,i,n){var r=0;switch(i){case 0:r=n.getInt8(t);break;case 1:r=n.getUint8(t);break;case 2:r=n.getInt16(t,!0);break;case 3:r=n.getUint16(t,!0);break;case 4:r=n.getInt32(t,!0);break;case 5:r=n.getUInt32(t,!0);break;case 6:r=n.getFloat32(t,!0);break;case 7:r=n.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return r}},n=function(e,t,i){this.val=e,this.left=t,this.right=i};return{decode:function(e,t){var n=(t=t||{}).noDataValue,r=0,o={};if(o.ptr=t.inputOffset||0,o.pixels={},i.readHeaderInfo(e,o)){var s=o.headerInfo,a=s.fileVersion,l=i.getDataTypeArray(s.imageType);i.readMask(e,o),s.numValidPixel===s.width*s.height||o.pixels.resultMask||(o.pixels.resultMask=t.maskData);var c,u=s.width*s.height;if(o.pixels.resultPixels=new l(u*s.numDims),o.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0},0!==s.numValidPixel)if(s.zMax===s.zMin)i.constructConstantSurface(o);else if(a>=4&&i.checkMinMaxRanges(e,o))i.constructConstantSurface(o);else{var d=new DataView(e,o.ptr,2),h=d.getUint8(0);if(o.ptr++,h)i.readDataOneSweep(e,o,l);else if(a>1&&s.imageType<=1&&Math.abs(s.maxZError-.5)<1e-5){var p=d.getUint8(1);if(o.ptr++,o.encodeMode=p,p>2||a<4&&p>1)throw"Invalid Huffman flag "+p;p?i.readHuffman(e,o,l):i.readTiles(e,o,l)}else i.readTiles(e,o,l)}o.eofOffset=o.ptr,t.inputOffset?(c=o.headerInfo.blobSize+t.inputOffset-o.ptr,Math.abs(c)>=1&&(o.eofOffset=t.inputOffset+o.headerInfo.blobSize)):(c=o.headerInfo.blobSize-o.ptr,Math.abs(c)>=1&&(o.eofOffset=o.headerInfo.blobSize));var f={width:s.width,height:s.height,pixelData:o.pixels.resultPixels,minValue:s.zMin,maxValue:s.zMax,validPixelCount:s.numValidPixel,dimCount:s.numDims,dimStats:{minValues:s.minValues,maxValues:s.maxValues},maskData:o.pixels.resultMask};if(o.pixels.resultMask&&i.isValidPixelValue(s.imageType,n)){var m=o.pixels.resultMask;for(r=0;r<u;r++)m[r]||(f.pixelData[r]=n);f.noDataValue=n}return o.noDataValue=n,t.returnFileInfo&&(f.fileInfo=i.formatFileInfo(o)),f}},getBandCount:function(e){for(var t=0,n=0,r={ptr:0,pixels:{}};n<e.byteLength-58;)i.readHeaderInfo(e,r),n+=r.headerInfo.blobSize,t++,r.ptr=n;return t}}}(),c=new ArrayBuffer(4),u=new Uint8Array(c),new Uint32Array(c)[0]=1,p=1===u[0],f={decode:function(e,t){if(!p)throw"Big endian system is not supported.";var i,n,r=(t=t||{}).inputOffset||0,o=new Uint8Array(e,r,10),s=String.fromCharCode.apply(null,o);if("CntZImage"===s.trim())i=d,n=1;else{if("Lerc2"!==s.substring(0,5))throw"Unexpected file identifier string: "+s;i=h,n=2}for(var a,l,c,u,f,m,g=0,_=e.byteLength-10,y=[],Z={width:0,height:0,pixels:[],pixelType:t.pixelType,mask:null,statistics:[]};r<_;){var v=i.decode(e,{inputOffset:r,encodedMaskData:a,maskData:c,returnMask:0===g,returnEncodedMask:0===g,returnFileInfo:!0,pixelType:t.pixelType||null,noDataValue:t.noDataValue||null});r=v.fileInfo.eofOffset,0===g&&(a=v.encodedMaskData,c=v.maskData,Z.width=v.width,Z.height=v.height,Z.dimCount=v.dimCount||1,Z.pixelType=v.pixelType||v.fileInfo.pixelType,Z.mask=v.maskData),n>1&&v.fileInfo.mask&&v.fileInfo.mask.numBytes>0&&y.push(v.maskData),g++,Z.pixels.push(v.pixelData),Z.statistics.push({minValue:v.minValue,maxValue:v.maxValue,noDataValue:v.noDataValue,dimStats:v.dimStats})}if(n>1&&y.length>1){for(m=Z.width*Z.height,Z.bandMasks=y,(c=new Uint8Array(m)).set(y[0]),u=1;u<y.length;u++)for(l=y[u],f=0;f<m;f++)c[f]=c[f]&l[f];Z.maskData=c}return Z}},void 0===(i=function(){return f}.apply(t,[]))||(e.exports=i)},670648:(e,t)=>{var i,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function i(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function n(e){return!0===(e&&e.__isLong__)}function r(e){var t=Math.clz32(e&-e);return e?31-t:t}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=n;var o={},s={};function a(e,t){var i,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(i=c(e,0,!0),r&&(s[e]=i),i):(r=-128<=(e|=0)&&e<128)&&(n=o[e])?n:(i=c(e,e<0?-1:0,!1),r&&(o[e]=i),i)}function l(e,t){if(isNaN(e))return t?y:_;if(t){if(e<0)return y;if(e>=f)return x}else{if(e<=-m)return C;if(e+1>=m)return w}return e<0?l(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new i(e,t,n)}i.fromInt=a,i.fromNumber=l,i.fromBits=c;var u=Math.pow;function d(e,t,i){if(0===e.length)throw Error("empty string");if("number"==typeof t?(i=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?y:_;if((i=i||10)<2||36<i)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,i).neg();for(var r=l(u(i,8)),o=_,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),i);if(a<8){var h=l(u(i,a));o=o.mul(h).add(l(c))}else o=(o=o.mul(r)).add(l(c))}return o.unsigned=t,o}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=d,i.fromValue=h;var p=4294967296,f=p*p,m=f/2,g=a(1<<24),_=a(0);i.ZERO=_;var y=a(0,!0);i.UZERO=y;var Z=a(1);i.ONE=Z;var v=a(1,!0);i.UONE=v;var b=a(-1);i.NEG_ONE=b;var w=c(-1,2147483647,!1);i.MAX_VALUE=w;var x=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=x;var C=c(0,-2147483648,!1);i.MIN_VALUE=C;var S=i.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=l(e),i=this.div(t),n=i.mul(t).sub(this);return i.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=l(u(e,6),this.unsigned),o=this,s="";;){var a=o.div(r),c=(o.sub(a.mul(r)).toInt()>>>0).toString(e);if((o=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return!(1&~this.low)},S.isEven=function(){return!(1&this.low)},S.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(Z)},S.neg=S.negate,S.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,d=0,p=0,f=0;return p+=(f+=o+(65535&e.low))>>>16,d+=(p+=r+l)>>>16,u+=(d+=i+a)>>>16,u+=t+s,c((p&=65535)<<16|(f&=65535),(u&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?y:_;if(this.eq(C))return e.isOdd()?C:_;if(e.eq(C))return this.isOdd()?C:_;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,m=0,Z=0,v=0;return Z+=(v+=s*p)>>>16,m+=(Z+=o*p)>>>16,Z&=65535,m+=(Z+=s*d)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=o*d)>>>16,m&=65535,f+=(m+=s*u)>>>16,f+=i*p+r*d+o*u+s*a,c((Z&=65535)<<16|(v&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");var i,r,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:_;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return v;o=y}else{if(this.eq(C))return e.eq(Z)||e.eq(b)?C:e.eq(C)?Z:(i=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?Z:b:(r=this.sub(e.mul(i)),o=i.add(r.div(e)));if(e.eq(C))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=_}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:u(2,s-48),d=l(i),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=l(i-=a,this.unsigned)).mul(e);d.isZero()&&(d=Z),o=o.add(d),r=r.sub(p)}return o},S.div=S.divide,S.modulo=function(e){return n(e)||(e=h(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},S.clz=S.countLeadingZeros,S.countTrailingZeros=function(){return this.low?r(this.low):r(this.high)+32},S.ctz=S.countTrailingZeros,S.and=function(e){return n(e)||(e=h(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return n(e)||(e=h(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return n(e)||(e=h(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),c(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},S.rotl=S.rotateLeft,S.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),c(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},S.rotr=S.rotateRight,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,n){return n?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var T=i;return e.default=T,"default"in e?e.default:e}({});void 0===(i=function(){return n}.apply(t,[]))||(e.exports=i)},364047:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;module=__webpack_require__.nmd(module),function(undefined){"use strict";var modules,cache,entries,protobuf;modules={1:[function(e,t,i){t.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,o=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise((function(r,s){i[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,s(e))}}))}},{}],2:[function(e,t,i){var n=i;n.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),o=new Array(123),s=0;s<64;)o[r[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,i){for(var n,o=null,s=[],a=0,l=0;t<i;){var c=e[t++];switch(l){case 0:s[a++]=r[c>>2],n=(3&c)<<4,l=1;break;case 1:s[a++]=r[n|c>>4],n=(15&c)<<2,l=2;break;case 2:s[a++]=r[n|c>>6],s[a++]=r[63&c],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=r[n],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var a="invalid encoding";n.decode=function(e,t,i){for(var n,r=i,s=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&s>1)break;if((c=o[c])===undefined)throw Error(a);switch(s){case 0:n=c,s=1;break;case 1:t[i++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[i++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[i++]=(3&n)<<6|c,s=0}}if(1===s)throw Error(a);return i-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],3:[function(e,t,i){function n(){this._listeners={}}t.exports=n,n.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},n.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},{}],4:[function(e,t,i){function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3]}function o(e,n,r){t[0]=e,n[r]=i[3],n[r+1]=i[2],n[r+2]=i[1],n[r+3]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function a(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?r:o,e.writeFloatBE=n?o:r,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,i,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,i,n)}}function i(e,t,i){var n=e(t,i),r=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,o),e.readFloatLE=i.bind(null,s),e.readFloatBE=i.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3],n[r+4]=i[4],n[r+5]=i[5],n[r+6]=i[6],n[r+7]=i[7]}function o(e,n,r){t[0]=e,n[r]=i[7],n[r+1]=i[6],n[r+2]=i[5],n[r+3]=i[4],n[r+4]=i[3],n[r+5]=i[2],n[r+6]=i[1],n[r+7]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function a(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:o,e.writeDoubleBE=n?o:r,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,i,n,r,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,r,o+t),e(1/n>0?0:2147483648,r,o+i);else if(isNaN(n))e(0,r,o+t),e(2146959360,r,o+i);else if(n>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+i);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,r,o+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,r,o+i)}}}function i(e,t,i,n,r){var o=e(n,r+t),s=e(n,r+i),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,o,4,0),e.readDoubleLE=i.bind(null,s,0,4),e.readDoubleBE=i.bind(null,a,4,0)}(),e}function r(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function o(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=n(n)},{}],5:[function(require,module,exports){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],6:[function(e,t,i){t.exports=function(e,t,i){var n=i||8192,r=n>>>1,o=null,s=n;return function(i){if(i<1||i>r)return e(i);s+i>n&&(o=e(n),s=0);var a=t.call(o,s,s+=i);return 7&s&&(s=1+(7|s)),a}}},{}],7:[function(e,t,i){var n=i;n.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,o=[],s=0;t<i;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,i){for(var n,r,o=i,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&r),++s,t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-o}},{}],8:[function(e,t,i){var n=i;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e(16),n.BufferWriter=e(17),n.Reader=e(9),n.BufferReader=e(10),n.util=e(15),n.rpc=e(12),n.roots=e(11),n.configure=r,r()},{10:10,11:11,12:12,15:15,16:16,17:17,9:9}],9:[function(e,t,i){t.exports=l;var n,r=e(15),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,i);if(t===i){var n=r.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=d(),n._configure();var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{15:15}],10:[function(e,t,i){t.exports=o;var n=e(9);(o.prototype=Object.create(n.prototype)).constructor=o;var r=e(15);function o(e){n.call(this,e)}o._configure=function(){r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},{15:15,9:9}],11:[function(e,t,i){t.exports={}},{}],12:[function(e,t,i){i.Service=e(13)},{13:13}],13:[function(e,t,i){t.exports=r;var n=e(15);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,i,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,i,r,o);if(!a.rpcImpl)return setTimeout((function(){s(Error("already ended"))}),0),undefined;try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,i){if(e)return a.emit("error",e,t),s(e);if(null===i)return a.end(!0),undefined;if(!(i instanceof r))try{i=r[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",i,t),s(null,i)}))}catch(e){return a.emit("error",e,t),setTimeout((function(){s(e)}),0),undefined}},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{15:15}],14:[function(e,t,i){t.exports=r;var n=e(15);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},{15:15}],15:[function(e,t,i){var n=i;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]!==undefined&&i||(e[n[r]]=t[n[r]]);return e}function o(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:undefined,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=e(1),n.base64=e(2),n.EventEmitter=e(3),n.float=e(4),n.inquire=e(5),n.utf8=e(7),n.pool=e(6),n.LongBits=e(14),n.isNode=Boolean(void 0!==__webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.process&&__webpack_require__.g.process.versions&&__webpack_require__.g.process.versions.node),n.global=n.isNode&&__webpack_require__.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&this[e[i]]!==undefined&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},{1:1,14:14,2:2,3:3,4:4,5:5,6:6,7:7}],16:[function(e,t,i){t.exports=d;var n,r=e(15),o=r.LongBits,s=r.base64,a=r.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=undefined,this.val=i}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}var h=function(){return r.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=undefined,this.val=t}function m(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function g(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=h(),d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var _=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(r.isString(e)){var i=d.alloc(t=s.length(e));s.decode(e,i,0),e=i}return this.uint32(t)._push(_,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},{15:15}],17:[function(e,t,i){t.exports=o;var n=e(16);(o.prototype=Object.create(n.prototype)).constructor=o;var r=e(15);function o(){n.call(this)}function s(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}o._configure=function(){o.alloc=r._Buffer_allocUnsafe,o.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]}},o.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=r.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},{15:15,16:16}]},cache={},entries=[8],protobuf=function e(t){var i=cache[t];return i||modules[t][0].call(i=cache[t]={exports:{}},e,i,i.exports),i.exports}(entries[0]),protobuf.util.global.protobuf=protobuf,__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(670648)],(__WEBPACK_AMD_DEFINE_RESULT__=function(e){return e&&e.isLong&&(protobuf.util.Long=e,protobuf.configure()),protobuf}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__))===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),module&&module.exports&&(module.exports=protobuf)}()}}]);