(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[49414],{276773:(t,e,n)=>{"use strict";n.d(e,{ZP:()=>S});var i=n(558493),o=n(706908),s=n(86340),r=n(810508),a=n(218672),h=n(864011),l=n(690728),u=n(438906),c=n(921882);function g(t,e,n){return function(i,o,s,r,a){if(!i)return;if(!o&&!e)return i;const h=e?0:s[0]*o,l=e?0:s[1]*o,u=a?a[0]:0,g=a?a[1]:0;let d=t[0]+h/2+u,m=t[2]-h/2+u,_=t[1]+l/2+g,R=t[3]-l/2+g;d>m&&(d=(m+d)/2,m=d),_>R&&(_=(R+_)/2,R=_);let p=(0,c.uZ)(i[0],d,m),C=(0,c.uZ)(i[1],_,R);if(r&&n&&o){const t=30*o;p+=-t*Math.log(1+Math.max(0,d-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-m)/t),C+=-t*Math.log(1+Math.max(0,_-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-R)/t)}return[p,C]}}function d(t){return t}var m=n(421915),_=n(179682);function R(t,e,n,i){const o=(0,m.dz)(e)/n[0],s=(0,m.Cr)(e)/n[1];return i?Math.min(t,Math.max(o,s)):Math.min(t,Math.min(o,s))}function p(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),(0,c.uZ)(i,n/2,2*e)}function C(t,e,n,i,o){return n=void 0===n||n,function(s,r,a,h){if(void 0!==s){const r=i?R(t,i,a,o):t;return n&&h?p(s,r,e):(0,c.uZ)(s,e,r)}}}var Z=n(938642),M=n(286320),f=n(15265);class I extends i.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.UQ)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.h_)(),t.center&&(t.center=(0,a.Vs)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.dY)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in s.Z)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;let o=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28;const h=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,g=void 0!==t.showFullExtent&&t.showFullExtent,d=(0,a.UQ)(t.projection,"EPSG:3857"),Z=d.getExtent();let M=t.constrainOnlyCenter,f=t.extent;if(l||f||!d.isGlobal()||(M=!1,f=Z),void 0!==t.resolutions){const r=t.resolutions;n=r[o],i=void 0!==r[s]?r[s]:r[r.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(o,s,r,a){if(void 0!==o){const h=t[0],l=t[t.length-1],u=n?R(h,n,r,i):h;if(a)return e?p(o,u,l):(0,c.uZ)(o,l,u);const g=Math.min(u,o),d=Math.floor((0,_.h7)(t,g,s));return t[d]>u&&d<t.length-1?t[d+1]:t[d]}}}(r,u,!M&&f,g):C(n,i,u,!M&&f,g)}else{const l=(Z?Math.max((0,m.dz)(Z),(0,m.Cr)(Z)):360*a.Wm.degrees/d.getMetersPerUnit())/r.S/Math.pow(2,0),_=l/Math.pow(2,28);n=t.maxResolution,void 0!==n?o=0:n=l/Math.pow(h,o),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(h,s):l/Math.pow(h,s):_),s=o+Math.floor(Math.log(n/i)/Math.log(h)),i=n/Math.pow(h,s-o),e=t.constrainResolution?function(t,e,n,i,o,s){return i=void 0===i||i,n=void 0!==n?n:0,function(r,a,h,l){if(void 0!==r){const u=o?R(e,o,h,s):e;if(l)return i?p(r,u,n):(0,c.uZ)(r,n,u);const g=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(t)-g),m=-a*(.5-g)+.5,_=Math.min(u,r),C=Math.floor(Math.log(e/_)/Math.log(t)+m),Z=Math.max(d,C),M=e/Math.pow(t,Z);return(0,c.uZ)(M,n,u)}}}(h,n,i,u,!M&&f,g):C(n,i,u,!M&&f,g)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:h}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return g(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.UQ)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,g(t,!1,!1)}return d}(t),o=n.constraint,h=function(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?(0,Z.Gw)():!1===e?Z.YP:"number"==typeof e?(0,Z.gE)(e):Z.YP}return Z.h$}(t);this.constraints_={center:i,resolution:o,rotation:h},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const o=this.getResolution(),s=o/2*(i[3]-e[3]+e[1]-i[1]),r=o/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=(0,a.Vs)(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=(0,a.Vs)(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&x(e,!0));let s=Date.now(),r=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const l=[];for(;i<n;++i){const t=arguments[i],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||M.rd,callback:e};if(t.center&&(n.sourceCenter=r,n.targetCenter=t.center.slice(),r=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=h;const e=(0,c.$W)(t.rotation-h+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=h+e,h=n.targetRotation}y(n)?n.complete=!0:s+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(o.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[o.Z.ANIMATING]>0}getInteracting(){return this.hints_[o.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(o.Z.ANIMATING,-this.hints_[o.Z.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&x(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let n=0,o=i.length;n<o;++n){const o=i[n];if(o.complete)continue;const r=t-o.start;let a=o.duration>0?r/o.duration:1;a>=1?(o.complete=!0,a=1):s=!1;const h=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],n=o.targetCenter[0],i=o.targetCenter[1];this.nextCenter_=o.targetCenter;const s=t+h*(n-t),r=e+h*(i-e);this.targetCenter_=[s,r]}if(o.sourceResolution&&o.targetResolution){const t=1===h?o.targetResolution:o.sourceResolution+h*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===h?(0,c.$W)(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+h*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[n]=null,this.setHint(o.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&x(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],(0,l.U1)(n,t-this.getRotation()),(0,l.IH)(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),o=this.getResolution();return void 0!==i&&void 0!==o&&(n=[e[0]-t*(e[0]-i[0])/o,e[1]-t*(e[1]-i[1])/o]),n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.lO)(t,this.getProjection()):t}getCenterInternal(){return this.get(s.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.Fj)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,u.h)(e,1);const n=this.getResolution();(0,u.h)(void 0!==n,2);const i=this.getRotation();return(0,u.h)(void 0!==i,3),(0,m.p8)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(s.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.dY)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=(0,m.dz)(t)/e[0],i=(0,m.Cr)(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(s.Z.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/o}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const o=this.padding_;if(o){const t=this.getViewportSizeMinusPadding_();i=v(i,this.getViewportSize_(),[t[0]/2+o[3],t[1]/2+o[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const o=(0,_.h7)(this.resolutions_,t,1);i=o,e=this.resolutions_[o],n=o==this.resolutions_.length-1?2:e/this.resolutions_[o+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,c.uZ)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,c.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if((0,u.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,u.h)(!(0,m.xb)(t),25);const e=(0,a.dY)(t,this.getProjection());n=(0,f.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.dY)(t.getExtent(),this.getProjection());n=(0,f.oJ)(e),n.rotate(this.getRotation(),(0,m.qg)(e))}else{const e=(0,a.Cs)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),o=t.getFlatCoordinates(),s=t.getStride();let r=1/0,a=1/0,h=-1/0,l=-1/0;for(let t=0,e=o.length;t<e;t+=s){const e=o[t]*n-o[t+1]*i,s=o[t]*i+o[t+1]*n;r=Math.min(r,e),a=Math.min(a,s),h=Math.max(h,e),l=Math.max(l,s)}return[r,a,h,l]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],o=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,o?0:1);const l=this.getRotation(),u=Math.sin(l),c=Math.cos(l),g=(0,m.qg)(r);g[0]+=(i[1]-i[3])/2*a,g[1]+=(i[0]-i[2])/2*a;const d=g[0]*c-g[1]*u,_=g[1]*c+g[0]*u,R=this.getConstrainedCenter([d,_],a),p=e.callback?e.callback:h.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:R,duration:e.duration,easing:e.easing},p):(this.targetResolution_=a,this.targetCenter_=R,this.applyTargetState_(!1,!0),x(p,!0))}centerOn(t,e,n){this.centerOnInternal((0,a.Vs)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(v(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let o;const s=this.padding_;if(s&&t){const r=this.getViewportSizeMinusPadding_(-n),a=v(t,i,[r[0]/2+s[3],r[1]/2+s[0]],e,n);o=[t[0]-a[0],t[1]-a[1]]}return o}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.lO)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.Vs)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(o,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.Vs)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.Vs)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),o=this.getViewportSize_(i),r=this.constraints_.resolution(this.targetResolution_,0,o,n),a=this.constraints_.center(this.targetCenter_,r,o,n,this.calculateCenterShift(this.targetCenter_,r,i,o));this.get(s.Z.ROTATION)!==i&&this.set(s.Z.ROTATION,i),this.get(s.Z.RESOLUTION)!==r&&(this.set(s.Z.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),a&&this.get(s.Z.CENTER)&&(0,l.fS)(this.get(s.Z.CENTER),a)||this.set(s.Z.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,r,s,!1,this.calculateCenterShift(this.targetCenter_,r,o,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=o,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===o&&this.getCenterInternal()&&(0,l.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:a,resolution:r,duration:t,easing:M.Vv,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(o.Z.INTERACTING,1)}endInteraction(t,e,n){n=n&&(0,a.Vs)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(o.Z.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function x(t,e){setTimeout((function(){t(e)}),0)}function y(t){return!(t.sourceCenter&&t.targetCenter&&!(0,l.fS)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function v(t,e,n,i,o){const s=Math.cos(-o);let r=Math.sin(-o),a=t[0]*s-t[1]*r,h=t[1]*s+t[0]*r;return a+=(e[0]/2-n[0])*i,h+=(n[1]-e[1]/2)*i,r=-r,[a*s-h*r,h*s+a*r]}const S=I},706908:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={ANIMATING:0,INTERACTING:1}},86340:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},910410:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var i=n(558493),o=n(428192),s=n(949179),r=n(438906),a=n(921882);class h extends i.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[o.Z.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.h)("number"==typeof e[o.Z.OPACITY],64),e[o.Z.VISIBLE]=void 0===t.visible||t.visible,e[o.Z.Z_INDEX]=t.zIndex,e[o.Z.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[o.Z.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[o.Z.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[o.Z.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,a.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,s.O3)()}getLayerStatesArray(t){return(0,s.O3)()}getExtent(){return this.get(o.Z.EXTENT)}getMaxResolution(){return this.get(o.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(o.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(o.Z.MIN_ZOOM)}getMaxZoom(){return this.get(o.Z.MAX_ZOOM)}getOpacity(){return this.get(o.Z.OPACITY)}getSourceState(){return(0,s.O3)()}getVisible(){return this.get(o.Z.VISIBLE)}getZIndex(){return this.get(o.Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(o.Z.EXTENT,t)}setMaxResolution(t){this.set(o.Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(o.Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(o.Z.MAX_ZOOM,t)}setMinZoom(t){this.set(o.Z.MIN_ZOOM,t)}setOpacity(t){(0,r.h)("number"==typeof t,64),this.set(o.Z.OPACITY,t)}setVisible(t){this.set(o.Z.VISIBLE,t)}setZIndex(t){this.set(o.Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const l=h},677701:(t,e,n)=>{"use strict";n.d(e,{j:()=>g,Z:()=>d});var i=n(910410),o=n(173381),s=n(428192),r=n(397208),a=n(276773),h=n(438906),l=n(421915),u=n(613002);class c extends i.Z{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(s.Z.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(s.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,u.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,u.oL)(t,o.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof a.ZP?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const o=this.getExtent();return g(i,e.viewState)&&(!o||(0,l.kK)(o,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];let i=e(t instanceof a.ZP?t.getViewStateAndExtent():t);return Array.isArray(i)||(i=[i]),i}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(s.Z.MAP,t)}getMapInternal(){return this.get(s.Z.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,u.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,u.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,u.oL)(t,r.Z.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);(0,h.h)(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=(0,u.oL)(this,o.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(s.Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function g(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const d=c},428192:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},941173:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(9520);class o extends i.ZP{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}const s=o},397208:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const i={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},302396:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(173381),o=n(611256),s=n(756834),r=n(949179);class a extends s.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,r.O3)()}getData(t){return null}prepareFrame(t){return(0,r.O3)()}renderFrame(t,e){return(0,r.O3)()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,o)=>{const s=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,o,s)}}forEachFeatureAtCoordinate(t,e,n,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===o.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=o.Z.LOADED&&e!=o.Z.ERROR&&t.addEventListener(i.Z.CHANGE,this.boundHandleImageChange_),e==o.Z.IDLE&&(t.load(),e=t.getState()),e==o.Z.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const h=a},704089:(t,e,n)=>{"use strict";n.d(e,{r:()=>c,Z:()=>m});var i=n(302396),o=n(941173),s=n(397208),r=n(782359),a=n(208913),h=n(85386),l=n(179682),u=n(421915);const c=[];let g=null;class d extends i.Z{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,r.Ue)(),this.pixelTransform=(0,r.Ue)(),this.inversePixelTransform=(0,r.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;g||(g=(0,h.E4)(1,1,void 0,{willReadFrequently:!0})),g.clearRect(0,0,1,1);try{g.drawImage(t,e,n,1,1,0,0,1,1),i=g.getImageData(0,0,1,1).data}catch(t){return g=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let o,s;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&(0,l.fS)((0,a._2)(t.style.backgroundColor),(0,a._2)(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){o=document.createElement("div"),o.className=i;let t=o.style;t.position="absolute",t.width="100%",t.height="100%",s=(0,h.E4)();const e=s.canvas;o.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=o,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=(0,u.rL)(n),o=(0,u.Xv)(n),s=(0,u.w$)(n),a=(0,u.hC)(n);(0,r.nn)(e.coordinateToPixelTransform,i),(0,r.nn)(e.coordinateToPixelTransform,o),(0,r.nn)(e.coordinateToPixelTransform,s),(0,r.nn)(e.coordinateToPixelTransform,a);const h=this.inversePixelTransform;(0,r.nn)(h,i),(0,r.nn)(h,o),(0,r.nn)(h,s),(0,r.nn)(h,a),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const s=new o.Z(t,this.inversePixelTransform,n,e);i.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(s.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(s.Z.POSTRENDER,t,e)}getRenderTransform(t,e,n,i,o,s,a){const h=o/2,l=s/2,u=i/e,c=-u,g=-t[0]+a,d=-t[1];return(0,r.qC)(this.tempTransform,h,l,u,c,-n,g,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const m=d},771405:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var i=n(558493),o=n(218672);class s extends i.Z{constructor(t){super(),this.projection=(0,o.U2)(t.projection),this.attributions_=r(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=r(t),this.changed()}setState(t){this.state_=t,this.changed()}}function r(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=s},810508:(t,e,n)=>{"use strict";n.d(e,{e:()=>i,S:()=>o});const i=42,o=256}}]);