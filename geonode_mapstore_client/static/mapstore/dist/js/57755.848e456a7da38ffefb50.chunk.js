(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[57755],{807691:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>F});var n=t(49977),o=t.n(n),i=t(66604),a=t.n(i),u=t(513218),s=t.n(u),c=t(3674),l=t.n(c),f=t(414293),v=t.n(f),d=t(557579),b=t(555927),y=t(782904),p=t(95797),g=t(197395),m=t(807878),h=t(263516),O=t(367306),w=t(274621),S=t(401757),j=t(324684),P=t(988753),A=t(291312),D=t(589919),E=t(275982),T=t(246781),M=["data"],k=["status","statusText","data","message"];function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function x(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function C(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,r){if(e){if("string"==typeof e)return W(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?W(e,r):void 0}}function W(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function X(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?X(Object(t),!0).forEach((function(r){var n,o,i,a;n=e,o=r,i=t[r],a=function(e,r){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==N(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const F={openDashboardWidgetEditor:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(d.AE,d.dm).filter((function(){return(0,O.Wy)(t())})).switchMap((function(){return o().Observable.of((0,b.D_)(!0))}))},closeDashboardWidgetEditorOnFinish:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(d.Jm).filter((function(){return(0,O.Wy)(t())})).switchMap((function(){return o().Observable.of((0,b.D_)(!1))}))},initDashboardEditorOnNew:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(d.AE).filter((function(){return(0,O.Wy)(t())})).switchMap((function(e){return o().Observable.of((0,d.bS)(_(_({legend:!1,mapSync:!1,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},closeDashboardEditorOnExit:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(E.nk).filter((function(){return(0,O.Wy)(t())})).filter((function(){return(0,O.i$)(t())})).switchMap((function(){return o().Observable.of((0,b.D_)(!1))}))},handleDashboardWidgetsFilterPanel:function(e){var r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,t=void 0===r?function(){}:r;return e.ofType(d.lG).filter((function(){return(0,O.Wy)(t())})).switchMap((function(){return o().Observable.of(p.gT.apply(void 0,C((r=t(),n=(0,S.JT)(r),[n.search&&n.search.url,n.name]))),(0,m.F)((0,S.um)(t())),(0,y.Xg)("queryPanel","enabled",!0)).concat(o().Observable.race(e.ofType(m.Wm).take(1),e.ofType(y.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"queryPanel"===r&&(!t||"enabled"===t)})).take(1)).switchMap((function(e){return(e.filterObj?o().Observable.of((0,d.Rz)((0,S.Nx)(t()),e.filterObj)):o().Observable.empty()).merge(o().Observable.of((0,y.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(E.nk,d.dm).merge(e.ofType(y.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.control,t=e.property;return"widgetBuilder"===r&&0==!t})))).concat(o().Observable.of((0,y.Xg)("queryPanel","enabled",!1)));var r,n}))},filterAnonymousUsersForDashboard:function(e,r){return e.ofType(h.c8,h.Nv).filter((function(){return"/dashboard"===(0,j.F)(r.getState())})).switchMap((function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),(0,w.jl)(r.getState())?o().Observable.empty():o().Observable.of((0,b.AN)({status:403}))}))},loadDashboardStream:function(e,r){var t=r.getState,n=void 0===t?function(){}:t;return e.ofType(b.zX).switchMap((function(e){var r=e.id;return(0,A.RX)(r).map((function(e){var r=e.data,t=x(e,M);return(0,b.rR)(t,(0,T.sq)(r))})).let((0,D.hP)((0,b.vM)(!0,"loading"),(0,b.vM)(!1,"loading"),(function(e){var r=window.location.href.match("dashboard-embedded")?"dashboardEmbedded":"dashboard",t=r+".errors.loading.unknownError";return 403===e.status&&(t=r+".errors.loading.pleaseLogin",(0,w.jl)(n())&&(t=r+".errors.loading.dashboardNotAccessible")),404===e.status&&(t=r+".errors.loading.dashboardDoesNotExist"),o().Observable.of((0,g.vU)({title:r+".errors.loading.title",message:t}),(0,b.AN)(_(_({},e),{},{messageId:t})))})))}))},reloadDashboardOnLoginLogout:function(e){return e.ofType(b.zX).switchMap((function(r){var t=r.id;return e.ofType(h.XP,h.Nv).switchMap((function(){return o().Observable.of((0,b.o2)(t)).delay(1e3)})).takeUntil(e.ofType(E.nk))}))},saveDashboard:function(e){return e.ofType(b.aR).exhaustMap((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resource,r=a()(e.attributes,(function(e){if(s()(e)){var r=null;try{r=JSON.stringify(e)}catch(e){r=null}return r}return e})),t=l()(r).filter((function(e){return"thumbnail"!==e&&"details"!==e&&!v()(r[e])}));return o().Observable.forkJoin(e.id?(0,A.id)(e):(0,A.SN)(e)).switchMap((function(n){var i,a,u=(i=n,a=1,function(e){if(Array.isArray(e))return e}(i)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;s=!1}else for(;!(s=(n=i.call(t)).done)&&(u.push(n.value),u.length!==r);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(i,a)||I(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(t.length>0?o().Observable.forkJoin(t.map((function(e){return(0,A.rX)({id:u,name:e,value:r[e]})}))):o().Observable.of([])).switchMap((function(){return o().Observable.of((0,b.sA)(u),e.id?(0,b.gE)(!1):(0,b.pB)(!1),e.id?(0,b.o2)(u):(0,E.VF)("/dashboard/".concat(u))).merge(o().Observable.of((0,g.$Z)({id:"DASHBOARD_SAVE_SUCCESS",title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"})).delay(e.id?0:1e3))})).let((0,D.hP)((0,b.vM)(!0,"saving"),(0,b.vM)(!1,"saving")))}))})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.status,t=e.statusText,n=e.data,i=e.message,a=x(e,k);return o().Observable.of((0,b.GD)(r?{status:r,statusText:t,data:n}:i||a),(0,b.vM)(!1,"saving"))}))},exportDashboard:function(e){return e.ofType(b.Kv).switchMap((function(e){var r=e.data,t=e.fileName;return o().Observable.of([JSON.stringify(_({},r)),t,"application/json"]).do((function(e){return P.LR.apply(void 0,C(e))})).map((function(){return(0,y.Xi)("export")}))}))},importDashboard:function(e){return e.ofType(b.zV).switchMap((function(e){var r=e.file,t=e.resource;return o().Observable.defer((function(){return(0,P.zr)(r[0]).then((function(e){return e}))})).switchMap((function(e){return o().Observable.of((0,b.rR)(t,e),(0,y.Xi)("import"))})).catch((function(e){return o().Observable.of((0,g.vU)({title:"dashboard.errors.loading.title"}),(0,b.AN)(_({},e)))}))}))}}},589919:(e,r,t)=>{"use strict";t.d(r,{hP:()=>c});var n=t(984596),o=t.n(n),i=t(49977),a=t.n(i);function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var s=function(e){var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return u(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,r){if(e){if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,r):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},c=function(e,r,t){return function(n){return(t?s(n,o()(e)).catch(t):s(n,o()(e))).concat(a().Observable.from(o()(r)))}}},24412:(e,r,t)=>{"use strict";t.d(r,{Z:()=>f});var n=t(555927),o=t(557579),i=t(761868),a=t(984596),u=t.n(a);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){var n,o,i,a;n=e,o=r,i=t[r],a=function(e,r){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==s(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{showConnections:!0,services:null,saveServiceLoading:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Xp:return l(l({},e),null==r?void 0:r.options);case n.BJ:return(0,i.t8)("editor.available",r.available,e);case n._y:case o.wb:case o.Jm:case o.yY:return(0,i.t8)("editing",r.editing,e);case n.vk:return(0,i.t8)("showConnections",r.show,e);case n.uI:return(0,i.t8)("showSaveModal",r.show,(0,i.t8)("saveErrors",void 0,e));case n.mg:return(0,i.t8)("showSaveAsModal",r.show,(0,i.t8)("saveErrors",void 0,e));case n.E9:var t;return l(l({},e),{},{originalData:r.data,resource:r.resource,services:null===(t=r.data)||void 0===t?void 0:t.catalogs});case n.R4:return l(l({},e),{},{originalData:void 0,resource:void 0,mode:"view",services:void 0});case n.SW:return(0,i.t8)("saveErrors",u()(r.error),e);case n.$l:return(0,i.t8)("saveErrors",void 0,e);case n.E5:var a;return l(l({},e),{},{services:e.services||r.services,selectedService:(null===(a=r.service)||void 0===a?void 0:a.key)||""});case n.s6:return(0,i.t8)("services",r.services,e);case n.B_:return l(l({},e),{},{mode:r.mode,isNew:r.isNew,saveServiceLoading:!1});case n.TA:return l(l({},e),{},{saveServiceLoading:r.loading});case n.CF:var s=r.services,c=r.service;c.isNew=!1,c.showAdvancedSettings=!1,delete c.old,s[c.key]=c;var f=c.key;return l(l({},e),{},{services:s,selectedService:f,mode:"view"});case n.js:var v,d,b=r.services,y=r.service;(b[y.key]||b[null===(v=y.old)||void 0===v?void 0:v.key])&&(delete b[y.key]||b[null===(d=y.old)||void 0===d?void 0:d.key]);var p=Object.keys(b)[0]||"";return l(l({},e),{},{services:b,mode:"view",selectedService:p});case n.CP:return(0,i.t8)("loading"===r.name?"loading":"loadFlags.".concat(r.name),r.value,(0,i.t8)("loading",r.value,e));default:return e}}}}]);