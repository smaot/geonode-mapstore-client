(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[14328],{790346:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var r=n(124852),o=n.n(r),i=n(675263),s=n.n(i),a=n(730381),c=n.n(a),u=n(816307),l=n.n(u),m=(n(414880),n(291966)),p=n.n(m),f=n(170735),d=n.n(f),h=n(3674),y=n.n(h),v=n(225325),b=n.n(v),g=n(371843),O=n.n(g),w=n(966073),T=n.n(w),I=n(957557),$=n.n(I),j=n(328583),S=n.n(j),D=n(624262);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function x(e,t,n){return(t=M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_(t)?t:String(t)}l().timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)};var U=function(){},B=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],H={},N={};T()(B,(function(e){return H[e]=s().func,N["".concat(e,"Handler")]=U,[H,N]}));var W={items:s().array,rangeItems:s().array,groups:s().array,options:s().object,selectionOptions:s().object,selection:s().array,customTimes:s().shape({datetime:s().instanceOf(Date),id:s().string}),animate:s().oneOfType([s().bool,s().object]),currentTime:s().oneOfType([s().string,s().instanceOf(Date),s().number])},F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(i){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),x(A(t=s.call(this,e)),"setAllItems",(function(e){t.$el.setItems([].concat(k(e||[]),k(t.props.rangeItems||[])))})),x(A(t),"setItems",(function(e){(e.length||0)+(t.props.rangeItems&&t.props.rangeItems.length||0)>0?t.$el.initialFitDone?t.setAllItems(e):(t.setAllItems(e),t.$el.emit("changed")):t.$el.initialRangeChangeDone&&t.setAllItems(e)})),t.state={customTimes:[]},t}return t=a,n=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new(l().Timeline)(t,void 0,this.props.options),B.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,i=t.selection,s=t.customTimes,a=t.readOnly,c=t.rangeItems,u=n!==e.items,l=r!==e.groups,m=o!==e.options,p=s!==e.customTimes,f=i!==e.selection,d=a!==e.readOnly,h=c!==e.rangeItems;return u||l||m||p||f||d||h}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return o().createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.items,o=n.rangeItems,i=n.groups,s=n.options,a=n.selection,u=n.selectionOptions,m=void 0===u?{}:u,f=n.customTimes,h=n.animate,v=void 0===h||h,g=n.currentTime,w=n.timelineLayers,I=s;v&&(I=$()(s,"start","end"),s.start&&s.end?this.$el.setWindow(s.start,s.end,{animation:v}):this.$el.setWindow(c()().subtract(1,"month"),c()().add(1,"month"),{animation:v})),this.$el.setOptions(I);var j=(0,D.$Z)(i,w);if(j.length>0){var S=new(l().DataSet);S.add(j),this.$el.setGroups(S)}if(r&&r!==t.items)this.setItems(r);else if(o!==t.rangeItems){var _=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(_){var k=O()(o||[],t.rangeItems||[],"id"),C=d()(o||[],t.rangeItems||[],"id"),E=d()(t.rangeItems||[],o||[],"id");k.map((function(e){return _.update(e)})),C.map((function(e){return _.add(e)})),E.map((function(e){var t=e.id;return _.remove(t)}))}else this.setItems(r)}this.$el.setSelection(a,m),g&&this.$el.setCurrentTime(g);var P=y()(this.state.customTimes),A=y()(f),R=p()(A,P),x=p()(P,A),M=b()(P,A);T()(x,(function(t){return e.$el.removeCustomTime(t)})),T()(R,(function(t){var n=f[t];e.$el.addCustomTime(n,t)})),T()(M,(function(t){var n=f[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:f}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&R.length>0)&&T()(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}],n&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o().Component);x(F,"propTypes",S()(W,H)),x(F,"defaultProps",S()({items:[],groups:[],options:{},selection:[],customTimes:{}},N));const G=F}}]);