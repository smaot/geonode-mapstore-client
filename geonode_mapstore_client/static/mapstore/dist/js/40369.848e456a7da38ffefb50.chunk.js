(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[40369,120,58618],{53001:(e,t,r)=>{"use strict";r.d(t,{xT:()=>n,H_:()=>o,Wv:()=>i,gC:()=>a,dG:()=>u,oQ:()=>c,Q2:()=>l,R3:()=>s,Zr:()=>f,Op:()=>p,l$:()=>y,uL:()=>d,zg:()=>b,K2:()=>v,M3:()=>m,st:()=>g,US:()=>O,$c:()=>S,pW:()=>h,$D:()=>w,ke:()=>j,rE:()=>P,vw:()=>x,r5:()=>R,X1:()=>C,V3:()=>E,p2:()=>T});var n="BACKGROUND_SELECTOR:ADD_BACKGROUND",o="BACKGROUND_SELECTOR:REMOVE_BACKGROUND",i="BACKGROUND_SELECTOR:SET_CURRENT_BACKGROUND_LAYER",a="BACKGROUND_SELECTOR:BACKGROUND_ADDED",u="BACKGROUND_SELECTOR:BACKGROUND_EDITED",c="BACKGROUND_SELECTOR:ADD_BACKGROUND_PROPERTIES",l="BACKGROUND_SELECTOR:SET_BACKGROUND_MODAL_PARAMS",s="BACKGROUND_SELECTOR:UPDATE_BACKGROUND_THUMBNAIL",f="BACKGROUND_SELECTOR:BACKGROUNDS_CLEAR",p="BACKGROUND_SELECTOR:CREATE_BACKGROUNDS_LIST",y="BACKGROUND_SELECTOR:CLEAR_MODAL_PARAMETERS",d="BACKGROUND_SELECTOR:CONFIRM_DELETE_BACKGROUND_MODAL",b="BACKGROUND_SELECTOR:ALLOW_BACKGROUNDS_DELETION",v="BACKGROUND_SELECTOR:SYNC_CURRENT_BACKGROUND_LAYER";function m(e){return{type:p,backgrounds:e}}function g(e){return{type:n,source:e}}function O(e){return{type:c,modalParams:e}}function S(e){return{type:l,modalParams:e}}function h(e){return{type:a,layerId:e}}function w(e){return{type:u,layerId:e}}function j(e){return{type:i,layerId:e}}function P(e){return{type:v,id:e}}function x(e){return{type:b,allow:e}}function R(e,t){return{type:s,thumbnailData:e,id:t}}function C(e){return{type:o,backgroundId:e}}function E(){return{type:y}}function T(e){return{type:d,show:e,layerTitle:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,layerId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}},321956:(e,t,r)=>{"use strict";r.d(t,{pf:()=>f,A7:()=>y,FU:()=>d,Fi:()=>b});var n=r(409669),o=r.n(n),i=r(490173),a=r(552259);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==u(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var f=function(e){var t=e.data,r=e.ifcModule.ifcApi,n=new Uint8Array(t),o=r.OpenModel(n,{COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!0});r.LoadAllGeometry(o);var i=r.GetCoordinationMatrix(o);i&&r.SetGeometryTransformation(o,i);var a=[],u=1/0,c=-1/0,l=1/0,s=-1/0,f=1/0,p=-1/0;return r.StreamAllMeshes(o,(function(e){for(var t=e.geometries,n=[],i=0;i<t.size();i++){for(var y=t.get(i),d=r.GetGeometry(o,y.geometryExpressID),b=r.GetVertexArray(d.GetVertexData(),d.GetVertexDataSize()),v=r.GetIndexArray(d.GetIndexData(),d.GetIndexDataSize()),m=new Float64Array(b.length/2),g=new Float32Array(b.length/2),O=0;O<b.length;O+=6){var S=b[O],h=b[O+1],w=b[O+2];S<u&&(u=S),h<l&&(l=h),w<f&&(f=w),S>c&&(c=S),h>s&&(s=h),w>p&&(p=w),m[O/2]=S,m[O/2+1]=h,m[O/2+2]=w,g[O/2]=b[O+3],g[O/2+1]=b[O+4],g[O/2+2]=b[O+5]}n.push({color:y.color,positions:m,normals:g,indices:Array.from(v),flatTransformation:y.flatTransformation}),d.delete()}var j=r.GetLine(o,e.expressID);a.push({geometry:n,id:e.expressID,properties:Object.keys(j).reduce((function(e,t){var r;return e[t]=(null===(r=j[t])||void 0===r?void 0:r.value)||j[t],e}),{})})})),r.CloseModel(o),{meshes:a,extent:[u,l,c,s,f,p],center:[u+(c-u)/2,l+(s-l)/2,f+(p-f)/2],size:[c-u,s-l,p-f]}},p={},y=function(e){return(p[e]?function(){return Promise.resolve(p[e])}:function(){return o().get(e,{responseType:"arraybuffer"}).then((function(t){var r=t.data;return p[e]=r,r}))})().then((function(e){return r.e(17555).then(r.bind(r,617555)).then((function(e){var t=new e.IfcAPI;return t.SetWasmPath("./web-ifc/"),t.Init().then((function(){return{ifcApi:t,WebIFC:e}}))})).then((function(t){return{data:e,ifcModule:t}}))}))},d=function(e){return y(e).then((function(t){var r=t.ifcModule,n=t.data,o=r.ifcApi,u=o.OpenModel(new Uint8Array(n),{COORDINATE_TO_ORIGIN:!1,USE_FAST_BOOLS:!0}),c=function(e,t,r){var n,o,i=e.ifcApi;return{version:void 0!==(null==i?void 0:i.GetModelSchema(t))?null!==(n=i.GetModelSchema(t))&&void 0!==n&&n.includes("IFC4")?"IFC4":i.GetModelSchema(t):"IFC4",format:(o=(r||"").split(/\./g))[o.length-1],properties:{}}}(r,u,e),p=function(e,t,r){var n=e.ifcApi,o=e.WebIFC,a={};if(null!=t&&t.includes("IFC4")){var u,c,l=n.GetLineIDsWithType(r,o.IFCPROJECTEDCRS),s=n.GetLineIDsWithType(r,o.IFCMAPCONVERSION);if(l.size()){var f,p=l.get(0),y=n.GetLine(r,p);u=null==y||null===(f=y.Name)||void 0===f?void 0:f.value}if(s.size()){var d,b,v,m,g,O,S,h,w=s.get(0),j=n.GetLine(r,w);if(c={northings:null==j||null===(d=j.Northings)||void 0===d?void 0:d.value,eastings:null==j||null===(b=j.Eastings)||void 0===b?void 0:b.value,orthogonalHeight:null==j||null===(v=j.OrthogonalHeight)||void 0===v?void 0:v.value,xAxisOrdinate:null==j||null===(m=j.XAxisOrdinate)||void 0===m?void 0:m.value,xAxisAbscissa:null==j||null===(g=j.XAxisAbscissa)||void 0===g?void 0:g.value,rotation:180*Math.atan2((null==j||null===(O=j.XAxisOrdinate)||void 0===O?void 0:O.value)||0,(null==j||null===(S=j.XAxisAbscissa)||void 0===S?void 0:S.value)||0)/Math.PI,scale:null==j||null===(h=j.Scale)||void 0===h?void 0:h.value},i.default.defs(u)){var P=(0,i.default)(i.default.defs(u),i.default.defs("EPSG:4326"),[c.eastings,c.northings]);a={projectedCrs:u,longitude:P[0]||0,latitude:P[1]||0,height:c.orthogonalHeight||0,scale:c.scale||1,heading:c.rotation,mapConversion:c}}else a={projectedCrs:u,projectedCrsNotSupported:!0,mapConversion:c}}}return a}(r,c.version,u),y=function(e){var t,r=e.modelID,n=e.ifcModule,o=e.data,i=n.ifcApi,a=n.WebIFC,u=i.GetLineIDsWithType(r,a.IFCBOUNDINGBOX).size();return u?(t=Array(u).keys(),function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t=i.GetLineIDsWithType(r,a.IFCBOUNDINGBOX).get(e),n=i.GetLine(r,t),o=i.GetLine(r,n.Corner.value),u=((null==o?void 0:o.Coordinates)||[]).map((function(e){return(null==e?void 0:e.value)||0}));return[n.XDim.value+Math.abs(u[0]),n.YDim.value+Math.abs(u[1]),n.ZDim.value+Math.abs(u[2])]}))[0]:f({data:o,ifcModule:n}).size}({modelID:u,ifcModule:r,data:n});c.properties=l(l(l({},c.properties),p),{},{size:y}),o.CloseModel(u);var d=c.properties,b={bounds:{minx:(d.longitude||0)-y[0]/2/a.Wm.degrees,miny:(d.latitude||0)-y[1]/2/a.Wm.degrees,maxx:(d.longitude||0)+y[0]/2/a.Wm.degrees,maxy:(d.latitude||0)+y[1]/2/a.Wm.degrees},crs:"EPSG:4326"};return l(l({},c),b&&{bbox:b})}))},b="MODEL"},106286:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Kr});var n={};r.r(n),r.d(n,{getCatalogRecords:()=>ce,getLayerFromRecord:()=>le,preprocess:()=>oe,testService:()=>ae,textSearch:()=>ue,validate:()=>ie});var o={};r.r(o),r.d(o,{getCatalogRecords:()=>xe,getLayerFromRecord:()=>Re,preprocess:()=>he,testService:()=>je,textSearch:()=>Pe,validate:()=>we});var i={};r.r(i),r.d(i,{getCatalogRecords:()=>ke,getLayerFromRecord:()=>We,preprocess:()=>Be,testService:()=>Ne,textSearch:()=>Fe,validate:()=>_e});var a={};r.r(a),r.d(a,{getCatalogRecords:()=>mt,getLayerFromRecord:()=>St,getRecords:()=>yt,testService:()=>vt,textSearch:()=>dt,tileProviderToLayer:()=>Ot,tmsToLayer:()=>gt,validate:()=>bt});var u={};r.r(u),r.d(u,{getCatalogRecords:()=>Mt,getLayerFromRecord:()=>Ut,getRecords:()=>Et,preprocess:()=>Tt,testService:()=>At,textSearch:()=>Lt,validate:()=>Dt});var c={};r.r(c),r.d(c,{getCatalogRecords:()=>Wt,getLayerFromRecord:()=>Kt,preprocess:()=>Bt,testService:()=>Nt,textSearch:()=>kt,validate:()=>_t});var l={};r.r(l),r.d(l,{getCatalogRecords:()=>Yt,getLayerFromRecord:()=>Jt,preprocess:()=>Zt,testService:()=>Xt,textSearch:()=>qt,validate:()=>Ht});var s={};r.r(s),r.d(s,{getCatalogRecords:()=>cr,getLayerFromRecord:()=>lr,preprocess:()=>ir,testService:()=>ar,textSearch:()=>ur,validate:()=>sr});var f={};r.r(f),r.d(f,{cogToLayer:()=>Er,getCatalogRecords:()=>Cr,getLayerFromRecord:()=>Dr,getRecords:()=>jr,testService:()=>Rr,textSearch:()=>Pr,validate:()=>xr});var p={};r.r(p),r.d(p,{getCatalogRecords:()=>Nr,getLayerFromRecord:()=>kr,preprocess:()=>Fr,testService:()=>Br,textSearch:()=>_r,validate:()=>Wr});var y=r(91175),d=r.n(y),b=r(747037),v=r.n(b),m=r(264721),g=r.n(m),O=r(984596),S=r.n(O),h=r(189734),w=r.n(h),j=r(944908),P=r.n(j),x=r(701469),R=r.n(x),C=r(763105),E=r.n(C),T=r(441609),D=r.n(T),A=r(414293),L=r.n(A),M=r(727418),U=r.n(M),I=r(552259),G=r(49977),F=r.n(G),B=r(737275),_=r(624262),N=r(577215),k=r(453005),W=r(576712),K=r(501157),V=r(375875),$=r.n(V);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function q(e){var t="function"==typeof Map?new Map:void 0;return q=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(Z())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&H(o,r.prototype),o}(e,arguments,X(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),H(r,e)},q(e)}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}var Y=function(e){function t(e,r){var n,o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=this,i=t,a=[e],i=X(i),n=function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(o,Z()?Reflect.construct(i,a||[],X(o).constructor):i.apply(o,a))).name="ServiceValidationError",n.notification=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(q(Error)),J=function(e){return F().Observable.of(e)},Q=function(e){return""===e.title||""===e.url?F().Observable.throw(new Y("Validation Error","catalog.notification.warningAddCatalogService")):F().Observable.of(e)},ee=function(e){var t=e.parseUrl,r=void 0===t?function(e){return e}:t;return function(e){var t="catalog.notification.errorServiceUrl";return F().Observable.defer((function(){return $().get(r(e.url))})).catch((function(){throw new Y("Service Test error",t)})).switchMap((function(r){if(r.error||""===r.data)throw new Y("Service Test error",t);return F().Observable.of(e)}))}};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==te(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=function(e){var t=e.domainAliases;return e.domainAliases=E()(t),G.Observable.of(e)},ie=Q,ae=ee({parseUrl:K.en}),ue=K.tt,ce=function(e,t){return e&&e.records?e.records.map((function(r){var n=[{type:"OGC:WMS",url:t&&t.url,SRS:r.SRS&&(R()(r.SRS)?r.SRS:[r.SRS])||[],params:{name:r.Name}}],o=(0,W.tW)({references:n}).wms;return{serviceType:"wms",isValid:!!o,capabilities:r,credits:r.credits,boundingBox:(0,K.jY)(r),description:r.Abstract||r.Title||r.Name,identifier:r.Name,service:e.service,tags:"",layerOptions:ne(ne({},(null==t?void 0:t.layerOptions)||{}),(null==e?void 0:e.layerOptions)||{}),title:(0,_.EM)(r)||r.Name,getMapFormats:r.getMapFormats,getFeatureInfoFormats:r.getFeatureInfoFormats,dimensions:(r.Dimension&&S()(r.Dimension)||[]).map((function(e){return U()({},{values:e._&&e._.split(",")||[]},e.$||{})})).filter((function(e){return e&&"time"!==e.name})),references:n,ogcReferences:o}})):null},le=function(e,t,r){var n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.removeParams,o=void 0===n?[]:n,i=r.service,a=r.catalogURL,u=r.url,c=r.map,l=void 0===c?{}:c,s=r.layerBaseConfig;if(!e||!e.references)return null;var f,p,y=(0,W.tW)(e).wms,d=function(e){return(0,W.em)((0,B.$F)(e),["request","layer","layers","service","version"].concat(o))},b=(0,W.qy)(y.url);if(b&&R()(b))f=b.map((function(e){return d(e)})).map((function(e){return e.url})),p=b.map((function(e){return d(e)})).map((function(e){return e.params})).reduce((function(e,t){return ne(ne({},e),t)}),{});else{var v=d(b||a);f=v.url,p=v.params}var m,g=(m=u||f,R()(m)&&1===m.length?m[0]:m),O=(0,W.n0)(y.SRS),S=null!==(t=null==e?void 0:e.capabilities)&&void 0!==t?t:{},h=S.MaxScaleDenominator,w=S.MinScaleDenominator,j=i||{},P=j.format,x=j.infoFormat,C=j.localizedLayerStyles,E=j.allowUnsecureLayers,T=j.autoSetVisibilityLimits,A=j.layerOptions,M=(e.getMapFormats||[]).filter(N.F0),U=(e.getFeatureInfoFormats||[]).filter(N.cP),G=(null==M?void 0:M.find((function(e){return e===P})))||M[0]||P,F=x&&k.so[x]?{format:k.so[x]}:null,_=ne(ne(ne(ne({type:"wms",requestEncoding:e.requestEncoding,style:e.style,format:G,featureInfo:F,url:g,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:y.params&&y.params.name,title:e.title||y.params&&y.params.name,description:e.description||"",credits:!(0,B.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,W.F8)(e),params:p,allowedSRS:O,catalogURL:a},s),A),e.layerOptions),{},{localizedLayerStyles:L()(C)?void 0:C,imageFormats:M,infoFormats:U},!L()(E)&&{forceProxy:E});if(T&&!D()(l)&&(h||w)){var K=(!L()(w)&&(0,I.ed)(w,"scale",l)||{}).resolution,V=(!L()(h)&&(0,I.ed)(h,"scale",l)||{}).resolution;_=ne(ne({},_),{},{minResolution:K,maxResolution:V})}return _}(e,t);return r?Promise.resolve(n):n},se=r(86638),fe=r(916651),pe=r(659551),ye=r(658918),de=r(321956);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t,r){var n;return n=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==be(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=function(e,t,r){var n,o,i,a=r.name;if(void 0===a){a=e.title?e.title.join(" "):(0,se.S$)(t,"catalog.notAvailable");var u=(n=r.protocol,r.value,null!==(o=null===(i=d()([{protocol:"https://registry.geodati.gov.it/metadata-codelist/ProtocolValue/www-download",displayValue:"Download"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wms",displayValue:"WMS"},{protocol:"http://www.opengis.net/def/serviceType/ogc/wfs",displayValue:"WFS"}].filter((function(e){return e.protocol===n}))))||void 0===i?void 0:i.displayValue)&&void 0!==o?o:"Link");a="".concat(u?"".concat(a," - ").concat(u):a)}return'<li><a target="_blank" href="'.concat(r.value,'">').concat(a,"</a></li>")};function Se(e,t){var r,n,o=(null==e?void 0:e.URI)&&S()(e.URI);if(o){var i=d()(o.filter((function(e){return"thumbnail"===e.name})))||d()(o.filter((function(e){var t;return!e.name&&(null===(t=e.protocol)||void 0===t?void 0:t.indexOf("image/"))>-1})));r=i?i.value:null}if(!r&&e&&e.references){var a=function(e){return d()(S()(e.references).filter((function(t){return"WWW:LINK-1.0-http--image-thumbnail"===t.scheme||"thumbnail"===t.scheme||"WWW:DOWNLOAD-1.0-http--download"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))||"WWW:DOWNLOAD-REST_MAP"===t.scheme&&-1!==(t.value||"").indexOf("".concat(e.identifier||"","-thumb"))})))}(e);a&&(r=a.value)}return r&&(0===r.indexOf("http")||(r=((n=t&&t.url)&&n.replace(/\/csw$/,"/")||"")+r)),r}var he=J,we=Q,je=ee({parseUrl:pe.ZP.parseUrl}),Pe=pe.ZP.textSearch,xe=function(e,t,r){var n=e;return n&&n.records?n.records.map((function(e){var n=e.dc,o=[];n&&n.references&&(Array.isArray(n.references)?n.references:[n.references]).filter((function(e){return e.scheme.indexOf("http-get-capabilities")>-1})).forEach((function(e){var r=0===e.value.indexOf("http")?e.value:(t&&t.catalogURL||"")+"/"+e.value;o.push({type:e.scheme,url:r})}));var i=(0,pe.kv)(n,t);i&&o.push(i);var a={boundingBox:e.boundingBox&&e.boundingBox.extent&&S()(e.boundingBox.extent.join(","))};if(n&&(a=me(me({},a),w()(Object.keys(n)).reduce((function(e,t){return me(me({},e),{},ge({},t,P()(S()(n[t]))))}),{}))),n&&n.URI&&S()(n.URI)&&S()(n.URI).length&&(a=me(me({},a),{},{uri:["<ul>"+S()(n.URI).map(Oe.bind(void 0,a,r)).join("")+"</ul>"]})),n&&n.subject&&S()(n.subject)&&S()(n.subject).length&&(a=me(me({},a),{},{subject:["<ul>"+S()(n.subject).map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})),o&&S()(o).length?a=me(me({},a),{},{references:["<ul>"+S()(o).map((function(e){return'<li><a target="_blank" href="'.concat(e.url,'">').concat(e.params&&e.params.name||e.url,"</a></li>")})).join("")+"</ul>"]}):delete a.references,n&&n.temporal){var u=v()(n.temporal)?n.temporal.split("; "):[];if(u.length){var c=u.filter((function(e){return-1!==e.indexOf("scheme=")})).map((function(e){var t=e.indexOf("=");return e.substr(t+1,e.length-1)}));c=c.length?c[0]:"W3C-DTF";var l=u.filter((function(e){return-1!==e.indexOf("start=")||-1!==e.indexOf("end=")})).map((function(e){var t=e.indexOf("="),n=e.substr(0,t),o=e.substr(t+1,e.length-1),i=e.length-t-1<=10;return g()(["start","end"],n)&&"W3C-DTF"===c&&!i?(0,se.S$)(r,"catalog.".concat(n))+new Date(o).toLocaleString():g()(["start","end"],n)?(0,se.S$)(r,"catalog.".concat(n))+o:""}));a=me(me({},a),{},{temporal:["<ul>"+l.map((function(e){return"<li>".concat(e,"</li>")})).join("")+"</ul>"]})}}var s,f=me(me({},(0,W.tW)({references:o})),(0,W.FJ)({references:o})),p=Object.keys(f).find((function(e){return f[e]})),y=p&&"esri"!==p?f[p]:void 0;return n&&n.format===ye.X?s=function(e,t){var r,n=e.dc,o={crs:e.boundingBox.crs,bounds:(0,fe.transformExtentToObj)(e.boundingBox.extent)};return{serviceType:"3dtiles",isValid:!0,description:n&&v()(n.abstract)&&n.abstract||"",title:n&&v()(n.title)&&n.title||"",identifier:n&&v()(n.identifier)&&n.identifier||"",url:(null==n||null===(r=n.URI)||void 0===r?void 0:r.value)||"",thumbnail:null,bbox:o,format:n&&n.format||"",references:[],catalogType:"csw",metadata:t}}(e,a):n&&n.format===de.Fi||(s={serviceType:"csw",layerType:p,isValid:!!p,boundingBox:e.boundingBox,description:n&&v()(n.abstract)&&n.abstract||"",layerOptions:t&&t.layerOptions||{},identifier:n&&v()(n.identifier)&&n.identifier||"",references:o,thumbnail:Se(n,t),title:n&&v()(n.title)&&n.title||"",tags:n&&n.tags||"",metadata:a,capabilities:e.capabilities,ogcReferences:y}),s})):null},Re=function(e,t,r){var n=function(e,t){switch(e.layerType){case"wms":return le(e,t);case"esri":return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).layerBaseConfig,r=void 0===t?{}:t;if(!e||!e.references)return null;var n=(0,W.FJ)(e).esri;return me({type:n.type,url:n.url,visibility:!0,dimensions:e.dimensions||[],name:n.params&&n.params.name,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}}},r)}(e,t);default:return null}}(e,t);return r?Promise.resolve(n):n},Ce=r(513218),Ee=r.n(Ce),Te=r(707294),De=r(603475);function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ue(e,t,r){var n;return n=function(e,t){if("object"!=Ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ae(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ie=function(e){return Ee()(e)&&e._||e},Ge=function(e,t){return e.filter((function(r){return(0,Te.C2)(t,r,e,t,null)}))},Fe=De.ZP.textSearch,Be=J,_e=Q,Ne=ee({parseUrl:De.ZP.parseUrl}),ke=function(e,t){return e&&e.records?e.records.map((function(e){var r=S()((0,Te.f1)(e)||t&&t.url);1===r.length&&(r=r[0]);var n=(0,Te.dN)(e),o=S()((null==e?void 0:e.TileMatrixSetLink)||[]).reduce((function(t,r){var n,o=S()((null==e?void 0:e.TileMatrixSet)||[]).find((function(e){return e["ows:Identifier"]===r.TileMatrixSet})),i=o&&(0,fe.getEPSGCode)(o["ows:SupportedCRS"]),a=null!=r&&r.TileMatrixSetLimits?S()((null==r||null===(n=r.TileMatrixSetLimits)||void 0===n?void 0:n.TileMatrixLimits)||[]).map((function(e){return{identifier:e.TileMatrix,ranges:{cols:{min:e.MinTileCol,max:e.MaxTileCol},rows:{min:e.MinTileRow,max:e.MaxTileRow}}}})):null;return Me(Me({},t),{},Ue({},o["ows:Identifier"],Me(Me({crs:i},a&&{limits:a}),{},{tileMatrixSet:o})))}),{}),i=(0,Te.nJ)({availableTileMatrixSets:o}).matrixIds,a=function(e){var t=e["ows:WGS84BoundingBox"];return t||(t={"ows:LowerCorner":"-180.0 -90.0","ows:UpperCorner":"180.0 90.0"}),t}(e),u=[{type:"OGC:WMTS",url:r,SRS:Ge(e.SRS||[],i),params:{name:e["ows:Identifier"]}}],c=(0,W.tW)({references:u}).wmts;return{serviceType:"wmts",isValid:!!c,title:Ie(e["ows:Title"]||e["ows:Identifier"]),description:Ie(e["ows:Abstract"]||e["ows:Title"]||e["ows:Identifier"]),identifier:Ie(e["ows:Identifier"]),tags:"",layerOptions:t&&t.layerOptions||{},style:e.style,capabilitiesURL:n,queryable:e.queryable,requestEncoding:e.requestEncoding,availableTileMatrixSets:o,format:e.format,formats:e.formats,TileMatrixSetLink:S()(e.TileMatrixSetLink),boundingBox:{extent:[a["ows:LowerCorner"].split(" ")[0],a["ows:LowerCorner"].split(" ")[1],a["ows:UpperCorner"].split(" ")[0],a["ows:UpperCorner"].split(" ")[1]],crs:"EPSG:4326"},references:u,ogcReferences:c}})):null},We=function(e,t,r){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.removeParams,n=void 0===r?[]:r,o=t.service,i=t.catalogURL,a=t.url,u=t.layerBaseConfig;if(!e||!e.references)return null;var c,l,s=(0,W.tW)(e).wmts,f=function(e){return(0,W.em)((0,B.$F)(e),["request","layer","layers","service","version"].concat(n))},p=(0,W.qy)(s.url);if(p&&R()(p))c=p.map((function(e){return f(e)})).map((function(e){return e.url})),l=p.map((function(e){return f(e)})).map((function(e){return e.params})).reduce((function(e,t){return Me(Me({},e),t)}),{});else{var y=f(p||i);c=y.url,l=y.params}var d,b=(d=a||c,R()(d)&&1===d.length?d[0]:d),v=o||{},m=v.format,g=v.localizedLayerStyles,O=(0,W.n0)(s.SRS),S=e.format||m,h=e.formats?e.formats.find((function(e){return e===S}))||e.format:S;return Me(Me(Me({type:"wmts",requestEncoding:e.requestEncoding,style:e.style,format:h,url:b,capabilitiesURL:e.capabilitiesURL,queryable:e.queryable,visibility:!0,dimensions:e.dimensions||[],name:s.params&&s.params.name,title:e.title||s.params&&s.params.name,description:e.description||"",availableTileMatrixSets:e.availableTileMatrixSets||[],credits:!(0,B.u8)("noCreditsFromCatalog")&&e.credits,bbox:{crs:e.boundingBox.crs,bounds:{minx:e.boundingBox.extent[0],miny:e.boundingBox.extent[1],maxx:e.boundingBox.extent[2],maxy:e.boundingBox.extent[3]}},links:(0,W.F8)(e),params:l,allowedSRS:O,catalogURL:i},u),e.layerOptions),{},{localizedLayerStyles:L()(g)?void 0:g})}(e,t);return r?Promise.resolve(n):n},Ke=r(227361),Ve=r.n(Ke),$e=r(505055),ze=r.n($e),qe=r(233044),Ze=r(993201);function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=He(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=He(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==He(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Je={},Qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=S()(Ve()(e,"TileMapService.TileMaps.TileMap",[])),a=o.projection,u=Ve()(o,"options.service.allSRS"),c=i.map((function(t){var r=t.$,n=void 0===r?{}:r;return Ye(Ye({},n),{},{href:(0,qe.cleanAuthParamsFromURL)(n.href),identifier:(0,qe.cleanAuthParamsFromURL)(n.href),format:(0,Ze.A)(n.href),tmsUrl:(0,qe.cleanAuthParamsFromURL)(e.url)})})).filter((function(e){var t=e.srs;return!(a&&!u)||function(e,t){return e===t||"EPSG:3857"===e&&"EPSG:900913"===t||"EPSG:900913"===e&&"EPSG:3857"===t}(t,a)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.srs,i=void 0===o?"":o;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())}));return{numberOfRecordsMatched:c.length,numberOfRecordsReturned:Math.min(r,c.length),nextRecord:t+Math.min(r,c.length)+1,records:c.filter((function(e,n){return n>=t-1&&n<t-1+r}))}},et=function(e){return e},tt=function(e,t,r,n,o){var i=Je[e];return i&&(new Date).getTime()<i.timestamp+1e3*(B.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(Qe(i.data,t,r,n,o))})):$().get(e).then((function(i){var a;return ze().parseString(i.data,{explicitArray:!1},(function(t,r){a=Ye(Ye({},r),{},{url:e})})),Je[e]={timestamp:(new Date).getTime(),data:a},Qe(a,t,r,n,o)}))},rt=r(836882),nt=r(611847);function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function it(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?it(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ot(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ut="custom",ct=function(e,t,r,n,o){var i,a,u,c=Ve()(o,"options.service"),l=[];if(c.provider&&c.provider!==ut){var s=(i=c.provider,Object.keys(null!==(a=null===rt.Z||void 0===rt.Z||null===(u=rt.Z[i])||void 0===u?void 0:u.variants)&&void 0!==a?a:{}));0===s.length?l.push({provider:"".concat(c.provider),title:"".concat(c.provider)}):l=s.map((function(e){return{provider:"".concat(c.provider,".").concat(e)}}))}else c.url&&(l=[at(at({},c),{},{title:c.title,type:"tileprovider",url:c.url,attribution:c.attribution,options:c.options||{},provider:ut})]);return new Promise((function(e){e(function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(l,t,r,n))}))};function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?st(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pt(e,t,r){var n;return n=function(e,t){if("object"!=lt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=lt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==lt(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider&&tt(e,t,r,n,o),ct(0,t,r,n,o)},dt=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=(o.options||{}).service;return"tms"===(void 0===i?{}:i).provider?tt(e,t,r,n,o):ct(0,t,r,n,o)},bt=function(e){return"tms"===e.provider?Q(e):function(e){var t,r=e.provider&&"custom"!==e.provider?!!e.provider:(t=e.url,(0,nt.Nw)(t));if(e.title&&r)return G.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},vt=function(e){return"tms"===e.provider?ee({parseUrl:et})(e):function(e){return G.Observable.of(e)}(e)},mt=function(e,t){if(e&&e.records){if(t.service&&"tms"===t.service.provider){var r=[{type:"OGC:TMS",version:"1.0.0",url:t.url}],n=(0,W.tW)({references:r}).tms;return e.records.map((function(e){return{serviceType:"tms",layerType:"tms",isValid:!!n,title:e.title,tileMapUrl:e.href,description:"".concat(e.srs).concat(e.format?", "+e.format:""),tmsUrl:t.tmsUrl,references:r,ogcReferences:n}}))}return e.records.map((function(e){return{serviceType:"tms",layerType:"tileprovider",isValid:!!e.provider,title:e.title||e.provider,url:e.url,attribution:e.attribution,options:e.options,provider:e.provider,references:[]}}))}return null},gt=function(e,t){var r=e.tileMapUrl,n=t.tileMap,o=t.service,i=(n||{}).TileMap,a=void 0===i?{}:i,u=(o||{}).forceDefaultTileGrid,c=a.Title,l=a.Abstract,s=a.SRS,f=a.BoundingBox,p=void 0===f?{}:f,y=a.Origin,d=a.TileFormat,b=void 0===d?{}:d,v=a.TileSets,m=a.$,g=m.version,O=m.tilemapservice,h=Ve()(p,"$",{}),w=h.minx,j=h.miny,P=h.maxx,x=h.maxy,R=Ve()(y,"$"),C=R.x,E=R.y,T=Ve()(b,"$",{}),D=T.width,A=T.height,L=T["mime-type"],M=T.extension,U=[parseFloat(D),parseFloat(A,10)],I=S()(Ve()(v,"TileSet",[]).map((function(e){return e.$}))).map((function(e){var t=e.href,r=e.order,n=e["units-per-pixel"];return{href:(0,qe.cleanAuthParamsFromURL)(t),order:parseFloat(r),resolution:parseFloat(n)}})),G=Ve()(v,"profile");return{title:c,visibility:!0,hideErrors:!0,name:c,allowedSRS:pt({},s,!0),description:l,srs:s,version:g,tileMapService:O?(0,qe.cleanAuthParamsFromURL)(O):void 0,type:"tms",profile:G,tileMapUrl:r,forceDefaultTileGrid:u,bbox:p&&{crs:s,bounds:{minx:parseFloat(w),miny:parseFloat(j),maxx:parseFloat(P),maxy:parseFloat(x)}},tileSets:I,origin:{x:parseFloat(C),y:parseFloat(E)},format:L,tileSize:U,extension:M}},Ot=function(e){return{type:"tileprovider",visibility:!0,url:e.url,title:e.title,attribution:e.attribution,options:e.options,provider:e.provider,name:e.provider}},St=function(e,t,r){return r?"tms"===e.layerType?(n=e.tileMapUrl,$().get(n).then((function(e){return new Promise((function(t){ze().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(r){return gt(e,ft(ft({},t),{},{tileMap:r}))})):Promise.resolve(Ot(e)):function(e,t){return"tms"===e.layerType?gt(e,t):"tileprovider"===e.layerType?Ot(e,t):null}(e,t);var n},ht=r(432420);function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==wt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rt={},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=S()(Ve()(e,'["wfs:WFS_Capabilities"].FeatureTypeList.FeatureType',[])).map((function(t){var r,n=t.Name,o=t.Title,i=t.Abstract,a=t.DefaultSRS,u=t.OtherSRS,c=void 0===u?[]:u,l=t["ows:WGS84BoundingBox"],s=l["ows:LowerCorner"].split(" "),f=l["ows:UpperCorner"].split(" "),p={minx:parseFloat(s[0]),miny:parseFloat(s[1]),maxx:parseFloat(f[0]),maxy:parseFloat(f[1])};return{featureType:t,type:"wfs",url:(0,qe.cleanAuthParamsFromURL)(e.url),name:n,title:o,description:i,SRS:[a].concat((r=c,function(e){if(Array.isArray(e))return xt(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),defaultSRS:a,boundingBox:{bounds:p,crs:"EPSG:4326"}}})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=void 0===t?"":t,o=e.name,i=void 0===o?"":o,a=e.description;return!n||-1!==r.toLowerCase().indexOf(n.toLowerCase())||-1!==i.toLowerCase().indexOf(n.toLowerCase())||-1!==a.toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:Math.min(r,i.length),nextRecord:t+Math.min(r,o.length)+1,records:i}},Et=function(e,t,r,n,o){var i=Rt[e];return i&&(new Date).getTime()<i.timestamp+1e3*(B.ZP.getConfigProp("cacheExpire")||60)?new Promise((function(e){e(Ct(i.data,t,r,n,o))})):(0,ht.FU)(e).then((function(i){var a;return ze().parseString(i.data,{explicitArray:!1,stripPrefix:!0},(function(t,r){a=Pt(Pt({},r),{},{url:e})})),Rt[e]={timestamp:(new Date).getTime(),data:a},Ct(a,t,r,n,o)}))},Tt=J,Dt=Q,At=ee({parseUrl:ht.dN}),Lt=function(e,t,r,n,o){return Et(e,t,r,n,o)},Mt=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).records;return e?e.map((function(e){var t=[{type:"OGC:WFS-1.1.0-http-get-capabilities",url:e.url},{type:"OGC:WFS-1.1.0-http-get-feature",url:e.url}],r=(0,W.tW)({references:t}).wfs;return Pt(Pt({},e),{},{serviceType:"wfs",isValid:!!r,references:t,ogcReferences:r})})):null},Ut=function(e,t,r){var n=function(e){return Pt({type:e.type||"wfs",search:{url:e.url,type:"wfs"},url:e.url,queryable:e.queryable,visibility:!0,name:e.name,title:e.title||e.name,description:e.description||"",bbox:e.boundingBox,links:(0,W.F8)(e)},e.layerOptions)}(e);return r?Promise.resolve(n):n};function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=It(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==It(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Bt=J,_t=function(e){return G.Observable.of(e)},Nt=function(e){return G.Observable.of(e)},kt=function(e,t,r,n){return $().get(e).then((function(t){var r=t.data,o=[Ft({title:n,url:e,type:"geojson",name:n},r)];return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:o.length,records:o}}))},Wt=function(e){return e.records},Kt=function(e,t,r){var n=e?(0,_.Rt)(e):null;return r?Promise.resolve(n):n};function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Vt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Vt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Vt(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qt=r(932354).Z.textSearch,Zt=J,Ht=Q,Xt=ee({parseUrl:function(e){return e}}),Yt=function(e){return e&&e.records?e.records.map((function(e){return{serviceType:"backgrounds",isValid:!!e,description:e.title,title:e.title,identifier:e.name,thumbnail:e.thumbURL,references:[],background:e}})):null},Jt=function(e,t,r){var n=function(e){return zt(zt({},null==e?void 0:e.background),{},{id:null==e?void 0:e.background.name,visibility:!1})}(e);return r?Promise.resolve(n):n},Qt=["tileset"];function er(e){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},er(e)}function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==er(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nr(e){var t=e.split("/");return t[t.length-2]}var or,ir=J,ar=function(e){return G.Observable.of(e)},ur=function(e,t,r,n,o){return function(e,t,r,n,o){return(0,ye.F)(e).then((function(t){var r,n,i=t.tileset,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,Qt),u=[rr({title:(null==o||null===(r=o.options)||void 0===r||null===(n=r.service)||void 0===n?void 0:n.title)||nr(e),url:e,type:"3dtiles",tileset:i},a)];return{numberOfRecordsMatched:u.length,numberOfRecordsReturned:u.length,records:u}}))}(e,0,0,0,o)},cr=function(e){return null!=e&&e.records?e.records.map((function(e){var t=e.version,r=e.bbox,n=e.format,o=e.properties,i=(e.url||"").split("?")[0];return rr(rr(rr(rr({serviceType:"3dtiles",isValid:!0,description:"v. ".concat(t),title:e.title,identifier:i,url:e.url,thumbnail:null},r&&{bbox:r}),n&&{format:n}),o&&{properties:o}),{},{references:[]})})):null},lr=function(e,t,r){var n=function(e){if(!e)return null;var t=e.bbox,r=e.format,n=e.properties;return rr(rr(rr({type:"3dtiles",url:e.url,title:e.title,visibility:!0},t&&{bbox:t}),r&&{format:r}),n&&{properties:n})}(e);return r?Promise.resolve(n):n},sr=function(e){if(e.title&&function(e){if((0,nt.Nw)(e)){var t=e.split(/\./g);return"json"===(t[t.length-1]||"").split(/\?/g)[0]}return!1}(e.url))return G.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")},fr=r(274698),pr=r(774565);function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=yr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==yr(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vr=function(e){return e(new DOMException("Aborted","AbortError"))};const mr=or={getProjectionFromGeoKeys:function(e){var t=e.geoKeys;return t?t.ProjectedCSTypeGeoKey&&32767!==t.ProjectedCSTypeGeoKey?"EPSG:"+t.ProjectedCSTypeGeoKey:t.GeographicTypeGeoKey&&32767!==t.GeographicTypeGeoKey?"EPSG:"+t.GeographicTypeGeoKey:null:null},fromUrl:function(e,t){return null!=t&&t.aborted?vr(Promise.reject):new Promise((function(r,n){return null==t||t.addEventListener("abort",(function(){return vr(n)})),(0,fr.W0)(e).then((function(e){return e.getImage()})).then((function(e){return r(e)})).catch((function(){return vr(n)}))}))},getLayerConfig:function(e){var t=e.url,r=e.layer,n=e.controller;return or.fromUrl(t,null==n?void 0:n.signal).then((function(e){var t,n,o,i=or.getProjectionFromGeoKeys(e),a=e.getBoundingBox(),u=(0,pr.LZ)(i),c=e.getSamplesPerPixel(),l=null!==(t=e.getGDALMetadata())&&void 0!==t?t:{},s=l.STATISTICS_MINIMUM,f=l.STATISTICS_MAXIMUM,p=null!==(n=e.getGDALNoData())&&void 0!==n?n:0;return br(br({},r),{},{sources:null==r||null===(o=r.sources)||void 0===o?void 0:o.map((function(e){var t,r;return br(br({},e),{},{min:null!==(t=e.min)&&void 0!==t?t:s,max:null!==(r=e.max)&&void 0!==r?r:f,nodata:p})})),sourceMetadata:{crs:i,extent:a,width:e.getWidth(),height:e.getHeight(),tileWidth:e.getTileWidth(),tileHeight:e.getTileHeight(),origin:e.getOrigin(),resolution:e.getResolution(),samples:c,fileDirectory:{PhotometricInterpretation:Ve()(e,"fileDirectory.PhotometricInterpretation")}}},!D()(a)&&!D()(i)&&{bbox:br({crs:i},u&&{bounds:{minx:a[0],miny:a[1],maxx:a[2],maxy:a[3]}})})})).catch((function(){return br({},r)}))}};function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function Or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=gr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==gr(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wr={},jr=function(e,t,r,n){var o,i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=Ve()(a,"options.service"),c=[];return u.records&&(c=null===(o=u.records)||void 0===o?void 0:o.map((function(e){var t,r,n,o=e.url,i=hr(hr({},e),{},{title:e.title,type:null!==(t=e.type)&&void 0!==t?t:W.Ss,sources:null!==(r=e.sources)&&void 0!==r?r:[{url:o}],options:null!==(n=e.options)&&void 0!==n?n:u.options||{}}),c=Ve()(a,"options.controller"),l=Ve()(a,"options.save",!1),s=wr[o];return s&&(new Date).getTime()<s.timestamp+1e3*(B.ZP.getConfigProp("cacheExpire")||60)?hr({},s.data):(L()(u.fetchMetadata)||u.fetchMetadata)&&l?mr.getLayerConfig({url:o,controller:c,layer:i}).then((function(e){return wr[o]={timestamp:(new Date).getTime(),data:hr({},e)},e})).catch((function(){return hr({},i)})):Promise.resolve(i)}))),Promise.all((i=c,function(e){if(Array.isArray(e))return Or(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return Or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Or(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).then((function(e){return function(e,t,r,n){var o=e.filter((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).title;return!n||-1!==(void 0===e?"":e).toLowerCase().indexOf(n.toLowerCase())})),i=o.filter((function(e,n){return n>=t-1&&n<t-1+r}));return{numberOfRecordsMatched:o.length,numberOfRecordsReturned:i.length,nextRecord:t+Math.min(r,o.length)+1,records:i}}(e,t,r,n)}))},Pr=function(e,t,r,n){return jr(e,t,r,n,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{})},xr=function(e){return function(e){var t,r=null===(t=e.records)||void 0===t?void 0:t.every((function(e){return(0,nt.K2)(null==e?void 0:e.url)}));if(e.title&&r)return G.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")}(e)},Rr=function(e){return G.Observable.of(e)},Cr=function(e){return e&&e.records?e.records.map((function(e){var t;return hr(hr({},e),{},{serviceType:W.Ss,isValid:null===(t=e.sources)||void 0===t?void 0:t.every((function(e){return(0,nt.K2)(e.url)})),title:e.title||e.provider,sources:e.sources,options:e.options,references:[]})})):null},Er=function(e){return hr(hr({},e),{},{type:W.Ss,visibility:!0,sources:e.sources,title:e.title,options:e.options,name:e.title})},Tr=function(e,t){return Er(e,t)},Dr=function(e,t,r){return r?Promise.resolve(Tr(e,t)):Tr(e,t)};function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}var Lr=["scale","longitude","latitude","height","heading"];function Mr(){return Mr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mr.apply(this,arguments)}function Ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=Ar(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ar(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gr(e){var t=e.split("/");return t[t.length-2]}var Fr=J,Br=function(e){return G.Observable.of(e)},_r=function(e,t,r,n,o){return function(e,t,r,n,o){return(0,de.FU)(e).then((function(t){var r,n,i=Mr({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),a=[Ir({title:(null==o||null===(r=o.options)||void 0===r||null===(n=r.service)||void 0===n?void 0:n.title)||Gr(e),url:e,type:"model"},i)];return{numberOfRecordsMatched:a.length,numberOfRecordsReturned:a.length,records:a}}))}(e,0,0,0,o)},Nr=function(e){return null!=e&&e.records?e.records.map((function(e){var t=e.version,r=e.bbox,n=e.format,o=e.properties,i=(e.url||"").split("?")[0];return Ir(Ir(Ir(Ir({serviceType:"model",isValid:!0,description:"v. ".concat(t),title:e.title,identifier:i,url:e.url,thumbnail:null},r&&{bbox:r}),n&&{format:n}),o&&{properties:o}),{},{references:[]})})):null},kr=function(e,t,r){var n=function(e){if(!e)return null;var t=e.bbox,r=e.format,n=e.properties,o=n.scale,i=n.longitude,a=n.latitude,u=n.height,c=n.heading,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(n,Lr);return Ir(Ir({type:"model",url:e.url,title:e.title,features:[{type:"Feature",id:"model-origin",properties:Ir(Ir({},l),{},{heading:c||0,pitch:0,roll:0,scale:o||1}),geometry:{type:"Point",coordinates:[i||0,a||0,u||0]}}],visibility:!0},t&&{bbox:t}),r&&{format:r})}(e);return r?Promise.resolve(n):n},Wr=function(e){if(e.title&&function(e){if((0,nt.Nw)(e)){var t=e.split(/\./g);return"ifc"===(t[t.length-1]||"").split(/\?/g)[0]}return!1}(e.url))return G.Observable.of(e);throw new Error("catalog.config.notValidURLTemplate")};const Kr={csw:o,wfs:u,wms:n,tms:a,wmts:i,geojson:c,backgrounds:l,"3dtiles":s,cog:f,model:p}},856175:(e,t,r)=>{"use strict";r.d(t,{Z:()=>se});var n=r(49977),o=r(409669),i=r.n(o),a=r(737691),u=r.n(a),c=r(91175),l=r.n(c),s=r(227361),f=r.n(s),p=r(313311),y=r.n(p),d=r(701469),b=r.n(d),v=r(747037),m=r.n(v),g=r(513218),O=r.n(g),S=r(3674),h=r.n(S),w=r(493220),j=r.n(w),P=r(682492),x=r.n(P),R=r(984596),C=r.n(R),E=r(339138),T=r.n(E),D=r(931273),A=r(580416),L=r(197395),M=r(782904),U=r(921914),I=r(53001),G=r(788113),F=r(31935),B=r(308316),_=r(675110),N=r(576712),k=r(501157),W=r(916651),K=r(737275),V=r(624262),$=r(801550),z=r(659551),q=r(800827),Z=r(552259),H=r(432420),X=r(838848),Y=r(904679),J=r(761239),Q=r(598223),ee=["format","url","text","layerOptions","service"];function te(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t,r){var n;return n=function(e,t){if("object"!=re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==re(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le=function(e,t){(0,Q.H)({message:t});var r=ae(C()(null==t?void 0:t.error),1)[0];if(r&&(r=(0,J.U1)(r)),e){var o=r?T()(r,{length:400}):"catalog.notification.errorServiceUrl";return n.Observable.of((0,L.vU)({title:"notification.warning",message:o,autoDismiss:6,position:"tc"}),(0,D.Rc)(!1))}return n.Observable.of((0,D.m)(r))};const se=function(e){return{recordSearchEpic:function(t,r){return t.ofType(D.V3).switchMap((function(t){var o=t.format,i=t.url,a=t.startPosition,u=t.maxRecords,c=t.text,l=t.options,s=f()(l,"isNewService",!1);return n.Observable.defer((function(){return e[o].textSearch(i,a,u,c,oe({options:l},(0,G.HN)(r.getState())))})).switchMap((function(e){if(e.error)return le(s,e);var t=n.Observable.empty();return s&&(t=n.Observable.from([(0,D.zX)(!0),(0,D.N3)((0,N.NT)(l,e)),(0,L.Vp)({title:"notification.success",message:"catalog.notification.addCatalogService",autoDismiss:6,position:"tc"}),(0,D.Rc)(!1)])),t.concat([(0,D.nX)({url:i,startPosition:a,maxRecords:u,text:c},e)])})).startWith(s?(0,D.Rc)(!0):(0,D.K4)(!0)).catch((function(e){return le(s,e)}))}))},addLayersFromCatalogsEpic:function(t,r){return t.ofType(D.WX).filter((function(e){var t=e.layers,r=e.sources;return b()(t)&&b()(r)&&t.length&&t.length===r.length})).mergeMap((function(t){var o=t.layers,i=t.sources,a=t.options,u=t.startPosition,c=void 0===u?1:u,s=t.maxRecords,p=void 0===s?4:s,y=r.getState(),d=(0,G.PG)(y),v=o.filter((function(e,t){return!(null==d||!d[i[t]])||"object"===re(i[t])})).map((function(t,r){var u,l=i[r],s="object"===re(l)?l:d[l],b=s.type.toLowerCase(),v=s.url,m=o[r],g=f()(a,r,(0,G.bA)(y)),S="3dtiles"===b||"geojson"===b?oe(oe({},g),{},{title:O()(null==g?void 0:g.title)?oe(oe({},null==g?void 0:g.title),{},{default:(null==g||null===(u=g.title)||void 0===u?void 0:u.default)||m}):(null==g?void 0:g.title)||m}):g;return n.Observable.defer((function(){return e[b].textSearch(v,c,p,m,oe(oe(oe({},S),s),{},{options:{service:s}})).catch((function(){return{records:[]}}))})).map((function(e){return oe(oe({},e),{},{format:b,url:v,text:m,layerOptions:S,service:s})}))}));return n.Observable.forkJoin(v).switchMap((function(t){return b()(t)&&t.length?n.Observable.of(t.map((function(t){var r=t.format,o=t.url,i=t.text,a=t.layerOptions,u=t.service,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,ee),s=(0,B.Ps)(y),f=e[r].getCatalogRecords(c,{layerOptions:a,url:null==u?void 0:u.url,service:u},s)||[],p=l()(f.filter((function(e){return e.identifier||e.name===i}))),d=(0,N.tW)(p),b=d.wms,v=d.wmts,m=b||v;if(m){var g=(0,N.n0)(m.SRS);if(m.SRS.length>0&&!W.default.isAllowedSRS("EPSG:3857",g))return n.Observable.empty()}var O=(0,G.kS)(y),S=e[r].getLayerFromRecord(p,{service:u,removeParams:O,catalogURL:"csw"===r&&o?o+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+p.identifier:o,layerBaseConfig:{},map:{projection:(0,q.uy)(y),resolutions:(0,Z.MR)()}});return p?[S,a]:[i]}))):n.Observable.empty()}))})).mergeMap((function(e){if(e){var t=e.filter((function(e){return m()(e[0])})).join(" "),r=[];t&&(r=[(0,D.E9)(t)]);var o=e.filter((function(e){return O()(e[0])})).map((function(e){return x()({},e[0],e[1])}));return r=[].concat(te(r),te(o.map((function(e){return(0,D.A4)(e)})))),n.Observable.from(r)}return n.Observable.empty()})).catch((function(){return n.Observable.empty()}))},addLayerAndDescribeEpic:function(e,t){return e.ofType(D.r7).mergeMap((function(e){var r=e.layer,o=e.zoomToLayer,i=[],a=t.getState(),u=(0,V.R8)(r);if(i.push((0,A.A4)(oe(oe({},r),{},{id:u}))),o&&r.bbox&&i.push((0,$.Px)(r.bbox.bounds,r.bbox.crs)),"wms"===r.type)return n.Observable.defer((function(){return(0,k.gs)((0,V.Hi)(r),r.name)})).switchMap((function(e){if(e){var t=y()(e,(function(e){return e.name===r.name}));if(t&&"WFS"===t.owsType){var o=K.ZP.filterUrlParams(K.ZP.cleanDuplicatedQuestionMarks(t.owsURL),(0,G.kS)(a));return n.Observable.of((0,A.He)(u,{search:{url:o,type:"wfs"}}))}}return n.Observable.empty()})).merge(n.Observable.from(i)).catch((function(e){return n.Observable.of((0,D.bu)(r,e))}));if("wfs"===r.type)return n.Observable.defer((function(){return(0,H.v$)(r.url,r.name)})).switchMap((function(e){var t=((0,X.mI)(e)||"").replace("Multi",""),r=["Point","LineString","Polygon"].includes(t)?t:"GeometryCollection";return n.Observable.of((0,A.He)(u,{style:(0,Y.y)({geometryType:r})}))})).merge(n.Observable.from(i)).catch((function(e){return n.Observable.of((0,D.bu)(r,e))}));if("model"===r.type){var c,l,s=(null==r||null===(c=r.features)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.properties)||{};if(null!=s&&s.projectedCrsNotSupported||null==s||!s.projectedCrs){var f,p=((0,q.Od)(a)||{}).center,d=W.default.reproject(p,p.crs,"EPSG:4326"),b=d.x,v=d.y,m=s.size||[2,2],g=oe(oe({},r),{},{bbox:{bounds:{minx:(b||0)-m[0]/2/Z.Wm.degrees,miny:(v||0)-m[1]/2/Z.Wm.degrees,maxx:(b||0)+m[0]/2/Z.Wm.degrees,maxy:(v||0)+m[1]/2/Z.Wm.degrees},crs:"EPSG:4326"},features:[oe(oe({},null==r||null===(f=r.features)||void 0===f?void 0:f[0]),{},{geometry:{type:"Point",coordinates:[b,v,0]}})]});return n.Observable.from([(0,A.A4)(oe(oe({},g),{},{id:u})),(0,L.Kp)({title:"notification.warning",message:null!=s&&s.projectedCrsNotSupported?"layerProperties.modelLayer.warnings.projectedCrsNotSupported":"layerProperties.modelLayer.warnings.projectedCrsNotProvided",autoDismiss:15,values:{modelProjection:null!=s&&s.projectedCrsNotSupported?"(".concat(null==s?void 0:s.projectedCrs,")"):""},position:"tc"})])}}return n.Observable.from(i)})).catch((function(){return n.Observable.empty()}))},newCatalogServiceAdded:function(t,r){return t.ofType(D.mh).switchMap((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options,o=r.getState(),i=(0,G._S)(o),a=(0,G.y)(o);return n.Observable.of(i).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.preprocess)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(t){var r,o,i;return null!==(r=null===(o=e[t.type])||void 0===o||null===(i=o.validate)||void 0===i?void 0:i.call(o,t))&&void 0!==r?r:n.Observable.of(t)})).switchMap((function(e){return n.Observable.of((0,D.tt)({format:e.type,url:e.url,startPosition:1,maxRecords:a,text:"",options:oe({service:e,isNewService:!0},t)}))})).catch((function(e){return n.Observable.of((0,L.vU)({exception:e,title:"notification.warning",message:e.notification||"catalog.notification.warningAddCatalogService",autoDismiss:6,position:"tc"}))}))}))},deleteCatalogServiceEpic:function(e,t){return e.ofType(D.$Y).switchMap((function(){var e=t.getState(),r=(0,G.Cb)(e),o=(0,G.b6)(e),i=o[r]?(0,L.Vp)({title:"notification.warning",message:"catalog.notification.serviceDeletedCorrectly",autoDismiss:6,position:"tc"}):(0,L.vU)({title:"notification.warning",message:"catalog.notification.impossibleDeleteService",autoDismiss:6,position:"tc"}),a=(0,D.SU)(r);return o[r]?n.Observable.of(i,a):n.Observable.of(i)}))},openCatalogEpic:function(e,t){return e.ofType(M.At,M.kM).filter((function(e){return"metadataexplorer"===e.control&&(0,G.JF)(t.getState())})).switchMap((function(){return n.Observable.of((0,U.g)(),(0,U.aN)())}))},getMetadataRecordById:function(e,t){return e.ofType(D.UT).switchMap((function(e){var r=e.metadataOptions,o=void 0===r?{}:r,a=t.getState(),c=(0,_.Iz)(a);return n.Observable.defer((function(){return(0,k.FU)((0,V.Fh)(c))})).switchMap((function(e){var t,r=(0,k.Xv)(null==e?void 0:e.Capability),a=C()((1===r.length?r[0].MetadataURL:null===(t=y()(r,(function(e){return(0,V.H7)(e.Name)===(0,V.H7)(c.name)})))||void 0===t?void 0:t.MetadataURL)||[]).map((function(e){var t,r,n,o,i,a;return oe(oe({},null==e?void 0:e.$),{},{format:null==e?void 0:e.Format,onlineResource:{type:null==e||null===(t=e.OnlineResource)||void 0===t||null===(r=t.$)||void 0===r?void 0:r["xlink:type"],href:null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:href"],xlink:null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xmlns:xlink"]}})})),l=f()(y()(a,(function(e){return m()(e.type)&&("iso19115:2003"===e.type.toLowerCase()||"tc211"===e.type.toLowerCase())&&("application/xml"===e.format||"text/xml"===e.format)})),"onlineResource.href"),s=f()(y()(a,(function(e){return m()(e.type)&&("iso19115:2003"===e.type.toLowerCase()||"tc211"===e.type.toLowerCase())&&"text/html"===e.format})),"onlineResource.href"),p=y()(f()(o,"extractors",[]),(function(e){var t=e.properties,r=e.layersRegex,n=r?new RegExp(r):null;return O()(t)&&(!r||n.test(c.name))})),d=s?{metadataUrl:s}:{},b=n.Observable.defer((function(){return z.ZP.getRecordById(c.catalogURL)})).switchMap((function(e){return e&&e.error?n.Observable.of((0,L.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,A.c9)(d,!1)):e&&e.dc?n.Observable.of((0,A.c9)(oe(oe({},d),e.dc),!1)):n.Observable.empty()})),v=n.Observable.defer((function(){return i().get(l,{headers:{Accept:"application/xml"}})})).pluck("data").map((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).map((function(e){var t=u().useNamespaces(o.xmlNamespaces||{});return function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return j()(r).reduce((function(r,o){var i,a=ae(o,2),u=a[0],c=a[1];if(O()(c)&&m()(c.xpath)&&O()(c.properties)&&h()(c.properties).length>0)0===(i=t(c.xpath,n).map((function(t){return e(c.properties,t)}))).length&&(i=null);else{var l,s=t(c,n);1===s.length?i=null!==(l=f()(s[0],"nodeValue"))&&void 0!==l?l:f()(s[0],"childNodes[0].nodeValue"):s.length>1&&(i=s.map((function(e){return f()(e,"childNodes[0].nodeValue")})).filter((function(e){return!!e})))}return oe(oe({},r),i?ie({},u,i):{})}),{})}(p.properties,e)})).switchMap((function(e){return n.Observable.of((0,A.c9)(oe(oe({},d),e),!1))}));return l&&p?v:c.catalogURL?b:n.Observable.of((0,A.c9)(d,!1))})).startWith((0,A.c9)({},!0)).catch((function(){return n.Observable.of((0,L.vU)({title:"notification.warning",message:"toc.layerMetadata.notification.warnigGetMetadataRecordById",autoDismiss:6,position:"tc"}),(0,A.c9)({},!1))}))}))},autoSearchEpic:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).getState,r=void 0===t?function(){}:t;return e.ofType(D.CO).debounce((function(){var e=r(),t=(0,G.l2)(e);return n.Observable.timer(t)})).switchMap((function(e){var t=e.text,o=r(),i=(0,G.y)(o),a=(0,G.R7)(o),u=a.type,c=a.url;return n.Observable.of((0,D.tt)({format:u,url:c,startPosition:1,maxRecords:i,text:t,options:{service:a}}))}))},catalogCloseEpic:function(e,t){return e.ofType(D.ur).switchMap((function(){var e,r=t.getState(),o=(0,F.YL)(r),i=(0,G.b6)(r);return(e=n.Observable).of.apply(e,te([(0,M.pu)("metadataexplorer","enabled",!1,"group",null),(0,D.In)("view"),(0,D.ye)()].concat("backgroundSelector"===o?[(0,D.Dw)(l()(h()(i))),(0,I.vw)(!0)]:[])))}))},updateGroupSelectedMetadataExplorerEpic:function(e,t){return e.ofType(A.c7).filter((function(){return(0,G.JF)(t.getState())})).switchMap((function(e){var r=e.nodeType,o=e.id,i=t.getState(),a=0===(0,_.NP)(i).length||"group"!==r?V.tE:o;return n.Observable.of((0,M.Xg)("metadataexplorer","group",a))}))}}}},31935:(e,t,r)=>{"use strict";r.d(t,{YL:()=>u,B0:()=>c,Mz:()=>l,TC:()=>s,qS:()=>f,Pe:()=>p,TP:()=>y});var n=r(22222),o=r(675110),i=r(93152),a=r(624262),u=function(e){return e.backgroundSelector&&e.backgroundSelector.source},c=function(e){return e.backgroundSelector&&e.backgroundSelector.modalParams},l=function(e){return e.backgroundSelector&&e.backgroundSelector.backgrounds||[]},s=function(e){return e.backgroundSelector&&e.backgroundSelector.lastRemovedId},f=function(e){return e.backgroundSelector&&e.backgroundSelector.confirmDeleteBackgroundModal},p=function(e){return e.backgroundSelector&&e.backgroundSelector.allowDeletion},y=(0,n.P1)(o.l2,i.$v,i.lh,(function(e,t,r){var n=e.filter((function(e){return e&&"background"===e.group}));return r&&r[t]?n.map((function(e){return(0,a.kf)(e,t)}))||[]:n}))},788113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>p,PG:()=>y,_x:()=>d,Mm:()=>b,dP:()=>v,SX:()=>m,ZL:()=>g,_S:()=>O,iH:()=>S,R7:()=>h,Q7:()=>w,n7:()=>j,bA:()=>P,hm:()=>x,E2:()=>R,Cb:()=>C,eK:()=>E,Im:()=>T,e8:()=>D,JF:()=>A,kS:()=>L,y:()=>M,l2:()=>U,HN:()=>I,BM:()=>G,O8:()=>F,am:()=>B,LV:()=>_,CK:()=>N,jU:()=>k,Qg:()=>W,$c:()=>K});var n=r(22222),o=r(227361),i=r.n(o),a=r(800827),u=r(577215),c=r(274621);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){return i()(e,"catalog.services")},y=(0,n.P1)((function(e){return i()(e,"catalog.default.staticServices")}),p,(function(e,t){var r=null==e?void 0:e.default_map_backgrounds;return r?(r.readOnly=!0,f(f({},t),{},{default_map_backgrounds:r})):t})),d=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},b=function(e){return i()(e,"controls.metadataexplorer.group")},v=function(e){return i()(e,"catalog.saving")},m=function(e){return i()(e,"catalog.result")},g=function(e){return i()(e,"catalog.openCatalogServiceList")},O=function(e){return i()(e,"catalog.newService")},S=function(e){return i()(e,"catalog.newService.type","csw")},h=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},w=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},j=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},P=function(e){return i()(e,"catalog.searchOptions")},x=function(e){return i()(e,"catalog.loadingError")},R=function(e){return i()(e,"catalog.loading",!1)},C=function(e){return i()(e,"catalog.selectedService")},E=function(e){return i()(e,"catalog.mode","view")},T=function(e){return i()(e,"catalog.layerError")},D=function(e){return i()(e,"catalog.searchOptions.text","")},A=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},L=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},M=function(e){return i()(e,"catalog.pageSize",4)},U=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},I=(0,n.zB)({projection:a.uy}),G=function(e){return i()(e,"catalog.formatsLoading",!1)},F=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},B=function(e){var t,r;return"edit"===E(e)?F(e):(null===(t=h(e))||void 0===t||null===(r=t.supportedFormats)||void 0===r?void 0:r.imageFormats)||[]},_=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,u.oL)())},N=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},k=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},W=function(e){return i()(e,"catalog.showFormatError",!1)},K=function(e){var t=function(e){return i()(e,"catalog.editingAllowedRoles",[])}(e),r=function(e){return i()(e,"catalog.editingAllowedGroups",[])}(e);return(0,c.tv)({allowedRoles:t,allowedGroups:r})(e)}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>f,Yf:()=>p,c3:()=>y,fY:()=>d});var n=r(218721),o=r.n(n),i=r(227361),a=r.n(i),u=r(313311),c=r.n(u),l=r(22222),s=r(308316),f=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=c()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},y=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},d=(0,l.P1)(f,y,s.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},576712:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>m,n0:()=>g,em:()=>O,tW:()=>S,FJ:()=>h,F8:()=>w,p8:()=>j,qy:()=>P,NT:()=>x});var n=r(727418),o=r.n(n),i=r(91175),a=r.n(i),u=r(701469),c=r.n(u),l=r(227361),s=r.n(l),f=r(916651);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t,r){var n;return n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==p(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m="cog",g=function(e){return e.filter((function(e){return f.default.isSRSAllowed(e)})).reduce((function(e,t){return o()(e,v({},t,!0))}),{})},O=function(e,t){var r=e.split("?"),n={};return r.length>=2&&r[1]&&r[1].split(/[&;]/g).forEach((function(e){var r=e.split("=");-1===t.indexOf(r[0].toLowerCase())&&(n[r[0]]=r[1])})),{url:r[0],params:n}},S=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).references,t=void 0===e?[]:e;return{wfs:a()(t.filter((function(e){return e.type&&("OGC:WFS"===e.type||e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-feature")>-1)}))),wms:a()(t.filter((function(e){return e.type&&("OGC:WMS"===e.type||e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-map")>-1)}))),wmts:a()(t.filter((function(e){return e.type&&("OGC:WMTS"===e.type||e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-map")>-1)}))),tms:a()(t.filter((function(e){return e.type&&("OGC:TMS"===e.type||e.type.indexOf("OGC:TMS")>-1)})))}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{references:[]};return{esri:a()(e.references.filter((function(e){return e.type&&("ESRI:SERVER"===e.type||"arcgis"===e.type)})))}},w=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).references,t=void 0===e?[]:e,r=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WMS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),n=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WFS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),o=a()(t.filter((function(e){return e.type&&e.type.indexOf("OGC:WMTS")>-1&&e.type.indexOf("http-get-capabilities")>-1}))),i=[];return r&&i.push({type:"WMS_GET_CAPABILITIES",url:r.url,labelId:"catalog.wmsGetCapLink"}),o&&i.push({type:"WMTS_GET_CAPABILITIES",url:o.url,labelId:"catalog.wmtsGetCapLink"}),n&&i.push({type:"WFS_GET_CAPABILITIES",url:n.url,labelId:"catalog.wfsGetCapLink"}),i},j=function(e){var t,r;return"wms"===e.type?[e.url].concat((r=null!==(t=e.domainAliases)&&void 0!==t?t:[],function(e){if(Array.isArray(e))return b(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).join(","):e.url},P=function(e){return e&&!c()(e)&&-1!==e.indexOf(",")?e.split(",").map((function(e){return e.trim()})):e},x=function(e,t){if(s()(e,"service.type")===m){var r=s()(e,"service.records",[]);return d(d({},e.service),{},{records:r.map((function(e){var r;return d(d({},e),null==t||null===(r=t.records)||void 0===r?void 0:r.find((function(t){return t.url===e.url})))}))})}return e.service}},993201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(264721),o=r.n(n),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[0].split("@");if(e.length>1){var t=e[e.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],t))return t}return null}},558618:()=>{},200120:()=>{}}]);