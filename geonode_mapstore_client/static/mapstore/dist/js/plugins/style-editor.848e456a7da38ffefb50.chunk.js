(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[91701],{398592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var n=r(124852),o=r.n(n),i=r(727418),l=r.n(i),a=r(45697),c=r.n(a),u=r(171703),s=r(867076),d=r(22222),f=r(580416),v=r(396909),g=r(615402),b=r(965539),p=r(982030),y=r(173014),m=r(532425),h=r(893222),S=r(278720);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=O(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==O(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(e){var t=e.header,r=e.isEditing,i=e.showToolbar,l=e.onInit,a=e.styleService,c=e.editingAllowedRoles,u=e.editingAllowedGroups,s=e.enableSetDefaultStyle,d=e.canEdit,f=e.editorConfig,v=e.onSetPermission;return(0,n.useEffect)((function(){l(a,{editingAllowedRoles:c,editingAllowedGroups:u})}),[]),(0,n.useEffect)((function(){v(d)}),[d]),o().createElement(b.Z,{className:"ms-style-editor-container",header:i?o().createElement("div",{className:"ms-style-editor-container-header"},t,o().createElement("div",{className:"text-center"},o().createElement(S.lC,{enableSetDefaultStyle:s}))):null,footer:o().createElement("div",{style:{height:25}})},r?o().createElement(S.m2,{config:f}):o().createElement(S.tM,{showDefaultStyleIcon:d&&s}))};T.propTypes={header:c().node,isEditing:c().bool,showToolbar:c().bool,onInit:c().func,styleService:c().object,editingAllowedRoles:c().array,editingAllowedGroups:c().array,enableSetDefaultStyle:c().bool,canEdit:c().bool,editorConfig:c().object,onSetPermission:c().func},T.defaultProps={layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editingAllowedGroups:[],editorConfig:{}};var E=(0,s.compose)(s.toClass,(0,s.branch)((function(){return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).active}),(function(){return function(){return null}})),(0,u.connect)((0,d.P1)([h.ex,h.aN,h.p,h.z_,h.Z0],(function(e,t,r,n,o){return{isEditing:"edit"===e,loading:t,error:r,canEdit:n,styleService:o}})),{onInit:v.E0,onUpdateParams:f.Xy,onSetPermission:v.xR},(function(e,t,r){var n,o,i,l=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),a=r.styleService&&!l?x(x({},r.styleService),{},{isStatic:!0}):x({},e.styleService);return x(x(x(x({},r),e),t),{},{styleService:a})})),(0,p.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:o().createElement(g.Z,{msgId:"styleeditor.errorTitle"}),description:o().createElement(g.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,y.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return o().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},o().createElement(m.Z,e))})),(0,s.compose)((0,u.connect)((function(){return{}}),{toggleStyleEditor:v.Wv}),(0,s.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(T);const j={StyleEditorPlugin:l()(E,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:S.lC}}),reducers:{styleeditor:r(532244).Z},epics:r(394943).ZP}},443143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>s,qj:()=>d,qq:()=>f,TM:()=>v});var n,o=r(717621),i=r.n(o),l=r(14841),a=r.n(l),c=r(264721),u=r.n(c),s=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var l=.5/(r-1),a=t/(r-1),c=[];1===r&&(l=.5,a=t/2);for(var u=0;u<r;u++){var s=i+u*a-t/2,d=l*u+.3,f=d;o&&(s=o.h||s,d=o.s||d,f=o.v||f),c.push(n.hsvToHex(s,d,f,u))}return c},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},f=function(e,t,r){var n=i()(e);return e&&n.setAlpha(a()(void 0!==t?t:n.getAlpha())).toRgbString()||r},v=function e(t){var r=Math.round,o=Math.random,i=[r(255*o()),r(255*o()),r(255*o())],l=n.rgbToHex(i);if(t)for(;u()(t,l)||"#000000"===l||"#FFFFFF"===l;)e(t);return l};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,l,a,c,u=e/255,s=t/255,d=r/255;switch(o=Math.min(Math.min(u,s),d),l=(i=Math.max(Math.max(u,s),d))-o,i){case o:a=0;break;case u:a=60*(s-d)/l,s<d&&(a+=360);break;case s:a=60*(d-u)/l+120;break;case d:a=60*(u-s)/l+240}return c=0===i?0:1-o/i,[Math.round(a),c,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var i=e(t,r,o);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63));return r},sameToneRangeColors:s,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,l,a=Math.floor(e/60%6),c=e/60-a,u=r*(1-t),s=r*(1-c*t),d=r*(1-(1-c)*t);switch(a){case 0:o=r,i=d,l=u;break;case 1:o=s,i=r,l=u;break;case 2:o=u,i=r,l=d;break;case 3:o=u,i=s,l=r;break;case 4:o=d,i=u,l=r;break;case 5:o=r,i=u,l=s}return[n.realToDec(o),n.realToDec(i),n.realToDec(l)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:d,colorToRgbaStr:f,generateRandomHexColor:v}},577215:(e,t,r)=>{"use strict";r.d(t,{VZ:()=>g,oL:()=>b,F0:()=>p,cP:()=>y,Br:()=>m,rD:()=>h});var n=r(944908),o=r.n(n),i=r(513218),l=r.n(i),a=r(984596),c=r.n(a),u=r(945402),s=r(916651);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==d(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],b=function(){return o()(Object.values((0,u.eq)()))},p=function(e){return g.includes(e)},y=function(e){return b().includes(e)},m=function(e){var t,r,n,o,i;return l()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.southBoundLatitude,maxx:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&c()(e.Style).map((function(e){return v(v(v({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:c()(e.LegendURL).map((function(e){var t,r,n,o,i,l;return v({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(r=e.$)&&void 0!==r&&r.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(n=e.OnlineResource)||void 0===n||null===(o=n.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(l=i.$)||void 0===l?void 0:l["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,r=void 0===t?[]:t,n=e.projection,o=e.tileSize,i=void 0===o?256:o;return r.find((function(e){var t,r,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(n)&&!(((null===(t=e.tileSizes)||void 0===t||null===(r=t[0])||void 0===r?void 0:r[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}}}]);