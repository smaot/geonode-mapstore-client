(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[11239],{881808:(e,t,n)=>{"use strict";n.d(t,{eD:()=>r,AM:()=>o,ok:()=>i,Gg:()=>a,nT:()=>l,TL:()=>c,KS:()=>u,EB:()=>s,DZ:()=>p,Aw:()=>f,V_:()=>d,H0:()=>m,jW:()=>g,JZ:()=>b,fQ:()=>y,HK:()=>v,YO:()=>h,I6:()=>E});var r="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",i="MAP_CONFIG_LOADED",a="MAP_CONFIG_LOAD_ERROR",l="MAP_LOAD_INFO",c="MAP_INFO_LOAD_START",u="MAP_INFO_LOADED",s="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function m(e,t,n){return{type:i,config:e,legacy:!!t,mapId:t,zoomToExtent:n}}function g(e,t){return{type:a,error:e,mapId:t}}function b(e,t,n,r,i){return{type:o,configName:e,mapId:t,config:n,mapInfo:r,overrideConfig:i}}function y(e,t){return{type:u,mapId:t,info:e,merge:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function v(e,t){return{type:s,mapId:e,error:t}}function h(e){return{type:c,mapId:e}}function E(e){return{type:l,mapId:e}}},604206:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r,pb:()=>o,kD:()=>i,DI:()=>a,IC:()=>l,uB:()=>s,Rh:()=>p,G_:()=>f,vU:()=>d,Vw:()=>m,KD:()=>g,uj:()=>b,lo:()=>y,Yf:()=>v,fo:()=>h,PY:()=>E,bp:()=>O,oJ:()=>S,k4:()=>P,sc:()=>T,Li:()=>w});var r="CHANGE_DRAWING_STATUS",o="DRAW:END_DRAWING",i="DRAW:SET_CURRENT_STYLE",a="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",u="DRAW:DRAWING_FEATURES",s="DRAW:SET_SNAPPING_LAYER",p="DRAW:SNAPPING_IS_LOADING",f="DRAW:TOGGLE_SNAPPING",d="DRAW:SET_SNAPPING_CONFIG";function m(e,t,n,r,o){return{type:a,features:e,owner:t,enableEdit:n,textChanged:r,circleChanged:o}}function g(){return{type:c,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function b(){return{type:u,features:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}}function y(){return{type:l}}function v(e,t,n,o,i,a){return{type:r,status:e,method:t,owner:n,features:o,options:i,style:a}}function h(e,t){return{type:o,geometry:e,owner:t}}function E(e){return{type:i,currentStyle:e}}var O=function(e){return v("clean","",e,[],{})};function S(){return{type:f}}function P(e){return{type:s,snappingLayer:e}}function T(){return{type:p}}function w(e,t,n){return{type:d,value:e,prop:t,pluginCfg:n}}},433528:(e,t,n)=>{"use strict";n.d(t,{gJ:()=>r,Oj:()=>o,jp:()=>i,CM:()=>a,DU:()=>l,aO:()=>c,v6:()=>u,K8:()=>s,IN:()=>p,zh:()=>f,AH:()=>d,Ub:()=>m,_9:()=>g,JB:()=>b,oh:()=>y,AY:()=>v,yi:()=>h,SW:()=>E,Hk:()=>O,iQ:()=>S,dY:()=>P,$:()=>T,_u:()=>w,gG:()=>C,DI:()=>x,dZ:()=>j,qw:()=>D,f$:()=>N,bZ:()=>R,$O:()=>A,sF:()=>I,Gk:()=>F,vO:()=>k,ut:()=>_,MK:()=>U,VV:()=>M,B8:()=>Z,VM:()=>G,a3:()=>L,Xp:()=>B,DA:()=>V,sK:()=>z,r:()=>$,iB:()=>W,WB:()=>H,vm:()=>J,EH:()=>Y,Yd:()=>K,Hg:()=>X,Lz:()=>q,ye:()=>Q,Jb:()=>ee,d:()=>te,fT:()=>ne,Ib:()=>re,UB:()=>oe,Uh:()=>ie,QT:()=>ae,oL:()=>le,Ap:()=>ce,KD:()=>ue,Z_:()=>se,Vw:()=>pe,sY:()=>fe,kA:()=>de,gr:()=>me,pX:()=>ge,F5:()=>be,MO:()=>ye,dq:()=>ve,DY:()=>he,oO:()=>Ee,uF:()=>Oe,a8:()=>Se,Pv:()=>Pe,an:()=>Te,lg:()=>we,nY:()=>Ce,nG:()=>xe,lx:()=>je,$S:()=>De,gc:()=>Ne,Uz:()=>Re,fO:()=>Ae,$E:()=>Ie,cE:()=>Fe,JK:()=>ke,YV:()=>_e,t9:()=>Ue,YG:()=>Me,HT:()=>Ze,MY:()=>Ge,ve:()=>Le,hB:()=>Be,Ox:()=>Ve,zd:()=>ze,aT:()=>$e,VH:()=>We,Yb:()=>He,Jr:()=>Je,pP:()=>Ye,gL:()=>Ke,dM:()=>Xe});var r="FEATUREGRID:SET_UP",o="FEATUREGRID:SELECT_FEATURES",i="FEATUREGRID:DESELECT_FEATURES",a="FEATUREGRID:CLEAR_SELECTION",l="FEATUREGRID:SET_SELECTION_OPTIONS",c="FEATUREGRID:TOGGLE_MODE",u="FEATUREGRID:TOGGLE_FEATURES_SELECTION",s="FEATUREGRID:FEATURES_MODIFIED",p="FEATUREGRID:NEW_FEATURE",f="FEATUREGRID:SAVE_CHANGES",d="FEATUREGRID:SAVING",m="FEATUREGRID:START_EDITING_FEATURE",g="FEATUREGRID:START_DRAWING_FEATURE",b="FEATUREGRID:DELETE_GEOMETRY",y="FEATUREGRID:DELETE_GEOMETRY_FEATURE",v="FEATUREGRID:SAVE_SUCCESS",h="FEATUREGRID:CLEAR_CHANGES",E="FEATUREGRID:SAVE_ERROR",O="FEATUREGRID:DELETE_SELECTED_FEATURES",S="SET_FEATURES",P="FEATUREGRID:SORT_BY",T="FEATUREGRID:SET_LAYER",w="QUERY:UPDATE_FILTER",C="FEATUREGRID:CHANGE_PAGE",x="FEATUREGRID:GEOMETRY_CHANGED",j="DOCK_SIZE_FEATURES",D="FEATUREGRID:TOGGLE_TOOL",N="FEATUREGRID:CUSTOMIZE_ATTRIBUTE",R="ASK_CLOSE_FEATURE_GRID_CONFIRM",A="FEATUREGRID:OPEN_GRID",I="FEATUREGRID:CLOSE_GRID",F="FEATUREGRID:CLEAR_CHANGES_CONFIRMED",k="FEATUREGRID:FEATURE_GRID_CLOSE_CONFIRMED",_="FEATUREGRID:SET_PERMISSION",U="FEATUREGRID:DISABLE_TOOLBAR",M="FEATUREGRID:ACTIVATE_TEMPORARY_CHANGES",Z="FEATUREGRID:DEACTIVATE_GEOMETRY_FILTER",G="FEATUREGRID:ADVANCED_SEARCH",L="FEATUREGRID:ZOOM_ALL",B="FEATUREGRID:INIT_PLUGIN",V="FEATUREGRID:SIZE_CHANGE",z="FEATUREGRID:TOGGLE_SHOW_AGAIN_FLAG",$="FEATUREGRID:UPDATE_EDITORS_OPTIONS",W="FEATUREGRID:LAUNCH_UPDATE_FILTER_FUNC",H="FEATUREGRID:SET_SYNC_TOOL",J="FEATUREGRID:SET_VIEWPORT_FILTER",Y={EDIT:"EDIT",VIEW:"VIEW"},K="FEATUREGRID:START_SYNC_WMS",X="FEATUREGRID:STOP_SYNC_WMS",q="STORE_ADVANCED_SEARCH_FILTER",Q="LOAD_MORE_FEATURES",ee="FEATUREGRID:QUERY_RESULT",te="FEATUREGRID:SET_TIME_SYNC",ne="FEATUREGRID:SET_PAGINATION";function re(){return{type:z}}function oe(e,t){return{type:ee,features:e,pages:t}}function ie(e){return{type:q,filterObj:e}}function ae(){return{type:B,options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function le(){return{type:F}}function ce(){return{type:k}}function ue(e,t){return{type:o,features:e,append:t}}function se(e){return{type:r,options:e}}function pe(e){return{type:x,features:e}}function fe(){return{type:m}}function de(){return{type:g}}function me(e){return{type:i,features:e}}function ge(){return{type:b}}function be(e){return{type:y,features:e}}function ye(){return{type:a}}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiselect,n=e.showCheckbox;return{type:l,multiselect:t,showCheckbox:n}}function he(e,t){return{type:P,sortBy:e,sortOrder:t}}function Ee(e,t){return{type:C,page:e,size:t}}function Oe(e){return{type:T,id:e}}function Se(e){return{type:w,update:e,append:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}function Pe(e,t){return{type:D,tool:e,value:t}}function Te(e,t,n){return{type:N,name:e,key:t,value:n}}function we(){return{type:c,mode:Y.EDIT}}function Ce(){return{type:c,mode:Y.VIEW}}function xe(e,t){return{type:s,features:e,updated:t}}function je(e){return{type:p,features:e}}function De(){return{type:f}}function Ne(){return{type:v}}function Re(){return{type:O}}function Ae(){return{type:d}}function Ie(){return{type:h}}function Fe(){return{type:E}}function ke(){return{type:R}}function _e(e){return{type:I,closer:e}}function Ue(){return{type:A}}function Me(e){return{type:U,disabled:e}}function Ze(e){return{type:_,permission:e}}function Ge(){return{type:G}}function Le(){return{type:L}}function Be(){return{type:K}}function Ve(e,t){return{type:V,size:e,dockProps:t}}var ze=function(e){return{type:Q,pages:e}},$e=function(e){return{type:M,activated:e}},We=function(e){return{type:Z,deactivated:e}},He=function(e){return{type:te,value:e}},Je=function(e){return{type:ne,size:e}},Ye=function(e){return{type:W,updateFilterAction:e}},Ke=function(e){return{type:H,syncWmsFilter:e}},Xe=function(e){return{type:J,value:e}}},801550:(e,t,n)=>{"use strict";n.d(t,{pP:()=>r,TR:()=>o,N7:()=>i,mq:()=>a,uv:()=>l,Qy:()=>c,IL:()=>u,Li:()=>s,OW:()=>p,ZO:()=>f,Um:()=>d,TF:()=>m,Ls:()=>g,Ec:()=>b,Eu:()=>y,JJ:()=>v,nZ:()=>h,YD:()=>E,GI:()=>O,Jb:()=>S,Uh:()=>P,e$:()=>T,eh:()=>w,$j:()=>C,bJ:()=>x,Mk:()=>j,xy:()=>D,o6:()=>N,NH:()=>R,FP:()=>A,Mo:()=>I,sO:()=>F,Px:()=>k,hd:()=>_,y9:()=>U,Ju:()=>M,BV:()=>Z,SO:()=>G,H0:()=>L,$X:()=>B,ou:()=>V,NE:()=>z,Lq:()=>$,aN:()=>W});var r="CHANGE_MAP_VIEW",o="CLICK_ON_MAP",i="CHANGE_MOUSE_POINTER",a="CHANGE_ZOOM_LVL",l="PAN_TO",c="ZOOM_TO_EXTENT",u="ZOOM_TO_POINT",s="CHANGE_MAP_CRS",p="CHANGE_MAP_SCALES",f="CHANGE_MAP_STYLE",d="CHANGE_ROTATION",m="CREATION_ERROR_LAYER",g="UPDATE_VERSION",b="INIT_MAP",y="RESIZE_MAP",v="CHANGE_MAP_LIMITS",h="SET_MAP_RESOLUTIONS",E="REGISTER_EVENT_LISTENER",O="UNREGISTER_EVENT_LISTENER",S="MOUSE_MOVE",P="MOUSE_OUT",T="MAP:MAP_PLUGIN_LOAD",w="MAP:ORIENTATION",C="MAP:UPDATE_MAP_VIEW",x="MAP:UPDATE_MAP_OPTIONS";function j(e,t,n,r){return{type:T,mapType:t,loading:e,loaded:n,error:r}}function D(e,t,n){return{type:u,pos:e,zoom:t,crs:n}}function N(e,t,n,o,i,a,l,c){return{type:r,center:e,zoom:t,bbox:n,size:o,mapStateSource:i,projection:a,viewerOptions:l,resolution:c}}function R(e){return{type:s,crs:e}}function A(e,t){return{type:o,point:e,layer:t}}function I(e){return{type:i,pointer:e}}function F(e,t){return{type:a,zoom:e,mapStateSource:t}}function k(e,t,n,r){return{type:c,extent:e,crs:t,maxZoom:n,options:r}}function _(e,t){return{type:f,style:e,mapStateSource:t}}function U(e){return{type:b,disableFeedbackMask:e}}function M(){return{type:y}}function Z(e){var t=e.restrictedExtent,n=e.crs,r=e.minZoom;return{type:v,restrictedExtent:t,crs:n,minZoom:r}}function G(e){return{type:h,resolutions:e}}var L=function(e,t){return{type:E,eventName:e,toolName:t}},B=function(e,t){return{type:O,eventName:e,toolName:t}},V=function(e){return{type:S,position:e}},z=function(){return{type:P}},$=function(e){return{type:w,orientation:e}},W=function(e){return{type:x,configUpdate:e}}},135400:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(379313);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){var r,o,i,l;r=e,o=t,i=n[t],l=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==a(l)?l:l+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{}:t,r=e.mainViewStyle,a=void 0===r?{}:r,l=e.contentStyle,u=void 0===l?{}:l,s=e.imageStyle,p=void 0===s?{}:s,f=e.glyph,d=void 0===f?"info-sign":f,m=e.iconFit,g=e.title,b=e.tooltip,y=e.tooltipId,v=e.description,h=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:m?"100%":void 0},n)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:m?"100%":void 0},a)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:m?"100%":void 0},p)},o().createElement(i.Z,{iconFit:m,tooltip:b,tooltipId:y,glyph:d})):null,g?o().createElement("h1",{key:"title"},g):null,v?o().createElement("p",{key:"description",className:"empty-state-description"},v):null),o().createElement("div",{key:"content",className:"empty-state-content",style:u},h))}},698772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(893379),o=n.n(r),i=n(172704);o()(i.Z,{insert:"head",singleton:!1}),i.Z.locals;var a=n(45697),l=n.n(a),c=n(124852),u=n.n(c),s=n(480681);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function d(e,t,n){return t=g(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function y(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(e=d(this,t,[].concat(r)),"onFilter",(function(t){e.props.onFilter(t.target.value)})),y(e,"onClear",(function(){e.props.onFilter("")})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.filterText?u().createElement(s.Ox,{placement:"bottom",overlay:u().createElement(s.u,{id:"mapstore-toc-filter"},this.props.tooltipClear)},u().createElement(s.gG,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):u().createElement(s.gG,{className:"text-primary",glyph:"filter"});return u().createElement(s.cw,{className:"mapstore-filter"},u().createElement(s.BZ,null,u().createElement(s.NI,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),u().createElement(s.BZ.Addon,{className:"square-button-md"},this.props.loading?u().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&f(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u().Component);y(h,"propTypes",{loading:l().bool,filterText:l().string,filterPlaceholder:l().oneOfType([l().object,l().string]),onFilter:l().func,onFocus:l().func,tooltipClear:l().oneOfType([l().object,l().string])}),y(h,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const E=h},379313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(124852),o=n.n(r),i=n(480681),a=n(496259),l=(0,n(815135).Z)(i.gG);const c=function(e){var t=e.glyph,n=void 0===t?"info-sign":t,r=e.tooltip,i=e.tooltipId,c=e.iconFit,u=e.padding,s=void 0===u?0:u,p=e.margin,f=void 0===p?0:p;return o().createElement(a.Z,null,(function(e){var t=e.width,a=e.height;return o().createElement(l,{glyph:n,tooltip:r,tooltipId:i,style:{display:"inline-block",padding:s+"px",margin:f+"px",textAlign:"center",fontSize:c?Math.min(t,a)-2*s-2*f:t-2*s-2*f}})}))}},975480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(124852),o=n.n(r);const i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style,t=void 0===e?{display:"inline-block"}:e;return o().createElement("div",{style:t,className:"mapstore-inline-loader"})}},843614:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(727418),o=n.n(r),i=n(480681),a=n(461365);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}function s(e,t,n){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,p()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(p=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),n=t,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&c(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(i.u_);const g=o()((0,a.Z)(m),{Body:i.u_.Body,Dialog:i.u_.Dialog,Footer:i.u_.Footer,Header:i.u_.Header,Title:i.u_.Title})},352595:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=(0,n(461365).Z)(n(480681).aV)},694745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(124852),o=n.n(r),i=n(294184),a=n.n(i),l=n(480681),c=n(807472),u=n(80717),s=n(867076),p=n(819081),f=n.n(p),d=n(975480),m={xs:" ms-xs",sm:" ms-sm",md:"",lg:" ms-lg"},g={className:{vertical:" ms-fullscreen-v",horizontal:" ms-fullscreen-h",full:" ms-fullscreen"},glyph:{expanded:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-small"},collapsed:{vertical:"resize-vertical",horizontal:"resize-horizontal",full:"resize-full"}}};const b=(0,s.withState)("fullscreenState","onFullscreen",(function(e){var t=e.initialFullscreenState;return void 0===t?"collapsed":t}))((function(e){var t=e.show,n=void 0!==t&&t,r=e.loading,i=e.loadingText,s=e.onClose,p=void 0===s?function(){}:s,b=e.title,y=void 0===b?"":b,v=e.clickOutEnabled,h=void 0===v||v,E=e.showClose,O=void 0===E||E,S=e.disabledClose,P=void 0!==S&&S,T=e.showFullscreen,w=void 0!==T&&T,C=e.fullscreenType,x=void 0===C?"full":C,j=e.buttons,D=void 0===j?[]:j,N=e.size,R=void 0===N?"":N,A=e.bodyClassName,I=void 0===A?"":A,F=e.children,k=e.draggable,_=void 0!==k&&k,U=e.fullscreenState,M=e.onFullscreen,Z=e.fade,G=void 0!==Z&&Z,L=e.fitContent,B=e.modalClassName,V=void 0===B?"":B,z=e.dialogClassName,$=void 0===z?"":z,W=e.enableFooter,H=void 0===W||W,J=m[R]||"",Y=w&&"expanded"===U&&g.className[x]||"",K=n?o().createElement("div",{className:"modal-fixed ".concat(V," ")+(_?"ms-draggable":"")},o().createElement(c.Z,{id:"ms-resizable-modal",style:{display:"flex"},onClickOut:h?p:function(){},containerClassName:"ms-resizable-modal",draggable:_,modal:!0,className:a()("modal-dialog modal-content",J,Y,$,{"ms-fit-content":L})},o().createElement("span",{role:"header"},o().createElement("h4",{className:"modal-title"},o().createElement("div",{className:"ms-title"},y),w&&g.className[x]&&o().createElement(l.gG,{className:"ms-header-btn",onClick:function(){return M("expanded"===U?"collapsed":"expanded")},glyph:g.glyph[U][x]}),O&&p&&o().createElement(l.gG,{glyph:"1-close",className:"ms-header-btn",onClick:p,disabled:P}))),o().createElement("div",{role:"body",className:I},F),H&&o().createElement("div",{style:{display:"flex"},role:"footer"},o().createElement("div",{className:"ms-resizable-modal-loading-spinner-container"},r?o().createElement(d.Z,null):null),o().createElement("div",{className:"ms-resizable-modal-loading-text"},r?i:null),o().createElement(u.Z,{buttons:D})))):null;return G?o().createElement(f(),{transitionName:"ms-resizable-modal-fade",transitionEnterTimeout:300,transitionLeaveTimeout:300},K):K}))},876424:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(124852),o=n.n(r),i=n(513218),a=n.n(i),l=n(532425);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var u=["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,n=e.caption,r=e.infoExtra,i=e.className,p=void 0===i?"":i,f=e.description,d=e.fullText,m=e.onClick,g=void 0===m?function(){}:m,b=e.onMouseEnter,y=void 0===b?function(){}:b,v=e.onMouseLeave,h=void 0===v?function(){}:v,E=e.preview,O=e.selected,S=e.size,P=e.style,T=void 0===P?{}:P,w=e.stylePreview,C=void 0===w?{}:w,x=e.styleTools,j=void 0===x?{}:x,D=e.title,N=e.loading,R=e.dragSymbol,A=void 0===R?"+":R,I=e.tools,F=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u);return o().createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(S?" ms-"+S:"").concat(p?" ".concat(p):"").concat(d?" full-text":""),onClick:function(e){return g(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:D,preview:E,description:f,caption:n,tools:I},F),e)},onMouseEnter:y,onMouseLeave:h,style:T},o().createElement("div",{className:"ms-head"},F.isDraggable&&F.connectDragSource&&F.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},A))),E&&o().createElement("div",{className:"mapstore-side-preview",style:C},E),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},D&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,D)),f&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(f)?f:o().createElement("span",null,f)),n&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,n))),r),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:j},I),"sm"!==S&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(l.Z,{className:"mapstore-side-card-loader",size:12,hidden:!N})))))),t&&o().createElement("div",{className:"ms-body"},t))}},982030:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(124852),o=n.n(r),i=n(623560),a=n.n(i),l=n(867076),c=n(135400);const u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,l.branch)(e,(function(){return function(e){return o().createElement(n,t&&a()(t)?t(e):t)}}))}},218291:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(124852),o=n.n(r);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const a=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallback,n=void 0===t?null:t;return function(t){return(0,r.forwardRef)((function(a,l){return void 0===e||e(a)?o().createElement(r.Suspense,{fallback:n},o().createElement(t,i({ref:l},a))):null}))}}},962909:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(124852),o=n.n(r),i=n(843614),a=n(805346),l=n(38560);const c=function(e){var t=e.title,n=void 0===t?o().createElement(a.Z,{msgId:"warning"}):t,r=e.cancelText,c=void 0===r?o().createElement(a.Z,{msgId:"no"}):r,u=e.confirmText,s=void 0===u?o().createElement(a.Z,{msgId:"yes"}):u,p=e.onClose,f=void 0===p?function(){}:p,d=e.onConfirm,m=void 0===d?function(){}:d,g=e.show,b=e.children,y=e.className,v=void 0===y?"":y,h=e.buttonSize,E=e.running,O=void 0!==E&&E,S=o().createElement("span",{role:"footer"},o().createElement("div",{style:{float:"left"}}),o().createElement(l.Z,{disabled:O,className:v,key:"confirmButton",bsStyle:"primary",bsSize:h,onClick:function(){m()}},s),o().createElement(l.Z,{key:"cancelButton",bsSize:h,disabled:O,onClick:f},c));return o().createElement(i.Z,{show:g,onHide:f},o().createElement(i.Z.Header,{key:"dialogHeader",closeButton:!0},o().createElement(i.Z.Title,null,n)),o().createElement(i.Z.Body,null,b),o().createElement(i.Z.Footer,null,S))}},507299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(867076);const o=(0,r.compose)((0,r.withState)("showDetailsSheet","setShowDetailsSheet",!1),(0,r.withState)("editorState","setEditorState"),(0,r.withState)("detailsBackup","setDetailsBackup"),(0,r.withHandlers)({onShowDetailsSheet:function(e){var t=e.setShowDetailsSheet,n=void 0===t?function(){}:t;return function(){return n(!0)}},onHideDetailsSheet:function(e){var t=e.setShowDetailsSheet,n=void 0===t?function(){}:t;return function(){return n(!1)}}}),(0,r.withProps)((function(e){var t,n,r=e.linkedResources,o=void 0===r?{}:r;return{savedDetailsText:"NODATA"===(null==o||null===(t=o.details)||void 0===t?void 0:t.data)||null==o||null===(n=o.details)||void 0===n?void 0:n.data}})))},202576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>O});var r=n(124852),o=n.n(r),i=n(180307),a=n.n(i),l=n(45697),c=n.n(l),u=n(480681),s=n(352595),p=n(950966);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function m(e,t,n){return t=b(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(t,e),n=t,(r=[{key:"renderPopover",value:function(){return o().createElement(u.J2,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title,style:this.props.popoverStyle},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(u.gG,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(p.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(s.Z,{placement:this.props.placement,show:!0,target:function(){return a().findDOMNode(e.target)}},this.renderPopover())])}}])&&d(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(o().Component);v(E,"propTypes",{id:c().string,title:c().string,text:c().string,glyph:c().string,bsStyle:c().string,placement:c().string,left:c().number,top:c().number,trigger:c().oneOfType([c().array,c().bool]),popoverStyle:c().object}),v(E,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const O=E},298854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(124852);const o=(0,n(218291).Z)()((0,r.lazy)((function(){return Promise.all([n.e(39935),n.e(33841)]).then(n.bind(n,233841))})))},271609:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(375875),o=n.n(r),i=n(737275),a=n(984596),l=n.n(a),c=n(692957);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e||i.ZP.getConfigProp("contextPluginsConfiguration")||"configs/pluginsConfig.json",n=l()(t);return o().all(n.map((function(e){return o().get(e).then((function(e){return e.data})).catch((function(){return null}))}))).then((function(e){var t,n=function(e){if(Array.isArray(e))return e}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n.slice(1);if(!r)throw new Error("plugins configuration file is broken");return(0,c.ao)(r,o.filter((function(e){return e&&"object"===u(e)})))}))}},589919:(e,t,n)=>{"use strict";n.d(t,{hP:()=>u});var r=n(984596),o=n.n(r),i=n(49977),a=n.n(i);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.startWith.apply(e,function(e){if(Array.isArray(e))return l(e)}(t=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},u=function(e,t,n){return function(r){return(n?c(r,o()(e)).catch(n):c(r,o()(e))).concat(a().Observable.from(o()(t)))}}},266376:(e,t,n)=>{"use strict";n.r(t),n.d(t,{contextCreatorSelector:()=>bi,default:()=>yi});var r={};n.r(r),n.d(r,{checkIfContextExists:()=>Ge,contextCreatorLoadContext:()=>_e,contextCreatorShowTutorialEpic:()=>ze,deleteTemplateEpic:()=>Ie,disablePluginsEpic:()=>Ye,editPluginEpic:()=>tt,editTemplateEpic:()=>Fe,enableInitialPlugins:()=>Le,enableMandatoryPluginsEpic:()=>He,enablePluginsEpic:()=>Je,exportContextEpic:()=>rt,handleUserExtensionsPlugin:()=>Xe,importContextEpic:()=>ot,invalidateContextName:()=>Ze,loadMapViewerOnStepChange:()=>Be,loadTemplateEpic:()=>Ae,loadTutorialOnStepChange:()=>Ve,mapViewerLoadEpic:()=>$e,mapViewerReload:()=>We,resetConfigOnPluginKeyChange:()=>Ke,resetOnShowDialog:()=>ke,saveContextResource:()=>Ne,savePluginCfgEpic:()=>nt,saveTemplateEpic:()=>Re,setValidationStatusOnEditedCfgUpdate:()=>qe,uninstallPluginEpic:()=>Me,updateEditedCfgEpic:()=>Qe,uploadPluginEpic:()=>Ue,validateEditedCfgEpic:()=>et});var o=n(171703),i=n(22222),a=n(737275),l=n(322843),c=n(12248),u=n(93152),s=n(323827),p=n(227361),f=n.n(p),d=n(957557),m=n.n(d),g=n(513218),b=n.n(g),y=n(91175),v=n.n(y),h=n(313311),E=n.n(h),O=n(478718),S=n.n(O),P=n(761868),T=["data"],w=["plugins","userPlugins","templates","theme","customVariablesEnabled"],C=["type"];function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){var r;return r=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==x(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=[{name:"TOC",label:"List of layers",children:[{name:"TOCItemSettings",label:"Layer settings"},{name:"FeaturesGrid",label:"Attribute Table"}]},{name:"MapTemplates",label:"Map Templates"},{name:"MetadataExplorer",label:"MetadataExplorer"},{name:"Scale",label:"Scale"},{name:"ZoomIn",label:"Zoom In"},{name:"ZoomOut",label:"Zoom Out"}],k=function e(t,n,r,o){return t&&t.map((function(t){return A(A({},n.reduce((function(e,n){return e||n===t.name}),!1)?(0,P.t8)(r,o,t):t),{},{children:e(t.children,n,r,o)})}))},_=function(e){return b()(e)?e.name:e},U=function e(t,n){return t&&t.reduce((function(t,r){return t||n===_(r)&&r||e(r.children,n)}),null)},M=function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{name:t.name,title:t.title,description:t.description,docUrl:t.docUrl,glyph:t.glyph,parent:r,mandatory:!!t.mandatory,forcedMandatory:!1,enabledDependentPlugins:[],hidden:!!t.hidden,dependencies:t.dependencies||[],enabled:!1,active:!1,denyUserSelection:t.denyUserSelection||!1,isUserPlugin:!1,isExtension:null!==(n=t.extension)&&void 0!==n&&n,pluginConfig:A(A({override:t.defaultOverride},m().apply(void 0,[v()(i.filter((function(e){return e.name===t.name})))||{},"cfg"].concat(D(t.defaultOverride?["override"]:[])))),{},{name:t.name,cfg:t.defaultConfig}),autoEnableChildren:t.autoEnableChildren||[],children:f()(t,"children",[]).map((function(e){return v()(o.filter((function(t){return t.name===e})))})).filter((function(e){return void 0!==e})).map((function(n){return e(n,t.name,o,i)}))}},Z=n(49977),G=n.n(Z),L=n(729592),B=n.n(L),V=n(944908),z=n.n(V),$=n(225325),W=n.n($),H=n(3674),J=n.n(H),Y=n(252628),K=n.n(Y),X=n(630998),q=n.n(X),Q=n(150361),ee=n.n(Q),te=n(747037),ne=n.n(te),re=n(441609),oe=n.n(re),ie=n(275982),ae=n(849843),le=n(589919),ce=n(274621),ue=n(197395),se=function(e,t,n){return{type:"CHANGE_PRESET",preset:e,presetGroup:t,ignoreDisabled:n}},pe=n(801550),fe=n(881808),de=n(291312),me=n(271609),ge=n(375875),be=n.n(ge),ye=n(988753),ve=n(782904),he=n(998869),Ee=n(688182);function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Se(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Oe(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(e){return 409===e?"contextCreator.saveErrorNotification.conflict":"contextCreator.saveErrorNotification.defaultMessage"},je=function(e){return 403===e?"contextCreator.loadTemplateErrorNotification.forbidden":"contextCreator.loadTemplateErrorNotification.defaultMessage"},De=function e(t,n){return t&&t.reduce((function(t,r){return t||n===r.name&&r||e(r.children,n)}),null)},Ne=function(e,t){return e.ofType(s.vt).exhaustMap((function(n){var r=n.destLocation,o=t.getState(),i=(0,c.rt)(o),a=(0,c.Gp)(o),l=(0,c.Kg)(o);return(i&&i.id?de.id:de.SN)(l).switchMap((function(t){return G().Observable.merge("/context-manager"===r?e.ofType("CONTEXTMANAGER:CONTEXTS_LIST_LOADED").take(1).switchMap((function(){return G().Observable.of((0,ue.$Z)({title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"}))})):G().Observable.empty(),G().Observable.of((0,s.NG)(t),(0,ie.VF)(r||"/context/".concat(a.name)),(0,s.Qj)(),(0,s.V_)(!1,"contextSaving")))})).catch((function(e){var t=e.status,n=e.data;return G().Observable.of((0,ue.vU)({title:"contextCreator.saveErrorNotification.titleContext",message:xe(t),position:"tc",autoDismiss:5,values:{data:n}}),(0,s.V_)(!1,"contextSaving"))})).startWith((0,s.V_)(!0,"contextSaving"))}))},Re=function(e){return e.ofType(s.Zi).switchMap((function(e){var t=e.resource;return(t&&t.id?de.id:de.SN)(t).switchMap((function(e){return G().Observable.of((0,s.$k)(e),(0,s.vC)("uploadTemplate",!1),(0,ue.$Z)({title:"saveDialog.saveSuccessTitle",message:"saveDialog.saveSuccessMessage"}))})).let((0,le.hP)((0,s.V_)(!0,"templateSaving"),(0,s.V_)(!1,"templateSaving"),(function(e,t){var n=e.status,r=e.data;return 404===n&&ne()(r)&&r.indexOf("Resource Category not found")>-1?(0,de.k4)("TEMPLATE").switchMap((function(){return t.skip(1)})).catch((function(){return G().Observable.of((0,ue.vU)({title:"contextCreator.saveErrorNotification.titleTemplate",message:"contextCreator.saveErrorNotification.categoryError",position:"tc",autoDismiss:5,values:{categoryName:"TEMPLATE"}}))})):G().Observable.of((0,ue.vU)({title:"contextCreator.saveErrorNotification.titleTemplate",message:xe(n),position:"tc",autoDismiss:5,values:{data:r}}))})))}))},Ae=function(e){return e.ofType(s.bC).switchMap((function(e){var t=e.id;return(0,de.RX)(t,{includeAttributes:!0,withData:!1,withPermissions:!1}).switchMap((function(e){var t=f()(e,"attributes.thumbnail"),n=f()(e,"attributes.format");return G().Observable.of((0,s.QB)(Ce(Ce(Ce({},e),{},{attributes:Ce(Ce({},t?{thumbnail:decodeURIComponent(t)}:{}),n?{format:n}:{})},t?{thumbnail:decodeURIComponent(t)}:{}),n?{format:n}:{})))})).let((0,le.hP)((0,s.V_)(!0,"templateLoading"),(0,s.V_)(!1,"templateLoading")))}))},Ie=function(e,t){return e.ofType(s.RW).switchMap((function(e){var n=e.resource;return(0,de.fg)(n).map((function(){var e=t.getState(),r=(0,c.zU)(e)||[];return(0,s.T3)(r.filter((function(e){return e.id!==n.id})))})).let((0,le.hP)((0,s.V_)(!0,"loading"),(0,s.V_)(!1,"loading"),(function(){return G().Observable.of((0,ue.vU)({title:"notification.error",message:"contextCreator.configureTemplates.deleteError",autoDismiss:6,position:"tc"}))})))}))},Fe=function(e,t){return e.ofType(s.mE).switchMap((function(e){var n=e.id,r=t.getState(),o=E()((0,c.zU)(r),(function(e){return e.id===n}))||{};return(n?G().Observable.defer((function(){return ae.Z.getData(n)})):G().Observable.of(null)).switchMap((function(e){var t;return(t=G().Observable).of.apply(t,[(0,s.ur)(n)].concat(Se(n?[(0,s.IB)("Template Data",e,o.format),(0,s.CB)("accepted")]:[]),[(0,s.vC)("uploadTemplate",!0)]))})).let((0,le.hP)((0,s.V_)(!0,"templateDataLoading"),(0,s.V_)(!1,"templateDataLoading"),(function(e){var t=e.status;return G().Observable.of((0,ue.vU)({title:"notification.error",message:je(t),position:"tc",autoDismiss:5}))})))}))},ke=function(e,t){return e.ofType(s.yT).flatMap((function(e){var n,r=e.dialogName,o=e.show,i=t.getState(),a=(0,c.T$)(i),l=(0,c.zU)(i)||[];return o?(n=G().Observable).of.apply(n,Se("uploadTemplate"!==r||a?[]:[(0,s.CB)(),(0,s.IB)()]).concat(Se("mapTemplatesConfig"===r?[(0,s.Fd)(l.map((function(e){return e.id})),"selected",!1)]:[]))):G().Observable.empty()}))},_e=function(e,t){return e.ofType(s.JN).switchMap((function(e){var n=e.id,r=e.pluginsConfig;return G().Observable.of((0,s.sq)()).concat(G().Observable.forkJoin(G().Observable.defer((function(){return(0,me.Z)(r)})),G().Observable.defer((function(){return ae.Z.getResourcesByCategory("TEMPLATE","*",{params:{start:0,limit:1e4,includeAttributes:!0}})})).map((function(e){return 1===e.totalCount?[e.results]:K()(e.results)})),"new"===n?G().Observable.of(null):(0,de.RX)(n)).switchMap((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3),n=t[0],r=t[1],o=t[2];return G().Observable.of((0,s.DF)(o,n,r)).concat(G().Observable.of((0,s.Fl)(),(0,s.R5)(),(0,s.TX)("general-settings")))}))).let((0,le.hP)((0,s.V_)(!0,"loading"),(0,s.V_)(!1,"loading"),(function(e){var n="context.errors.context.unknownError";return 403===e.status&&(n="context.errors.context.pleaseLogin",(0,ce.jl)(t.getState())&&(n="context.errors.context.notAccessible")),404===e.status&&(n="context.errors.context.notFound"),G().Observable.of((0,s.DR)({error:Ce(Ce({},e.originalError),{},{message:n})}))})))}))},Ue=function(e){return e.ofType(s.DI).switchMap((function(e){var t=e.files;return G().Observable.defer((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rest/config/uploadPlugin";return Promise.all(e.map((function(e){return(0,ye.xp)(e).then((function(e){return be().post(t,e,{headers:{"Content-Type":"application/octet-stream"}})}))}))).then((function(e){return e.map((function(e){return e.data}))}))}(t.map((function(e){return e.file})))})).switchMap((function(e){return G().Observable.of((0,s.Hs)(e))})).let((0,le.hP)((0,s.$U)(!0,t.map((function(e){return e.name}))),(0,s.$U)(!1,t.map((function(e){return e.name}))),(function(e){return G().Observable.of((0,s.Jx)(t,e))})))}))},Me=function(e){return e.ofType(s.lx).switchMap((function(e){var t=e.plugin;return G().Observable.defer((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rest/config/uninstallPlugin";return be().delete(t+"/"+e).then((function(e){return e.data}))}(t)})).switchMap((function(e){return G().Observable.of((0,s.Zo)(t,e),(0,s.vC)("confirmRemovePlugin",!1))})).let((0,le.hP)((0,s.uc)(!0,t),(0,s.uc)(!1,t),(function(){return G().Observable.of((0,ue.vU)({title:"notification.error",message:"context.errors.plugins.uninstall",autoDismiss:6,position:"tc"}))})))}))},Ze=function(e,t){return e.ofType(s.zM).filter((function(e){return"name"===e.key})).switchMap((function(){var e=t.getState(),n=(0,c.F)(e);return n||void 0===n?G().Observable.of((0,s.Eg)(!1)):G().Observable.empty()}))},Ge=function(e,t){return e.ofType(s.zM).filter((function(e){return"name"===e.key})).debounceTime(500).switchMap((function(){var e=t.getState(),n=(0,c.rt)(e),r=n&&n.name;return(r?G().Observable.defer((function(){return ae.Z.searchListByAttributes({AND:{FIELD:{field:["NAME"],operator:["EQUAL_TO"],value:[r]}}})})).switchMap((function(e){var t=e.ExtResourceList,r=t.Resource,o=t.ResourceCount;return f()(r,"id")!==f()(n,"id")&&o>0?G().Observable.of((0,ue.vU)({title:"contextCreator.contextNameErrorNotification.title",message:"contextCreator.saveErrorNotification.conflict",position:"tc",autoDismiss:5}),(0,s.XT)(!1)):G().Observable.of((0,s.XT)(!0))})).let((0,le.hP)((0,s.V_)(!0,"contextNameCheck"),(0,s.V_)(!1,"contextNameCheck"),(function(){return G().Observable.of((0,ue.vU)({title:"contextCreator.contextNameErrorNotification.title",message:"contextCreator.contextNameErrorNotification.unknownError",position:"tc",autoDismiss:5}))}))):G().Observable.empty()).concat(G().Observable.of((0,s.Eg)(!0)))}))},Le=function(e,t){return e.ofType(s.Zf).switchMap((function(){var e=t.getState(),n=(0,c.u7)(e);return n&&n.length>0?G().Observable.of((0,s.iR)(n,!0)):G().Observable.empty()}))},Be=function(e){return e.ofType(s.ve).filter((function(e){return"configure-map"===e.stepId})).switchMap((function(){return G().Observable.of((0,s.$E)())}))},Ve=function(e,t){return e.ofType(s.ve).switchMap((function(e){var n=e.stepId,r=(0,c.K4)(t.getState())||{};return(0,c.xG)(n)(t.getState())?G().Observable.empty():G().Observable.of(se(r[n],K()(r)),(0,s.xv)(n))}))},ze=function(e,t){return e.ofType(s._o).switchMap((function(e){var n=e.stepId,r=(0,c.K4)(t.getState())||{};return G().Observable.of((0,s.$T)(),se(r[n],K()(r),!0))}))},$e=function(e,t){return e.ofType(s.kC).switchMap((function(){var e=t.getState(),n=(0,c.d8)(e),r=(0,c.lY)(e),o=a.ZP.getConfigUrl({mapId:"new",config:null}).configUrl;return n?G().Observable.empty():G().Observable.merge(G().Observable.of((0,pe.y9)(!0),(0,fe.JZ)(o,null,ee()(r),void 0,{}),(0,s.pl)(!0)))}))},We=function(e,t){return e.ofType(s.VD).switchMap((function(){var e=t.getState();return"configure-map"!==(0,c.F4)(e)?G().Observable.empty():G().Observable.of((0,s.pl)(!1),(0,s.$E)())}))},He=function(e,t){return e.ofType(s.m2).switchMap((function(){var e=t.getState(),n=(0,c.w7)(e);return G().Observable.of((0,s.iR)(n.filter((function(e){return e.mandatory})).map((function(e){return e.name}))))}))},Je=function(e,t){return e.ofType(s.ro).switchMap((function(e){var n,r=e.plugins,o=e.isInitial,i=t.getState(),a=(0,c.w7)(i),l={},u=[],p=[],f=function e(t){var n=function(t,n){n.children.forEach((function(t){t.mandatory&&e(t.name)})),o||n.mandatory||n.autoEnableChildren.forEach((function(e){t(null,De(a,e),!0)}))},r=function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r.mandatory){var i=r.enabled||u.reduce((function(e,t){return e||t===r.name}),!1);t&&!o&&(l[r.name]||(l[r.name]=r.enabledDependentPlugins.slice()),l[r.name].push(t)),r.forcedMandatory||p.reduce((function(e,t){return e||t===r.name}),!1)||(o||p.push(r.name),i||u.push(r.name),r.dependencies.forEach((function(t){e(r.name,De(a,t))})),i||n(e,r))}},i=De(a,t);!i.enabled&&u.reduce((function(e,n){return e&&n!==t}),!0)&&(u.push(t),i.dependencies.forEach((function(e){r(t,De(a,e))})),n(r,i))};return r.forEach((function(e){f(e)})),(n=G().Observable).of.apply(n,[(0,s.dd)(u,"enabled",!0)].concat(Se(o?[]:[(0,s.dd)(z()([].concat(u,p)),"isUserPlugin",!1)]),[(0,s.dd)(p,"forcedMandatory",!0)],Se(J()(l).map((function(e){return(0,s.dd)([e],"enabledDependentPlugins",z()(l[e]))})))))}))},Ye=function(e,t){return e.ofType(s.O_).switchMap((function(e){var n=e.plugins,r=t.getState(),o=(0,c.w7)(r),i=(0,Ee.r)(o).map((function(e){return e.name})),a=o.map((function(e){return e.name})),l=o.filter((function(e){return e.enabled&&!e.mandatory&&!e.forcedMandatory})).length;if(W()(n,a).length<l){var u,p={},f=[],d=[],m=function e(t,n){var r=De(o,t);0!==(p[r.name]||r.enabledDependentPlugins.slice()).length||!f.reduce((function(e,t){return e&&t!==r.name}),!0)||r.mandatory&&!n||(f.push(r.name),r.dependencies.forEach((function(n){!function(t,n){var r=p[n.name]||n.enabledDependentPlugins.slice(),o=q()(r,(function(e){return e===t}));o>-1&&(p[n.name]||(p[n.name]=r),p[n.name].splice(o,1)),p[n.name]&&0!==p[n.name].length||!f.reduce((function(e,t){return e&&t!==n.name}),!0)||(d.push(n.name),n.mandatory||e(n.name))}(t,De(o,n))})),r.children.filter((function(e){return e.enabled})).forEach((function(t){e(t.name,!0)})))};return n.forEach((function(e){m(e)})),(u=G().Observable).of.apply(u,[(0,s.dd)(f,"enabled",!1)].concat(Se(J()(p).map((function(e){return(0,s.dd)([e],"enabledDependentPlugins",p[e])}))),[(0,s.dd)(z()(d),"forcedMandatory",!1)]))}return G().Observable.of((0,s.dd)(i,"enabled",!1),(0,s.dd)(i,"enabledDependentPlugins",[]),(0,s.dd)(i,"forcedMandatory",!1),(0,s.Fl)())}))},Ke=function(e,t){return e.ofType(s.Gc).switchMap((function(e){var n=e.ids,r=e.key,o=e.value,i=t.getState(),a=(0,c.$R)(i),l=(0,c.w7)(i);return"enabled"===r&&!1===o&&function e(t){return t.reduce((function(t,n){return t||a===n.name||e(n.children)}),!1)}(n.map((function(e){return v()(l.filter((function(t){return t.name===e})))})).filter((function(e){return!!e})))?G().Observable.of((0,s.NP)(),(0,s.nv)()):G().Observable.empty()}))},Xe=function(e,t){return e.ofType(s.Gc).filter((function(e){var t=e.key;return"enabled"===t||"isUserPlugin"===t})).mergeMap((function(){var e=t.getState(),n=(0,Ee.r)((0,c.w7)(e)),r=n.filter((function(e){var t=e.name,n=e.enabled,r=e.isUserPlugin;return"UserExtensions"!==t&&n&&r})).length,o=(E()(n,(function(e){return"UserExtensions"===e.name}))||{}).enabled,i=r>0&&!o?s.iR:0===r&&o?s.$c:null;return i?G().Observable.of(i(["UserExtensions"])):G().Observable.empty()}))},qe=function(e,t){return e.ofType(s.zr).mergeMap((function(){var e=t.getState();return(0,c.MC)(e)?G().Observable.of((0,s.iY)(!1)):G().Observable.empty()}))},Qe=function(e){return e.ofType(s.zr).debounceTime(500).switchMap((function(){return G().Observable.of((0,s.YP)(),(0,s.YA)(),(0,s.iY)(!0))}))},et=function(e,t){return e.ofType(s.NS).switchMap((function(){var e=t.getState(),n=(0,c.gX)(e);if(n)try{var r=B().parse(n);return G().Observable.of((0,s.Qd)(r),(0,s.NP)())}catch(e){return G().Observable.of((0,s.NP)({message:e.message,lineNumber:function(e){var t=e.message.match(/line ([0-9]*)/);return t&&t.length>1?+t[1]:void 0}(e)}))}return G().Observable.empty()}))},tt=function(e,t){return e.ofType(s.iU).switchMap((function(e){var n=e.pluginName,r=t.getState(),o=(0,c.$R)(r),i=(0,c.I1)(r),a=(0,c.MC)(r)||!1;return!i&&a?G().Observable.of((0,s.nv)(n),(0,s.gq)(n)):i?G().Observable.of((0,ue.vU)({title:"contextCreator.configurePlugins.saveCfgErrorNotification.title",message:"contextCreator.configurePlugins.saveCfgErrorNotification.message",position:"tc",autoDismiss:5,values:{pluginName:o}})):G().Observable.empty()}))},nt=function(e,t){return e.ofType(s.rx).switchMap((function(){var e=t.getState(),n=(0,c.$R)(e),r=(0,c.Jw)(e),o=(0,c.I1)(e);return n&&r&&!o?G().Observable.of((0,s.dd)([n],"pluginConfig.cfg",r.cfg),(0,s.dd)([n],"pluginConfig.override",r.override)):G().Observable.empty()}))},rt=function(e,t){var n=t.getState;return e.ofType(s.c0).switchMap((function(e){var t=e.fileName,r=(0,c.ES)(n()),o=(0,c.Kg)(n()).data,i=Ce(Ce({},o),{},{mapConfig:oe()(null==o?void 0:o.mapConfig)?f()(r,"resource.data.mapConfig",{}):o.mapConfig});return G().Observable.of([JSON.stringify(Ce({},i)),t,"application/json"]).do((function(e){return ye.LR.apply(void 0,Se(e))})).map((function(){return(0,ve.Xi)(he.k)})).catch((function(){return G().Observable.of((0,ue.vU)({title:"contextCreator.errors.loading.title",message:"contextCreator.errors.loading.export"}))}))}))},ot=function(e,t){return e.ofType(s.V2).switchMap((function(e){var n=e.file;return G().Observable.defer((function(){return(0,ye.zr)(n[0]).then((function(e){return e}))})).switchMap((function(e){var n=(0,c.ES)(t.getState()),r=S()(n,["pluginsConfig","allTemplates"]),o=r.pluginsConfig,i=r.allTemplates,a=S()((0,c.rt)(t.getState()),["id","name"]),l=Ce({data:Ce({},e)},a);return G().Observable.of((0,s.DF)(l,o,i),(0,ve.Xi)("import")).concat(G().Observable.of((0,s.Fl)(),(0,s.R5)(),(0,s.pl)(!1)))})).catch((function(){return G().Observable.of((0,ue.vU)({title:"contextCreator.errors.loading.title",message:"contextCreator.errors.loading.import"}))}))}))},it=n(124852),at=n.n(it),lt=n(45697),ct=n.n(lt),ut=n(480681),st=n(38560),pt=n(805346),ft=n(965539),dt=n(501262),mt=n(399534);const gt=function(e){var t=e.style,n=e.showConfirm,r=void 0!==n&&n,o=e.onShowConfirm,i=void 0===o?function(){}:o,a=e.onConfirm,l=void 0===a?function(){}:a,c=e.onClose,u=void 0===c?function(){}:c,s=e.onClick,p=void 0===s?function(){}:s,f=e.className,d=void 0===f?"":f,m=e.title,g=e.confirmMessage,b=e.bsStyle,y=void 0===b?"default":b,v=e.bsSize,h=void 0===v?"sm":v;return at().createElement(at().Fragment,null,at().createElement(st.Z,{style:t,bsSize:h,bsStyle:y,className:d,onClick:p},m),g&&at().createElement(mt.Z,null,at().createElement(dt.Z,{modal:!0,show:r,onClose:function(){u(),i(!1)},onConfirm:function(){l(),i(!1)},confirmButtonBSStyle:"default",confirmButtonContent:at().createElement(pt.Z,{msgId:"confirm"}),closeText:at().createElement(pt.Z,{msgId:"cancel"}),closeGlyph:"1-close"},at().createElement(pt.Z,{msgId:g}))))};var bt=n(532425);const yt=function(e){var t=e.loading,n=void 0!==t&&t,r=e.steps,o=void 0===r?[]:r,i=e.hideNamesExceptCurrent,a=void 0!==i&&i,l=e.currentStepId,c=e.onSetStep,u=void 0===c?function(){}:c,s=e.onSave,p=void 0===s?function(){}:s,f=e.onShowBackToPageConfirmation,d=void 0===f?function(){}:f,m=e.showBackToPageConfirmation,g=void 0!==m&&m,b=e.backToPageConfirmationMessage,y=void 0===b?"contextCreator.undo":b,v=e.onConfirmBackToPage,h=void 0===v?function(){}:v,E=e.enableClickOnStep,O=void 0!==E&&E,S=e.hideSaveButton,P=e.hideCloseButton,T=o.findIndex((function(e){return e.id===l})),w=S&&T===o.length-1,C=T>-1?at().createElement("div",{className:"ms2-stepper"},at().createElement("div",{className:"footer-button-toolbar-div"},at().createElement(ut.Si,{className:"footer-button-toolbar-extra"},(o[T].extraToolbarButtons||[]).map((function(e,t){var n=e.component,r=e.onClick,o=void 0===r?function(){}:r,i=e.label,a=e.id;return n?at().createElement(n,null):at().createElement(st.Z,{key:a||i||t,bsStyle:"primary",bsSize:"sm",onClick:o},at().createElement(pt.Z,{msgId:i}))}))),at().createElement(ut.Si,{className:"footer-button-toolbar"},!w&&at().createElement(st.Z,{bsStyle:"primary",bsSize:"sm",disabled:o[T].disableNext||n,onClick:function(){return T<o.length-1?u(o[T+1].id):p()}},at().createElement(pt.Z,{msgId:T<o.length-1?"stepper.next":"save"})),at().createElement(st.Z,{style:{height:"100%"},bsSize:"sm",className:"no-border",disabled:0===T||n,onClick:function(){return u(o[T-1].id)}},at().createElement(pt.Z,{msgId:"stepper.back"})),!P&&at().createElement(gt,{style:{height:"100%"},className:"no-border",title:n?at().createElement(bt.Z,{size:14}):at().createElement(pt.Z,{msgId:"close"}),showConfirm:g,onShowConfirm:d,onConfirm:h,onClick:function(){return d(!0)},confirmMessage:y}))),at().createElement("div",{className:"footer-step-bar"},o.map((function(e,t){var n=at().createElement(pt.Z,{msgId:e.label});return at().createElement(at().Fragment,null,t>0&&at().createElement("div",{key:"line"+e.id,style:{flex:1,display:"flex",alignItems:"center"}},at().createElement("div",{style:{backgroundColor:t<=T?"#777":"#ddd",height:1,width:"100%"}})),at().createElement("div",{key:"label"+e.id,style:{padding:8,display:"flex",alignItems:"center",cursor:O?"pointer":"default"},onClick:function(){return O&&u(e.id)},role:"button",tabIndex:"0",onKeyDown:function(t){return(" "===t.key||"Enter"===t.key||"Spacebar"===t.key)&&O&&u(e.id)}},at().createElement(ut.__,{bsStyle:t===T?"success":"primary",style:t<=T?{}:{backgroundColor:"#aaa"}},t+1),(!a||t===T)&&at().createElement("span",{style:{padding:8}},t===T?at().createElement("strong",null,n):n)))})))):null;return T>-1?at().createElement(ft.Z,{className:"ms-stepper-container",footer:1===(null==o?void 0:o.length)?null:C},o[T].component):null};var vt=n(472986),ht=n.n(vt),Et=n(86638);const Ot=function(e){var t=e.contextId,n=e.contextName,r=void 0===n?"":n,o=e.windowTitle,i=void 0===o?"":o,a=e.isValidContextName,l=void 0===a||a,c=e.contextNameChecked,u=void 0===c||c,s=e.loading,p=void 0!==s&&s,f=e.onChange,d=void 0===f?function(){}:f,m=e.context,g=void 0===m?{}:m;return at().createElement("div",{className:"general-settings-step"},at().createElement("div",{style:{margin:"auto"}},at().createElement("div",{className:"text-center"},at().createElement(ut.gG,{glyph:"wrench",style:{fontSize:128}})),at().createElement("h1",{className:"text-center"},"new"===t?at().createElement(pt.Z,{msgId:"contextCreator.generalSettings.title"}):at().createElement(pt.Z,{msgId:"contextCreator.generalSettings.edit"})),at().createElement(ut.cw,{validationState:r.length>0&&u?l?"success":"error":null},at().createElement(ut.J$,null,at().createElement(pt.Z,{msgId:"contextCreator.generalSettings.name"}),p?at().createElement(ht(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null),at().createElement(ut.NI,{type:"text",value:r,placeholder:(0,Et.S$)(g.messages,"contextCreator.generalSettings.namePlaceholder"),onChange:function(e){return d("name",e.target.value&&e.target.value.replace(/[^a-zA-Z0-9\-_]/g,""))}})),at().createElement(ut.cw,{validationState:i.length>0?"success":null},at().createElement(ut.J$,null,at().createElement(pt.Z,{msgId:"contextCreator.generalSettings.windowTitle"})),at().createElement(ut.NI,{type:"text",value:i,placeholder:(0,Et.S$)(g.messages,"contextCreator.generalSettings.windowTitlePlaceholder"),onChange:function(e){return d("windowTitle",e.target.value)}}))))};var St=n(867076),Pt=n(298854),Tt=n(698772),wt=n(80717),Ct=n(876424),xt=n(982030),jt=n(950966);function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Nt(){return Nt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nt.apply(this,arguments)}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Dt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Dt(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ft=(0,xt.Z)((function(e){var t=e.items;return!(void 0===t?[]:t).length}),(function(e){return e.emptyStateProps}))((function e(t){var n=t.items,r=void 0===n?[]:n,o=t.side,i=t.selectedItems,a=void 0===i?[]:i,l=t.selectedSide,c=t.allowCtrlMultiSelect,u=void 0!==c&&c,s=t.onSelect,p=void 0===s?function(){}:s,f=t.isRoot,d=void 0===f||f;return at().createElement("div",{className:"ms2-transfer-sidegrid"},r.map((function(t,n){var i=t.id&&a.reduce((function(e,n){return e||n.id===t.id}),!1);return at().createElement(Ct.Z,Nt({onClick:function(e,n){return d?p(i?a.filter((function(e){return e.id!==t.id})):u&&n.ctrlKey&&o===l?[].concat(function(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a),[t]):[t],o):{}}},t,{key:t.id||n,size:t.cardSize,className:(t.className?"".concat(t.className," "):" ")+(n===r.length-1?"ms2-transfer-lastcard":""),selected:null!=i?i:t.selected,tools:t.tools&&t.tools.length>0?at().createElement(wt.Z,{buttons:t.tools.map((function(e){return At(At({},e),{},{className:"square-button-md no-border",onClick:function(t){t.stopPropagation(),e.onClick&&e.onClick()}})}))}):void 0,preview:t.preview,description:t.showDescriptionTooltip&&t.description?at().createElement(jt.Z,{delayShow:t.descriptionTooltipDelay,placement:"top",overlay:at().createElement(ut.u,{id:t.id},t.description)},at().createElement("span",null,t.description)):t.description,body:at().createElement("div",{className:"ms2-transfer-body-container"},t.component&&at().createElement("div",{className:"ms2-transfer-bodycomponent-container",onClick:function(e){return e.stopPropagation()}},t.component),t.children&&at().createElement("div",{className:"ms2-transfer-children-container"},at().createElement(e,{items:t.children,side:o,selectedItems:a,selectedSide:l,allowCtrlMultiSelect:u,onSelect:p,isRoot:!1})))}))})))}));function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}var _t=["title","description","children"];function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=kt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==kt(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zt=function e(t,n){var r=n.title,o=n.description,i=n.children;return Mt(Mt({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,_t)),{},{title:r&&(0,Et.S$)(t,r),description:o&&(0,Et.S$)(t,o),children:i&&i.map((function(n){return e(t,n)}))})},Gt=function(e,t,n,r,o,i,a,l,c,u){var s=r.items,p=void 0===s?[]:s,f=r.title,d=void 0===f?"":f,m=r.filterText,g=void 0===m?"":m,b=r.filterPlaceholder,y=void 0===b?"":b,v=r.tools,h=void 0===v?[]:v,E=r.emptyStateProps,O=void 0===E?{}:E,S=r.emptyStateSearchProps,P=void 0===S?{}:S,T=r.onFilter,w=void 0===T?function(){}:T;return at().createElement("div",{className:"ms2-transfer-subpanel ms2-transfer-".concat(n)},at().createElement("div",{className:"ms2-transfer-header"},at().createElement("div",{className:"ms2-transfer-title-area"},at().createElement("h4",null,at().createElement(pt.Z,{msgId:d}),function(e){return at().createElement(wt.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:e})}(h))),at().createElement(Tt.Z,{filterText:g,filterPlaceholder:(0,Et.S$)(t,y),onFilter:w})),at().createElement(Ft,{items:c(u(g,p.map((function(n){return e?Zt(t,n):n})))),emptyStateProps:Zt(t,p.length>0&&g.length>0?P:O),side:n,selectedItems:i,selectedSide:a,allowCtrlMultiSelect:o,messages:t,onSelect:l}))},Lt=function(e,t){var n=e.localizeItems,r=void 0!==n&&n,o=e.leftColumn,i=void 0===o?{}:o,a=e.rightColumn,l=void 0===a?{}:a,c=e.allowCtrlMultiSelect,u=void 0!==c&&c,s=e.selectedItems,p=void 0===s?[]:s,f=e.selectedSide,d=e.className,m=e.filter,g=void 0===m?function(e,t){return t}:m,b=e.sortStrategy,y=void 0===b?function(e){return e}:b,v=e.onSelect,h=void 0===v?function(){}:v,E=e.onTransfer,O=void 0===E?function(){}:E,S=e.moveButtons,P=void 0===S?[{id:"all-right",label:">>",disabled:!i.items||(i.emptyTest?i.emptyTest(i.items):!i.items.length),onClick:function(){O(i.items,"right"),h([])}},{id:"right",label:">",disabled:"left"!==f||!p||!p.length,onClick:function(){O(p,"right"),h([])}},{id:"left",label:"<",disabled:"right"!==f||!p||!p.length,onClick:function(){O(p,"left"),h([])}},{id:"all-left",label:"<<",disabled:!l.items||(l.emptyTest?l.emptyTest(l.items):!l.items.length),onClick:function(){O(l.items,"left"),h([])}}]:S;return at().createElement("div",{className:"ms2-transfer".concat(d?" "+d:"")},Gt(r,t.messages,"left",i,u,p,f,h,y,g),function(e){return at().createElement(ut.hE,{vertical:!0},e.map((function(e,t){var n=e.id,r=e.label,o=e.onClick,i=void 0===o?function(){}:o,a=e.disabled;return at().createElement(st.Z,{key:n||t,bsStyle:"primary",className:"square-button-md",disabled:a,onClick:i},r)})))}(P),Gt(r,t.messages,"right",l,u,p,f,h,y,g))};Lt.contextTypes={messages:ct().object};const Bt=Lt;var Vt=n(694745),zt=n(90085),$t=n(559407),Wt=n(618446),Ht=n.n(Wt);const Jt=(0,St.compose)((0,St.withState)("newGroup","onNewGroupChoose"),(0,St.withState)("newPermission","onNewPermissionChoose"));var Yt={FORMAT:"map.errorFormat",SIZE:"map.errorSize",409:"dashboard.errors.resourceAlreadyExists",403:"dashboard.errors.forbidden",405:"dashboard.errors.forbidden405"},Kt=function(e){return"string"==typeof e?e:e.statusText||e.message},Xt=function(e){return"string"==typeof e?void 0:e};const qt=function(e){var t=e.errors,n=void 0===t?[]:t;return at().createElement(ut.X2,null,n.length>0?at().createElement("div",{className:"dropzone-errorBox alert-danger"},n.map((function(e){return at().createElement("div",{key:"error"+Kt(e),className:"error"+Kt(e)},function(e){var t,n="string"==typeof(t=e)?t:t.status;return at().createElement(pt.Z,{msgId:Yt[n]||Kt(e),msgParams:Xt(e)})}(e))}))):null)};var Qt=n(423570),en=n.n(Qt),tn=n(855033),nn=n.n(tn);const rn=function(e){var t=e.acceptedFileName,n=e.label,r=e.status,o=void 0===r?"clear":r,i=e.errorMessage,a=e.clearMessage,l=e.onDrop,c=void 0===l?function(){}:l,u=e.onClear,s=void 0===u?function(){}:u,p=e.onError,f=void 0===p?function(){}:p;return at().createElement("div",{className:"dropzone-filedrop-container"},at().createElement("label",{className:"control-label"},at().createElement(pt.Z,{msgId:n})),at().createElement(nn(),{multiple:!1,className:"dropzone alert alert-info".concat("accepted"===o?" filedrop-accepted":""),rejectClassName:"alert-danger",onDrop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.apply(void 0,[f].concat(t))}},"accepted"===o&&at().createElement("div",{className:"dropzone-filedrop-remove",onClick:function(e){e.stopPropagation(),s()}},at().createElement(ut.gG,{glyph:"remove"})),at().createElement("div",{className:"dropzone-content"},at().createElement(ut.gG,{glyph:"clear"===o?"upload":"accepted"===o?"ok-circle":"remove-circle"}),"accepted"===o?at().createElement("span",null,t):null,"rejected"===o?i:null,"clear"===o?a:null)))};var on=n(730381),an=n.n(on),ln=n(993451);function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gn(r.key),r)}}function sn(e,t,n){return t=fn(t),function(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,pn()?Reflect.construct(t,n||[],fn(e).constructor):t.apply(e,n))}function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pn=function(){return!!e})()}function fn(e){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fn(e)}function dn(e,t){return dn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dn(e,t)}function mn(e,t,n){return(t=gn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gn(e){var t=function(e,t){if("object"!=cn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==cn(t)?t:t+""}var bn=(0,ln.Z)("placeholder")(ut.NI),yn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return mn(e=sn(this,t,[].concat(r)),"renderDate",(function(t){if(!t)return"";var n=a.ZP.getConfigProp("forceDateFormat"),r=a.ZP.getConfigProp("forceTimeFormat"),o=n?an()(t).format(n):e.context.intl?e.context.intl.formatDate(t):"",i=r?an()(t).format(r):e.context.intl?e.context.intl.formatTime(t):"";return"".concat(o," ").concat(i)||""})),mn(e,"changeName",(function(t){e.props.onChange("metadata.name",e.props.nameFieldFilter(t.target.value)||t.target.value)})),mn(e,"changeDescription",(function(t){e.props.onChange("metadata.description",t.target.value)})),mn(e,"changeTitle",(function(t){e.props.onChange("attributes.title",t.target.value)})),mn(e,"changeAdvertised",(function(t){e.props.onChange("metadata.advertised",!t.target.checked)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e,t,n=f()(this.props.resource,"attributes.title","");return at().createElement("form",{ref:"metadataForm",onSubmit:this.handleSubmit},at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.nameFieldText),at().createElement(bn,{key:"mapName",type:"text",onChange:this.changeName,disabled:this.props.resource.saving,placeholder:this.props.namePlaceholderText,defaultValue:this.props.resource?this.props.resource.name:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.name||""})),!!n&&at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.titleFieldText),at().createElement(bn,{key:"mapTitle",type:"text",onChange:this.changeTitle,disabled:this.props.resource.saving,placeholder:this.props.titlePlaceholderText,defaultValue:n,value:n})),at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.descriptionFieldText),at().createElement(bn,{key:"mapDescription",type:"text",onChange:this.changeDescription,disabled:this.props.resource.saving,placeholder:this.props.descriptionPlaceholderText,defaultValue:this.props.resource?this.props.resource.description:"",value:this.props.resource&&this.props.resource.metadata&&this.props.resource.metadata.description||""})),this.props.resource&&this.props.resource.creator&&at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.creatorFieldText),at().createElement(ut.J$,null,this.props.resource.creator)),this.props.resource&&this.props.resource.createdAt&&at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.createdAtFieldText),at().createElement(ut.J$,null,this.props.resource&&this.renderDate(this.props.resource.createdAt)||"")),this.props.resource&&this.props.resource.editor&&at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.editorFieldText),at().createElement(ut.J$,null,this.props.resource.editor)),this.props.resource&&this.props.resource.createdAt&&at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.modifiedAtFieldText),at().createElement(ut.J$,null,this.props.resource&&this.renderDate(this.props.resource.modifiedAt||this.props.resource.createdAt)||"")),at().createElement(ut.cw,null,at().createElement(ut.J$,null,this.props.unadvertisedText),at().createElement(ut.XZ,{checked:!(null!==(e=this.props.resource)&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&t.advertised),onChange:this.changeAdvertised,"aria-label":"advertisedResource"})))}}])&&un(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);mn(yn,"propTypes",{resource:ct().object,onChange:ct().func,nameFieldText:ct().node,titleFieldText:ct().node,descriptionFieldText:ct().node,nameFieldFilter:ct().func,namePlaceholderText:ct().string,descriptionPlaceholderText:ct().string,titlePlaceholderText:ct().string,createdAtFieldText:ct().string,modifiedAtFieldText:ct().string,unadvertisedText:ct().string,creatorFieldText:ct().string,editorFieldText:ct().string}),mn(yn,"contextTypes",{intl:ct().object}),mn(yn,"defaultProps",{onChange:function(){},resource:{},nameFieldText:"Name",descriptionFieldText:"Description",nameFieldFilter:function(){},namePlaceholderText:"Map Name",descriptionPlaceholderText:"Map Description",unadvertisedText:"Unadvertised",creatorFieldText:"Creator",editorFieldText:"Editor"});const vn=yn;var hn=n(314068);function En(e){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(e)}function On(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xn(r.key),r)}}function Sn(e,t,n){return t=Tn(t),function(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Pn()?Reflect.construct(t,n||[],Tn(e).constructor):t.apply(e,n))}function Pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pn=function(){return!!e})()}function Tn(e){return Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tn(e)}function wn(e,t){return wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wn(e,t)}function Cn(e,t,n){return(t=xn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xn(e){var t=function(e,t){if("object"!=En(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==En(t)?t:t+""}var jn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Cn(e=Sn(this,t,[].concat(r)),"state",{}),Cn(e,"getThumbnailUrl",(function(){return e.props.thumbnail&&"NODATA"!==e.props.thumbnail?decodeURIComponent(e.props.thumbnail):null})),Cn(e,"getDataUri",(function(e,t){var n=e;if(n&&n.length>0){var r=n[0],o=new FileReader;return o.onload=function(e){return t(e.target.result)},o.readAsDataURL(r)}return t(null)})),Cn(e,"getThumbnailDataUri",(function(t){e.getDataUri(e.files,t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return at().createElement(hn.Z,{thumbnail:this.getThumbnailUrl(),className:null,dropZoneProps:{className:"dropzone alert alert-info",rejectClassName:"alert-danger"},loading:this.props.loading,message:at().createElement(at().Fragment,null,this.props.message,at().createElement("br",null),this.props.suggestion),maxFileSize:this.props.maxFileSize,style:{pointerEvents:this.props.resource.saving?"none":"auto"},label:at().createElement("label",{className:"control-label"},at().createElement(pt.Z,{msgId:"map.thumbnail"})),onUpdate:function(t,n){var r;e.props.onError([],e.props.resource.id),e.files=n,e.props.onUpdate(t,null==n||null===(r=n[0])||void 0===r?void 0:r.preview)},onError:function(t,n){e.props.onError(t,e.props.resource.id),e.files=n},onRemove:function(){e.files=null,e.props.onUpdate(null,null),e.props.onRemove(),e.props.onError([],e.props.resource.id)}})}}])&&On(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);Cn(jn,"propTypes",{glyphiconRemove:ct().string,style:ct().object,loading:ct().bool,resource:ct().object,thumbnail:ct().string,onError:ct().func,onUpdate:ct().func,onRemove:ct().func,maxFileSize:ct().number,message:ct().oneOfType([ct().string,ct().element]),suggestion:ct().oneOfType([ct().string,ct().element])}),Cn(jn,"contextTypes",{messages:ct().object}),Cn(jn,"defaultProps",{loading:!1,glyphiconRemove:"trash",resource:{},onError:function(){},onUpdate:function(){},onSaveAll:function(){},onRemove:function(){},message:at().createElement(pt.Z,{msgId:"map.message"}),suggestion:at().createElement(pt.Z,{msgId:"map.suggestion"}),maxFileSize:5e5});const Dn=jn;function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,An(r.key),r)}}function An(e){var t=function(e,t){if("object"!=Nn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nn(t)?t:t+""}function In(e,t,n){return t=kn(t),function(e,t){if(t&&("object"===Nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fn()?Reflect.construct(t,n||[],kn(e).constructor):t.apply(e,n))}function Fn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fn=function(){return!!e})()}function kn(e){return kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kn(e)}function _n(e,t){return _n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_n(e,t)}const Un=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),In(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_n(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.resource,n=e.linkedResources,r=void 0===n?{}:n,o=e.enableFileDrop,i=void 0!==o&&o,a=e.acceptedDropFileName,l=e.fileDropLabel,c=e.fileDropStatus,u=e.fileDropErrorMessage,s=e.fileDropClearMessage,p=e.onFileDrop,f=void 0===p?function(){}:p,d=e.onFileDropClear,m=void 0===d?function(){}:d,g=e.onError,b=void 0===g?function(){}:g,y=e.onUpdate,v=void 0===y?function(){}:y,h=e.nameFieldFilter,E=void 0===h?function(){}:h,O=e.onUpdateLinkedResource,S=void 0===O?function(){}:O;return at().createElement(ut.X2,null,i&&at().createElement(ut.JX,{xs:12},at().createElement(rn,{acceptedFileName:a,label:l,status:c,errorMessage:u,clearMessage:s,onDrop:f,onClear:m,onError:b})),at().createElement(ut.JX,{xs:12},at().createElement(Dn,{resource:t,thumbnail:r&&r.thumbnail&&r.thumbnail.data||t&&t.attributes&&t.attributes.thumbnail,onError:b,onRemove:function(){return S("thumbnail","NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(en()())})},onUpdate:function(e){return S("thumbnail",e||"NODATA","THUMBNAIL",{tail:"/raw?decode=datauri&v=".concat(en()())})}})),at().createElement(ut.JX,{xs:12},at().createElement(vn,{role:"body",ref:"mapMetadataForm",onChange:v,resource:t,nameFieldText:at().createElement(pt.Z,{msgId:"saveDialog.name"}),titleFieldText:at().createElement(pt.Z,{msgId:"saveDialog.titleInput"}),descriptionFieldText:at().createElement(pt.Z,{msgId:"saveDialog.description"}),nameFieldFilter:E,createdAtFieldText:at().createElement(pt.Z,{msgId:"saveDialog.createdAt"}),modifiedAtFieldText:at().createElement(pt.Z,{msgId:"saveDialog.modifiedAt"}),namePlaceholderText:"saveDialog.namePlaceholder",descriptionPlaceholderText:"saveDialog.descriptionPlaceholder",titlePlaceholderText:"saveDialog.titlePlaceholder",unadvertisedText:at().createElement(pt.Z,{msgId:"saveDialog.unadvertised"}),creatorFieldText:at().createElement(pt.Z,{msgId:"saveDialog.creator"}),editorFieldText:at().createElement(pt.Z,{msgId:"saveDialog.editor"})})))}}])&&Rn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);var Mn=n(727418),Zn=n.n(Mn),Gn=n(743129),Ln=n(233044);function Bn(e){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bn(e)}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yn(r.key),r)}}function zn(e,t,n){return t=Wn(t),function(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$n()?Reflect.construct(t,n||[],Wn(e).constructor):t.apply(e,n))}function $n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($n=function(){return!!e})()}function Wn(e){return Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wn(e)}function Hn(e,t){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Hn(e,t)}function Jn(e,t,n){return(t=Yn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yn(e){var t=function(e,t){if("object"!=Bn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bn(t)?t:t+""}var Kn=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Jn(e=zn(this,t,[].concat(r)),"onGroupChange",(function(t){e.props.onNewGroupChoose(E()(e.props.availableGroups,(function(e){return e.id===t.value})))})),Jn(e,"onAddPermission",(function(){e.isPermissionPresent(e.props.newGroup.groupName)?e.props.onUpdateRules(e.props.rules.map((function(t){return t.group&&t.group.groupName===e.props.newGroup.groupName?"canWrite"===e.props.newPermission?Zn()({},t,{canRead:!0,canWrite:!0}):Zn()({},t,{canRead:!0,canWrite:!1}):t}),e).filter((function(e){return e.canRead||e.canWrite}))):e.props.onUpdateRules(e.props.rules.concat([{canRead:!0,canWrite:"canWrite"===e.props.newPermission,group:e.props.newGroup}]))})),Jn(e,"onChangePermission",(function(t,n){e.props.onUpdateRules(e.props.rules.filter((function(e){return!("delete"===n&&e.group&&e.group.groupName===t)})).map((function(e){return e.group&&e.group.groupName===t?"canWrite"===n?Zn()({},e,{canRead:!0,canWrite:!0}):"canRead"===n?Zn()({},e,{canRead:!0,canWrite:!1}):Zn()({},e,{canRead:!1,canWrite:!1}):e})).filter((function(e){return e.canRead||e.canWrite})))})),Jn(e,"getCurrentPermission",(function(){return e.props.newPermission||v()(e.props.availablePermissions)})),Jn(e,"getSelectableGroups",(function(){return e.props.availableGroups&&e.props.availableGroups.filter((function(t){return!e.isPermissionPresent(t.groupName)})).filter((function(t){return"canWrite"!==e.getCurrentPermission()||t.groupName!==Ln.default.USER_GROUP_ALL})).map((function(e){return{label:e.groupName,value:e.id}}))})),Jn(e,"getPermissionLabel",(function(t){switch(t){case"canRead":return(0,Et.S$)(e.context.messages,"map.permissions.canView");case"canWrite":return(0,Et.S$)(e.context.messages,"map.permissions.canWrite");default:return t}})),Jn(e,"getAvailablePermissions",(function(t){return e.props.availablePermissions.map((function(t){return{value:t,label:e.getPermissionLabel(t)}})).filter((function(n){var r;return(null!=t?t:null===(r=e.props.newGroup)||void 0===r?void 0:r.groupName)!==Ln.default.USER_GROUP_ALL||"canWrite"!==n.value}))})),Jn(e,"renderPermissionRows",(function(){var t=e.props.rules.filter((function(e){return e.group}));return 0===t.length?at().createElement("tr",null,at().createElement("td",{colSpan:"3"},at().createElement(pt.Z,{msgId:"map.permissions.noRules"}))):t.map((function(t,n){var r=t.canWrite,o=t.group;return at().createElement("tr",{key:n,className:n/2==0?"even":"odd"},at().createElement("td",null,o.groupName),at().createElement("td",{style:{width:"150px"}},at().createElement(Gn.ZP,{ref:"permChoice"+n,onChange:function(t){e.onChangePermission.call(e,o.groupName,t.value)},clearable:!1,options:e.getAvailablePermissions(o.groupName),value:r?"canWrite":"canRead"})),at().createElement("td",{style:{width:"50px"}},at().createElement(st.Z,{key:"deleteButton"+n,ref:"deleteButton",bsStyle:"danger",disabled:e.props.disabled,onClick:e.onChangePermission.bind(e,o.groupName,"delete")},at().createElement(ut.gG,{glyph:"1-close"}))))}))})),Jn(e,"isPermissionPresent",(function(t){return e.props.rules&&q()(e.props.rules,(function(e){return e.group&&e.group.groupName===t}))>=0})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return at().createElement("div",null,at().createElement(ut.iA,{className:"permissions-table",stripped:!0,condensed:!0,hover:!0},at().createElement("thead",null,at().createElement("tr",null,at().createElement("th",{colSpan:"3"},at().createElement(pt.Z,{msgId:"map.permissions.title"})))),at().createElement("tbody",null,this.props.loading?at().createElement("tr",null,at().createElement("td",{colSpan:"3"},at().createElement("div",null,at().createElement(ht(),{noFadeIn:!0,overrideSpinnerClassName:"spinner",spinnerName:"circle"})))):this.renderPermissionRows(),at().createElement("tr",null,at().createElement("th",{colSpan:"3"},at().createElement(pt.Z,{msgId:"map.permissions.addRule"}))),at().createElement("tr",{key:"addRowKey",className:"insert-row"},at().createElement("td",null,at().createElement(Gn.ZP,{noResultsText:(0,Et.S$)(this.context.messages,"map.permissions.noResult"),ref:"newGroup",isLoading:!this.getSelectableGroups(),clearable:!1,placeholder:(0,Et.S$)(this.context.messages,"map.permissions.selectGroup"),options:this.getSelectableGroups(),value:this.props.newGroup&&this.props.newGroup.id,onChange:this.onGroupChange})),at().createElement("td",{style:{width:"150px"}},at().createElement(Gn.ZP,{ref:"newChoice",clearable:!1,options:this.getAvailablePermissions(),value:this.getCurrentPermission(),onChange:function(t){e.props.onNewPermissionChoose(t&&t.value)}})),at().createElement("td",{style:{width:"50px"}},at().createElement(st.Z,{ref:"buttonAdd",disabled:this.props.disabled||!this.props.newGroup||this.isPermissionPresent(this.props.newGroup&&this.props.newGroup.groupName),bsSize:"small",bsStyle:"success",onClick:this.onAddPermission},at().createElement(ut.gG,{style:{fontSize:"22px"},glyph:"plus"})))))))}},{key:"disablePermission",value:function(e,t){return e||!t}}])&&Vn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);Jn(Kn,"propTypes",{id:ct().string,user:ct().object,loading:ct().bool,onUpdateRules:ct().func,buttonSize:ct().string,disabled:ct().bool,style:ct().object,fluid:ct().bool,onErrorCurrentMap:ct().func,onUpdateCurrentMap:ct().func,onNewGroupChoose:ct().func,onNewPermissionChoose:ct().func,availablePermissions:ct().arrayOf(ct().string),availableGroups:ct().arrayOf(ct().object),updatePermissions:ct().func,rules:ct().arrayOf(ct().object),newGroup:ct().object,newPermission:ct().string}),Jn(Kn,"contextTypes",{messages:ct().object}),Jn(Kn,"defaultProps",{disabled:!1,id:"PermissionEditor",onUpdateRules:function(){},onNewGroupChoose:function(){},onNewPermissionChoose:function(){},user:{name:"Guest"},style:{},buttonSize:"small",onErrorCurrentMap:function(){},onUpdateCurrentMap:function(){},availablePermissions:["canRead","canWrite"],availableGroups:[],updatePermissions:function(){},rules:[]});const Xn=Kn;function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lr(r.key),r)}}function nr(e,t,n){return t=or(t),function(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,rr()?Reflect.construct(t,n||[],or(e).constructor):t.apply(e,n))}function rr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(rr=function(){return!!e})()}function or(e){return or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},or(e)}function ir(e,t){return ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ir(e,t)}function ar(e,t,n){return(t=lr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qn(t)?t:t+""}var cr=(0,n(218291).Z)()((0,it.lazy)((function(){return Promise.all([n.e(82515),n.e(92579),n.e(60808),n.e(12097)]).then(n.bind(n,322091))}))),ur=Jt(Xn),sr=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ar(e=nr(this,t,[].concat(r)),"onCloseMapPropertiesModal",(function(){e.props.onClose()})),ar(e,"onSave",(function(){e.setState({loading:!0}),e.props.onSave(er(er({},e.props.resource),{},{permission:e.props.rules}))})),ar(e,"isValidForm",(function(){return f()(e.props.resource,"metadata.name")&&(!e.props.enableFileDrop||"accepted"===e.props.fileDropStatus)})),ar(e,"isLoading",(function(){var t,n;return e.props.loading||(null===(t=e.props.resource)||void 0===t?void 0:t.loading)||(null===(n=e.state)||void 0===n?void 0:n.loading)})),ar(e,"isSaveDisabled",(function(){return!e.isValidForm()||e.isLoading()||!e.props.canSave})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ir(e,t)}(t,e),n=t,r=[{key:"componentDidUpdate",value:function(e){var t;this.props.errors&&this.props.errors.length>0&&!Ht()(this.props.errors,e.errors)&&null!==(t=this.state)&&void 0!==t&&t.loading&&this.setState({loading:!1})}},{key:"render",value:function(){var e,t=this,n=!this.props.disablePermission&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;var n=e.role,r=e.name;if("ADMIN"===n)return!0;var o=t&&t.attributes&&t.attributes.owner;return!o||o===r}(this.props.user,this.props.resource),r=this.props.detailsComponent;return at().createElement(mt.Z,{key:"saveDialog"},at().createElement(Vt.Z,{loading:this.props.loading||(null===(e=this.state)||void 0===e?void 0:e.loading),title:at().createElement(pt.Z,{msgId:this.props.title}),show:this.props.show,clickOutEnabled:this.props.clickOutEnabled,bodyClassName:"ms-flex modal-properties-container",fitContent:this.props.disablePermission,dialogClassName:this.props.dialogClassName,buttons:[{text:at().createElement(pt.Z,{msgId:"close"}),onClick:this.onCloseMapPropertiesModal,disabled:this.isLoading()},{text:at().createElement("span",null,at().createElement(pt.Z,{msgId:this.props.saveButtonLabel})),onClick:function(){t.onSave()},disabled:this.isSaveDisabled()}],showClose:!this.isLoading(),onClose:this.onCloseMapPropertiesModal},at().createElement(ut.rj,{fluid:!0},at().createElement("div",{className:"ms-map-properties"},at().createElement(qt,{errors:this.props.errors}),at().createElement(Un,{resource:this.props.resource,onUpdateLinkedResource:this.props.onUpdateLinkedResource,linkedResources:this.props.linkedResources,enableFileDrop:this.props.enableFileDrop,acceptedDropFileName:this.props.acceptedDropFileName,fileDropLabel:this.props.fileDropLabel,fileDropStatus:this.props.fileDropStatus,fileDropErrorMessage:this.props.fileDropErrorMessage,fileDropClearMessage:this.props.fileDropClearMessage,onMetadataChanged:this.props.metadataChanged,onFileDrop:this.props.onFileDrop,onFileDropClear:this.props.onFileDropClear,onError:this.props.onError,nameFieldFilter:this.props.nameFieldFilter,onUpdate:this.props.onUpdate}),this.props.enableDetails&&at().createElement(r,{editor:this.props.detailsEditor,editorProps:this.props.detailsEditorProps,loading:this.props.loading,resource:this.props.resource,linkedResources:this.props.linkedResources,onUpdateResource:this.props.onUpdate,onUpdateLinkedResource:this.props.onUpdateLinkedResource}),!!n&&at().createElement(ur,{rules:this.props.rules,onUpdateRules:this.props.onUpdateRules,availableGroups:this.props.availableGroups})))))}}],r&&tr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);ar(sr,"propTypes",{show:ct().bool,loading:ct().bool,title:ct().string,clickOutEnabled:ct().bool,canSave:ct().bool,errors:ct().array,rules:ct().array,enableFileDrop:ct().bool,saveButtonLabel:ct().string,onSave:ct().func,acceptedDropFileName:ct().string,fileDropLabel:ct().string,fileDropStatus:ct().string,fileDropErrorMessage:ct().element,fileDropClearMessage:ct().element,onUpdateRules:ct().func,nameFieldFilter:ct().func,resource:ct().object,linkedResources:ct().object,style:ct().object,modalSize:ct().string,enableDetails:ct().bool,detailsComponent:ct().func,detailsEditor:ct().string,detailsEditorProps:ct().object,onError:ct().func,onUpdate:ct().func,onUpdateLinkedResource:ct().func,onClose:ct().func,onFileDrop:ct().func,onFileDropClear:ct().func,metadataChanged:ct().func,disablePermission:ct().bool,availablePermissions:ct().arrayOf(ct().string),availableGroups:ct().arrayOf(ct().object),user:ct().object,dialogClassName:ct().string}),ar(sr,"contextTypes",{messages:ct().object}),ar(sr,"defaultProps",{id:"MetadataModal",title:"saveDialog.title",saveButtonLabel:"save",modalSize:"",resource:{},linkedResources:{},onUpdateRules:function(){},nameFieldFilter:function(){},metadataChanged:function(){},metadata:{name:"",description:""},options:{},style:{},onClose:function(){},onError:function(){},onUpdate:function(){},onUpdateLinkedResource:function(){},onDeleteLinkedResource:function(){},onSave:function(){},disablePermission:!1,availablePermissions:["canRead","canWrite"],availableGroups:[],canSave:!0,user:{},dialogClassName:"",detailsComponent:n(507299).Z(cr)});const pr=sr;var fr=n(352353),dr=n.n(fr),mr=n(962909);function gr(e){return gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gr(e)}function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=gr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=gr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==gr(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const vr=(0,St.compose)((0,St.withStateHandlers)((function(e){var t,n=e.resource,r=void 0===n?{}:n,o=e.linkedResources,i=void 0===o?{}:o,a=e.user,l=void 0===a?{}:a,c=r.detailsSettings||(null===(t=r.attributes)||void 0===t?void 0:t.detailsSettings),u={};if(ne()(c))try{u=JSON.parse(c)}catch(e){u={}}else u=c||{};return{originalData:r,metadata:{name:r.name,description:r.description},attributes:yr(yr({},r.attributes),{},{context:r.context||r.attributes&&r.attributes.context,detailsSettings:u}),resource:{id:r.id,attributes:yr(yr({},r.attributes),{},{context:r.context||r.attributes&&r.attributes.context,detailsSettings:u}),metadata:{name:r.name,description:r.description,advertised:!!dr()(r.advertised)||r.advertised},createdAt:r.creation,modifiedAt:r.lastUpdate,creator:"ADMIN"===(null==l?void 0:l.role)?r.creator:"",editor:"ADMIN"===(null==l?void 0:l.role)?r.editor:""},linkedResources:i}}),{onUpdate:function(e){var t=e.resource;return function(e,n){return{hasChanges:!0,resource:(0,P.t8)(e,n,t)}}},onUpdateLinkedResource:function(e){var t=e.linkedResources,n=void 0===t?{}:t;return function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{linkedResources:(0,P.t8)(e,yr({category:r,data:t},o),n)}}}}),(0,St.withState)("confirmClose","onCloseConfirm",!1),(0,St.branch)((function(e){return e.confirmClose}),(0,St.renderComponent)((function(e){var t=e.onCloseConfirm,n=e.onClose;return at().createElement(mr.Z,{show:!0,confirmText:at().createElement(pt.Z,{msgId:"saveDialog.close"}),cancelText:at().createElement(pt.Z,{msgId:"saveDialog.cancel"}),onConfirm:function(){return n()},onClose:function(){return t(!1)}},at().createElement(pt.Z,{msgId:"map.details.fieldsChanged"}),at().createElement("br",null),at().createElement(pt.Z,{msgId:"map.details.sureToClose"}))}))),(0,St.withHandlers)({onClose:function(e){var t=e.hasChanges,n=e.onClose,r=void 0===n?function(){}:n,o=e.onCloseConfirm,i=void 0===o?function(){}:o;return function(){return t?i(!0):r()}}}),(0,St.withHandlers)({onSave:function(e){var t=e.onSave,n=void 0===t?function(){}:t,r=e.category,o=void 0===r?"DASHBOARD":r,i=e.data,a=e.additionalAttributes,l=void 0===a?{}:a,c=e.linkedResources;return function(e){return n(yr(yr({category:o,linkedResources:c,data:i},e),{},{attributes:yr(yr({},e.attributes),l)}))}}}));function hr(e){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hr(e)}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=hr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==hr(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sr=(0,St.withStateHandlers)((function(){return{}}),{onUpdateRules:function(){return function(e){return{rules:e}}}});function Pr(e){return function(e){if(Array.isArray(e))return Tr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Tr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const wr=(0,St.compose)((0,St.withStateHandlers)((function(){return{}}),{onError:function(){return function(e){return{formErrors:e}}}}),(0,St.withProps)((function(e){var t=e.errors,n=void 0===t?[]:t,r=e.formErrors,o=void 0===r?[]:r;return{errors:[].concat(Pr(n),Pr(o))}})));var Cr=n(552259);function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=xr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==xr(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Nr=(0,St.mapPropsStream)((function(e){return e.combineLatest(e.filter((function(e){var t=e.resource;return t&&t.id})).distinctUntilChanged((function(e,t){var n=e.resource,r=t.resource;return n.id===r.id})).switchMap((function(e){var t,n,r;return(n=null===(t=e.resource.attributes)||void 0===t?void 0:t.details,r=Cr.ZP.getIdFromUri(n),G().Observable.defer((function(){return r?ae.Z.getData(r):Promise.resolve()}))).map((function(t){var n=Dr(Dr({},e.linkedResources||{}),{},{details:{category:"DETAILS",data:t||"NODATA"}});return e.onResourceLoad&&e.onResourceLoad(e.resource,n),{loading:!1,resource:e.resource,linkedResources:n}})).catch((function(e){return G().Observable.of({loading:!1,errors:[e]})})).startWith({loading:!0,resource:!1})})).startWith({}),(function(e,t){return Dr(Dr({},e),t)}))}));var Rr=(0,St.compose)(vr,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae.Z;return(0,St.branch)((function(e){return!e.disablePermission}),(0,St.compose)(function(e){return(0,St.mapPropsStream)((function(t){return t.combineLatest(t.take(1).switchMap((function(t){var n=t.user;return G().Observable.defer((function(){return e.getAvailableGroups(n)})).map((function(e){return{availableGroups:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return G().Observable.of({})})),(function(e,t){return Or(Or({},e),t)}))}))}(e),function(e){return(0,St.mapPropsStream)((function(t){return t.combineLatest(t.distinctUntilKeyChanged("resource").pluck("resource").filter((function(e){return e.id})).pluck("id").distinctUntilChanged().switchMap((function(t){return G().Observable.defer((function(){return e.getResourcePermissions(t)})).map((function(e){return{rules:e}})).startWith({loading:!0})})).startWith({}).catch((function(){return G().Observable.of({})})),(function(e,t){return Or(Or({},e),t)}))}))}(e),Sr))}(),wr);function Ar(e){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ar(e)}function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Ar(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ur=(0,St.compose)((0,St.branch)((function(e){return!e.show}),St.renderNothing),(0,St.branch)((function(e){return!e.isNewResource}),(0,St.compose)(Nr,(0,St.branch)((function(e){var t=e.resource;return t&&t.id}),Rr)),Rr))(pr),Mr=function(e,t,n){return{id:n.id,title:n.name||n.id.toString(),description:n.description,tools:[{glyph:"pencil",tooltipId:"contextCreator.configureTemplates.tooltips.editTemplate",onClick:function(){return e(n.id)}},{glyph:"trash",tooltipId:"contextCreator.configureTemplates.tooltips.deleteTemplate",onClick:function(){return t(n)}}],preview:at().createElement("div",{className:"configure-map-templates-preview"},n.thumbnail&&"NODATA"!==n.thumbnail?at().createElement("img",{src:n.thumbnail}):at().createElement(ut.gG,{glyph:"1-map"})),infoExtra:n.format&&at().createElement("div",{className:"configure-map-templates-formaticon"},at().createElement(ut.gG,{glyph:$t.Th[n.format]}),at().createElement("span",null,$t.Nk[n.format]))}},Zr=function(e){return e&&e.map((function(e){return e.id}))},Gr=function(e,t,n,r,o,i){ne()(r)&&ne()(i)&&(r.indexOf("application/xml")>-1||r.indexOf("text/xml")>-1||0===i.indexOf("<?xml")?(e(o,i,"wmc"),t("accepted"),n([])):function(){try{var r=B().parse(i);e(o,r,"json"),t("accepted"),n([])}catch(e){t("clear"),n([{statusText:"contextCreator.configureTemplates.uploadDialog.jsonParsingError",error:e.message}])}}())},Lr=function(e,t,n,r){if(r&&r.length>0){var o=new FileReader;o.onload=function(o){return Gr(e,t,n,r[0].type,r[0].name,o.target.result)},o.onerror=function(){o.abort(),t("clear"),n(["contextCreator.configureTemplates.uploadDialog.fileReadError"])},o.readAsText(r[0])}};const Br=function(e){var t=e.user,n=e.loading,r=e.loadFlags,o=e.mapTemplates,i=void 0===o?[]:o,a=e.availableTemplatesFilterText,l=void 0===a?"":a,c=e.enabledTemplatesFilterText,u=void 0===c?"":c,s=e.availableTemplatesFilterPlaceholder,p=void 0===s?"contextCreator.configureTemplates.templatesFilterPlaceholder":s,d=e.enabledTemplatesFilterPlaceholder,m=void 0===d?"contextCreator.configureTemplates.templatesFilterPlaceholder":d,g=e.showUploadDialog,y=void 0!==g&&g,v=e.parsedTemplate,h=void 0===v?{}:v,E=e.editedTemplate,O=e.fileDropStatus,S=e.changeTemplatesKey,P=void 0===S?function(){}:S,T=e.setSelectedTemplates,w=void 0===T?function(){}:T,C=e.setParsedTemplate,x=void 0===C?function(){}:C,j=e.setFileDropStatus,D=void 0===j?function(){}:j,N=e.onSave,R=void 0===N?function(){}:N,A=e.onDelete,I=void 0===A?function(){}:A,F=e.onEditTemplate,k=void 0===F?function(){}:F,_=e.onFilterAvailableTemplates,U=void 0===_?function(){}:_,M=e.onFilterEnabledTemplates,Z=void 0===M?function(){}:M,G=e.onShowUploadDialog,L=void 0===G?function(){}:G,B=kr(at().useState(!1),2),V=B[0],z=B[1],$=kr(at().useState(),2),W=$[0],H=$[1],J=Mr.bind(null,k,(function(e){H(e),z(!0)}));return at().createElement(at().Fragment,null,at().createElement(Bt,{className:"configure-map-templates-transfer",leftColumn:{items:i.filter((function(e){return!e.enabled})).map(J),title:"contextCreator.configureTemplates.availableTemplates",tools:[{id:"upload-tool",glyph:"upload",tooltipId:"contextCreator.configureTemplates.tooltips.uploadTool",onClick:function(){return k()}}],filterText:l,filterPlaceholder:p,emptyStateProps:{glyph:"1-map",title:"contextCreator.configureTemplates.availableTemplatesEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configureTemplates.searchResultsEmpty"},onFilter:U},rightColumn:{items:i.filter((function(e){return e.enabled})).map(J),title:"contextCreator.configureTemplates.enabledTemplates",filterText:u,filterPlaceholder:m,emptyStateProps:{glyph:"1-map",title:"contextCreator.configureTemplates.enabledTemplatesEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configureTemplates.searchResultsEmpty"},onFilter:Z},allowCtrlMultiSelect:!0,selectedItems:i.filter((function(e){return e.selected})).map(J),selectedSide:i.reduce((function(e,t){return t.selected&&t.enabled||e}),!1)?"right":"left",sortStrategy:function(e){return e.slice().sort((function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}))},filter:function(e,t){return t.filter((function(t){return t.title.toLowerCase().indexOf(e.toLowerCase())>-1}))},onSelect:function(e){return w(Zr(e))},onTransfer:function(e,t){return P(Zr(e),"enabled","right"===t)}}),at().createElement(Ur,{user:t,loading:n&&(r.templateSaving||r.templateLoading),resource:E,isNewResource:!E,clickOutEnabled:!1,category:"TEMPLATE",show:y,title:E?void 0:"contextCreator.configureTemplates.uploadDialog.title",data:h.data,additionalAttributes:{format:h.format},enableFileDrop:!0,acceptedDropFileName:h.fileName,fileDropStatus:O,fileDropLabel:"contextCreator.configureTemplates.fileDrop.label",fileDropClearMessage:at().createElement(pt.Z,{msgId:"contextCreator.configureTemplates.fileDrop.clear"}),dialogClassName:" modal-higher",onFileDrop:Lr.bind(null,x,D),onFileDropClear:function(){x(),D()},onSave:function(e){var t=e.attributes.format;return t||(ne()(e.data)?Gr((function(e,n,r){t=r}),(function(){}),(function(){}),"application/text",h.fileName,e.data):b()(e.data)&&(t="json")),R(Fr(Fr({},e),{},{metadata:Fr(Fr({},e.metadata),{},{attributes:Fr(Fr({},e.attributes.thumbnail?{thumbnail:encodeURIComponent(e.attributes.thumbnail)}:{}),t?{format:t}:{})})}))},onClose:function(){return L(!1)}}),at().createElement(dt.Z,{draggable:!1,modal:!0,show:V,onClose:function(){H(),z(!1)},onConfirm:function(){I(W),H(),z(!1)},confirmButtonBSStyle:"default",confirmButtonContent:at().createElement(pt.Z,{msgId:"confirm"}),closeText:at().createElement(pt.Z,{msgId:"cancel"}),closeGlyph:"1-close"},at().createElement(pt.Z,{msgId:"contextCreator.configureTemplates.deleteConfirm",msgParams:{templateName:f()(W,"name")}})))};var Vr=["tutorialMode","tutorialStep"];function zr(){return zr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zr.apply(this,arguments)}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wr,Hr=[{name:"TestPlugin1",title:"contextCreator.configurePlugins.tutorialPlugins.enabledTitle",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!0,active:!1},{name:"TestPlugin2",title:"contextCreator.configurePlugins.tutorialPlugins.availableTitle",description:"contextCreator.configurePlugins.tutorialPlugins.availableDescription",isExtension:!1,enabled:!1},{name:"TestPlugin3",title:"contextCreator.configurePlugins.tutorialPlugins.availableTitle",description:"contextCreator.configurePlugins.tutorialPlugins.availableDescription",isExtension:!0,enabled:!1},{name:"MapTemplates",title:"Map Templates",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!1}],Jr={"configureplugins-initial":{disablePluginSort:!0,allPlugins:Hr},"configureplugins-cfgeditor":{disablePluginSort:!0,allPlugins:[{name:"TestPlugin1",title:"contextCreator.configurePlugins.tutorialPlugins.enabledTitle",description:"contextCreator.configurePlugins.tutorialPlugins.enabledDescription",isExtension:!1,enabled:!0,isUserPlugin:!0,active:!1}].concat((Wr=Hr.slice(1),function(e){if(Array.isArray(e))return $r(e)}(Wr)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(Wr)||function(e,t){if(e){if("string"==typeof e)return $r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(e,t):void 0}}(Wr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),editedPlugin:"TestPlugin1",editedCfg:'{\n    "cfg": {\n        "exampleProp": 8\n    },\n    "override": {}\n}'}},Yr=n(966085),Kr=n.n(Yr);function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=Xr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Xr(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eo={WRONG_FORMAT:"WRONG_FORMAT",MISSING_INDEX:"MISSING_INDEX",MALFORMED_INDEX:"MALFORMED_INDEX",MISSING_PLUGIN:"MISSING_PLUGIN",MISSING_BUNDLE:"MISSING_BUNDLE",TOO_MANY_PLUGINS:"TOO_MANY_BUNDLES",ALREADY_INSTALLED:"ALREADY_INSTALLED"},to=n(843614);function no(e){return no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},no(e)}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){var r;return r=function(e,t){if("object"!=no(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=no(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==no(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ao=function(e,t,n,r,o,i,a){return[{visible:"MapTemplates"===e.name,glyph:"1-map",tooltipId:"contextCreator.configurePlugins.tooltips.mapTemplatesConfig",onClick:function(){return i("mapTemplatesConfig",!0)}},{visible:!t&&!e.denyUserSelection,glyph:"1-user-mod",tooltipId:e.isUserPlugin?"contextCreator.configurePlugins.tooltips.disableUserPlugin":"contextCreator.configurePlugins.tooltips.enableUserPlugin",bsStyle:e.isUserPlugin?"success":void 0,onClick:function(){return a([e.name],"isUserPlugin",!e.isUserPlugin)}},{visible:e.isUserPlugin&&!e.denyUserSelection,glyph:e.active?"check":"unchecked",tooltipId:e.active?"contextCreator.configurePlugins.tooltips.deactivatePlugin":"contextCreator.configurePlugins.tooltips.activatePlugin",onClick:function(){return a([e.name],"active",!e.active)}},{glyph:"wrench",tooltipId:"contextCreator.configurePlugins.tooltips.editConfiguration",active:e.name===n,onClick:function(){return o(e.name===n?void 0:e.name)}},{visible:!(!e.docUrl&&!r),glyph:"question-sign",tooltipId:"contextCreator.configurePlugins.tooltips.pluginDocumentation",Element:function(t){return at().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.docUrl||r&&r+"#plugins."+(e.docName||e.name)},at().createElement(zt.Z,t))}},{visible:e.isExtension,glyph:"trash",tooltipId:"contextCreator.configurePlugins.tooltips.removePlugin",onClick:function(){return i("confirmRemovePlugin",!0,e.name)}}]},lo=function(e,t){return[{visible:e.isExtension,glyph:"trash",tooltipId:"contextCreator.configurePlugins.tooltips.removePlugin",onClick:function(){return t("confirmRemovePlugin",!0,e.name)}}]},co=function e(t,n,r,o,i,a,l,c,u,s,p,f,d,m){var g=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0;return(arguments.length>14&&void 0!==arguments[14]?arguments[14]:[]).filter((function(e){return!e.hidden})).map((function(y){var v=m||b,h=y.forcedMandatory||y.mandatory;return{id:y.name,title:y.title||y.label||y.name,cardSize:"sm",description:y.description||"plugin name: "+y.name,showDescriptionTooltip:a,descriptionTooltipDelay:l,mandatory:h,className:m||!b||y.enabled?"":"plugin-card-disabled",tools:v?y.enabled?ao(y,h,t,i,c,f,d):lo(y,f):[],component:v&&y.enabled&&y.name===t?at().createElement("div",{className:"plugin-configuration-editor"},at().createElement(Pt.Z,{value:n,editorDidMount:function(e){return o(e)},onBeforeChange:function(e,t,n){return p(n)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),r&&at().createElement("div",{className:"plugin-configuration-errorarea"},at().createElement("div",{className:"plugin-configuration-errorarea-header"},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),at().createElement("div",{className:"plugin-configuration-errorarea-body"},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:r.message}},(function(e){return at().createElement("pre",{className:"plugin-configuration-errormsg"},e)}))))):null,preview:at().createElement(at().Fragment,null,!m&&b&&!h&&at().createElement(st.Z,{style:{left:"-4px",position:"relative"},key:"checkbox",className:"square-button-md no-border",onClick:function(e){e.stopPropagation(),h||(y.enabled?s:u)([y.name])}},at().createElement(ut.gG,{glyph:y.enabled?"check":"unchecked"})),y.glyph?at().createElement(ut.gG,{key:"icon",glyph:y.glyph}):at().createElement(ut.gG,{key:"icon",glyph:"plug"})),children:g&&e(t,n,r,o,i,a,l,c,u,s,p,f,d,!1,y.children,!0,y.enabled)||[]}}))},uo=function(e){return e&&e.map((function(e){return e.id}))},so=function(e){return e&&e.filter((function(e){return!e.mandatory}))};const po=(0,St.compose)((0,St.withState)("errorLineNumber","setErrorLineNumber"),(0,St.withState)("editor","setEditor"),(0,St.getContext)({messages:ct().object}),(0,St.lifecycle)({componentDidUpdate:function(){var e=this.props,t=e.cfgError,n=e.editor,r=e.errorLineNumber,o=e.setErrorLineNumber,i=f()(t,"lineNumber");n&&i!==r&&(r&&n.removeLineClass(r-1,"background","plugin-configuration-line-error"),o(i),i&&n.addLineClass(i-1,"background","plugin-configuration-line-error"))}}),("configureplugins-initial",function(e){return function(t){var n=t.tutorialMode,r=void 0!==n&&n,o=t.tutorialStep,i=void 0===o?"configureplugins-initial":o,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,Vr);return at().createElement(e,zr({},a,r?Jr[i]:{}))}}))((function(e){var t=e.user,n=e.loading,r=e.loadFlags,o=e.allPlugins,i=void 0===o?[]:o,a=e.editedPlugin,l=e.editedCfg,c=e.cfgError,u=e.parsedTemplate,s=e.editedTemplate,p=e.fileDropStatus,f=e.availablePluginsFilterText,d=void 0===f?"":f,m=e.enabledPluginsFilterText,g=void 0===m?"":m,b=e.availablePluginsFilterPlaceholder,y=void 0===b?"contextCreator.configurePlugins.pluginsFilterPlaceholder":b,v=e.enabledPluginsFilterPlaceholder,h=void 0===v?"contextCreator.configurePlugins.pluginsFilterPlaceholder":v,E=e.documentationBaseURL,O=e.showDescriptionTooltip,S=void 0===O||O,P=e.descriptionTooltipDelay,T=void 0===P?600:P,w=e.uploadEnabled,C=void 0!==w&&w,x=e.pluginsToUpload,j=void 0===x?[]:x,D=e.uploading,N=void 0===D?[]:D,R=e.uploadResult,A=e.showDialog,I=void 0===A?{}:A,F=e.mapTemplates,k=e.availableTemplatesFilterText,_=e.enabledTemplatesFilterText,U=e.availableTemplatesFilterPlaceholder,M=e.enabledTemplatesFilterPlaceholder,Z=e.disablePluginSort,G=void 0!==Z&&Z,L=e.onFilterAvailablePlugins,B=void 0===L?function(){}:L,V=e.onFilterEnabledPlugins,z=void 0===V?function(){}:V,$=e.onEditPlugin,W=void 0===$?function(){}:$,H=e.onEnablePlugins,J=void 0===H?function(){}:H,Y=e.onDisablePlugins,K=void 0===Y?function(){}:Y,X=e.onUpdateCfg,q=void 0===X?function(){}:X,Q=e.setSelectedPlugins,ee=void 0===Q?function(){}:Q,te=e.changePluginsKey,ne=void 0===te?function(){}:te,re=e.setEditor,oe=void 0===re?function(){}:re,ie=e.onEnableUpload,ae=void 0===ie?function(){}:ie,le=e.onUpload,ce=void 0===le?function(){}:le,ue=e.onAddUpload,se=void 0===ue?function(){}:ue,pe=e.onRemoveUpload,fe=void 0===pe?function(){}:pe,de=e.onShowDialog,me=void 0===de?function(){}:de,ge=e.onRemovePlugin,be=void 0===ge?function(){}:ge,ve=e.onSaveTemplate,he=e.onDeleteTemplate,Ee=e.onEditTemplate,Oe=e.onFilterAvailableTemplates,Se=e.onFilterEnabledTemplates,Pe=e.changeTemplatesKey,Te=e.setSelectedTemplates,we=e.setParsedTemplate,Ce=e.setFileDropStatus,xe=e.messages,je=void 0===xe?{}:xe,De=e.hideUploadExtension,Ne=io(io(io(io(io(io(io({},eo.WRONG_FORMAT,"contextCreator.configurePlugins.uploadWrongFileFormatError"),eo.MISSING_INDEX,"contextCreator.configurePlugins.uploadMissingIndexError"),eo.MALFORMED_INDEX,"contextCreator.configurePlugins.uploadParseError"),eo.MISSING_PLUGIN,"contextCreator.configurePlugins.uploadMissingPluginError"),eo.MISSING_BUNDLE,"contextCreator.configurePlugins.uploadMissingBundleError"),eo.TOO_MANY_BUNDLES,"contextCreator.configurePlugins.uploadTooManyBundlesError"),eo.ALREADY_INSTALLED,"contextCreator.configurePlugins.uploadAlreadyInstalledError"),Re=i.filter((function(e){return e.selected})),Ae=i.filter((function(e){return!e.enabled})),Ie=i.filter((function(e){return e.enabled})),Fe=co.bind(null,a,l,c,oe,E,S,T,W,J,K,q,me,ne,!0),ke=Fe(Re,!1),_e=Fe(Ae,!0),Ue=Fe(Ie,!0);return at().createElement("div",{className:"configure-plugins-step"},at().createElement(Bt,{localizeItems:!0,leftColumn:{items:_e,title:"contextCreator.configurePlugins.availablePlugins",filterText:d,filterPlaceholder:y,emptyStateProps:{glyph:"wrench",title:"contextCreator.configurePlugins.availablePluginsEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configurePlugins.searchResultsEmpty"},onFilter:B,tools:De?[]:[{id:"upload",glyph:"upload",onClick:function(){return ae(!0)},tooltipId:"contextCreator.configurePlugins.tooltips.uploadPlugin"}]},rightColumn:{items:Ue,title:"contextCreator.configurePlugins.enabledPlugins",filterText:g,filterPlaceholder:h,emptyStateProps:{glyph:"wrench",title:"contextCreator.configurePlugins.enabledPluginsEmpty"},emptyStateSearchProps:{glyph:"info-sign",title:"contextCreator.configurePlugins.searchResultsEmpty"},emptyTest:function(e){return!e.filter((function(e){return!e.mandatory})).length},onFilter:z},allowCtrlMultiSelect:!0,selectedItems:ke,selectedSide:i.reduce((function(e,t){return t.selected&&t.enabled||e}),!1)?"right":"left",sortStrategy:function(e){return G?e:function e(t){return t&&t.map((function(t){return oo(oo({},t),{},{children:e(t.children)})})).sort((function(e,t){return e.title<t.title?-1:1}))}(e)},filter:function(e,t){var n=e.toLowerCase();return function e(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return oo(oo({},t),{},{children:e(t.children)})})).filter((function(e){return e.children.length>0||e.title.toLowerCase().indexOf(n)>-1}))}(t)},onSelect:function(e){return ee(uo(so(e)))},onTransfer:function(e,t){return("right"===t?J:K)(uo(so(e)))}}),at().createElement(Vt.Z,{loading:n&&r.templateDataLoading,showFullscreen:!0,title:at().createElement(pt.Z,{msgId:"contextCreator.configureTemplates.title"}),show:I.mapTemplatesConfig,fullscreenType:"vertical",clickOutEnabled:!1,size:"lg",onClose:function(){return me("mapTemplatesConfig",!1)}},at().createElement(Br,{user:t,loading:n,loadFlags:r,mapTemplates:F,parsedTemplate:u,editedTemplate:s,fileDropStatus:p,availableTemplatesFilterText:k,enabledTemplatesFilterText:_,availableTemplatesFilterPlaceholder:U,enabledTemplatesFilterPlaceholder:M,showUploadDialog:I.uploadTemplate,changeTemplatesKey:Pe,setSelectedTemplates:Te,setParsedTemplate:we,setFileDropStatus:Ce,onSave:ve,onDelete:he,onEditTemplate:Ee,onFilterAvailableTemplates:Oe,onFilterEnabledTemplates:Se,onShowUploadDialog:me.bind(null,"uploadTemplate")})),at().createElement(mr.Z,{onClose:me.bind(null,"confirmRemovePlugin",!1),onConfirm:be.bind(null,I.confirmRemovePluginPayload),show:I.confirmRemovePlugin,buttonSize:"large"},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.confirmRemovePlugin"})),C&&function(e){var t=e.toUpload,n=e.onClose,r=e.onUpload,o=e.onInstall,i=e.onRemove,a=e.isUploading,l=e.uploadStatus;return at().createElement(to.Z,{show:!0},at().createElement(to.Z.Header,{key:"dialogHeader"},at().createElement(to.Z.Title,null,at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.uploadTitle"}))),at().createElement(to.Z.Body,null,a?at().createElement(ht(),null):at().createElement("div",{className:"configure-plugins-step-upload"},at().createElement(nn(),{key:"dropzone",rejectClassName:"dropzone-danger",className:"dropzone",activeClassName:"active",onDrop:r},at().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%",justifyContent:"center"}},at().createElement("span",{style:{textAlign:"center"}},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.uploadLabel"})))),at().createElement("div",{className:"uploads-list"},t.map((function(e,t){return function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=e.error?at().createElement(ut.gG,{glyph:"remove"}):at().createElement(ut.gG,{glyph:"ok"});return at().createElement("div",{key:e.name,className:"uploading-file"},o,at().createElement("span",{className:"plugin-name"},e.name),at().createElement("span",{className:"upload-remove",onClick:r},at().createElement(ut.gG,{glyph:"trash"})),at().createElement("span",{className:"upload-error"},e.error&&(t=e.error,n=at().createElement(ut.u,null,t.message),at().createElement(ut.Ox,{placement:"top",overlay:n},at().createElement(ut.gG,{glyph:"warning-sign"})))))}(e,(function(){return i(t)}))}))),l&&"error"===l.result&&at().createElement(ut.bZ,{bsStyle:"danger"},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.uploadError"}),l.error.message),l&&"ok"===l.result&&at().createElement(ut.bZ,{bsStyle:"info"},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.uploadOk"})))),at().createElement(to.Z.Footer,null,at().createElement(st.Z,{onClick:n},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.cancelUpload"})),at().createElement(st.Z,{bsStyle:"primary",onClick:o,disabled:0===t.filter((function(e){return!e.error})).length},at().createElement(pt.Z,{msgId:"contextCreator.configurePlugins.install"}))))}({toUpload:j,onClose:function(){return ae(!1)},onUpload:function(e){Promise.all(e.map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,ye.xp)(e).then((function(e){return(new(Kr())).loadAsync(e).catch((function(){throw eo.WRONG_FORMAT}))})).then((function(n){if(!n.files["index.json"])throw eo.MISSING_INDEX;if(0===n.file(/index\.js$/).length)throw eo.MISSING_BUNDLE;return n.files["index.json"].async("text").then((function(n){var r=function(e,t){try{var n=JSON.parse(e);if(n.plugins&&n.plugins.length&&n.plugins[0].name){var r=n.plugins[0].name;return-1!==t.indexOf(r)?{error:eo.ALREADY_INSTALLED}:{name:r}}return{error:eo.MISSING_PLUGIN}}catch(e){return{error:eo.MALFORMED_INDEX}}}(n,t);if(r.error)throw r.error;return Qr(Qr({},r),{},{file:e})}))}))}(e,i.map((function(e){return e.name}))).catch((function(e){throw new Error((0,Et.S$)(je,Ne[e]))}))}))).then((function(e){se(e)})).catch((function(t){se(e.map((function(e){return{name:e.name,file:e,error:t}})))}))},onInstall:function(){var e=j.filter((function(e){return!e.error}));ce(e)},onRemove:fe,isUploading:N.filter((function(e){return e.uploading})).length>0,uploadStatus:R}))}));var fo=n(472500),mo=n.n(fo),go=n(491046),bo=n(564140),yo=n(668740);function vo(e){return vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vo(e)}var ho=["onLoaded","pluginsConfig","plugins","loaderComponent"];function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eo.apply(this,arguments)}function Oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oo(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=vo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==vo(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Po=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.xc;return function(t){return function(n){var r=n.onLoaded,o=void 0===r?function(){}:r,i=n.pluginsConfig,a=n.plugins,l=void 0===a?{}:a,c=n.loaderComponent,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,ho),s=e(So({pluginsConfig:i},u)),p=(0,bo.Z)({pluginsEntries:(0,yo.u)(l,"module"),pluginsConfig:s}),f=p.plugins,d=p.pending,m=(0,it.useMemo)((function(){return So(So({},f),(0,yo.u)(l))}),[f]),g=d,b=c;return(0,it.useEffect)((function(){g||o(!0)}),[g]),g&&c?at().createElement(b,null):at().createElement(t,Eo({},u,{pluginsConfig:i,plugins:m,allPlugins:l}))}}}()(go.Z);var To=n(784715);function wo(e){return wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(e)}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ao(r.key),r)}}function xo(e,t,n){return t=Do(t),function(e,t){if(t&&("object"===wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,jo()?Reflect.construct(t,n||[],Do(e).constructor):t.apply(e,n))}function jo(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(jo=function(){return!!e})()}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Do(e)}function No(e,t){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},No(e,t)}function Ro(e,t,n){return(t=Ao(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e){var t=function(e,t){if("object"!=wo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wo(t)?t:t+""}var Io=mo().parse(window.location.href,!0).query,Fo=(0,o.connect)((0,To.oz)(Ht())((function(e){return e.plugins}),(function(e){return e.mode}),(function(e){var t;return null==e||null===(t=e.browser)||void 0===t?void 0:t.mobile}),(function(e){return e.controls}),(function(e){return(0,l.bh)(e,a.ZP.getConfigProp("monitorState"))}),(function(e,t,n,r,o){return{statePluginsConfig:e,mode:Io.mode||t||(n?"mobile":"desktop"),pluginsState:r,monitoredState:o}})))(Po),ko=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xo(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&No(e,t)}(t,e),n=t,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.props.loadMapConfig()}},{key:"render",value:function(){return at().createElement(Fo,{key:"viewer",id:"viewer",className:this.props.className,pluginsConfig:this.props.pluginsConfig||this.props.statePluginsConfig||a.ZP.getConfigProp("plugins"),plugins:this.props.plugins,params:this.props.params,loaderComponent:this.props.loaderComponent,onLoaded:this.props.onLoaded})}}])&&Co(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);Ro(ko,"propTypes",{className:ct().string,params:ct().object,statePluginsConfig:ct().object,pluginsConfig:ct().object,loadMapConfig:ct().func,plugins:ct().object,loaderComponent:ct().func,onLoaded:ct().func}),Ro(ko,"defaultProps",{mode:"desktop",className:"viewer",loadMapConfig:function(){},onLoaded:function(){}});const _o=ko;var Uo=n(898631);const Mo=function(e){var t=e.pluginsConfig,n=void 0===t?{}:t,r=e.plugins,o=void 0===r?{}:r,i=e.mapType,a=void 0===i?Uo.Bk.OPENLAYERS:i,l=e.className,c=void 0===l?"viewer context-creator-viewer":l,u=e.showConfirm,s=void 0!==u&&u,p=e.confirmMessage,f=void 0===p?"contextCreator.configureMap.confirm":p,d=e.onReloadConfirm,m=void 0===d?function(){}:d,g=e.onMapViewerReload,b=void 0===g?function(){}:g;return at().createElement(at().Fragment,null,at().createElement(dt.Z,{draggable:!1,modal:!0,show:s,onClose:function(){m(!1)},onConfirm:function(){m(!1),b()},confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:at().createElement(pt.Z,{msgId:"confirm"}),closeText:at().createElement(pt.Z,{msgId:"cancel"})},at().createElement(pt.Z,{msgId:f})),at().createElement(_o,{className:c,pluginsConfig:n,plugins:o,params:{mapType:a,mapId:"new"}}))};var Zo=n(717621),Go=n.n(Zo),Lo=n(615402),Bo=n(212961),Vo=n(725288),zo=n(202576),$o=n(145869);function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function Ho(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(n),!0).forEach((function(t){Yo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ho(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yo(e,t,n){var r;return r=function(e,t){if("object"!=Wo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Wo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Wo(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ko=(0,ln.Z)("noResultsText")(Gn.ZP),Xo="ms-main-color",qo="ms-main-bg",Qo="ms-primary-contrast",ei="ms-primary",ti="ms-success-contrast",ni="ms-success",ri=function(e,t,n,r){return!Go().equals(null==e?void 0:e[r],(null==t?void 0:t[r])||n[r])};const oi=function(e){var t=e.themes,n=void 0===t?[]:t,r=e.setSelectedTheme,o=void 0===r?function(){}:r,i=e.onToggleCustomVariables,a=void 0===i?function(){}:i,l=e.selectedTheme,c=void 0===l?{}:l,u=e.customVariablesEnabled,s=void 0!==u&&u,p=e.context,f=void 0===p?{}:p,d=e.basicVariables,m=void 0===d?Yo(Yo(Yo(Yo(Yo(Yo({},Xo,"#000000"),qo,"#FFFFFF"),Qo,"#FFFFFF"),ei,"#0D7185"),ti,"#FFFFFF"),ni,"#398439"):d,g=(0,it.useRef)(),b=(0,it.useRef)(),y=(0,it.useRef)(),v=(E()(n,{id:c.id})||{}).defaultVariables,h=Jo(Jo(Jo({},m),v),null==c?void 0:c.variables),O=h[Xo]&&h[qo]&&!Go().isReadable(h[Xo],h[qo])?Go().mostReadable(h[qo],[h[Xo],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,S=h[ei]&&h[Qo]&&!Go().isReadable(h[ei],h[Qo])?Go().mostReadable(h[Qo],[h[ei],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,P=h[ni]&&h[ti]&&!Go().isReadable(h[ni],h[ti])?Go().mostReadable(h[ti],[h[ni],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,T=h[ni]&&h[ei]&&!Go().isReadable(h[ni],h[ei])?Go().mostReadable(h[ei],[h[ni],"#ffffff","#000000"],{includeFallbackColors:!0}).toHexString():null,w=ri(h,v,m,Xo),C=ri(h,v,m,qo),x=ri(h,v,m,Qo),j=ri(h,v,m,ei),D=ri(h,v,m,ti),N=ri(h,v,m,ni);return at().createElement("div",{className:"configure-themes-step"},at().createElement("div",{className:"choose-theme"},at().createElement("div",{className:"text-center"},at().createElement(ut.gG,{glyph:"dropper",style:{fontSize:128}})),at().createElement("h1",{className:"text-center"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.title"})),at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.themes"})),at().createElement(Ko,{clearable:!0,onChange:function(e){var t=null==e?void 0:e.theme;o(s?t?Jo(Jo({},t),{},{variables:Jo(Jo({},m),t.defaultVariables)}):{variables:m}:t)},value:null==c?void 0:c.id,options:n.map((function(e){return{value:e.id,label:(null==e?void 0:e.label)&&(0,Et.S$)(f,null==e?void 0:e.label)||(null==e?void 0:e.id),theme:e}})),noResultsText:"contextCreator.configureThemes.noThemes"}),at().createElement("div",{className:"custom-variables"},at().createElement(ut.J$,null,at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.customVariables"})),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.customColorsDescription"})}),at().createElement(st.Z,{key:"clear-all",onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},m),v)}))},className:"clear-all no-border"},"clear all"),at().createElement($o.Z,{onChange:function(e){a(),e&&o(Jo(Jo({},c),{},{variables:h}))},className:"ms-geostory-settings-switch",checked:s})),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.main"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.main"})}),O?at().createElement(Vo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(g.current=e.trigger)},placement:"top",content:at().createElement("div",null,at().createElement(Lo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:O}}),at().createElement(st.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Xo,O))})),null===(e=g.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},at().createElement(pt.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},at().createElement(st.Z,{disabled:!s,className:"square-button-md no-border",style:{display:O?"block":"none"}},at().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[Xo],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Xo,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!w||!s,key:Xo,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Xo,(null==v?void 0:v[Xo])||m[Xo]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.background"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.background"})})),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[qo],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},qo,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!C||!s,key:qo,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},qo,(null==v?void 0:v[qo])||m[qo]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.primaryContrast"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.primaryContrast"})}),S?at().createElement(Vo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(b.current=e.trigger)},placement:"top",content:at().createElement("div",null,at().createElement(Lo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:S}}),at().createElement(st.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Qo,S))})),null===(e=b.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},at().createElement(pt.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},at().createElement(st.Z,{disabled:!s,className:"square-button-md no-border",style:{display:S?"block":"none"}},at().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[Qo],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Qo,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!x||!s,key:Qo,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},Qo,(null==v?void 0:v[Qo])||m[Qo]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.primary"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.primary"})})),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[ei],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ei,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!j||!s,key:ei,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ei,(null==v?void 0:v[ei])||m[ei]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.successContrast"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.successContrast"})}),P?at().createElement(Vo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(y.current=e.trigger)},placement:"top",content:at().createElement("div",null,at().createElement(Lo.Z,{msgId:"geostory.customizeTheme.alternativeTextColorPopover",msgParams:{color:P}}),at().createElement(st.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ti,P))})),null===(e=y.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},at().createElement(pt.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},at().createElement(st.Z,{disabled:!s,className:"square-button-md no-border",style:{display:P?"block":"none"}},at().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[ti],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ti,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!D||!s,key:ti,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ti,(null==v?void 0:v[ti])||m[ti]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("div",{className:"color-item"},at().createElement(ut.J$,{className:"label-theme"},at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.success"}),at().createElement(zo.Z,{bsStyle:"link",text:at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.tooltips.success"})}),T?at().createElement(Vo.Z,{useBody:!0,className:"ms-custom-theme-picker-popover",ref:function(e){e&&(y.current=e.trigger)},placement:"top",content:at().createElement("div",null,at().createElement(Lo.Z,{msgId:"contextCreator.configureThemes.alternativeTextPrimarySecondary",msgParams:{color:T}}),at().createElement(st.Z,{bsSize:"xs",bsStyle:"primary",style:{margin:"auto",display:"block"},onClick:function(){var e,t;o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ni,T))})),null===(e=y.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}},at().createElement(pt.Z,{msgId:"geostory.customizeTheme.useAlternativeTextColor"})))},at().createElement(st.Z,{disabled:!s,className:"square-button-md no-border",style:{display:T?"block":"none"}},at().createElement(ut.gG,{glyph:"exclamation-mark"}))):null),at().createElement("div",{className:"color-choice"},at().createElement(Bo.Z,{disabled:!s,onOpen:function(){return{}},color:h[ni],line:!1,disableAlpha:!1,onChangeColor:function(e){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ni,Go()(e).toHexString()))}))}}),at().createElement(st.Z,{disabled:!N||!s,key:ni,onClick:function(){o(Jo(Jo({},c),{},{variables:Jo(Jo({},h),{},Yo({},ni,(null==v?void 0:v[ni])||m[ni]))}))},className:"no-border"},at().createElement(ut.gG,{glyph:"repeat"})))),at().createElement("p",null,at().createElement(pt.Z,{msgId:"contextCreator.configureThemes.guidelines"}))))};function ii(e){return ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ii(e)}function ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mi(r.key),r)}}function li(e,t,n){return t=ui(t),function(e,t){if(t&&("object"===ii(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ci()?Reflect.construct(t,n||[],ui(e).constructor):t.apply(e,n))}function ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ci=function(){return!!e})()}function ui(e){return ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ui(e)}function si(e,t){return si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},si(e,t)}function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function di(e,t,n){return(t=mi(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mi(e){var t=function(e,t){if("object"!=ii(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ii(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ii(t)?t:t+""}var gi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),li(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&si(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.props.onInit({tutorials:this.props.tutorials})}},{key:"componentDidUpdate",value:function(){this.props.tutorialsList||this.props.onInit({tutorials:this.props.tutorials})}},{key:"render",value:function(){var e=this,t=function(t){var n,r,o=e.props.tutorials[t]?[{id:"show-tutorial",onClick:function(){return e.props.onShowTutorial(t)},label:"contextCreator.showTutorial"}]:[],i=null!==(n=null===(r=e.props.items)||void 0===r?void 0:r.map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toolbarBtn})))&&void 0!==n?n:[];return o=o.concat(i),"configure-map"===t&&(o=o.concat({id:"map-reload",onClick:function(){return e.props.onReloadConfirm(!0)},label:"contextCreator.configureMap.reload"})),o},n=[{id:"general-settings",label:"contextCreator.generalSettings.label",extraToolbarButtons:t("general-settings"),disableNext:!this.props.resource.name||!this.props.newContext.windowTitle||!this.props.newContext.windowTitle.length||this.props.loading||!this.props.isValidContextName||!this.props.contextNameChecked,component:at().createElement(Ot,{contextId:this.props.contextId,contextName:this.props.resource.name,windowTitle:this.props.newContext.windowTitle,isValidContextName:this.props.isValidContextName,contextNameChecked:this.props.contextNameChecked,loading:this.props.loading&&this.props.loadFlags.contextNameCheck,context:this.context,onChange:this.props.onChangeAttribute})},{id:"configure-map",label:"contextCreator.configureMap.label",extraToolbarButtons:t("configure-map"),component:at().createElement(Mo,{pluginsConfig:this.props.ignoreViewerPlugins?this.props.pluginsConfig:J()(this.props.pluginsConfig).reduce((function(t,n){return fi(fi({},t),{},di({},n,(r=e.props.pluginsConfig[n],e.props.viewerPlugins.map((function(e){var t=b()(e)?e.name:e,n=E()(r,(function(e){return t===(b()(e)?e.name:e)}));if(n){if(b()(e)&&e.overrides){var o=b()(n)?n:{name:n},i=fi(fi({},n.cfg||{}),e.overrides&&e.overrides.cfg||{});return fi(fi({},o),{},{cfg:i})}return n}return e})))));var r}),{}),plugins:this.context.plugins,mapType:this.props.mapType,showConfirm:this.props.showReloadConfirm,onReloadConfirm:this.props.onReloadConfirm,onMapViewerReload:this.props.onMapViewerReload})},{id:"configure-plugins",label:"contextCreator.configurePlugins.label",extraToolbarButtons:t("configure-plugins"),disableNext:!this.props.allAvailablePlugins.filter((function(e){return e.enabled&&void 0===f()(e,"pluginConfig.cfg.containerPosition")})).length||!!this.props.cfgError||!this.props.isCfgValidated,component:at().createElement(po,{user:this.props.user,loading:this.props.loading,loadFlags:this.props.loadFlags,tutorialMode:"run"===this.props.tutorialStatus,tutorialStep:this.props.tutorialStep,allPlugins:this.props.allAvailablePlugins,editedPlugin:this.props.editedPlugin,editedCfg:this.props.editedCfg,cfgError:this.props.cfgError,availablePluginsFilterText:this.props.availablePluginsFilterText,enabledPluginsFilterText:this.props.enabledPluginsFilterText,documentationBaseURL:this.props.documentationBaseURL,showDescriptionTooltip:this.props.showPluginDescriptionTooltip,descriptionTooltipDelay:this.props.pluginDescriptionTooltipDelay,showDialog:this.props.showDialog,mapTemplates:this.props.mapTemplates,parsedTemplate:this.props.parsedTemplate,editedTemplate:this.props.editedTemplate,fileDropStatus:this.props.fileDropStatus,availableTemplatesFilterText:this.props.availableTemplatesFilterText,enabledTemplatesFilterText:this.props.enabledTemplatesFilterText,onFilterAvailablePlugins:this.props.onFilterAvailablePlugins,onFilterEnabledPlugins:this.props.onFilterEnabledPlugins,onEditPlugin:this.props.onEditPlugin,onEnablePlugins:this.props.onEnablePlugins,onDisablePlugins:this.props.onDisablePlugins,onUpdateCfg:this.props.onUpdateCfg,setSelectedPlugins:this.props.setSelectedPlugins,changePluginsKey:this.props.changePluginsKey,uploading:this.props.uploading,uploadResult:this.props.uploadResult,onEnableUpload:this.props.onEnableUploadPlugin,uploadEnabled:this.props.uploadEnabled,pluginsToUpload:this.props.pluginsToUpload,onUpload:this.props.onUploadPlugin,onAddUpload:this.props.onAddUploadPlugin,onRemoveUpload:this.props.onRemoveUploadPlugin,changeTemplatesKey:this.props.changeTemplatesKey,setSelectedTemplates:this.props.setSelectedTemplates,setParsedTemplate:this.props.setParsedTemplate,setFileDropStatus:this.props.setFileDropStatus,onShowDialog:this.props.onShowDialog,onRemovePlugin:this.props.onRemovePlugin,onSaveTemplate:this.props.onSaveTemplate,onDeleteTemplate:this.props.onDeleteTemplate,onEditTemplate:this.props.onEditTemplate,onFilterAvailableTemplates:this.props.onFilterAvailableTemplates,onFilterEnabledTemplates:this.props.onFilterEnabledTemplates,hideUploadExtension:this.props.hideUploadExtension})},{id:"configure-themes",label:"contextCreator.configureThemes.label",extraToolbarButtons:t("configure-themes"),disableNext:!1,component:at().createElement(oi,{themes:this.props.themes,customVariablesEnabled:this.props.customVariablesEnabled,basicVariables:this.props.basicVariables,setSelectedTheme:this.props.setSelectedTheme,onToggleCustomVariables:this.props.onToggleCustomVariables,selectedTheme:this.props.selectedTheme})}];return at().createElement(yt,{enableClickOnStep:this.props.enableClickOnStep,loading:this.props.loading&&this.props.loadFlags.contextSaving,currentStepId:this.props.curStepId,onSetStep:this.props.onSetStep,onSave:function(){return e.props.onSave(e.props.saveDestLocation)},onShowBackToPageConfirmation:this.props.onShowBackToPageConfirmation,showBackToPageConfirmation:this.props.showBackToPageConfirmation,backToPageConfirmationMessage:this.props.backToPageConfirmationMessage,onConfirmBackToPage:function(){return e.context.router.history.push(e.props.backToPageDestRoute)},steps:this.props.stepIds.map((function(e){return n.find((function(t){return t.id===e}))})),hideSaveButton:this.props.hideSaveButton,hideCloseButton:this.props.hideCloseButton})}}],r&&ai(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(at().Component);di(gi,"propTypes",{user:lt.object,loading:lt.bool,loadFlags:lt.object,contextId:lt.object,isValidContextName:lt.bool,contextNameChecked:lt.bool,curStepId:lt.string,tutorialStatus:lt.string,tutorialStep:lt.string,newContext:lt.object,resource:lt.object,pluginsConfig:lt.object,pluginsToUpload:lt.array,viewerPlugins:lt.array,ignoreViewerPlugins:lt.bool,allAvailablePlugins:lt.array,editedPlugin:lt.string,editedCfg:lt.string,isCfgValidated:lt.bool,cfgError:lt.object,mapTemplates:lt.array,parsedTemplate:lt.object,editedTemplate:lt.object,fileDropStatus:lt.string,availablePluginsFilterText:lt.string,enabledPluginsFilterText:lt.string,availableTemplatesFilterText:lt.string,enabledTemplatesFilterText:lt.string,documentationBaseURL:lt.string,showPluginDescriptionTooltip:lt.bool,pluginDescriptionTooltipDelay:lt.number,onFilterAvailablePlugins:lt.func,onFilterEnabledPlugins:lt.func,onFilterAvailableTemplates:lt.func,onFilterEnabledTemplates:lt.func,setSelectedPlugins:lt.func,setSelectedTemplates:lt.func,setParsedTemplate:lt.func,setFileDropStatus:lt.func,changePluginsKey:lt.func,changeTemplatesKey:lt.func,mapType:lt.string,showReloadConfirm:lt.bool,showDialog:lt.object,onInit:lt.func,onSetStep:lt.func,onShowTutorial:lt.func,onChangeAttribute:lt.func,onSave:lt.func,onSaveTemplate:lt.func,onDeleteTemplate:lt.func,onEditTemplate:lt.func,onEditPlugin:lt.func,onEnablePlugins:lt.func,onDisablePlugins:lt.func,onUpdateCfg:lt.func,onEnableUploadPlugin:lt.func,onUploadPlugin:lt.func,onAddUploadPlugin:lt.func,onRemoveUploadPlugin:lt.func,uploadEnabled:lt.bool,onMapViewerReload:lt.func,onReloadConfirm:lt.func,saveDestLocation:lt.string,uploading:lt.array,uploadResult:lt.object,onShowDialog:lt.func,onRemovePlugin:lt.func,onShowBackToPageConfirmation:lt.func,showBackToPageConfirmation:lt.bool,backToPageDestRoute:lt.string,backToPageConfirmationMessage:lt.string,tutorials:lt.object,tutorialsList:lt.oneOfType([lt.bool,lt.object]),themes:lt.array,setSelectedTheme:lt.func,selectedTheme:lt.string,basicVariables:lt.object,customVariablesEnabled:lt.bool,onToggleCustomVariables:lt.func,enableClickOnStep:lt.bool,items:lt.array,stepIds:lt.array,hideUploadExtension:lt.bool,hideSaveButton:lt.bool,hideCloseButton:lt.bool}),di(gi,"contextTypes",{messages:lt.object,plugins:lt.object,router:lt.object}),di(gi,"defaultProps",{loading:!1,loadFlags:{},isValidContextName:!0,contextNameChecked:!0,newContext:{},resource:{},themes:[{id:"dark",label:"Dark",type:"link",href:"/static/mapstore/dist/themes/dark.css",defaultVariables:{"ms-main-color":"#eeeeee","ms-main-bg":"#333333","ms-primary-contrast":"#111111","ms-primary":"#43a4ff","ms-success-contrast":"#111111","ms-success":"#398439"}}],viewerPlugins:["Map","BackgroundSelector","MetadataExplorer",{name:"TOC",overrides:{cfg:{activateQueryTool:!0}}},"TOCItemsSettings","DrawerMenu","OmniBar","Search","BurgerMenu","AddGroup","Notifications","QueryPanel","MapFooter","CRSSelector","MousePosition","ScaleBox","Toolbar","MapLoading","StyleEditor",{name:"Identify",overrides:{cfg:{showEdit:!1}}},"Locate","ZoomIn","ZoomOut","ZoomAll","Annotations","MapImport","MapExport","Undo","Redo","Expander","FilterLayer","GlobeViewSwitcher",{name:"FeatureEditor",overrides:{cfg:{editingAllowedRoles:[]}}}],ignoreViewerPlugins:!1,allAvailablePlugins:[],isCfgValidated:!1,curStepId:"general-settings",saveDestLocation:"/context-manager",onInit:function(){},onSetStep:function(){},onShowTutorial:function(){},onChangeAttribute:function(){},onToggleCustomVariables:function(){},onReloadConfirm:function(){},uploadEnabled:!1,pluginsToUpload:[],onShowBackToPageConfirmation:function(){},showBackToPageConfirmation:!1,backToPageDestRoute:"/context-manager",backToPageConfirmationMessage:"contextCreator.undo",tutorials:s.TH,tutorialsList:!1,stepIds:["general-settings","configure-map","configure-plugins","configure-themes"]});var bi=(0,i.zB)({user:ce.np,curStepId:c.F4,tutorialStatus:function(e){var t;return null===(t=function(e){return e&&e.tutorial}(e))||void 0===t?void 0:t.status},tutorialsList:c.K4,tutorialStep:c.tU,newContext:c.Gp,resource:c.rt,allAvailablePlugins:c.w7,editedPlugin:c.$R,editedCfg:c.gX,isCfgValidated:c.MC,cfgError:c.I1,mapTemplates:c.zU,parsedTemplate:c.CH,editedTemplate:c.T$,fileDropStatus:c.YB,availablePluginsFilterText:c.d,enabledPluginsFilterText:c.S2,availableTemplatesFilterText:c.DO,enabledTemplatesFilterText:c.kG,mapType:u.$v,showReloadConfirm:c.C0,showDialog:c.oJ,loading:c.VO,loadFlags:c.E4,isValidContextName:c.We,contextNameChecked:c.F,uploadEnabled:function(e){return e.contextcreator&&e.contextcreator.uploadPluginEnabled},uploading:function(e){return e.contextcreator&&e.contextcreator.uploadingPlugin},uploadResult:function(e){return e.contextcreator&&e.contextcreator.uploadResult},pluginsToUpload:function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.pluginsToUpload},pluginsConfig:function(){return a.ZP.getConfigProp("plugins")},showBackToPageConfirmation:c.Xe,selectedTheme:c.NM,customVariablesEnabled:c.S$,enableClickOnStep:function(e){return!(0,c.Nc)(e)}});const yi=(0,l.rx)("ContextCreator",{component:(0,o.connect)(bi,{onFilterAvailablePlugins:s.$Q.bind(null,"availablePlugins"),onFilterEnabledPlugins:s.$Q.bind(null,"enabledPlugins"),onFilterAvailableTemplates:s.$Q.bind(null,"availableTemplates"),onFilterEnabledTemplates:s.$Q.bind(null,"enabledTemplates"),setSelectedPlugins:s.BD,setSelectedTemplates:s.yG,setSelectedTheme:s.R8,setParsedTemplate:s.IB,setFileDropStatus:s.CB,onEditPlugin:s.hJ,onEditTemplate:s.Gi,onUpdateCfg:s.wG,changePluginsKey:s.dd,changeTemplatesKey:s.Fd,onEnablePlugins:s.iR,onDisablePlugins:s.$c,onInit:s.S1,onSetStep:s.TX,onShowTutorial:s.Sg,onChangeAttribute:s.wE,onSave:s.tk,onSaveTemplate:s.Xu,onDeleteTemplate:s.Xc,onMapViewerReload:s.Q9,onReloadConfirm:s.WR,onEnableUploadPlugin:s.Ek,onUploadPlugin:s.GH,onAddUploadPlugin:s.DQ,onRemoveUploadPlugin:s.kZ,onShowDialog:s.vC,onRemovePlugin:s.GP,onShowBackToPageConfirmation:s.w6,onToggleCustomVariables:s.i9})(gi),reducers:{contextcreator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.qg:return A(A({},e),t.initState||{});case s.ve:return(0,P.t8)("stepId",t.stepId,e);case s.Te:return(0,P.t8)("wasTutorialShown[".concat(t.stepId,"]"),!0,e);case s.xE:return(0,P.t8)("tutorialStep",t.stepId,e);case s.PJ:return(0,P.t8)("selectedTheme",t.theme,e);case s.L4:return(0,P.t8)("mapViewerLoaded",t.status,e);case s.vl:return(0,P.t8)("showReloadConfirm",t.show,e);case s.v7:return A(A({},e),{},{uploadPluginEnabled:t.enable,uploadingPlugin:[],pluginsToUpload:[],uploadResult:null});case s.Cq:return A(A({},e),{},{uploadResult:null,pluginsToUpload:[].concat(D(e.pluginsToUpload||[]),D(t.files))});case s.ZL:return A(A({},e),{},{pluginsToUpload:e.pluginsToUpload.filter((function(e,n){return n!==t.index}))});case s._:var n=t.plugins.map((function(e){return{name:e,uploading:t.status}}));return(0,P.t8)("uploadingPlugin",[].concat(D((e.uploadingPlugin||[]).filter((function(e){return 0===n.filter((function(t){return t.name===e.name})).length}))),D(n)),e);case s.bs:return(0,P.t8)("uploadResult",{result:"error",files:t.files,error:t.error},e);case s.G7:var r=t.plugins.map(M);return A(A({},e),{},{pluginsToUpload:[],uploadResult:{result:"ok"},plugins:[].concat(D((e.plugins||[]).filter((function(e){return 0===r.filter((function(t){return t.name===e.name})).length}))),D(r))});case s.Pm:return t.status?(0,P.t8)("uninstallingPlugin",{name:t.plugin,uninstalling:!0},e):(0,P.t8)("uninstallingPlugin",void 0,e);case s.u8:return(0,P.t8)("uninstallingPlugin",{name:t.plugin,uninstalling:!1,error:t.error},e);case s.W7:return A(A({},e),{},{plugins:e.plugins.filter((function(e){return e.name!==t.plugin}))});case s.Zf:var o,i,l,c=t.resource||{},u=c.data,p=void 0===u?{plugins:{desktop:[]}}:u,d=j(c,T),g=p.plugins,y=void 0===g?{desktop:[]}:g,h=p.userPlugins,O=void 0===h?[]:h,x=p.templates,N=void 0===x?[]:x,R=p.theme,Z=p.customVariablesEnabled,G=j(p,w),L=f()(y,"desktop",[]),B=function(e,t){var n=f()(t,"desktop",[]).map((function(e){return b()(e)?e:{name:e}}));return e?e.reduce((function(e,t){return f()(t,"children",[]).reduce((function(e,t){return e.filter((function(e){return e.name!==t}))}),e)}),e).map((function(t){return M(t,null,e,n)})):F}(f()(t.pluginsConfig,"plugins"),a.ZP.getConfigProp("plugins")),V=[],z=function e(t){return t.map((function(t){var n=function(e){return v()(e.filter((function(e){return _(e)===t.name})))},r=n(L),o=n(O),i=r||o;return i?(V.push(i.name),A(A({},t),{},{pluginConfig:A(A({},f()(t,"pluginConfig",{})),{},{cfg:f()(i,"cfg"),override:f()(i,"override")}),isUserPlugin:!!o,active:i.active||!1,children:e(t.children)})):t}))}(B),$=null===(o=U(z,"MapTemplates"))||void 0===o||null===(i=o.pluginConfig)||void 0===i||null===(l=i.cfg)||void 0===l?void 0:l.allowedTemplates,W=(t.type,j(t,C));return(0,P.t8)("initialEnabledPlugins",V,(0,P.t8)("templates",(t.allTemplates||[]).map((function(e){return A(A(A({},e),e.thumbnail?{thumbnail:decodeURIComponent(e.thumbnail)}:{}),{},{attributes:A(A({},e.thumbnail?{thumbnail:decodeURIComponent(e.thumbnail)}:{}),e.format?{format:e.format}:{}),enabled:($||N||[]).reduce((function(t,n){return t||n.id===e.id}),!1),selected:!1})})),(0,P.t8)("newContext",G,(0,P.t8)("plugins",z,(0,P.t8)("resource",d,(0,P.t8)("selectedTheme",R,(0,P.t8)("customVariablesEnabled",Z,(0,P.t8)("prefetchedData",W,e))))))));case s.HE:var H=t.resource||{},J=f()(e,"templates",[]),Y=E()(J,(function(e){return e.id===H.id}));return t.resource?(0,P.t8)("templates",[].concat(D(J.filter((function(e){return e.id!==H.id}))),[A(A({},H),S()(Y,"enabled","selected"))]),e):e;case s.PB:return(0,P.t8)("isValidContextName",t.valid,e);case s.if:return(0,P.t8)("contextNameChecked",t.checked,e);case s.NU:return{};case s.JN:return A(A({},e),{},{contextId:t.id});case s.u:return(0,P.t8)("filterText.".concat(t.propName),t.text,e);case s.JK:var K=t.ids||[];return(0,P.t8)("plugins",f()(e,"plugins",[]).map((function(e){return A(A({},e),{},{selected:K.reduce((function(t,n){return t||n===e.name}),!1)})})),e);case s.kk:var X=t.ids||[];return(0,P.t8)("templates",f()(e,"templates",[]).map((function(e){return A(A({},e),{},{selected:X.reduce((function(t,n){return t||n===e.id}),!1)})})),e);case s.M6:return(0,P.t8)("parsedTemplate",{fileName:t.fileName,data:t.data,format:t.format},e);case s.rO:return(0,P.t8)("fileDropStatus",t.status,e);case s.eP:return(0,P.t8)("editedTemplate",E()(f()(e,"templates",[]),(function(e){return e.id===t.id})),e);case s.N_:return(0,P.t8)("templates",t.templates,e);case s.Nk:return(0,P.t8)("editedPlugin",t.pluginName,e);case s.Gc:return(0,P.t8)("plugins",k(f()(e,"plugins",[]),t.ids||[],t.key,t.value),e);case s.WA:return(0,P.t8)("templates",f()(e,"templates",[]).map((function(e){return A(A({},e),{},I({},t.key,(t.ids||[]).reduce((function(t,n){return t||n===e.id}),!1)?t.value:e[t.key]))})),e);case s.xr:var q=U(f()(e,"plugins",[]),t.pluginName);return t.pluginName?(0,P.t8)("editedCfg",JSON.stringify({cfg:m().apply(void 0,[f()(q,"pluginConfig.cfg",{})].concat(D("MapTemplates"===t.pluginName?["allowedTemplates"]:[]))),override:f()(q,"pluginConfig.override",{})},null,2),e):e;case s.zr:return(0,P.t8)("editedCfg",t.cfg,e);case s.mG:return(0,P.t8)("validationStatus",t.status,e);case s.Uq:return(0,P.t8)("parsedCfg",t.parsedCfg,e);case s.VE:return(0,P.t8)("cfgError",t.error,e);case s.zM:return"name"===t.key?(0,P.t8)("resource.name",t.value,e):(0,P.t8)("newContext.".concat(t.key),t.value,e);case s.yT:return(0,P.t8)("showDialog.".concat(t.dialogName),t.show,(0,P.t8)("showDialog.".concat(t.dialogName,"Payload"),t.payload,e));case s.br:return(0,P.t8)("loading"===t.name?"loading":"loadFlags.".concat(t.name),t.value,(0,P.t8)("loading",t.value,e));case s.s4:return(0,P.t8)("showBackToPageConfirmation",t.show,e);case s.Le:return(0,P.t8)("customVariablesEnabled",!e.customVariablesEnabled,e);default:return e}}},epics:r})},788113:(e,t,n)=>{"use strict";n.d(t,{b6:()=>f,PG:()=>d,_x:()=>m,Mm:()=>g,dP:()=>b,SX:()=>y,ZL:()=>v,_S:()=>h,iH:()=>E,R7:()=>O,Q7:()=>S,n7:()=>P,bA:()=>T,hm:()=>w,E2:()=>C,Cb:()=>x,eK:()=>j,Im:()=>D,e8:()=>N,JF:()=>R,kS:()=>A,y:()=>I,l2:()=>F,HN:()=>k,BM:()=>_,O8:()=>U,am:()=>M,LV:()=>Z,CK:()=>G,jU:()=>L,Qg:()=>B,$c:()=>V});var r=n(22222),o=n(227361),i=n.n(o),a=n(800827),l=n(577215),c=n(274621);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==u(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(e){return i()(e,"catalog.services")},d=(0,r.P1)((function(e){return i()(e,"catalog.default.staticServices")}),f,(function(e,t){var n=null==e?void 0:e.default_map_backgrounds;return n?(n.readOnly=!0,p(p({},t),{},{default_map_backgrounds:n})):t})),m=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},g=function(e){return i()(e,"controls.metadataexplorer.group")},b=function(e){return i()(e,"catalog.saving")},y=function(e){return i()(e,"catalog.result")},v=function(e){return i()(e,"catalog.openCatalogServiceList")},h=function(e){return i()(e,"catalog.newService")},E=function(e){return i()(e,"catalog.newService.type","csw")},O=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},S=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},P=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},T=function(e){return i()(e,"catalog.searchOptions")},w=function(e){return i()(e,"catalog.loadingError")},C=function(e){return i()(e,"catalog.loading",!1)},x=function(e){return i()(e,"catalog.selectedService")},j=function(e){return i()(e,"catalog.mode","view")},D=function(e){return i()(e,"catalog.layerError")},N=function(e){return i()(e,"catalog.searchOptions.text","")},R=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},A=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},I=function(e){return i()(e,"catalog.pageSize",4)},F=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},k=(0,r.zB)({projection:a.uy}),_=function(e){return i()(e,"catalog.formatsLoading",!1)},U=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},M=function(e){var t,n;return"edit"===j(e)?U(e):(null===(t=O(e))||void 0===t||null===(n=t.supportedFormats)||void 0===n?void 0:n.imageFormats)||[]},Z=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,l.oL)())},G=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},L=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},B=function(e){return i()(e,"catalog.showFormatError",!1)},V=function(e){var t=function(e){return i()(e,"catalog.editingAllowedRoles",[])}(e),n=function(e){return i()(e,"catalog.editingAllowedGroups",[])}(e);return(0,c.tv)({allowedRoles:t,allowedGroups:n})(e)}},12248:(e,t,n)=>{"use strict";n.d(t,{Gp:()=>b,lY:()=>y,F4:()=>v,rt:()=>h,d8:()=>E,C0:()=>O,oJ:()=>S,VO:()=>P,E4:()=>T,We:()=>w,F:()=>C,w7:()=>x,u7:()=>j,$R:()=>D,gX:()=>N,Jw:()=>R,I1:()=>A,MC:()=>I,CH:()=>F,YB:()=>k,zU:()=>_,T$:()=>U,d:()=>Z,S2:()=>G,DO:()=>L,kG:()=>B,Xe:()=>V,K4:()=>z,xG:()=>$,tU:()=>W,NM:()=>H,S$:()=>J,Nc:()=>Y,ES:()=>K,Kg:()=>X});var r=n(22222),o=n(227361),i=n.n(o),a=n(957557),l=n.n(a),c=n(478718),u=n.n(c),s=n(800827),p=n(658422),f=n(688182);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==d(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){return e.contextcreator&&e.contextcreator.newContext},y=(0,r.P1)(b,(function(e){return e&&e.mapConfig})),v=function(e){return e.contextcreator&&e.contextcreator.stepId},h=function(e){return e.contextcreator&&e.contextcreator.resource},E=function(e){return e.contextcreator&&e.contextcreator.mapViewerLoaded},O=function(e){return e.contextcreator&&e.contextcreator.showReloadConfirm},S=function(e){return e.contextcreator&&e.contextcreator.showDialog},P=function(e){return e.contextcreator&&e.contextcreator.loading},T=function(e){return e.contextcreator&&e.contextcreator.loadFlags},w=function(e){return e.contextcreator&&e.contextcreator.isValidContextName},C=function(e){return e.contextcreator&&e.contextcreator.contextNameChecked},x=function(e){return e.contextcreator&&e.contextcreator.plugins},j=function(e){return e.contextcreator&&e.contextcreator.initialEnabledPlugins},D=function(e){return e.contextcreator&&e.contextcreator.editedPlugin},N=function(e){return e.contextcreator&&e.contextcreator.editedCfg},R=function(e){return e.contextcreator&&e.contextcreator.parsedCfg},A=function(e){return e.contextcreator&&e.contextcreator.cfgError},I=function(e){return i()(e,"contextcreator.validationStatus",!0)},F=function(e){return e.contextcreator&&e.contextcreator.parsedTemplate},k=function(e){return e.contextcreator&&e.contextcreator.fileDropStatus},_=function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.templates},U=function(e){return e.contextcreator&&e.contextcreator.editedTemplate},M=function(e){return e.contextcreator&&e.contextcreator.filterText},Z=(0,r.P1)(M,(function(e){return i()(e,"availablePlugins")})),G=(0,r.P1)(M,(function(e){return i()(e,"enabledPlugins")})),L=(0,r.P1)(M,(function(e){return i()(e,"availableTemplates")})),B=(0,r.P1)(M,(function(e){return i()(e,"enabledTemplates")})),V=function(e){return i()(e,"contextcreator.showBackToPageConfirmation",!1)},z=function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.tutorials},$=function(e){return function(t){var n,r;return(null===(n=t.contextcreator)||void 0===n||null===(r=n.wasTutorialShown)||void 0===r?void 0:r[e])||!1}},W=function(e){var t;return null===(t=e.contextcreator)||void 0===t?void 0:t.tutorialStep},H=function(e){return i()(e,"contextcreator.selectedTheme")},J=function(e){return i()(e,"contextcreator.customVariablesEnabled",!1)},Y=function(e){var t;return"new"===(null===(t=e.contextcreator)||void 0===t?void 0:t.contextId)},K=function(e){return i()(e,"contextcreator.prefetchedData",{})},X=function(e){var t,n=(0,s.Od)(e);t=null!=n&&n.center?n?(0,p.e_)(e):{}:y(e)||{};var r=x(e),o=b(e),i=h(e),a=_(e),c=(0,f.r)(r).filter((function(e){return e.enabled})).map((function(e){return"MapTemplates"===e.name?g(g({},e),{},{pluginConfig:g(g({},e.pluginConfig),{},{cfg:g(g({},e.pluginConfig.cfg||{}),{},{allowedTemplates:a.filter((function(e){return e.enabled})).map((function(e){return u()(e,"id")}))})})}):e})),d=(0,f.Z)(c.filter((function(e){return!e.isUserPlugin}))),m=(0,f.Z)(c.filter((function(e){return e.isUserPlugin}))),v=H(e),E=J(e),O=g(g({},o),{},{mapConfig:t,theme:v,customVariablesEnabled:E,plugins:{desktop:d},userPlugins:m});return i&&i.id?g(g({},l()(i,"name","description")),{},{data:O,metadata:{name:i&&i.name,description:i.description}}):{category:"CONTEXT",data:O,metadata:{name:i&&i.name}}}},688182:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,r:()=>p});var r=n(957557),o=n.n(r),i=n(385564),a=n.n(i);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return u(u({},e.pluginConfig),e.isUserPlugin?{active:e.active}:{})}))},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a()(t.map((function(t){return[o()(t,"children")].concat(t.enabled?e(t.children):[])})))}},998869:(e,t,n)=>{"use strict";n.d(t,{k:()=>s,U:()=>p});var r=n(782904),o=n(49977),i=n.n(o),a=n(607147),l=n(604206),c=n(801550),u=n(433528),s="export-context",p=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return i().Observable.from([(0,r.Xg)(t,"enabled",null)])},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e,t){return(0,a.Yq)(t)(e)};return e.ofType(l.hZ,c.YD,u.$O).filter((function(e){var r=e.type,o=e.status,i=e.owner,a=e.eventName,p=e.toolName,f=s(t.getState(),n);switch(r){case u.$O:return"featureGrid"!==n;case c.YD:return f&&"click"===a&&p!==n;case l.hZ:return f&&("drawOrEdit"===o||"start"===o)&&i!==n;default:return f&&"annotations"!==n}})).switchMap((function(e){return s(t.getState(),n)?o(t.getState(),n,e):i().Observable.empty()}))}},559407:(e,t,n)=>{"use strict";n.d(t,{Th:()=>i,Nk:()=>a,y7:()=>c});var r=n(91175),o=n.n(r),i={json:"ext-json",wmc:"ext-wmc"},a={json:"JSON",wmc:"WMC"},l=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}],c=function(e){return o()(l.filter((function(t){return t.outputFormat===e})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(e)}},172704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(923645),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""]);const i=o}}]);