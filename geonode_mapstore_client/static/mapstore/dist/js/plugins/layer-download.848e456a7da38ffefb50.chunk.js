/*! For license information please see layer-download.848e456a7da38ffefb50.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[62426],{881808:(e,t,r)=>{"use strict";r.d(t,{eD:()=>n,AM:()=>o,ok:()=>a,Gg:()=>i,nT:()=>l,TL:()=>c,KS:()=>s,EB:()=>u,DZ:()=>p,Aw:()=>f,V_:()=>d,H0:()=>y,jW:()=>m,JZ:()=>b,fQ:()=>v,HK:()=>O,YO:()=>g,I6:()=>w});var n="MAP:LOAD_NEW_MAP",o="MAP_LOAD_MAP_CONFIG",a="MAP_CONFIG_LOADED",i="MAP_CONFIG_LOAD_ERROR",l="MAP_LOAD_INFO",c="MAP_INFO_LOAD_START",s="MAP_INFO_LOADED",u="MAP_INFO_LOAD_ERROR",p="MAP:MAP_SAVE_ERROR",f="MAP:MAP_SAVED",d="MAP:RESET_MAP_SAVE_ERROR";function y(e,t,r){return{type:a,config:e,legacy:!!t,mapId:t,zoomToExtent:r}}function m(e,t){return{type:i,error:e,mapId:t}}function b(e,t,r,n,a){return{type:o,configName:e,mapId:t,config:r,mapInfo:n,overrideConfig:a}}function v(e,t){return{type:s,mapId:t,info:e,merge:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function O(e,t){return{type:u,mapId:e,error:t}}function g(e){return{type:c,mapId:e}}function w(e){return{type:l,mapId:e}}},580416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>a,ih:()=>i,OX:()=>l,sb:()=>c,K$:()=>s,k7:()=>u,cX:()=>p,x9:()=>f,vs:()=>d,oE:()=>y,Po:()=>m,qv:()=>b,cI:()=>v,g6:()=>O,I4:()=>g,l$:()=>w,Xv:()=>h,k3:()=>E,CQ:()=>S,R8:()=>P,HN:()=>j,sH:()=>A,c7:()=>R,_7:()=>D,eF:()=>x,O6:()=>T,ED:()=>N,RP:()=>I,sF:()=>C,VP:()=>F,He:()=>_,vO:()=>L,WO:()=>k,bh:()=>M,MK:()=>G,ZF:()=>W,tV:()=>U,Dv:()=>Z,Yz:()=>Y,kI:()=>B,XG:()=>q,A4:()=>V,Rp:()=>X,$o:()=>H,ct:()=>z,oh:()=>K,$h:()=>Q,ud:()=>$,Qr:()=>J,LR:()=>ee,nN:()=>te,UG:()=>re,c9:()=>ne,Xy:()=>oe});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",i="TOGGLE_NODE",l="SORT_NODE",c="REMOVE_NODE",s="UPDATE_NODE",u="MOVE_NODE",p="LAYER_LOADING",f="LAYER_LOAD",d="LAYER_ERROR",y="ADD_LAYER",m="ADD_GROUP",b="REMOVE_LAYER",v="SHOW_SETTINGS",O="HIDE_SETTINGS",g="UPDATE_SETTINGS",w="REFRESH_LAYERS",h="LAYERS:UPDATE_LAYERS_DIMENSION",E="LAYERS_REFRESHED",S="LAYERS_REFRESH_ERROR",P="LAYERS:BROWSE_DATA",j="LAYERS:DOWNLOAD",A="LAYERS:CLEAR_LAYERS",R="LAYERS:SELECT_NODE",D="LAYERS:FILTER_LAYERS",x="LAYERS:SHOW_LAYER_METADATA",T="LAYERS:HIDE_LAYER_METADATA",N="LAYERS:UPDATE_SETTINGS_PARAMS";function I(e,t,r){return{type:v,node:e,nodeType:t,options:r}}function C(){return{type:O}}function F(e){return{type:g,options:e}}function _(e,t){return{type:n,newProperties:t,layer:e}}function L(e,t){return{type:o,layer:e,params:t}}function k(e,t){return{type:a,newProperties:t,group:e}}function M(e,t,r){return{type:i,node:e,nodeType:t,status:!r}}function G(e,t){return{type:l,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function W(e,t){return{type:c,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function U(e,t,r){return{type:s,node:e,nodeType:t,options:r}}function Z(e,t,r){return{type:u,node:e,groupId:t,index:r}}function Y(e){return{type:p,layerId:e}}function B(e,t){return{type:f,layerId:e,error:t}}function q(e,t,r){return{type:d,layerId:e,tilesCount:t,tilesErrorCount:r}}function V(e){return{type:y,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function X(e,t,r){return{type:m,group:e,parent:t,options:r,asFirst:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function H(e){return{type:b,layerId:e}}function z(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function K(e){return{type:E,layers:e}}function Q(e,t){return{type:S,layers:e,error:t}}function $(e,t,r,n){return{type:h,dimension:e,value:t,options:r,layers:n}}function J(e){return{type:P,layer:e}}function ee(e){return{type:j,layer:e}}function te(){return{type:A}}function re(e,t,r){return{type:R,id:e,nodeType:t,ctrlKey:r}}function ne(e,t){return{type:x,metadataRecord:e,maskLoading:t}}function oe(e,t){return{type:N,newParams:e,update:t}}},95797:(e,t,r)=>{"use strict";r.d(t,{DR:()=>n,S0:()=>o,u7:()=>a,lj:()=>i,yz:()=>l,lN:()=>c,zW:()=>s,Yx:()=>u,VN:()=>p,Hu:()=>f,VT:()=>d,RD:()=>y,Qq:()=>m,R1:()=>b,_T:()=>v,vO:()=>O,XO:()=>g,jG:()=>w,Xc:()=>h,gT:()=>E,rG:()=>S,t3:()=>P,Fs:()=>j,w_:()=>A,Lm:()=>R,rh:()=>D,rP:()=>x,IO:()=>T}),r(375875);var n="LAYER_SELECTED_FOR_SEARCH",o="FEATURE_TYPE_SELECTED",a="FEATURE_TYPE_LOADED",i="FEATURE_LOADED",l="FEATURE_LOADING",c="FEATURE_TYPE_ERROR",s="FEATURE_ERROR",u="QUERY_CREATE",p="QUERY:UPDATE_QUERY",f="QUERY_RESULT",d="QUERY_ERROR",y="RESET_QUERY",m="QUERY",b="INIT_QUERY_PANEL",v="QUERY:TOGGLE_SYNC_WMS",O="QUERY:TOGGLE_LAYER_FILTER";function g(){return{type:v}}function w(){return{type:O}}function h(){return{type:b}}function E(e,t){return{type:o,url:e,typeName:t,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],owner:arguments.length>3?arguments[3]:void 0}}function S(e,t,r){return{type:a,typeName:e,featureType:t,owner:r}}function P(e,t){return{type:c,typeName:e,error:t}}function j(e){return{type:l,isLoading:e}}function A(e,t,r,n,o){return{type:f,searchUrl:t,filterObj:r,result:e,queryOptions:n,reason:o}}function R(e){return{type:d,error:e}}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updates,r=e.reason,n=e.useLayerFilter;return{type:p,updates:t,reason:r,useLayerFilter:n}}function x(e,t,r){return{type:u,searchUrl:e,filterObj:t,owner:r}}function T(e,t,r,n){return{type:m,searchUrl:e,filterObj:t,queryOptions:r,reason:n}}},921533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(867076),o=r(815135),a=r(159979);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var l=["renderPopover","popoverOptions"];function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const s=(0,n.compose)((0,n.withProps)((function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l))})),(0,n.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),a.Z,o.Z))},159979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(124852),o=r.n(n),a=r(352595),i=r(480681),l=r(957557),c=r.n(l),s=r(180307),u=r.n(s);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var f=["popoverOptions","keyProp"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function b(e,t,r){return t=O(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}const w=function(e){return function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),b(this,r,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(r,t),n=r,(l=[{key:"render",value:function(){var t=null,r=this.props,n=r.popoverOptions,l=r.keyProp,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(r,f);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,d({},c()(s,["renderPopover","tooltipId"]),{key:l,ref:function(e){t=e}})),o().createElement(a.Z,{placement:n.placement,shouldUpdatePosition:!0,show:!0,target:function(){return u().findDOMNode(t)}},o().createElement(i.J2,n.props,n.content)))}}])&&y(n.prototype,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l}(o().Component)}},656903:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(124852),o=r.n(n),a=r(480681),i=r(38560),l=["disabled","id","visible","onClick","glyph","active","className"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}var s={width:0,padding:0,borderWidth:0},u={},p=function(e){return e?u:s};const f=(0,n.forwardRef)((function(e,t){var r=e.disabled,n=e.id,s=e.visible,u=e.onClick,f=e.glyph,d=e.active,y=e.className,m=void 0===y?"square-button-md":y,b=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l);return o().createElement(i.Z,c({ref:t},b,{bsStyle:d?"success":"primary",disabled:r,id:"fg-".concat(n),style:p(s),className:m,onClick:function(){return!r&&u()}}),o().createElement(a.gG,{glyph:f}))}))},38560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(480681),o=r(124852),a=r.n(o),i=r(294184),l=r.n(i),c=["disabled","className","onClick"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}var u=r(815135);const p=(f=n.zx,a().forwardRef((function(e,t){var r=e.disabled,n=e.className,o=e.onClick,i=void 0===o?function(){}:o,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,c);return a().createElement(f,s({ref:t,className:r?l()("disabled",n):n,onClick:function(){r||i.apply(void 0,arguments)}},u),u.children)})));var f;(0,u.Z)(n.zx)},807472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var n=r(727418),o=r.n(n),a=r(45697),i=r.n(a),l=r(124852),c=r.n(l),s=r(485294),u=r.n(s),p=r(472986),f=r.n(p),d=r(805346);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function O(e,t,r){return t=w(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function E(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var P=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return E(e=O(this,t,[].concat(n)),"renderLoading",(function(){return e.props.maskLoading?c().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},c().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},c().createElement(d.Z,{msgId:"loading"}),c().createElement(f(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),E(e,"renderRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),E(e,"hasRole",(function(t){return c().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),E(e,"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=c().createElement("div",{id:this.props.id,style:b({},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},c().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),c().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?c().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):c().createElement("span",null)),r=this.props.draggable?c().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,n=o()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?c().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:n,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&v(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(c().Component);E(P,"propTypes",{id:i().string.isRequired,style:i().object,backgroundStyle:i().object,className:i().string,maskLoading:i().bool,containerClassName:i().string,headerClassName:i().string,bodyClassName:i().string,footerClassName:i().string,onClickOut:i().func,modal:i().bool,start:i().object,draggable:i().bool,bounds:i().oneOfType([i().string,i().object])}),E(P,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const j=P},135400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),a=r(379313);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,o,a,l;n=e,o=t,a=r[t],l=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==i(l)?l:l+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.mainViewStyle,i=void 0===n?{}:n,l=e.contentStyle,s=void 0===l?{}:l,u=e.imageStyle,p=void 0===u?{}:u,f=e.glyph,d=void 0===f?"info-sign":f,y=e.iconFit,m=e.title,b=e.tooltip,v=e.tooltipId,O=e.description,g=e.content;return o().createElement("div",{className:"empty-state-container",style:c({height:y?"100%":void 0},r)},o().createElement("div",{key:"main-view",className:"empty-state-main-view",style:c({height:y?"100%":void 0},i)},d?o().createElement("div",{key:"glyph",className:"empty-state-image",style:c({height:y?"100%":void 0},p)},o().createElement(a.Z,{iconFit:y,tooltip:b,tooltipId:v,glyph:d})):null,m?o().createElement("h1",{key:"title"},m):null,O?o().createElement("p",{key:"description",className:"empty-state-description"},O):null),o().createElement("div",{key:"content",className:"empty-state-content",style:s},g))}},379313:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(124852),o=r.n(n),a=r(480681),i=r(496259),l=(0,r(815135).Z)(a.gG);const c=function(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.tooltip,a=e.tooltipId,c=e.iconFit,s=e.padding,u=void 0===s?0:s,p=e.margin,f=void 0===p?0:p;return o().createElement(i.Z,null,(function(e){var t=e.width,i=e.height;return o().createElement(l,{glyph:r,tooltip:n,tooltipId:a,style:{display:"inline-block",padding:u+"px",margin:f+"px",textAlign:"center",fontSize:c?Math.min(t,i)-2*u-2*f:t-2*u-2*f}})}))}},532425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(45697),o=r.n(n),a=r(124852),i=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==l(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,a=e.hidden;return i().createElement("div",{className:o,style:s({width:t,height:t,overflow:"hidden"},n)},!a&&i().createElement("div",{className:"mapstore-".concat(u(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const f=p},352595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(461365).Z)(r(480681).aV)},399534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(461365),o=r(356936);const a=(0,n.Z)(o.h_)},982030:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(124852),o=r.n(n),a=r(623560),i=r.n(a),l=r(867076),c=r(135400);const s=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.Z;return(0,l.branch)(e,(function(){return function(e){return o().createElement(r,t&&i()(t)?t(e):t)}}))}},145869:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(124852),o=r.n(n),a=r(45697),i=r.n(a);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function d(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement("label",{className:"mapstore-switch-btn ".concat(this.props.className)},o().createElement("input",{type:"checkbox",disabled:this.props.disabled,checked:this.props.checked,onChange:function(){return e.props.onChange(!e.props.checked)}}),o().createElement("span",{onClick:function(){return e.props.onClick(!e.props.checked)},className:"m-slider"}))}}])&&c(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);d(m,"propTypes",{disabled:i().bool,className:i().string,checked:i().bool,onChange:i().func,onClick:i().func}),d(m,"defaultProps",{className:"",checked:!1,onChange:function(){},onClick:function(){}});const b=m},886850:(e,t,r)=>{"use strict";r.d(t,{V6:()=>G,Mc:()=>U,v$:()=>Z,ED:()=>Y});var n=r(472500),o=r.n(n),a=r(701469),i=r.n(a),l=r(984596),c=r.n(l),s=r(414293),u=r.n(s),p=r(513218),f=r.n(p),d=r(49977),y=r.n(d),m=r(505055),b=r(507526),v=r(375875),O=r.n(v),g=r(86686),w=r(624262),h=r(510284),E=r(439156),S=r.n(E),P=r(611847),j=["totalFeatures","features"],A=["sortOptions","propertyName"];function R(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function T(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==x(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=S()({wfsVersion:"1.1.0"}),F=C.getFeature,_=C.query,L=C.sortBy,k=C.propertyName,M=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json",a=(0,g.getWFSFilterData)(t,r),i=o().parse((0,P.eW)(e),!0),l=f()(i.query)?i.query:{};l.service="WFS",l.outputFormat=n;var c=o().format({protocol:i.protocol,host:i.host,pathname:i.pathname,query:l});return r.layer&&"vector"===r.layer.type?y().Observable.defer((function(){return new Promise((function(e){var n,o=function(e,t){if(t.filterFields&&0!==t.filterFields.length){var r=e.features.filter((0,g.createFeatureFilter)(t));e.features=r,e.numberMatched=r.length,e.numberReturned=r.length,e.totalFeatures=r.length}return t.sortOptions&&t.sortOptions.sortBy&&t.sortOptions.sortOrder&&"NONE"!==t.sortOptions.sortOrder&&e.features.sort((function(e,r){var n=e.properties[t.sortOptions.sortBy],o=r.properties[t.sortOptions.sortBy],a=n.toLowerCase().localeCompare(o.toLowerCase());return"ASC"===t.sortOptions.sortOrder?a:-1*a})),e}({crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::4326"}},numberMatched:(n=r.layer.features).length,numberReturned:n.length,timeStamp:"2020-07-20T11:36:20.118Z",totalFeatures:n.length,type:"FeatureCollection",features:n},t);e(o)}))})):{data:a,queryString:c}},G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(r.layer&&"vector"===r.layer.type)return M(e,t,r,n);var o=M(e,t,r,n),a=o.data,i=o.queryString;return y().Observable.defer((function(){return O().post(i,a,{timeout:6e4,responseType:"arraybuffer",headers:{Accept:"application/xml","Content-Type":"application/xml"}})}))},W=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.layer&&"vector"===r.layer.type)return M(e,t,r);var n=M(e,t,r),o=n.data,a=n.queryString;return y().Observable.defer((function(){return O().post(a,o,I({timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}},null==r?void 0:r.requestOptions))})).let(h.oB).map((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=T(e,j),o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).startIndex,a=arguments.length>2?arguments[2]:void 0;return a>t&&a===o+r.length&&t===r.length?I(I({},n),{},{features:r,totalFeatures:a}):I(I({},n),{},{features:r,totalFeatures:t})}(e.data,function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination||!u()(e.startIndex)&&!u()(e.maxFeatures)&&{startIndex:e.startIndex,maxFeatures:e.maxFeatures}}(t,r),r.totalFeatures)}))},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=l.sortOptions,u=l.propertyName,p=T(l,A);return W(r.url||n,a&&"object"===x(a)?I(I({},a),{},{typeName:o||a.typeName}):F(_(o,[].concat(R(s?[L(s.sortBy,s.sortOrder)]:[]),R(u?[k(u)]:[]),R(a?c()(a):[]))),p),p).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!s&&u&&u[0])return W(r.url||n,a&&"object"===x(a)?I(I({},a),{},{typeName:o||a.typeName}):F(_(o,[L(i()(u)?u[0]:u)].concat(R(u?[k(u)]:[]),R(a?c()(a):[]))),p),p);throw e}))},Z=function(e){var t=e.layer;return y().Observable.defer((function(){return O().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,a=e.url,i=e.describeFeatureTypeURL,l=o().parse((0,P.eW)(i||n.url||a),!0);return o().format(I(I({},l),{},{search:void 0,query:I(I({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(h.oB)},Y=function(e){var t=e.layer;return y().Observable.defer((function(){return O().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,a=e.url,i=(0,w.Fh)({name:t,url:n&&n.url||a}),l=o().parse(i,!0);return o().format(I(I({},l),{},{search:void 0,query:I(I({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(h.oB).switchMap((function(e){return y().Observable.bindNodeCallback((function(e,t){return(0,m.parseString)(e,{tagNameProcessors:[b.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},199767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>b,XA:()=>v,fA:()=>O,gN:()=>g,p5:()=>w,Rr:()=>h,DK:()=>E,En:()=>S,Tr:()=>P,t$:()=>j,XJ:()=>A,Dx:()=>R,Jy:()=>x});var n=r(472500),o=r.n(n),a=r(666654),i=r.n(a),l=r(747037),c=r.n(l),s=r(701469),u=r.n(s),p=r(683608),f=r.n(p);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==d(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},v=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},O=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},g=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},w=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},h=function(e){return/\bCDATA\b/.test(e)?e:"<![CDATA[".concat(e,"]]>")},E=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},S=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},P=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},j=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},A=function(e){return b("writeParameters",v(w("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},R=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},D=function(e,t){var r=o().parse(e,!0),n=r.pathname;return(i()(r.pathname,"wfs")||i()(r.pathname,"wms"))&&(n=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),o().format(m(m({},r),{},{search:null,pathname:n,query:m(m({service:"WPS"},t),r.query)}))},x=function(e,t){if(e&&c()(e))return D(e,t);if(u()(e)){var r=f()(0,e.length-1);return D(e[r],t)}return e}},472747:(e,t,r)=>{"use strict";r.d(t,{l:()=>c});var n=r(49977),o=r(375875),a=r.n(o),i=r(510284),l=r(199767),c=function(e,t){return n.Observable.defer((function(){return a().get((0,l.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(i.oB)}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>h,W5:()=>E,ai:()=>j,RW:()=>A,dr:()=>R,mG:()=>D,ZP:()=>x});var n=r(406557),o=r.n(n),a=r(49977),i=r(505055),l=r(507526),c=r(375875),s=r.n(c),u=r(199767);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){var n,o,a;n=e,o=t,a=r[t],(o=m(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}function b(e){var t="function"==typeof Map?new Map:void 0;return b=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(v())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&O(o,r.prototype),o}(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),O(r,e)},b(e)}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){function t(e,r){var n,o,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=this,a=t,i=[e],a=g(a),n=function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(o,v()?Reflect.construct(a,i||[],g(o).constructor):a.apply(o,i))).name="WPSExecuteError",n.code=r||e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(b(Error)),h=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},E=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.Observable.defer((function(){return s().get((0,u.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),y({headers:{Accept:"application/xml"}},r))}))},S=function(e,t){var r,n,a=function(e){var t,r,n,a,i,l,c,s,u,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),y=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=y&&y.ProcessAccepted?{status:"ProcessAccepted"}:null!=y&&y.ProcessStarted?{status:"ProcessStarted"}:null!=y&&y.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(n=e.ExecuteResponse.ProcessOutputs)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.Output)}:null!=y&&y.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==y||null===(i=y.ProcessFailed)||void 0===i||null===(l=i[0])||void 0===l||null===(c=l.ExceptionReport)||void 0===c||null===(s=c[0])||void 0===s||null===(u=s.Exception)||void 0===u||null===(p=u[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=y&&y.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===a.status)throw new w(a.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===a.status)throw new w("UnexpectedProcessStatus");if("ProcessSucceeded"===a.status)return{succeeded:!0,data:a.data};var i=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(n=r.$)||void 0===n?void 0:n.statusLocation;if(!i)throw new w("NoStatusLocation");var l=i.indexOf("executionId=");if(-1===l)throw new w("NoExecutionId");var c=i.slice(l+12),s=c.indexOf("&");return{succeeded:!1,executionId:-1===s?c:c.slice(0,s)}},P=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},j=function(e){var t,r,n,o,a;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(a=o.LiteralData)||void 0===a?void 0:a[0]}:null},A=function(e){var t,r,n,o,a,i;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(a=o[0])||void 0===a||null===(i=a.$)||void 0===i?void 0:i.mimeType}:null},R=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return[P].concat((r=t||[],function(e){if(Array.isArray(e))return f(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(t){return t(e)})).reduce((function(e,t){return t?y(y({},e),t):e}),{});var r}))}},D=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.executeStatusUpdateInterval,c=void 0===o?2e3:o,p=r.outputsExtractor,f=function(e){return a.Observable.defer((function(){return new Promise((function(t,r){return(0,i.parseString)(e,{tagNameProcessors:[l.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.Observable.defer((function(){return s().post((0,u.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,y({headers:{"Content-Type":"application/xml"}},r))}))}(e,t,n).catch((function(e){if(e.__CANCEL__)throw e;throw new w("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?f(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):a.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,o=t.originalData;if("application/xml"!==n)return a.Observable.of(r);if(null==r||!r.ExecuteResponse)return a.Observable.of(o);var i=S(r,p),l=i.succeeded,s=i.data,u=i.executionId;if(l)return a.Observable.of(s);var d=a.Observable.interval(c).take(1).flatMap((function(){return E(e,u).catch((function(){throw new w("GetExecutionStatusXHRFailed")})).flatMap((function(e){return f(e.data).flatMap((function(e){var t=S(e,p);return t.succeeded?a.Observable.of(t.data):d}))}))}));return d}))};const x=D},439235:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Cr});var n={};r.r(n),r.d(n,{checkExportDataEntriesEpic:()=>gr,checkWPSAvailabilityEpic:()=>dr,closeExportDownload:()=>vr,fetchFormatsWFSDownload:()=>mr,openDownloadTool:()=>yr,resetExportDataResultsOnLogout:()=>hr,serializeCookieOnExportDataChange:()=>wr,setExportDataResultsOnLoginSuccessAndMapConfigLoaded:()=>Er,showInfoBubbleMessageEpic:()=>Or,startFeatureExportDownload:()=>br});var o=r(124852),a=r.n(o),i=r(171703),l=r(22222),c="LAYERDOWNLOAD:CHECK_WPS_AVAILABILITY",s="LAYERDOWNLOAD:CHECKING_WPS_AVAILABILITY",u="LAYERDOWNLOAD:DOWNLOAD_FEATURES",p="LAYERDOWNLOAD:DOWNLOAD_FINISHED",f="LAYERDOWNLOAD:FORMAT_SELECTED",d="LAYERDOWNLOAD:CLEAR_DOWNLOAD_OPTIONS",y="LAYERDOWNLOAD:FORMAT_FETCH",m="LAYERDOWNLOAD:FORMAT_UPDATE",b="LAYERDOWNLOAD:SET_WPS_AVAILABLE",v="LAYERDOWNLOAD:SET_SERVICE",O="LAYERDOWNLOAD:SET_EXPORT_DATA_RESULTS",g="LAYERDOWNLOAD:ADD_EXPORT_DATA_RESULT",w="LAYERDOWNLOAD:UPDATE_EXPORT_DATA_RESULT",h="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULT",E="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULTS",S="LAYERDOWNLOAD:CHECK_EXPORT_DATA_ENTRIES",P="LAYERDOWNLOAD:CHECKING_EXPORT_DATA_ENTRIES",j="LAYERDOWNLOAD:SERIALIZE_COOKIE",A="LAYERDOWNLOAD:SHOW_INFO_BUBBLE_MESSAGE",R="LAYERDOWNLOAD:SHOW_INFO_BUBBLE",D="LAYERDOWNLOAD:SET_INFO_BUBBLE_MESSAGE",x=function(e){return{type:s,checking:e}},T=function(e,t){return{type:f,key:e,value:t}},N=function(){return{type:p}},I=function(e){return{type:b,value:e}},C=function(e){return{type:v,service:e}},F=function(e){return{type:O,results:e}},_=function(e,t){return{type:w,id:e,newProps:t}},L=function(e){return{type:P,checking:e}},k=function(e,t,r,n){return{type:A,msgId:e,msgParams:t,level:r,duration:n}},M=function(e){return{type:R,show:e}},G=r(782904),W=r(580416),U=r(731255),Z=r(675110),Y=r(824260),B=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.service},q=(0,l.P1)(U.Rd,Y.X1,Z.Iz,(function(e,t,r){return e?t:null!=r&&r.name?{featureTypeName:r.name,filterType:"OGC",ogcVersion:"1.1.0"}:null})),V=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.results},X=r(308316),H=r(45697),z=r.n(H),K=r(630998),Q=r.n(K),$=r(727418),J=r.n($),ee=r(480681),te=r(472986),re=r.n(te),ne=r(532425),oe=r(807472),ae=r(399534),ie=r(805346),le=r(135400),ce=r(743129),se=r(227361),ue=r.n(se),pe=r(91175),fe=r.n(pe),de=r(747037),ye=r.n(de),me=r(145869);function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const ve=function(e){var t,r,n=e.cropDataSetVisible,o=void 0!==n&&n,i=e.cropDataSetEnabled,l=void 0!==i&&i,c=e.donwloadFilteredVisible,s=void 0!==c&&c,u=e.downloadFilteredEnabled,p=void 0!==u&&u,f=e.advancedOptionsVisible,d=void 0!==f&&f,y=e.compressionOptions,m=void 0===y?["CCITT RLE","LZW","JPEG","ZLib","PackBits","Deflate"]:y,b=e.selectedCompression,v=e.tileWidth,O=e.tileHeight,g=e.quality,w=e.onChange,h=void 0===w?function(){}:w,E=(t=a().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),S=E[0],P=E[1];return a().createElement(a().Fragment,null,o&&a().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},a().createElement(me.Z,{checked:l,onClick:function(e){return h("cropDataSet",e)}}),a().createElement(ie.Z,{msgId:"layerdownload.cropDataSet"})),s&&a().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},a().createElement(me.Z,{checked:p,onClick:function(e){return h("downloadFilteredDataSet",e)}}),a().createElement(ie.Z,{msgId:"layerdownload.downloadFilteredDataSet"})),d&&a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-options"},a().createElement(ee.zx,{className:"no-border",onClick:function(){return P(!S)}},a().createElement(ee.gG,{glyph:"chevron-".concat(S?"down":"right")})),a().createElement(ie.Z,{msgId:"layerdownload.advancedOptions"})),S&&d&&a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced"},a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},a().createElement(ie.Z,{msgId:"layerdownload.compression"}),a().createElement(ce.ZP,{clearable:!0,value:b,options:m.map((function(e){return ye()(e)?{value:e,label:e}:e})),onChange:function(e){return h("compression",null==e?void 0:e.value)}})),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},a().createElement(ie.Z,{msgId:"layerdownload.quality"}),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},a().createElement(ee.NI,{placeholder:"0.75",type:"number",min:"0",max:"1",value:g||"",onChange:function(e){return h("quality",e.target.value)}}))),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},a().createElement(ie.Z,{msgId:"layerdownload.tileWidth"}),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},a().createElement(ee.NI,{placeholder:"256",type:"number",min:"0",value:v||"",onChange:function(e){return h("tileWidth",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),a().createElement("span",null,"px"))),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},a().createElement(ie.Z,{msgId:"layerdownload.tileHeight"}),a().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},a().createElement(ee.NI,{placeholder:"256",type:"number",min:"0",value:O||"",onChange:function(e){return h("tileHeight",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),a().createElement("span",null,"px")))))};function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,je(n.key),n)}}function we(e,t,r){return t=Ee(t),function(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,he()?Reflect.construct(t,r||[],Ee(e).constructor):t.apply(e,r))}function he(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(he=function(){return!!e})()}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ee(e)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Se(e,t)}function Pe(e,t,r){return(t=je(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:t+""}var Ae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(r=we(this,t,[e]),"getSelectedFormat",(function(){return ue()(r.props,"downloadOptions.selectedFormat")})),Pe(r,"getSelectedSRS",(function(){return ue()(r.props,"downloadOptions.selectedSrs")||r.props.defaultSrs||ue()(fe()(r.props.srsList),"name")})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e,t=this;return a().createElement("form",null,!this.props.hideServiceSelector&&this.props.wpsAvailable&&this.props.wfsAvailable&&a().createElement(a().Fragment,null,a().createElement("label",null,a().createElement(ie.Z,{msgId:"layerdownload.service"})),a().createElement(ce.ZP,{clearable:!1,value:this.props.service,onChange:function(e){return t.props.setService(e.value)},options:this.props.services})),a().createElement("label",null,a().createElement(ie.Z,{msgId:"layerdownload.format"})),a().createElement(ce.ZP,{clearable:!1,isLoading:this.props.formatsLoading,onOpen:function(){return t.props.formatOptionsFetch(t.props.layer)},value:null===(e=this.props.downloadOptions)||void 0===e?void 0:e.selectedFormat,noResultsText:a().createElement(ie.Z,{msgId:"layerdownload.format"}),onChange:function(e){return t.props.onChange("selectedFormat",e.value)},options:this.props.formats.map((function(e){return{value:e.name,label:e.label||e.name}}))}),a().createElement("label",null,a().createElement(ie.Z,{msgId:"layerdownload.srs"})),a().createElement(ce.ZP,{clearable:!1,value:this.getSelectedSRS(),onChange:function(e){return t.props.onChange("selectedSrs",e.value)},options:this.props.srsList.map((function(e){return{value:e.name,label:e.label||e.name}}))}),this.props.wpsOptionsVisible&&a().createElement(ve,{cropDataSetVisible:!0,donwloadFilteredVisible:this.props.downloadFilteredVisible,advancedOptionsVisible:this.props.wpsAdvancedOptionsVisible,cropDataSetEnabled:this.props.downloadOptions.cropDataSet,downloadFilteredEnabled:this.props.downloadOptions.downloadFilteredDataSet,selectedCompression:this.props.downloadOptions.compression,quality:this.props.downloadOptions.quality,tileWidth:this.props.downloadOptions.tileWidth,tileHeight:this.props.downloadOptions.tileHeight,onChange:this.props.onChange}),this.props.virtualScroll?null:a().createElement(ee.XZ,{checked:this.props.downloadOptions.singlePage,onChange:function(){return t.props.onChange("singlePage",!t.props.downloadOptions.singlePage)}},a().createElement(ie.Z,{msgId:"layerdownload.downloadonlycurrentpage"})))}}])&&ge(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Pe(Ae,"propTypes",{wpsAvailable:z().bool,wfsAvailable:z().bool,service:z().string,downloadOptions:z().object,formatOptionsFetch:z().func,formats:z().array,srsList:z().array,setService:z().func,onChange:z().func,defaultSrs:z().string,wpsOptionsVisible:z().bool,wpsAdvancedOptionsVisible:z().bool,downloadFilteredVisible:z().bool,layer:z().object,formatsLoading:z().bool,virtualScroll:z().bool,services:z().arrayOf(z().object),hideServiceSelector:z().bool}),Pe(Ae,"defaultProps",{wpsAvailable:!1,wfsAvailable:!0,service:"wps",downloadOptions:{},formatsLoading:!1,formats:[],srsList:[],wpsOptionsVisible:!1,wpsAdvancedOptionsVisible:!1,downloadFilteredVisible:!1,virtualScroll:!0,services:[{value:"wps",label:"WPS"},{value:"wfs",label:"WFS"}],hideServiceSelector:!1});const Re=Ae;var De=r(38560),xe=r(196958);function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ke(n.key),n)}}function Ie(e,t,r){return t=Fe(t),function(e,t){if(t&&("object"===Te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ce()?Reflect.construct(t,r||[],Fe(e).constructor):t.apply(e,r))}function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}function Fe(e){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fe(e)}function _e(e,t){return _e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_e(e,t)}function Le(e,t,r){return(t=ke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Te(t)?t:t+""}var Me=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return Le(e=Ie(this,t,[].concat(n)),"onClose",(function(){e.props.onClose()})),Le(e,"renderIcon",(function(){return e.props.loading?a().createElement("div",{style:{float:"left"}},a().createElement(re(),{spinnerName:"circle",noFadeIn:!0})):a().createElement(ee.gG,{glyph:"download"})})),Le(e,"handleExport",(function(){var t=e.props,r=t.url,n=t.filterObj,o=t.downloadOptions,a=t.defaultSrs,i=t.srsList,l=t.onExport,c=t.layer,s=t.attributes,u=t.customAttributeSettings,p=o&&o.selectedSrs||a||(i[0]||{}).name,f=(0,xe.Pf)(s,u);l(r||c.url,n,J()({},o,{selectedSrs:p},{propertyName:f}))})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}(t,e),r=t,(n=[{key:"componentDidUpdate",value:function(e){this.props.enabled!==e.enabled&&this.props.enabled&&(this.props.onClearDownloadOptions(),"wms"===this.props.layer.type&&this.props.onCheckWPSAvailability(this.props.url||this.props.layer.url,this.props.defaultSelectedService))}},{key:"render",value:function(){var e,t,r,n=this,o=function(e){return n.props.formats.filter((function(t){var r,o,a=t.validServices,i=t.type,l=void 0===i?"vector":i;return(!a||Q()(a,(function(t){return t===e}))>-1)&&("vector"===l&&(null===(r=n.props.layer.search)||void 0===r?void 0:r.url)||"raster"===l&&!(null!==(o=n.props.layer.search)&&void 0!==o&&o.url))}))},i=o("wfs"),l=o("wps"),c=i.length>0?i.filter((function(e){return n.props.wfsFormats.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))})):this.props.wfsFormats,s=Boolean(null===(e=this.props.layer.search)||void 0===e?void 0:e.url);return this.props.enabled?a().createElement(ae.Z,null,a().createElement(oe.Z,{id:"mapstore-export",draggable:!1,modal:!0},a().createElement("span",{role:"header"},a().createElement("span",{className:"about-panel-title"},a().createElement(ie.Z,{msgId:"layerdownload.title"})),a().createElement("button",{onClick:this.onClose,className:"settings-panel-close close"},this.props.closeGlyph?a().createElement(ee.gG,{glyph:this.props.closeGlyph}):a().createElement("span",null,"×"))),a().createElement("div",{role:"body"},this.props.checkingWPSAvailability?a().createElement(ne.Z,{size:100,style:{margin:"0 auto"}}):this.props.wpsAvailable||s?a().createElement(Re,{wpsAvailable:this.props.wpsAvailable,wfsAvailable:s,service:this.props.service,downloadOptions:this.props.downloadOptions,setService:this.props.setService,onChange:this.props.onDownloadOptionChange,formatOptionsFetch:"wfs"===this.props.service?this.props.onFormatOptionsFetch:function(){},formatsLoading:this.props.formatsLoading,formats:"wfs"===this.props.service?c:l,srsList:this.props.srsList,defaultSrs:this.props.defaultSrs,wpsOptionsVisible:"wps"===this.props.service,wpsAdvancedOptionsVisible:!(null!==(t=this.props.layer.search)&&void 0!==t&&t.url),downloadFilteredVisible:!(null===(r=this.props.layer.search)||void 0===r||!r.url),layer:this.props.layer,virtualScroll:this.props.virtualScroll,customAttributesSettings:this.props.customAttributeSettings,attributes:this.props.attributes,hideServiceSelector:this.props.hideServiceSelector}):a().createElement(le.Z,{title:a().createElement(ie.Z,{msgId:"layerdownload.noSupportedServiceFound"})})),!this.props.checkingWPSAvailability&&a().createElement("div",{role:"footer"},a().createElement(De.Z,{bsStyle:"primary",className:"download-button",disabled:!this.props.downloadOptions.selectedFormat||this.props.loading,onClick:this.handleExport},this.renderIcon()," ",a().createElement(ie.Z,{msgId:"layerdownload.export"}))))):null}}])&&Ne(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(a().Component);Le(Me,"propTypes",{filterObj:z().object,closeGlyph:z().string,url:z().string,wpsAvailable:z().bool,service:z().string,defaultSelectedService:z().string,enabled:z().bool,loading:z().bool,checkingWPSAvailability:z().bool,onClose:z().func,onExport:z().func,onCheckWPSAvailability:z().func,setService:z().func,onDownloadOptionChange:z().func,onClearDownloadOptions:z().func,onFormatOptionsFetch:z().func,downloadOptions:z().object,wfsFormats:z().array,formats:z().array,srsList:z().array,defaultSrs:z().string,layer:z().object,formatsLoading:z().bool,virtualScroll:z().bool,customAttributeSettings:z().object,attributes:z().array,hideServiceSelector:z().bool}),Le(Me,"defaultProps",{onExport:function(){},onClose:function(){},onCheckWPSAvailability:function(){},setService:function(){},onDownloadOptionChange:function(){},onClearDownloadOptions:function(){},onFormatOptionsFetch:function(){},checkingWPSAvailability:!1,layer:{},closeGlyph:"1-close",wpsAvailable:!1,service:"wfs",defaultSelectedService:"wps",wfsFormats:[],formats:[{name:"application/json",label:"GeoJSON",type:"vector",validServices:["wps"]},{name:"application/arcgrid",label:"ArcGrid",type:"raster",validServices:["wps"]},{name:"image/tiff",label:"TIFF",type:"raster",validServices:["wps"]},{name:"application/wfs-collection-1.0",label:"wfs-collection-1.0",type:"vector",validServices:["wps"]},{name:"application/wfs-collection-1.1",label:"wfs-collection-1.1",type:"vector",validServices:["wps"]},{name:"application/zip",label:"Shapefile",type:"vector",validServices:["wps"]},{name:"text/csv",label:"CSV",type:"vector",validServices:["wps"]}],formatsLoading:!1,srsList:[{name:"native",label:"Native"},{name:"EPSG:4326",label:"WGS84"}],virtualScroll:!0,downloadOptions:{},hideServiceSelector:!1});const Ge=Me;var We=r(982030),Ue=r(950966),Ze=r(624262),Ye=a().createElement(ee.zx,{bsStyle:"primary",bsSize:"small",className:"mapstore-exportdataresults-item-failed"},a().createElement(ee.gG,{glyph:"exclamation-sign"}));const Be=(0,We.Z)((function(e){var t=e.results;return!(void 0===t?[]:t).length}),{title:a().createElement(ie.Z,{msgId:"exportDataResults.emptyStateMessage"})})((function(e){var t=e.loading,r=void 0!==t&&t,n=e.results,o=void 0===n?[]:n,i=e.currentLocale,l=e.onRemoveResult,c=void 0===l?function(){}:l;return r?a().createElement(ne.Z,{size:100,style:{margin:"0 auto",padding:"10px"}}):a().createElement("div",{className:"mapstore-exportdataresults-container"},o.map((function(e){var t=e.id,r=e.layerName,n=e.layerTitle,o=e.startTime,l=e.status,s=e.result,u=(0,Ze.in)({name:r,title:n},i),p=new Date(o),f=function(e){return e<10?"0".concat(e):"".concat(e)},d="".concat(f(p.getDate()),"/").concat(f(p.getMonth()+1),"/").concat(p.getFullYear()," ").concat(f(p.getHours()),":").concat(f(p.getMinutes()));return a().createElement("div",{key:t,className:"mapstore-exportdataresults-item"},a().createElement("div",{className:"mapstore-exportdataresults-item-name"},u),a().createElement("div",{className:"mapstore-exportdataresults-item-date"},d),a().createElement("div",{className:"mapstore-exportdataresults-item-buttons"},"pending"===l&&a().createElement(ne.Z,{size:22,style:{marginLeft:"2px"}}),"failed"===l&&s&&s.msgId?a().createElement(Ue.Z,{placement:"top",overlay:a().createElement(ee.u,{id:"exportresults-failure-tooltip"},a().createElement(ie.Z,{msgId:s.msgId,msgParams:s.msgParams}))},Ye):null,"failed"!==l||s&&s.msgId?null:Ye,"completed"===l&&a().createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},a().createElement(ee.zx,{bsStyle:"primary",bsSize:"small"},a().createElement(ee.gG,{glyph:"floppy-disk"}))),a().createElement(ee.zx,{bsStyle:"primary",bsSize:"small",onClick:function(){return c(t)}},a().createElement(ee.gG,{glyph:"trash"}))))})))}));var qe=r(294184),Ve=r.n(qe);function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const He=function(e){var t,r=e.show,n=e.arrowDirection,o=void 0===n?"bottom":n,i=e.className,l=e.containerClassName,c=e.children;return a().createElement("div",{className:Ve().apply(void 0,["mapstore-info-bubble"].concat((t=r?["mapstore-info-bubble-visible"]:[],function(e){if(Array.isArray(e))return Xe(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xe(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]))},a().createElement("div",{className:Ve()("mapstore-info-bubble-container",l)},a().createElement("div",{className:Ve()("mapstore-info-bubble-arrow-container","arrow-".concat(o))},a().createElement("div",{className:"mapstore-info-bubble-arrow"})),a().createElement("div",{className:"mapstore-info-bubble-inner"},c)))},ze=function(e){var t=e.msgId,r=e.msgParams,n=e.level,o=void 0===n?"normal":n,i=e.className;return a().createElement("div",{className:Ve()("mapstore-info-bubble-default-inner","mapstore-info-bubble-default-inner-level-".concat(o),i)},t?a().createElement(ie.Z,{msgId:t,msgParams:r}):null)};var Ke=r(921533),Qe=r(656903),$e=(0,Ke.Z)(Qe.Z),Je=r(49977),et=r.n(Je),tt=r(313311),rt=r.n(tt),nt=r(478718),ot=r.n(nt),at=r(493220),it=r.n(at),lt=r(984596),ct=r.n(lt),st=r(178598),ut=r(505055),pt=r(507526),ft=r(423570),dt=r.n(ft),yt=r(275982),mt=r(95797),bt=r(197395),vt=r(263516),Ot=r(881808),gt=r(607147),wt=r(800827),ht=r(274621),Et=r(886850),St=r(472747),Pt=r(3674),jt=r.n(Pt),At=r(957557),Rt=r.n(At),Dt=r(199767),xt=r(27835);function Tt(e){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tt(e)}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=Tt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==Tt(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){if(e){if("string"==typeof e)return _t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Lt=function(e){var t=e.type,r=e.data;return"TEXT"===t?(0,Dt.XA)((0,Dt.p5)((0,Dt.Rr)(r.data),r.mimeType)):(0,Dt.fA)(r.mimeType,r.href,r.method,(0,Dt.Rr)(r.requestBodyData))},kt=function(e){var t=e.layerName,r=e.ROI,n=e.roiCRS,o=e.dataFilter,a=e.targetCRS;return(0,xt.Uh)("gs:DownloadEstimator",[(0,Dt.qP)("layerName",(0,Dt.XA)((0,Dt.gN)(t)))].concat(Ct(r?[(0,Dt.qP)("ROI",Lt(r))]:[]),Ct(n?[(0,Dt.qP)("RoiCRS",(0,Dt.XA)((0,Dt.gN)(n)))]:[]),Ct(o?[(0,Dt.qP)("filter",Lt(o))]:[]),Ct(a?[(0,Dt.qP)("targetCRS",(0,Dt.XA)((0,Dt.gN)(a)))]:[])))},Mt=function(e){var t=e.layerName,r=e.dataFilter,n=e.outputFormat,o=e.targetCRS,a=e.roiCRS,i=e.ROI,l=e.cropToROI,c=e.asynchronous,s=e.outputAsReference,u=e.resultOutput,p=e.writeParameters;return(0,xt.Uh)("gs:Download",[(0,Dt.qP)("layerName",(0,Dt.XA)((0,Dt.gN)(t))),(0,Dt.qP)("outputFormat",(0,Dt.XA)((0,Dt.gN)(n)))].concat(Ct(i?[(0,Dt.qP)("ROI",Lt(i))]:[]),Ct(r?[(0,Dt.qP)("filter",Lt(r))]:[]),Ct(o?[(0,Dt.qP)("targetCRS",(0,Dt.XA)((0,Dt.gN)(o)))]:[]),Ct(a?[(0,Dt.qP)("RoiCRS",(0,Dt.XA)((0,Dt.gN)(a)))]:[]),[(0,Dt.qP)("cropToROI",(0,Dt.XA)((0,Dt.gN)(l?"true":"false")))],Ct(p&&jt()(p).length>0?[(0,Dt.XJ)(it()(p).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||Ft(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];return(0,Dt.Dx)(o,a)})).join(""))]:[])),(0,Dt.DK)(c?(0,Dt.Tr)(!0,!0,s?(0,Dt.t$)(u,!0,"result"):(0,Dt.En)("result",u)):(0,Dt.En)("result",u)))},Gt=function(e,t,r){if(e&&t){var n=(0,xt.mG)(e,kt({layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}),{outputsExtractor:(0,xt.dr)(xt.ai)}),o=t.resultOutput||t.outputFormat||"application/zip",a=(0,xt.mG)(e,Mt(It(It({},Rt()(t,"notifyDownloadEstimatorSuccess","attribute")),{},{outputAsReference:!!t.asynchronous&&t.outputAsReference,resultOutput:o})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(o)}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Je.Observable.of("DownloadEstimatorSuccess").concat(a):a;throw new Error("DownloadEstimatorFailed")}))}return Je.Observable.empty()},Wt=function(e,t,r){if(e&&t){var n=(0,xt.mG)(e,kt({layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}),{outputsExtractor:(0,xt.dr)(xt.ai)}),o=t.resultOutput||t.outputFormat||"application/zip",a=(0,xt.mG)(e,Mt(It(It({},Rt()(t,"notifyDownloadEstimatorSuccess","attribute","asynchronous","outputFormat")),{},{asynchronous:!0,outputAsReference:!0,resultOutput:"application/wfs-collection-1.0",outputFormat:"application/wfs-collection-1.0"})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, application/wfs-collection-1.0"}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?Je.Observable.of("DownloadEstimatorSuccess").concat(a):a;throw new Error("DownloadEstimatorFailed")})).mergeMap((function(n){if("DownloadEstimatorSuccess"===n)return Je.Observable.of("DownloadEstimatorSuccess");if(n&&1===(null==n?void 0:n.length))return(0,xt.mG)(e,function(e){var t=e.input,r=e.attribute,n=e.filter,o=e.asynchronous,a=e.outputAsReference,i=e.resultOutput;return(0,xt.Uh)("vec:Query",[(0,Dt.qP)("features",(0,Dt.fA)(t.mimeType,t.href.replace(/&/g,"&amp;"),"GET"))].concat(Ct(r?r.map((function(e){return(0,Dt.qP)("attribute",(0,Dt.XA)((0,Dt.gN)(e)))})):[]),Ct(n?[(0,Dt.qP)("filter",Lt(n))]:[])),(0,Dt.DK)(o?(0,Dt.Tr)(!0,!0,a?(0,Dt.t$)(i,!0,"result"):(0,Dt.En)("result",i)):(0,Dt.En)("result",i)))}(It(It({},Rt()(t,"notifyDownloadEstimatorSuccess")),{},{input:n[0],filter:null,outputAsReference:!!t.asynchronous&&t.outputAsReference,resultOutput:o})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(o)}});throw new Error("DownloadFailed")}))}return Je.Observable.empty()},Ut=r(86686),Zt=r(559407),Yt=r(916651),Bt=r(510284),qt=r(439156),Vt=r.n(qt),Xt=r(571142),Ht=r(838848);function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){var n,o,a,i;n=e,o=t,a=r[t],i=function(e,t){if("object"!=zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==zt(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $t(e){return function(e){if(Array.isArray(e))return er(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr={gml3:"GML3.1",GML2:"GML2","DXF-ZIP":"DXF-ZIP","application/vnd.google-earth.kml+xml":"KML","OGR-CSV":"OGR-CSV","OGR-FileGDB":"OGR-GeoDatabase","OGR-GPKG":"OGR-GeoPackage","OGR-KML":"OGR-KML","OGR-MIF":"OGR-MIF","OGR-TAB":"OGR-TAB","SHAPE-ZIP":"Shapefile",gml32:"GML3.2","application/json":"GeoJSON",csv:"CSV","application/x-gpkg":"GeoPackage",excel:"excel",excel2007:"excel2007"},rr=Vt()({wfsVersion:"1.1.0"}),nr=rr.getFeature,or=rr.query,ar=rr.sortBy,ir=rr.propertyName,lr=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null!==(e=null==t?void 0:t.params)&&void 0!==e?e:{};return null==r?void 0:r[Object.keys(r).find((function(e){return"cql_filter"===(null==e?void 0:e.toLowerCase())}))]},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.filterObj,n=void 0===r?{}:r,o=e.layerFilter,a=e.layer,i=e.downloadOptions,l=void 0===i?{}:i,c=e.options,s=c.sortOptions,u=c.propertyNames,p=lr(a),f=(0,Ut.mergeFiltersToOGC)({ogcVersion:"1.1.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},o,n,p);return(0,Et.V6)(t,nr(or(n.featureTypeName,[].concat($t(s?[ar(s.sortBy,s.sortOrder)]:[]),$t(u?[ir(u)]:[]),$t(f?ct()(f):[])),{srsName:l.selectedSrs})),c,l.selectedFormat)},sr=function(e){var t=ue()(e,"filterObj.featureTypeName"),r=(0,Zt.y7)(ue()(e,"downloadOptions.selectedFormat"));return r&&r.extension?t+"."+r.extension:t},ur=function(e){return e.query&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes&&e.query.featureTypes[e.query.typeName].attributes[0]&&e.query.featureTypes[e.query.typeName].attributes[0].attribute||null},pr=function(e){switch(e.code){case"ProcessFailed":return{msgId:"layerdownload.wpsExecuteError.processFailed",msgParams:{exceptionReport:e.message}};case"NoStatusLocation":case"NoExecutionId":case"UnexpectedProcessStatus":return{msgId:"layerdownload.wpsExecuteError.badResponse",msgParams:{eCode:e.code}};case"ExecuteProcessXHRFailed":return{msgId:"layerdownload.wpsExecuteError.executeProcessXhrFailed"};case"GetExecutionStatusXHRFailed":return{msgId:"layerdonwload.wpsExecuteError.getExecutionStatusXhrFailed"};default:return{msgId:"layerdownload.wpsExecuteError.unexpectedError"}}},fr=function(e){var t=(0,ht.np)(e);if(null!=t&&t.id){var r=document.cookie.split(";").filter((function(e){return e.indexOf("exportDataResults_".concat(t.id,"="))>-1}))[0];if(r){var n=JSON.parse(decodeURIComponent(r.split("=")[1])).results;return et().Observable.of(F(n.filter((function(e){return"pending"!==e.status}))))}}return et().Observable.empty()},dr=function(e,t){return e.ofType(c).switchMap((function(e){var r=e.url,n=e.selectedService;return(0,St.l)(r,"gs:DownloadEstimator,gs:Download").switchMap((function(e){return et().Observable.defer((function(){return new Promise((function(t,r){return(0,ut.parseString)(e.data,{tagNameProcessors:[pt.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(e){var r,o,a,i,l,c,s,u,p,f=t.getState(),d=(0,Z.Iz)(f),y=[null==e||null===(r=e.ProcessDescriptions)||void 0===r||null===(o=r.ProcessDescription)||void 0===o||null===(a=o[0])||void 0===a||null===(i=a.Identifier)||void 0===i?void 0:i[0],null==e||null===(l=e.ProcessDescriptions)||void 0===l||null===(c=l.ProcessDescription)||void 0===c||null===(s=c[1])||void 0===s||null===(u=s.Identifier)||void 0===u?void 0:u[0]],m=Q()(y,(function(e){return"gs:DownloadEstimator"===e}))>-1&&Q()(y,(function(e){return"gs:Download"===e}))>-1,b=null===(p=d.search)||void 0===p?void 0:p.url,v=m&&("wps"===n||!b);return et().Observable.of(C(v?"wps":"wfs"),I(m),x(!1))})).catch((function(){return et().Observable.of(C("wfs"),I(!1),x(!1))})).startWith(x(!0))}))},yr=function(e){return e.ofType(W.HN).switchMap((function(e){var t;return et().Observable.from([(0,G.Xi)("layerdownload"),T("singlePage",!1)].concat($t(null!==(t=e.layer.search)&&void 0!==t&&t.url?[(0,mt.rP)(e.layer.url,{featureTypeName:e.layer.name})]:[])))}))},mr=function(e){return e.ofType(y).switchMap((function(e){return(0,Et.ED)(e).map((function(e){return t=function(e){var t=ue()(e,"WFS_Capabilities.OperationsMetadata.Operation"),r=rt()(t,(function(e){return"GetFeature"===e.name})),n=ue()(r,"Parameter"),o=rt()(n,(function(e){return"outputFormat"===e.name})).Value,a=ot()(tr,o);return it()(a).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,l=[],c=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(t,r)||Jt(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],label:n[1]}}))}(e),{type:m,wfsFormats:t};var t}))}))},br=function(e,t){return e.ofType(u).switchMap((function(r){var n,o,a,i,l,c,s,u=t.getState(),p=(u.featuregrid||{}).virtualScroll,f=void 0!==p&&p,d=B(u),y=(0,Z.Iz)(u),m=(0,wt.pQ)(u),b=(0,X.Pz)(u),v=r.downloadOptions.propertyName?[(0,Ht.dm)((0,Y.qj)(u,y.name))].concat($t(r.downloadOptions.propertyName)):null,O=y.layerFilter;return"wps"===d?(o=!(null===(n=y.search)||void 0===n||!n.url),a=r.downloadOptions.cropDataSet&&!!m&&!!m.bounds,i=lr(y),l={layerName:y.name,outputFormat:r.downloadOptions.selectedFormat,asynchronous:!0,outputAsReference:!0,targetCRS:r.downloadOptions.selectedSrs&&"native"!==r.downloadOptions.selectedSrs?r.downloadOptions.selectedSrs:void 0,cropToROI:a,dataFilter:r.downloadOptions.downloadFilteredDataSet?{type:"TEXT",data:{mimeType:"text/xml; subtype=filter/1.1",data:(0,Ut.mergeFiltersToOGC)({ogcVersion:"1.1.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},y.layerFilter,r.filterObj,i)}}:void 0,ROI:a?{type:"TEXT",data:{mimeType:"application/wkt",data:(0,Xt.x)((0,Yt.bboxToFeatureGeometry)(m.bounds))}}:void 0,roiCRS:a?m.crs||"EPSG:4326":void 0,writeParameters:Qt(Qt(Qt({},r.downloadOptions.tileWidth?{tilewidth:r.downloadOptions.tileWidth}:{}),r.downloadOptions.tileHeight?{tileheight:r.downloadOptions.tileHeight}:{}),r.downloadOptions.compression?Qt({compression:r.downloadOptions.compression},r.downloadOptions.quality?{quality:r.downloadOptions.quality}:{}):{}),notifyDownloadEstimatorSuccess:!0,attribute:o&&v?v:void 0},c={id:dt()(),layerName:y.name,layerTitle:y.title,status:"pending"},s={outputsExtractor:(0,xt.dr)(xt.RW)},(o&&v?Wt:Gt)(r.url,l,s).takeUntil(e.ofType(h).filter((function(e){return e.id===c.id})).take(1)).flatMap((function(e){var t,r;return"DownloadEstimatorSuccess"===e?et().Observable.of((r=Qt(Qt({},c),{},{startTime:(new Date).getTime()}),{type:g,result:r}),k("layerdownload.exportResultsMessages.newExport"),N(),(0,G.Xi)("layerdownload","enabled")):(t=et().Observable).of.apply(t,$t(e&&e.length>0&&e[0].href?[_(c.id,{status:"completed",result:e[0].href}),k("layerdownload.exportResultsMessages.exportSuccess",{layerTitle:(0,Ze.in)(y,b)},"success")]:[_(c.id,{status:"failed",result:{msgId:"layerdonwload.exportResultsMessages.invalidHref"}}),k("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,Ze.in)(y,b)},"danger")]))})).catch((function(e){var t;return(t=et().Observable).of.apply(t,$t(e.message&&e.message.indexOf("DownloadEstimator")>-1?[(0,bt.vU)({error:e,title:"layerdownload.error.downloadEstimatorTitle",message:"layerdownload.error.downloadEstimatorFailed"}),N()]:[_(c.id,{status:"failed",result:pr(e)}),k("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,Ze.in)(y,b)},"danger")]))}))):cr({url:r.url,downloadOptions:r.downloadOptions,filterObj:r.filterObj,layer:y,layerFilter:O,options:{pagination:!f&&ue()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,propertyNames:v}}).do((function(e){var t=e.data;if("application/xml"===e.headers["content-type"]){var r=String.fromCharCode.apply(null,new Uint8Array(t));if(0===r.indexOf("<ows:ExceptionReport"))throw r}})).catch((function(){return cr({url:r.url,downloadOptions:r.downloadOptions,filterObj:r.filterObj,layer:y,layerFilter:O,options:{pagination:!f&&ue()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,sortOptions:(e=ur(t.getState()),e?{sortBy:e,sortOrder:"A"}:{}),propertyNames:r.downloadOptions.propertyName?[].concat($t(r.downloadOptions.propertyName),[(0,Ht.dm)((0,Y.qj)(u,y.name))]):null}}).do((function(e){var t=e.data,n=e.headers;if("application/xml"===n["content-type"]){var o=String.fromCharCode.apply(null,new Uint8Array(t));if(0===o.indexOf("<ows:ExceptionReport"))throw o}(0,st.saveAs)(new Blob([t],{type:n&&n["content-type"]}),sr(r))}));var e})).do((function(e){var t=e.data,n=e.headers;(0,st.saveAs)(new Blob([t],{type:n&&n["content-type"]}),sr(r))})).map((function(){return N()})).catch((function(e){return et().Observable.of((0,bt.vU)({error:e,title:"layerdownload.error.title",message:"layerdownload.error.invalidOutputFormat",autoDismiss:5,position:"tr"}),N())}))}))},vr=function(e,t){return e.ofType(G.kM).filter((function(e){return"queryPanel"===e.control&&!(0,gt._d)(t.getState())&&(0,gt.lI)(t.getState())})).switchMap((function(){return et().Observable.of((0,G.Xi)("layerdownload"))}))},Or=function(e){return e.ofType(A).concatMap((function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return et().Observable.of((e=n.msgId,t=n.msgParams,r=n.level,{type:D,msgId:e,msgParams:t,level:r}),M(!0)).delay(10).concat(et().Observable.of(M(!1)).delay(n.duration||3e3)).concat(et().Observable.empty().delay(1e3))}))},gr=function(e,t){return e.ofType(S).exhaustMap((function(){var e=t.getState(),r=(V(e)||[]).filter((function(e){return"completed"===e.status}));return r.length>0?et().Observable.forkJoin(r.map((function(e){var t=e.result,r=t.indexOf("executionId="),n=t.slice(r),o=n.indexOf("&"),a=(o>-1?n.slice(0,o):n).slice(12),i=t.indexOf("?"),l=t.slice(0,i);return(0,xt.W5)(l,a).let(Bt.oB).catch((function(){return et().Observable.of(null)})).map((function(t){return t?null:e.id}))}))).flatMap((function(e){return et().Observable.of((t=e.filter((function(e){return!!e})),{type:E,ids:t}),{type:j},L(!1));var t})).startWith(L(!0)):et().Observable.empty()}))},wr=function(e,t){return e.ofType(g,h,w,j).filter((function(){return(0,ht.jl)(t.getState())})).do((function(){var e=t.getState(),r=V(e),n=(0,ht.np)(e).id,o=JSON.stringify({results:r});document.cookie="exportDataResults_".concat(n,"=").concat(encodeURIComponent(o))})).flatMap((function(){return et().Observable.empty()}))},hr=function(e){return e.ofType(Ot.ok).switchMap((function(){return e.ofType(vt.Nv).switchMap((function(){return et().Observable.of(F([]))})).takeUntil(e.ofType(yt.nk))}))},Er=function(e,t){return e.ofType(Ot.ok).switchMap((function(){return fr(t.getState()).concat(e.ofType(vt.XP).switchMap((function(){return fr(t.getState())})).takeUntil(e.ofType(yt.nk)))}))};function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function Pr(e){return function(e){if(Array.isArray(e))return jr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Dr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Dr(e,t,r){var n;return n=function(e,t){if("object"!=Sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Sr(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xr=r(322843),Tr=["onClick","selectedNodes","status","itemComponent","statusTypes"];function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nr.apply(this,arguments)}var Ir=(0,i.connect)((function(){return{}}),{onClick:W.LR})((function(e){var t,r=e.onClick,n=e.selectedNodes,o=e.status,i=e.itemComponent,l=e.statusTypes,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Tr),s=i,u=null==n||null===(t=n[0])||void 0===t?void 0:t.node;return![l.LAYER].includes(o)||!("wms"===(null==u?void 0:u.type)||null!=u&&u.search)||null!=u&&u.error?null:a().createElement(s,Nr({},c,{glyph:"download",tooltipId:"toc.toolDownloadTooltip",onClick:function(){var e;return r({url:(null===(e=u.search)||void 0===e?void 0:e.url)||u.url,name:u.name,id:u.id})}}))}));const Cr=(0,xr.rx)("LayerDownload",{component:(0,i.connect)((0,l.zB)({url:Y.Bu,filterObj:q,enabled:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled},downloadOptions:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.downloadOptions},loading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.loading},wfsFormats:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wfsFormats},formatsLoading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.formatsLoading},layer:Z.Iz,wpsAvailable:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wpsAvailable},service:B,checkingWPSAvailability:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingWPSAvailability},virtualScroll:function(e){return e&&e.featuregrid&&e.featuregrid.virtualScroll},customAttributeSettings:U.Xh,attributes:Y.L}),{onExport:function(e,t,r){return{type:u,url:e,filterObj:t,downloadOptions:r}},setService:C,onDownloadOptionChange:T,onClearDownloadOptions:function(){return{type:d}},onFormatOptionsFetch:function(e){return{type:y,layer:e}},onCheckWPSAvailability:function(e,t){return{type:c,url:e,selectedService:t}},onClose:function(){return(0,G.Xi)("layerdownload")}})(Ge),containers:{TOC:{doNotHide:!0,name:"LayerDownload",target:"toolbar",Component:Ir,position:11},FeatureEditor:{doNotHide:!0,name:"LayerDownload",position:20,target:"toolbar",Component:(0,i.connect)((0,l.zB)({isDownloadOpen:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled}}),{onClick:function(){return(0,G.Xi)("layerdownload")}})((function(e){var t=e.disabled,r=e.results,n=void 0===r?[]:r,o=e.mode,i=e.isDownloadOpen,l=e.onClick,c=void 0===l?function(){}:l;return a().createElement($e,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||0===n.length,active:i,visible:"VIEW"===o,onClick:c,glyph:"download"})}))},MapFooter:{doNotHide:!0,name:"LayerDownload",position:1,tool:(0,i.connect)((0,l.zB)({active:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.exportDataResults)||void 0===r?void 0:r.enabled},showInfoBubble:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.showInfoBubble},infoBubbleMessage:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.infoBubbleMessage},checkingExportDataEntries:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingExportDataEntries},results:V,currentLocale:X.Pz}),{onToggle:G.Xi.bind(null,"exportDataResults","enabled"),onActive:function(){return{type:S}},onRemoveResult:function(e){return{type:h,id:e}}})((function(e){var t=e.active,r=void 0!==t&&t,n=e.showInfoBubble,o=void 0!==n&&n,i=e.infoBubbleMessage,l=void 0===i?{}:i,c=e.checkingExportDataEntries,s=e.results,u=void 0===s?[]:s,p=e.currentLocale,f=e.onToggle,d=void 0===f?function(){}:f,y=e.onActive,m=void 0===y?function(){}:y,b=e.onRemoveResult;return a().useEffect((function(){r&&m()}),[r]),a().createElement(a().Fragment,null,u.length>0?a().createElement("div",{id:"mapstore-export-data-results-button-container"},a().createElement(Ue.Z,{placement:"left",overlay:a().createElement(ee.u,{id:"mapstore-export-data-results-tooltip"},a().createElement(ie.Z,{msgId:"exportDataResults.title"}))},a().createElement(ee.zx,{bsStyle:"primary",bsSize:"small",onClick:function(){return d()}},a().createElement(ee.gG,{glyph:"download"}))),a().createElement(He,{show:o,className:"mapstore-export"},a().createElement(ze,l))):null,a().createElement("div",null,r&&a().createElement(ae.Z,null,a().createElement(oe.Z,{id:"mapstore-export-data-results",draggable:!1,modal:!0},a().createElement("span",{role:"header"},a().createElement("span",{className:"about-panel-title"},a().createElement(ie.Z,{msgId:"exportDataResults.title"})),a().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},a().createElement(ee.gG,{glyph:"1-close"}))),a().createElement("div",{role:"body"},a().createElement(Be,{loading:c,results:u,currentLocale:p,onRemoveResult:b}))))))}))}},epics:n,reducers:{layerdownload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{downloadOptions:{singlePage:!0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Rr(Rr({},e),{},{loading:!0});case f:return Rr(Rr({},e),{},{downloadOptions:Rr(Rr({},e.downloadOptions),{},Dr({},t.key,t.value))});case d:return Rr(Rr({},e),{},{downloadOptions:{singlePage:!0}});case y:return Rr(Rr({},e),{},{layer:t.layer,wfsFormats:[],formatsLoading:!0});case p:return Rr(Rr({},e),{},{loading:!1});case m:return Rr(Rr({},e),{},{wfsFormats:t.wfsFormats,formatsLoading:!1});case v:return Rr(Rr({},e),{},{service:t.service});case b:return Rr(Rr({},e),{},{wpsAvailable:t.value});case s:return Rr(Rr({},e),{},{checkingWPSAvailability:t.checking});case O:return Rr(Rr({},e),{},{results:t.results});case g:return Rr(Rr({},e),{},{results:[].concat(Pr(e.results||[]),[t.result])});case w:var r=Q()(e.results||[],{id:t.id});return Rr(Rr({},e),{},{results:r>-1?[].concat(Pr(e.results.slice(0,r)),[Rr(Rr({},e.results[r]),t.newProps||{})],Pr(e.results.slice(r+1))):e.results});case h:return Rr(Rr({},e),{},{results:(e.results||[]).filter((function(e){return e.id!==t.id}))});case E:return Rr(Rr({},e),{},{results:(e.results||[]).filter((function(e){return-1===Q()(t.ids,(function(t){return t===e.id}))}))});case R:return Rr(Rr({},e),{},{showInfoBubble:t.show});case D:return Rr(Rr({},e),{},{infoBubbleMessage:{msgId:t.msgId,msgParams:t.msgParams,level:t.level}});case P:return Rr(Rr({},e),{},{checkingExportDataEntries:t.checking});default:return e}}}})},559407:(e,t,r)=>{"use strict";r.d(t,{Th:()=>a,Nk:()=>i,y7:()=>c});var n=r(91175),o=r.n(n),a={json:"ext-json",wmc:"ext-wmc"},i={json:"JSON",wmc:"WMC"},l=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}],c=function(e){return o()(l.filter((function(t){return t.outputFormat===e})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(e)}},945177:(e,t,r)=>{"use strict";var n=r(595318);t.__esModule=!0,t.default=void 0;var o,a=n(r(250139)),i="clearTimeout",l=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-s)),n=setTimeout(e,r);return s=t,n},c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};a.default&&["","webkit","moz","o","ms"].some((function(e){var t=c(e,"request");if(t in window)return i=c(e,"cancel"),l=function(e){return window[t](e)}}));var s=(new Date).getTime();(o=function(e){return l(e)}).cancel=function(e){window[i]&&"function"==typeof window[i]&&window[i](e)};var u=o;t.default=u,e.exports=t.default},178598:function(e,t,r){var n,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,a=/constructor/i.test(e.HTMLElement)||e.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()}),4e4)},s=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,p){p||(t=s(t));var f,d=this,y="application/octet-stream"===t.type,m=function(){!function(e,t,r){for(var n=(t=[].concat(t)).length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,e)}catch(e){l(e)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,o)return f=r().createObjectURL(t),void setTimeout((function(){var e,t;n.href=f,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),m(),c(f),d.readyState=d.DONE}));!function(){if((i||y&&a)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=i?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,d.readyState=d.DONE,m()},n.readAsDataURL(t),void(d.readyState=d.INIT)}f||(f=r().createObjectURL(t)),y?e.location.href=f:e.open(f,"_blank")||(e.location.href=f),d.readyState=d.DONE,m(),c(f)}()},p=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=s(e)),navigator.msSaveOrOpenBlob(e,t)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,function(e,t,r){return new u(e,t||e.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==r.amdD&&null!==r.amdO&&(void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n))},887157:(e,t,r)=>{var n=r(640554),o=r(588958);e.exports=function(e,t,r,a){var i=e.length;for((r=n(r))<0&&(r=-r>i?0:i+r),(a=void 0===a||a>i?i:n(a))<0&&(a+=i),a=r>a?0:o(a);r<a;)e[r++]=t;return e}},441761:(e,t,r)=>{var n=r(644239),o=r(637005);e.exports=function(e){return o(e)&&"[object Date]"==n(e)}},769877:e=>{var t=Math.floor,r=Math.random;e.exports=function(e,n){return e+t(r()*(n-e+1))}},819873:(e,t,r)=>{var n=r(887157),o=r(816612);e.exports=function(e,t,r,a){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&o(e,t,r)&&(r=0,a=i),n(e,t,r,a)):[]}},647960:(e,t,r)=>{var n=r(441761),o=r(307518),a=r(531167),i=a&&a.isDate,l=i?o(i):n;e.exports=l},683608:(e,t,r)=>{var n=r(769877),o=r(816612),a=r(418601),i=parseFloat,l=Math.min,c=Math.random;e.exports=function(e,t,r){if(r&&"boolean"!=typeof r&&o(e,t,r)&&(t=r=void 0),void 0===r&&("boolean"==typeof t?(r=t,t=void 0):"boolean"==typeof e&&(r=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=a(e),void 0===t?(t=e,e=0):t=a(t)),e>t){var s=e;e=t,t=s}if(r||e%1||t%1){var u=c();return l(e+u*(t-e+i("1e-"+((u+"").length-1))),t)}return n(e,t)}},588958:(e,t,r)=>{var n=r(829750),o=r(640554);e.exports=function(e){return e?n(o(e),0,4294967295):0}}}]);