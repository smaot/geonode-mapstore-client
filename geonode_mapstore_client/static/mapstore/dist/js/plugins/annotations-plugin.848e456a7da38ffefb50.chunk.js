/*! For license information please see annotations-plugin.848e456a7da38ffefb50.chunk.js.LICENSE.txt */
(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[76759],{921914:(e,t,n)=>{"use strict";n.d(t,{XL:()=>o,km:()=>i,Ih:()=>a,Xw:()=>l,Pn:()=>u,DZ:()=>c,e8:()=>s,E0:()=>f,F9:()=>d,X_:()=>p,pb:()=>m,Re:()=>y,ih:()=>v,xy:()=>b,jL:()=>g,oz:()=>h,ph:()=>O,lF:()=>E,gG:()=>S,cb:()=>w,GI:()=>j,B1:()=>P,fv:()=>T,gc:()=>I,zX:()=>C,ZF:()=>A,Zb:()=>k,DW:()=>N,Xp:()=>L,Fm:()=>R,sV:()=>x,LU:()=>_,XP:()=>D,WU:()=>F,mK:()=>M,g:()=>B,ws:()=>G,HP:()=>Z,aN:()=>H,Pg:()=>U,u0:()=>Y,TM:()=>q,PM:()=>V,lK:()=>$,sv:()=>K,MO:()=>X,oO:()=>W,Mc:()=>J,Zw:()=>Q,RA:()=>ee,am:()=>te,ZM:()=>ne,wm:()=>re,Y$:()=>oe,Qu:()=>ie,kT:()=>ae});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",u="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",f="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",b="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",h="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",O="TOGGLE_MAPINFO_STATE",E="UPDATE_CENTER_TO_MARKER",S="IDENTIFY:CHANGE_PAGE",w="IDENTIFY:CLOSE_IDENTIFY",j="IDENTIFY:CHANGE_FORMAT",P="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",T="IDENTIFY:EDIT_LAYER_FEATURES",I="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",C="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",k="IDENTIFY:SET_SHOW_IN_MAP_POPUP",N="IDENTIFY:IDENTIFY_IS_MOUNTED",L="IDENTIFY:INIT_PLUGIN";function R(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function x(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function _(){return{type:y}}function D(){return{type:v}}function F(e,t){return{type:u,reqId:e,request:t}}function M(e){return{type:l,enabled:e}}function B(){return{type:c}}function G(e){return{type:s,infoFormat:e}}function Z(){return{type:f}}function H(){return{type:d}}function z(e){return{type:p,reverseGeocodeData:e.data}}function U(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(z(e))})).catch((function(e){t(z(e))}))}}function Y(){return{type:m}}function q(){return{type:O}}function V(e){return{type:E,status:e}}function $(e,t){return{type:b,point:e,layer:t,filterNameList:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],overrideParams:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},itemId:arguments.length>4&&void 0!==arguments[4]?arguments[4]:null}}function K(e){return{type:g,point:e}}function X(e){return{type:h,enabled:e}}function W(e){return{type:S,index:e}}var J=function(){return{type:w}},Q=function(e){return{type:j,format:e}},ee=function(e){return{type:P,showCoordinateEditor:e}},te=function(e){return{type:T,layer:e}},ne=function(e){return{type:I,query:e}},re=function(e){return{type:C,trigger:e}},oe=function(e){return{type:k,value:e}},ie=function(e){return{type:N,isMounted:e}},ae=function(e){return{type:L,cfg:e}}},710615:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(124852),o=n.n(r),i=n(45697),a=n.n(i),l=n(480681),u=n(807654),c=n.n(u),s=n(414293),f=n.n(s),d=n(743129),p=n(993451),m=n(80717),y=n(145869),v=n(680833),b=n(805346),g=n(552259),h=["labelId"];function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==O(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=(0,p.Z)(["placeholder","noResultsText"])(d.ZP.Creatable),I=(0,p.Z)(["placeholder","noResultsText"])(d.ZP);function C(e){var t,n=e.label,r=e.showArrow,i=e.limitsType;return o().createElement("span",null,(t=n,"scale"===i?"1 : "+Math.round(t):t),r&&o().createElement(o().Fragment,null,"Â ",o().createElement(l.gG,{glyph:"arrow-left"})))}function A(e){var t=e.id,n=e.value,r=e.placeholderId,i=e.noResultsTextId,a=e.createTextId,l=e.options,u=e.isValidNewOption,s=void 0===u?function(){return!0}:u,f=e.onChange,d=void 0===f?function(){}:f,p=e.disabled,m=e.loading;return o().createElement(T,{inputProps:{id:t},placeholder:r,noResultsText:i,value:n,isLoading:m,options:l,disabled:p,optionRenderer:C,valueRenderer:C,promptTextCreator:function(e){return o().createElement(b.Z,{msgId:a,msgParams:{label:e}})},isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!c()(t)&&s(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);d(c()(t)?void 0:P(P({},e),{},{value:t}))}})}function k(e){var t=e.title,n=e.layer,i=e.zoom,a=e.projection,u=e.resolutions,c=void 0===u?(0,g.MR)():u,s=e.defaultLimitsType,d=e.limitsTypesOptions,p=e.dpi,O=e.onChange,j=Math.round(i||0),T=E((0,r.useState)(s||d[0].value),2),C=T[0],k=T[1],N=n.maxResolution,L=n.minResolution,R=n.disableResolutionLimits,x=(0,g.Vj)(p,a);function _(e,t){var n,r=e.map((function(e){return e[C]}));return f()(t[C])||-1!==r.indexOf(t[C])?e:[t].concat((n=e,function(e){if(Array.isArray(e))return w(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||S(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e[C]>t[C]?-1:1}))}function D(e,t){return(0,g.ed)(e,t,{projection:a,resolutions:c})}var F=E((0,r.useState)([]),2),M=F[0],B=F[1],G=E((0,r.useState)(N&&{resolution:N,scale:N*x,zoom:(0,g.Pl)(N,c)}),2),Z=G[0],H=G[1],z=E((0,r.useState)(L&&{resolution:L,scale:L*x,zoom:(0,g.Pl)(L,c)}),2),U=z[0],Y=z[1],q=E((0,r.useState)(!1),2),V=q[0],$=q[1],K=E((0,r.useState)(),2),X=K[0],W=K[1],J=E((0,r.useState)(),2),Q=J[0],ee=J[1],te=(0,r.useRef)();function ne(){ee(void 0),W(void 0)}(0,r.useEffect)((function(){return te.current=!0,function(){te.current=!1}}),[]);var re=c.join(",");return(0,r.useEffect)((function(){var e=L&&{resolution:L,scale:L*x,zoom:(0,g.Pl)(L,c)},t=N&&{resolution:N,scale:N*x,zoom:(0,g.Pl)(N,c)},n=[e,t].filter((function(e){return e})).reduce(_,c.map((function(e,t){return{resolution:e,scale:e*x,zoom:t}})));H(t),Y(e),B(n),ne()}),[x,re]),o().createElement("div",{className:"ms-visibility-limits-form"},o().createElement("div",{className:"ms-visibility-limits-form-title",style:{display:"flex",alignItems:"center"}},o().createElement("div",{style:{flex:1}},t),o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"refresh",disabled:!(!R&&!V),visible:"wms"===n.type,onClick:function(){"wms"!==n.type||V||($(!0),ne(),(0,v.kB)(n).toPromise().then((function(e){if(te.current){var t,n,r=e.MaxScaleDenominator,o=e.MinScaleDenominator,i=!f()(r)&&D(r,"scale"),a=!f()(o)&&D(o,"scale");(function(e,t){var n,r,o=(n=e,r=t,f()(n)&&f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateUndefined":f()(n)&&!f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMinScale":!f()(n)&&f()(r)?"layerProperties.visibilityLimits.serverValuesUpdateMaxScale":"layerProperties.visibilityLimits.serverValuesUpdate");W(o)})(r,o),a&&Y(a),i&&H(i),O(P(P({},i&&{maxResolution:i.resolution}),a&&{minResolution:a.resolution}));var l=(null===(t=a||U)||void 0===t?void 0:t.resolution)||-1/0;((null===(n=i||Z)||void 0===n?void 0:n.resolution)||1/0)<l&&ee("layerProperties.visibilityLimits.rangeError"),$(!1)}})).catch((function(){te.current&&($(!1),ee("layerProperties.visibilityLimits.serverValuesError"))})))},tooltipId:"layerProperties.visibilityLimits.updateWMSCapabilities"},{Element:function(){return o().createElement(y.Z,{checked:!R,onClick:function(){O({disableResolutionLimits:!R}),ne()}})}}]})),o().createElement("label",{htmlFor:"ms-visibility-limits-max"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.maxValue"})),o().createElement(A,{id:"ms-visibility-limits-max",value:(null==Z?void 0:Z[C])&&{value:Z[C],label:Z[C],zoom:Z.zoom,limitsType:C},placeholderId:"layerProperties.visibilityLimits.maxValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:V,isValidNewOption:function(e){return e>=((null==U?void 0:U[C])||0)},options:M.map((function(e){return P(P({},e),{},{value:e[C]+(e.delta||0),label:e[C],showArrow:e.zoom===j,disabled:!f()(null==U?void 0:U[C])&&e[C]<=U[C],limitsType:C})})),disabled:R||V,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?D(e.value,C):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(O({maxResolution:t.resolution}),H(t),void 0!==e.value&&f()(e.zoom)){var n=_(M,t);B(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-min"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.minValue"})),o().createElement(A,{id:"ms-visibility-limits-min",value:(null==U?void 0:U[C])&&{value:U[C],label:U[C],zoom:U.zoom,limitsType:C},placeholderId:"layerProperties.visibilityLimits.minValuePlaceholder",noResultsTextId:"layerProperties.visibilityLimits.valueNoResultsText",createTextId:"layerProperties.visibilityLimits.createOption",loading:V,isValidNewOption:function(e){return e<=((null==Z?void 0:Z[C])||1/0)},options:M.map((function(e){return P(P({},e),{},{value:e[C],label:e[C],showArrow:e.zoom===j,disabled:!f()(null==Z?void 0:Z[C])&&e[C]>=Z[C],limitsType:C})})),disabled:R||V,onChange:function(e){var t=void 0===e.value?{}:f()(e.zoom)?D(e.value,C):{resolution:e.resolution,scale:e.scale,zoom:e.zoom};if(O({minResolution:t.resolution}),Y(t),void 0!==e.value&&f()(e.zoom)){var n=_(M,t);B(n)}ne()}}),o().createElement("label",{htmlFor:"ms-visibility-limits-type"},o().createElement(b.Z,{msgId:"layerProperties.visibilityLimits.type"})),o().createElement(I,{inputProps:{id:"ms-visibility-limits-type"},value:C,clearable:!1,options:d.map((function(e){var t=e.labelId;return P(P({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,h)),t&&{label:o().createElement(b.Z,{msgId:t})})})),disabled:R||V,onChange:function(e){var t=e.value;k(t),ne()}}),X&&o().createElement(l.bZ,{bsStyle:"success"},o().createElement(b.Z,{msgId:X})),Q&&o().createElement(l.bZ,{bsStyle:"danger"},o().createElement(b.Z,{msgId:Q})))}k.propTypes={layer:a().object,zoom:a().number,onChange:a().func,resolutions:a().array,limitsTypesOptions:a().array,projection:a().string,dpi:a().number,defaultLimitsType:a().string},k.defaultProps={layer:{},onChange:function(){},limitsTypesOptions:[{value:"scale",labelId:"layerProperties.visibilityLimits.scale"},{value:"resolution",labelId:"layerProperties.visibilityLimits.resolution"}],dpi:g.$v};const N=k},779195:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(124852),o=n.n(r),i=(n(707169),n(967134)),a=n(74998),l=n.n(a),u=n(192579),c=["wrapperClassName","toolbarOptions"];function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const f=function(e){var t=e.wrapperClassName,n=void 0===t?"ms-compact-text-editor":t,r=e.toolbarOptions,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return o().createElement(i.Editor,s({},a,{editorStyle:{minHeight:200},wrapperClassName:n,toolbar:{options:r||["fontFamily","blockType","inline","textAlign","list","link","colorPicker","remove","image","embedded"],image:{urlEnabled:!0,uploadEnabled:a.uploadEnabled||!1,alignmentEnabled:!1,uploadCallback:function(e){return new Promise((function(t,n){var r=new FileReader;r.addEventListener("load",(function(){var e,n;(e=r.result,n={size:500,type:"image/jpeg",quality:.8},new Promise((function(t,r){var o=n||{},i=o.size,a=o.type,l=void 0===a?"image/png":a,u=o.quality,c=void 0===u?.9:u,s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=s.naturalWidth,n=s.naturalHeight,r=i,o=i/(e/n),a=document.createElement("canvas");a.setAttribute("width",r),a.setAttribute("height",o),a.getContext("2d").drawImage(s,0,0,r,o);var u=a.toDataURL(l,c);t(u)},s.onerror=function(e){r(e)},s.src=e}))).then((function(e){t({data:{link:e}})}))})),e?r.readAsDataURL(e):n()}))},previewImage:!0,inputAccept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",alt:a.alt||{present:!1,mandatory:!1},defaultSize:{height:"auto",width:"100%"}},fontFamily:{options:a.fonts||u.Km},link:{inDropdown:!1,showOpenOptionOnHover:!0,defaultTargetOption:"_self",options:["link","unlink"]},blockType:{inDropdown:!0,options:["Normal","H1","H2","H3","H4","H5","H6","Blockquote","Code"]},inline:{inDropdown:!0,options:["bold","italic","underline","strikethrough","monospace"]},textAlign:{inDropdown:!0},list:{inDropdown:!0},embedded:{embedCallback:function(e){var t=/<iframe.*? src="(.*?)"/.exec(l()(e));return t&&t[1]||e},defaultSize:{height:"auto",width:"100%"}}}}))}},501262:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var r=n(727418),o=n.n(r),i=n(45697),a=n.n(i),l=n(124852),u=n.n(l),c=n(180307),s=n.n(c),f=n(480681),d=n(38560),p=n(805346),m=n(807472);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function b(e,t,n){return t=h(t),function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}var w=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return E(e=b(this,t,[].concat(r)),"setConfirmRef",(function(t){return e.confirm=t,e.confirm})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.focusConfirm&&s().findDOMNode(this.confirm).focus()}},{key:"render",value:function(){return u().createElement(m.Z,{draggable:this.props.draggable,onClickOut:this.props.onClose,id:"confirm-dialog",modal:this.props.modal,style:o()({},this.props.style,{display:this.props.show?"block":"none"})},u().createElement("span",{role:"header"},u().createElement("span",{className:"user-panel-title"},this.props.title),u().createElement("button",{onClick:this.props.onClose,className:"login-panel-close close"},this.props.closeGlyph?u().createElement(f.gG,{glyph:this.props.closeGlyph}):u().createElement("span",null,"Ã"))),u().createElement("div",{role:"body"},this.props.children),u().createElement("div",{role:"footer"},u().createElement(f.hE,null,u().createElement(d.Z,{ref:this.setConfirmRef,onClick:this.props.onConfirm,disabled:this.props.confirmButtonDisabled,bsStyle:this.props.confirmButtonBSStyle},this.props.confirmButtonContent),u().createElement(d.Z,{onClick:this.props.onClose},this.props.closeText))))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u().Component);E(w,"propTypes",{show:a().bool,draggable:a().bool,onClose:a().func,onConfirm:a().func,onSave:a().func,modal:a().bool,closeGlyph:a().string,style:a().object,buttonSize:a().string,inputStyle:a().object,title:a().node,confirmButtonContent:a().node,confirmButtonDisabled:a().bool,closeText:a().node,confirmButtonBSStyle:a().string,focusConfirm:a().bool}),E(w,"defaultProps",{onClose:function(){},onChange:function(){},modal:!0,title:u().createElement(p.Z,{msgId:"confirmTitle"}),closeGlyph:"",confirmButtonBSStyle:"danger",confirmButtonDisabled:!1,confirmButtonContent:u().createElement(p.Z,{msgId:"confirm"})||"Confirm",closeText:u().createElement(p.Z,{msgId:"close"}),includeCloseButton:!0,focusConfirm:!1});const j=w},943457:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>It});var r=n(322843),o=n(49977),i=n.n(o),a=n(423570),l=n.n(a),u=n(178598),c=n(782904),s=n(580416),f=n(197395),d=n(921914),p=n(14281),m=n(900012),y=n(902054),v=n(800827),b=n(675110);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==g(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const w={loadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.Bm).switchMap((function(e){var t,r=e.features,o=e.override,a=(0,y.Yu)(n());if(!o){var l,u=a.map((function(e){return e.id}));return(l=i().Observable).of.apply(l,E(r.map((function(e){return u.includes(e.id)?(0,s.tV)(e.id,"layer",{title:e.title,description:e.description,style:e.style,features:e.features}):(0,s.A4)(e)}))))}return(t=i().Observable).of.apply(t,E(a.map((function(e){return(0,s.$o)(e.id)}))).concat(E(r.map((function(e){return(0,s.A4)(e)})))))}))},newAnnotationEpic:function(e){return e.ofType(p.CD).switchMap((function(){var e={id:(0,m.t1)(l()()),title:"New annotations",type:"vector",features:[],style:{},visibility:!0,rowViewer:m.jB};return i().Observable.of((0,d.aN)(),(0,s.A4)(e),(0,s.UG)(e.id,"layer"),(0,c.Xg)(m.jB,"enabled",!0))}))},editAnnotationEpic:function(e,t){var n=t.getState;return e.ofType(p.A1).switchMap((function(e){var t,r=(0,b.Iz)(n());return(t=i().Observable).of.apply(t,[(0,d.aN)()].concat(E((null==r?void 0:r.id)!==(null==e?void 0:e.id)?[(0,s.UG)(e.id,"layer")]:[]),[(0,c.Xg)(m.jB,"enabled",!0)]))}))},downloadAnnotationsEpic:function(e,t){var n=t.getState;return e.ofType(p.HN).switchMap((function(e){var t=e.annotations;try{var r=(0,m.rE)(t),o=(0,v.Zs)(n());return(0,u.saveAs)(new Blob([JSON.stringify(r)],{type:"application/json;charset=utf-8"}),"".concat(o.length>0&&o||m.jB,".json")),i().Observable.empty()}catch(e){return i().Observable.of((0,f.vU)({title:"annotations.title",message:"annotations.downloadError",autoDismiss:5,position:"tr"}))}}))},confirmCloseAnnotationsEpic:function(e){return e.ofType(p.bI).switchMap((function(e){var t,n=e.layer;return i().Observable.of((0,c.Xg)(m.jB,"enabled",!1),null!=n&&null!==(t=n.features)&&void 0!==t&&t.length?(0,s.tV)(n.id,"layer",{invalidFeatures:null}):(0,s.$o)(n.id))}))},removeAnnotationsEpic:function(e){return e.ofType(p.DX).switchMap((function(e){return i().Observable.of((0,d.g)(),(0,d.Mc)(),(0,s.$o)(e.id))}))},mergeAnnotationsFeaturesEpic:function(e,t){var n=t.getState;return e.ofType(p.QN).switchMap((function(e){var t,r=e.annotation,o=function(e){var t,n,o,i,a,l;return{features:[].concat(E((null==e?void 0:e.features)||[]),E((null==r?void 0:r.features)||[])),style:O(O(O({},null==r?void 0:r.style),null==e?void 0:e.style),{},{body:O(O(O({},null==r||null===(t=r.style)||void 0===t?void 0:t.body),null==e||null===(n=e.style)||void 0===n?void 0:n.body),{},{rules:[].concat(E((null==e||null===(o=e.style)||void 0===o||null===(i=o.body)||void 0===i?void 0:i.rules)||[]),E((null==r||null===(a=r.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]))})})}},a=n(),u=(0,b.CA)(a,e.id),c=(0,y.Gu)(a);return(t=i().Observable).of.apply(t,E(c?[(0,p.x$)(o(c))]:[]).concat([(0,s.tV)(u.id,"layer",O({_v_:l()()},o(u)))]))}))}};var j=n(79267),P=n(124852),T=n.n(P),I=n(180307),C=n(171703),A=n(22222),k=n(717621),N=n.n(k),L=n(801550),R=n(607147),x=n(93152),_=n(480681),D=n(21090),F=n(813292),M=n.n(F),B=n(406557),G=n.n(B),Z=n(771061),H=n(898631),z=n(38560),U=n(815135),Y=n(50993),q=n(45697),V=n.n(q),$=n(260024);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function Q(e,t,n){return t=te(t),function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ee()?Reflect.construct(t,n||[],te(e).constructor):t.apply(e,n))}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ee=function(){return!!e})()}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t){return ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ne(e,t)}function re(e,t,n){return(t=oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:t+""}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this;return T().createElement($.Z,X({},this.props.options,{items:[],isDraggable:!0,enableHeightField:this.props.enableHeightField,type:this.props.featureType,components:this.props.selected&&this.props.selected.geometry&&this.props.selected.geometry.coordinates&&this.props.selected.geometry.coordinates.length?(0,m.OQ)(this.props.selected.geometry):[],properties:this.props.selected&&this.props.selected.properties||{},onComplete:function(){},onChangeRadius:this.props.onChangeRadius,aeronauticalOptions:this.props.aeronauticalOptions,onChangeFormat:this.props.onChangeFormat,format:this.props.format,mapProjection:this.props.mapProjection,onHighlightPoint:this.props.onHighlightPoint,onSetInvalidSelected:this.props.onSetInvalidSelected,onChangeText:this.props.onChangeText,renderer:this.props.renderer,onValidateFeature:this.props.onValidateFeature,onChange:function(t,n,r,o){var i=t.map((function(e){return[e.lon,e.lat].concat(function(e){if(Array.isArray(e))return W(e)}(t=void 0!==e.height?[e.height]:[])||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var t}));e.props.onChange(i,n,r,o),e.props.onValidateFeature()}}))}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(T().Component);re(ie,"propTypes",{components:V().array,options:V().object,onRemove:V().func,onChange:V().func,transitionProps:V().object,selected:V().object,featureType:V().string,format:V().string,mapProjection:V().string,onComplete:V().func,onHighlightPoint:V().func,onChangeFormat:V().func,onChangeRadius:V().func,onSetInvalidSelected:V().func,aeronauticalOptions:V().object,onChangeText:V().func,renderer:V().string,onValidateFeature:V().func,enableHeightField:V().bool}),re(ie,"defaultProps",{selected:{},options:{},components:[],onRemove:null,onChange:function(){},onComplete:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onSetInvalidSelected:function(){},onChangeText:function(){},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},onValidateFeature:function(){},enableHeightField:!1});const ae=ie;var le=n(805346),ue=n(73532),ce=n(868195);function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function fe(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||de(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(e){if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){var r;return r=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==se(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=(0,U.Z)(z.Z),ge="UPDATE_ANNOTATIONS_FEATURES",he="UNDO_ANNOTATIONS_FEATURES",Oe="REDO_ANNOTATIONS_FEATURES",Ee=ve({},ge,(function(e,t){return t(e)})),Se=(0,D.ZP)((function(e,t){return(Ee[t.type]||G())(e,t.callback)}),{limit:20,undoType:he,redoType:Oe,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),we={};const je=(0,ce.injectIntl)((function(e){var t,n,r,o,i,a,u,c,s,f,d,p,y,v,b=e.selectedId,g=e.value,h=e.mapType,O=e.map,E=e.maxZoom,S=void 0===E?18:E,w=e.onSelect,j=void 0===w?function(){}:w,I=e.onChange,C=void 0===I?function(){}:I,A=e.onZoomTo,k=void 0===A?function(){}:A,N=e.onHighlight,L=void 0===N?function(){}:N,R=e.projection,x=e.intl,D=void 0===x?{}:x,F=e.mapInteractionsSupport,B=e.coordinatesFormat,G=e.onChangeCoordinatesFormat,z=void 0===G?function(){}:G,U=e.tab,q=void 0===U?"coordinates":U,V=e.onSelectTab,$=void 0===V?function(){}:V,K=e.svgSymbolsPath,X=e.lineDashOptions,W=e.enable3dStyleOptions,J=e.geometryEditorOptions,Q=e.defaultTextLabel,ee=e.defaultSymbolizers,te=e.geodesic,ne=e.fonts,re=void 0===ne?["Arial","Verdana","Helvetica","Tahoma","Trebuchet MS","Times New Roman","Georgia","Garamond","Courier New","Brush Script MT"]:ne,oe=(y=(0,P.useReducer)(Se,{present:g,past:[],future:[]}),v=2,function(e){if(Array.isArray(e))return e}(y)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(y,v)||de(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ie=oe[0],ce=oe[1],se=(null==ie?void 0:ie.present)||ie||we,pe=((null==se?void 0:se.features)||[]).find((function(e){return(null==e?void 0:e.id)===b})),me=function(e,t){var n=e.symbolizerBlock,r=e.ruleBlock;return{symbolizerBlock:Object.keys(n).reduce((function(e,r){return ye(ye({},e),{},ve({},r,ye(ye({},n[r]),{},{defaultProperties:m._q[r]||n[r].defaultProperties,params:Object.keys(n[r].params).reduce((function(e,o){var i,a=n[r].params[o];return["Circle"].includes(r)&&["geodesic","radius","msClampToGround","msGeometry"].includes(o)||["Text"].includes(r)&&["label","msGeometry"].includes(o)||["Line","Fill"].includes(r)&&["msGeometry"].includes(o)||["Point","Circle"].includes(null==t||null===(i=t.properties)||void 0===i?void 0:i.annotationType)&&["msGeometry"].includes(o)?e:ye(ye({},e),{},ve({},o,a))}),{})})))}),{}),ruleBlock:r}}((0,ue.Z)({exactMatchGeometrySymbol:!0,enable3dStyleOptions:W}),pe),Ee=me.symbolizerBlock,je=me.ruleBlock,Pe=F;function Te(e){ce({type:ge,callback:function(t){return e(t)}})}function Ie(e,t){$("coordinates",pe);var n=l()();Te((function(r){var o,i,a,u={type:"Feature",id:n,properties:ye(ye({},t),{},{id:n,name:e,annotationType:e}),geometry:null};return ye(ye({},r),{},{features:[].concat(fe((null==r?void 0:r.features)||[]),[u]),style:ye(ye({},null==r?void 0:r.style),{},{format:"geostyler",body:ye(ye({},null==r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:[].concat(fe((null==r||null===(i=r.style)||void 0===i||null===(a=i.body)||void 0===a?void 0:a.rules)||[]),[{name:"",filter:["==","id",n],mandatory:"Point"!==e,ruleId:l()(),symbolizers:[ye({symbolizerId:l()()},(0,m.ll)(u,ee))]}])})})})})),j(n)}function Ce(e){var t;return null!=e&&null!==(t=e.properties)&&void 0!==t&&t.measureType?(0,Y.cz)(e,{formatNumber:null!=D&&D.formatNumber?D.formatNumber:function(e){return e}}):[e]}function Ae(e,t,n){Te((function(r){return ye(ye({},r),{},{features:((null==r?void 0:r.features)||[]).filter((function(t){var r;return!n||(null==t||null===(r=t.properties)||void 0===r?void 0:r.measureId)!==e})).reduce((function(r,o){return[].concat(fe(r),fe((null==o?void 0:o.id)!==e?[o]:n?Ce(t):[t]))}),[])})}))}function ke(e){ce({type:ge,callback:function(t){return ye(ye({},t),{},{features:(t.features||[]).filter((function(e){var t;return(null==e||null===(t=e.properties)||void 0===t?void 0:t.measureId)!==b})).reduce((function(t,n){var r;if((null==n?void 0:n.id)!==b)return[].concat(fe(t),[n]);var o=(0,m.U0)(n),i=ye(ye({},n),{},{geometry:ye(ye({},null==o?void 0:o.geometry),{},{coordinates:(0,m._5)(null==o||null===(r=o.geometry)||void 0===r?void 0:r.type,e)})});return[].concat(fe(t),fe((0,m._n)(i)?Ce(i):[i]))}),[])})}})}function Ne(){var e=(((null==se?void 0:se.style)||{}).body||{}).rules;return{name:"selected feature style",rules:(void 0===e?[]:e).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==pe||null===(n=pe.properties)||void 0===n?void 0:n.id)}))}}(0,P.useEffect)((function(){var e,t,n,r,o,i,a,l,u=((null==ie||null===(e=ie.present)||void 0===e?void 0:e.features)||[]).filter(m._n),c=((null==ie||null===(t=ie.present)||void 0===t?void 0:t.features)||[]).filter((function(e){return!(0,m._n)(e)})),s=u.map((function(e){return e.id}));C(ye(ye({},null==ie?void 0:ie.present),{},{features:u,style:ye(ye({},null==ie||null===(n=ie.present)||void 0===n?void 0:n.style),{},{format:"geostyler",body:ye(ye({},null==ie||null===(r=ie.present)||void 0===r||null===(o=r.style)||void 0===o?void 0:o.body),{},{rules:((null==ie||null===(i=ie.present)||void 0===i||null===(a=i.style)||void 0===a||null===(l=a.body)||void 0===l?void 0:l.rules)||[]).filter((function(e){var t=e.filter;return s.includes(null==t?void 0:t[2])}))})}),invalidFeatures:(null==c?void 0:c.length)>0?c:null}),(0,m._n)(pe)?pe:null,null==ie?void 0:ie.present)}),[null==ie?void 0:ie.present]);var Le=((null==se?void 0:se.features)||[]).filter((function(e){var t;return null==e||null===(t=e.properties)||void 0===t?void 0:t.annotationType}));return T().createElement("div",{className:"ms-features-editor"},T().createElement("div",{className:"ms-features-editor-list"},T().createElement("div",{className:"ms-features-editor-list-header"},T().createElement(_.hE,null,T().createElement(be,{className:"square-button-md no-border",onClick:function(){ce({type:he})},disabled:0===((null==ie||null===(t=ie.past)||void 0===t?void 0:t.length)||0)},T().createElement(_.gG,{glyph:"undo"})),T().createElement(be,{className:"square-button-md no-border",onClick:function(){ce({type:Oe})},disabled:0===((null==ie||null===(n=ie.future)||void 0===n?void 0:n.length)||0)},T().createElement(_.gG,{glyph:"redo"}))),T().createElement(_.hE,null,T().createElement(be,{tooltipId:"annotations.titles.marker",className:"square-button-md no-border",onClick:function(){return Ie("Point")}},T().createElement(_.gG,{glyph:"point-plus"})),T().createElement(be,{tooltipId:"annotations.titles.line",className:"square-button-md no-border",onClick:function(){return Ie("LineString")}},T().createElement(_.gG,{glyph:"polyline-plus"})),T().createElement(be,{tooltipId:"annotations.titles.polygon",className:"square-button-md no-border",onClick:function(){return Ie("Polygon")}},T().createElement(_.gG,{glyph:"polygon-plus"})),T().createElement(be,{tooltipId:"annotations.titles.text",className:"square-button-md no-border",onClick:function(){return Ie("Text",{label:Q||""})}},T().createElement(_.gG,{glyph:"font-add"})),T().createElement(be,{tooltipId:"annotations.titles.circle",className:"square-button-md no-border",onClick:function(){return Ie("Circle",{geodesic:!(null==te||!te.Circle)})}},T().createElement(_.gG,{glyph:"1-circle-add"})))),!(null!=se&&null!==(r=se.features)&&void 0!==r&&r.length)&&T().createElement("div",{className:"ms-features-editor-list-empty"},T().createElement(le.Z,{msgId:"annotations.addGeometry"})),T().createElement("ul",{className:"ms-features-editor-list-body"},Le.map((function(e){var t,n=null==e?void 0:e.id,r=b===n;return T().createElement("li",{key:n,onClick:function(){return r?function(){}:j(n,(0,m._n)(e)?e:null)},className:"ms-features-editor-item ".concat(r?" selected":""),onMouseEnter:function(){b!==n&&(0,m._n)(e)&&L("feature",e)},onMouseLeave:function(){L("feature",null)}},T().createElement("div",null,T().createElement(_.gG,{glyph:(0,m.JX)(e)})),T().createElement("div",{style:{flex:1}},T().createElement("input",{value:null==e||null===(t=e.properties)||void 0===t?void 0:t.name,type:"text",onChange:function(t){return Ae(n,ye(ye({},e),{},{properties:ye(ye({},null==e?void 0:e.properties),{},{name:t.target.value})}))}})),T().createElement(_.gG,{glyph:(0,m._n)(e)?"ok-sign text-success":"exclamation-mark text-danger"}),T().createElement(_.hE,null,T().createElement(be,{disabled:!(0,m._n)(e),bsStyle:r?"primary":"default",className:"square-button-md",tooltipId:"annotations.zoomToGeometry",onClick:function(t){t.stopPropagation(),k(M()(e),"EPSG:4326",S)}},T().createElement(_.gG,{glyph:"zoom-to"})),T().createElement(be,{className:"square-button-md",bsStyle:r?"primary":"default",tooltipId:"annotations.removeGeometry",onClick:function(e){e.stopPropagation(),function(e){Te((function(t){return ye(ye({},t),{},{features:((null==t?void 0:t.features)||[]).filter((function(t){var n;return(null==t?void 0:t.id)!==e&&(null==t||null===(n=t.properties)||void 0===n?void 0:n.measureId)!==e}))})}))}(n)}},T().createElement(_.gG,{glyph:"trash"}))))})))),!pe&&T().createElement("div",{className:"ms-features-editor-tools-empty"},T().createElement("div",null,T().createElement(_.gG,{glyph:"comment"}),T().createElement("div",null,T().createElement(le.Z,{msgId:"annotations.selectAnnotationFeature"})))),pe&&T().createElement("div",{className:"ms-features-editor-tools"},T().createElement(_.JL,{bsStyle:"tabs",activeKey:q},T().createElement(_.LY,{key:"coordinates",eventKey:"coordinates",onClick:function(){return $("coordinates",pe)}},T().createElement(le.Z,{msgId:"annotations.tabCoordinates"})),T().createElement(_.LY,{key:"style",eventKey:"style",onClick:function(){return $("style",pe)}},T().createElement(le.Z,{msgId:"annotations.tabStyle"}))),T().createElement("div",{className:"ms-features-editor-tools-body"},"coordinates"===q&&T().createElement(T().Fragment,null,T().createElement(ae,{key:pe.id,enableHeightField:h===H.Bk.CESIUM&&!(null!=pe&&null!==(o=pe.properties)&&void 0!==o&&o.geodesic),format:B,onChangeFormat:z,mapProjection:R,options:J,onHighlightPoint:function(e){L("coordinate",e&&{type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{}})},onChangeRadius:function(e){Ae(null==pe?void 0:pe.id,ye(ye({},pe),{},{properties:ye(ye({},null==pe?void 0:pe.properties),{},{radius:e})}))},selected:ye(ye({},(0,m.U0)(pe)),{},{properties:ye(ye({},null==pe?void 0:pe.properties),{},{valueText:null==pe||null===(i=pe.properties)||void 0===i?void 0:i.label})}),featureType:null==pe||null===(a=pe.properties)||void 0===a?void 0:a.annotationType,renderer:m.jB,onChange:ke,onSetInvalidSelected:function(e,t){"coords"===e&&ke(t)}}),"Text"===(null==pe||null===(u=pe.properties)||void 0===u?void 0:u.annotationType)&&T().createElement(_.cw,{className:"ms-annotations-label-input",key:"label",controlId:"ms-annotations-label-input",validationState:null!=pe&&null!==(c=pe.properties)&&void 0!==c&&c.label?void 0:"error"},T().createElement(_.J$,null,T().createElement(le.Z,{msgId:"annotations.titles.text"})),T().createElement(_.NI,{type:"text",value:(null==pe||null===(s=pe.properties)||void 0===s?void 0:s.label)||"",onChange:function(e){return Ae(null==pe?void 0:pe.id,ye(ye({},pe),{},{properties:ye(ye({},null==pe?void 0:pe.properties),{},{label:e.target.value})}))}}))),"style"===q&&T().createElement("div",null,T().createElement(Z.Z,{ruleBlock:je,symbolizerBlock:Ee,config:{geometryType:"annotation-".concat(null==pe||null===(f=pe.properties)||void 0===f||null===(d=f.annotationType)||void 0===d?void 0:d.toLowerCase()),simple:!0,fonts:re,svgSymbolsPath:K,lineDashOptions:X},rules:(null===(p=Ne())||void 0===p?void 0:p.rules)&&fe(Ne().rules).reverse(),onChange:function(e){return t=fe(e).reverse(),void Te((function(e){var n=null==e?void 0:e.style,r=(e.features||[]).reduce((function(e,r){var o;if(r.id===pe.id)return[].concat(fe(e),fe(t.map((function(e){return ye(ye({},e),{},{filter:e.filter||["==","id",pe.properties.id]})}))));var i=((null==n||null===(o=n.body)||void 0===o?void 0:o.rules)||[]).filter((function(e){var t,n;return(null==e||null===(t=e.filter)||void 0===t?void 0:t[2])===(null==r||null===(n=r.properties)||void 0===n?void 0:n.id)}));return[].concat(fe(e),fe(i))}),[]),o=ye(ye({},n),{},{format:"geostyler",body:ye(ye({},null==n?void 0:n.body),{},{rules:r})});return ye(ye({},e),{},{style:o})}));var t}})))),Pe&&T().createElement(Pe,{key:null==pe?void 0:pe.id,active:!!pe&&"coordinates"===q,map:O,mapType:h,feature:pe,geodesic:te,onChange:function(e){Ae(pe.id,e,!0)}}))}));var Pe=n(460604),Te="ms-annotations-editor-target",Ie="ANNOTATIONS_ADDITIONAL_LAYERS_OWNER";function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){var r;return r=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==Ce(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Le=Ne(Ne({},H.Bk.OPENLAYERS,(0,P.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(39547)]).then(n.bind(n,65433))}))),H.Bk.CESIUM,(0,P.lazy)((function(){return Promise.all([n.e(65792),n.e(48764),n.e(29379),n.e(45477),n.e(50172),n.e(37532),n.e(65417)]).then(n.bind(n,37532))}))),Re=Ne(Ne({},H.Bk.OPENLAYERS,(0,P.lazy)((function(){return Promise.all([n.e(18672),n.e(52043),n.e(15265),n.e(47202),n.e(69141),n.e(51554),n.e(49414),n.e(85828),n.e(72445),n.e(37974),n.e(1577),n.e(95892),n.e(47238)]).then(n.bind(n,487959))}))),H.Bk.CESIUM,(0,P.lazy)((function(){return Promise.all([n.e(65792),n.e(48764),n.e(29379),n.e(45477),n.e(50172),n.e(79589)]).then(n.bind(n,43982))}))),xe=function(e){return Le[e]&&Re[e]};const _e=function(e){var t=e.map,n=e.active,r=e.mapType,o=e.feature,i=e.geodesic,a=void 0===i?{}:i,l=e.onChange,u=void 0===l?function(){}:l,c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).properties;return"Text"===(null==e?void 0:e.annotationType)?"Point":null==e?void 0:e.annotationType};if(!xe(r))return null;var s=Le[r],f=Re[r],d=(0,m._n)(o,!0),p=c(o),y=!!a[p];return T().createElement(P.Suspense,{fallback:null},T().createElement(T().Fragment,null,T().createElement(s,{map:t,active:n&&null===o.geometry,depthTestAgainstTerrain:!1,geometryType:p,geodesic:y,getObjectsToExcludeOnPick:function(){return[]},onDrawEnd:function(e){var t,n,r=e.feature;u(ke(ke({},o),{},{properties:ke(ke({},null==o?void 0:o.properties),{},{geodesic:y},void 0!==(null==r||null===(t=r.properties)||void 0===t?void 0:t.radius)&&{radius:null==r||null===(n=r.properties)||void 0===n?void 0:n.radius}),geometry:r.geometry}))}}),T().createElement(f,{map:t,active:n&&d,geojson:o,getGeometryType:c,onEditEnd:function(e){return u(e)}})))};function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||Ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==De(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e){return function(e){if(Array.isArray(e))return He(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e){var t;if(null==e||null===(t=e.geometry)||void 0===t||!t.type)return[];if("Point"===e.geometry.type&&!e.geometry.coordinates.some(m.gS))return[Be(Be({},e),{},{properties:{geometryType:"Point"}})];var n=Fe(M()(e),4),r=n[0],o=n[1],i=n[2],a=n[3],l={type:"Feature",geometry:{type:"LineString",coordinates:[[r,o],[r,a],[i,a],[i,o],[r,o]]},properties:{geometryType:"LineString"}};return"LineString"===e.geometry.type?[l].concat(Ge(e.geometry.coordinates.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):"Polygon"===e.geometry.type?[l].concat(Ge(e.geometry.coordinates[0].map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}})))):[e]}var Ue=(0,C.connect)((0,A.P1)([(0,R.XL)(m.jB,"ready"),y.F3,v.Od,x.E$,y.Gu,y.qs],(function(e,t,n,r,o,i){var a,l;return{enabled:e,selected:t,maxZoom:(null==n?void 0:n.zoom)||18,projection:null==n?void 0:n.projection,enable3dStyleOptions:!!r,activeClickEventListener:null==n||null===(a=n.eventListeners)||void 0===a||null===(l=a.click)||void 0===l?void 0:l[0],session:o,selectedId:i}})),{onChange:s.tV,onZoomTo:L.Px,onUpdateALayer:Pe.W,onRemoveALayer:Pe.fU,onStoreSession:p.x$,setSelectedId:p.ym})((function(e){var t=e.enabled,n=e.targetId,r=void 0===n?Te:n,o=e.mapType,i=e.map,a=e.selected,l=e.onChange,u=e.onZoomTo,c=e.maxZoom,s=void 0===c?18:c,f=e.projection,d=e.onUpdateALayer,p=void 0===d?function(){}:d,y=e.onRemoveALayer,v=void 0===y?function(){}:y,b=e.symbolsPath,g=void 0===b?"product/assets/symbols/symbols.json":b,h=e.lineDashOptions,O=e.enable3dStyleOptions,E=e.geometryEditorOptions,S=e.format,w=void 0===S?"decimal":S,j=e.defaultTextAnnotation,C=void 0===j?"New":j,A=e.defaultPointType,k=e.defaultShape,L=e.defaultShapeStrokeColor,R=e.defaultShapeFillColor,x=e.defaultShapeSize,_=void 0===x?64:x,D=e.geodesic,F=e.activeClickEventListener,M=e.fonts,B=e.onStoreSession,G=e.session,Z=e.selectedId,H=e.setSelectedId,z=void 0===H?function(){}:H,U=document.querySelector("#".concat(r)),Y=Fe((0,P.useState)(w),2),q=Y[0],V=Y[1],$=Fe((0,P.useState)("coordinates"),2),K=$[0],X=$[1];function W(){return g.includes(".json")?g:"".concat(g,"symbols.json")}function J(e,t){var n;xe(o)&&p(a.id,Ie,"override",Be({visibility:!0},e&&!t&&!F&&{features:null==a||null===(n=a.features)||void 0===n?void 0:n.filter((function(t){var n=t.id,r=t.properties;return n!==e.id&&(null==r?void 0:r.measureId)!==e.id}))})),p("ANNOTATIONS_SELECTED_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:e?ze(e):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#111111",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}})}return(0,P.useEffect)((function(){return t&&null!=a&&a.id&&p(a.id,Ie,"override",{visibility:!0}),function(){v({owner:Ie})}}),[t]),(0,P.useEffect)((function(){var e=((null==a?void 0:a.features)||[]).find((function(e){return e.id===Z}));t&&(0,m._n)(e)&&J(e,"style"===K)}),[F,o,t]),t&&U&&a?(0,I.createPortal)(T().createElement("div",{className:"ms-annotations-editor"},T().createElement(je,{key:a._v_,selectedId:Z,geodesic:{Circle:!1!==D},fonts:M,defaultSymbolizers:function(){if("symbol"!==A)return{};var e=N()(R||"#dddddd"),t=N()(L||"#777777");return{Point:{kind:"Mark",wellKnownName:W().replace(/[^\/]*.json$/,"".concat(k,".svg")),color:e.toHexString(),fillOpacity:e.getAlpha(),strokeColor:t.toHexString(),strokeOpacity:t.getAlpha(),strokeWidth:1,radius:_/2,rotate:0}}}(),svgSymbolsPath:W(),lineDashOptions:h,coordinatesFormat:q,enable3dStyleOptions:O,geometryEditorOptions:E,defaultTextLabel:C,onChangeCoordinatesFormat:V,tab:K,onSelectTab:function(e,t){X(e),J(t,"style"===e)},mapInteractionsSupport:!F&&_e,value:G||{features:(null==a?void 0:a.features)||[],style:(null==a?void 0:a.style)||{}},onHighlight:function(e,t){p("ANNOTATIONS_HIGHLIGHT_LAYERS",Ie,"overlay",{type:"vector",visibility:!0,features:t?ze(t):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#555555",width:1,opacity:1,cap:"round",join:"round",msClampToGround:!0,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"Square",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:3,radius:6,rotate:0,msBringToFront:!0}]}]}}})},mapType:o,map:i,maxZoom:s,projection:f,onSelect:function(e,t){z(e),J(t,"style"===K)},onChange:function(e,t,n){var r,o;l(a.id,"layers",e),J(t,"style"===K),r=e.invalidFeatures,p("ANNOTATIONS_INVALID_LAYER",Ie,"overlay",{type:"vector",visibility:!0,features:r?(o=r,(o||[]).filter((function(e){var t=e.geometry;return(null==t?void 0:t.type)&&["LineString","Polygon"].includes(t.type)})).reduce((function(e,t){var n=("LineString"===t.geometry.type?t.geometry.coordinates:t.geometry.coordinates[0]).filter((function(e){return!e.some(m.gS)}));return[].concat(Ge(e),Ge(n.length>1?[{type:"Feature",geometry:{type:"LineString",coordinates:n},properties:Be(Be({},null==t?void 0:t.properties),{},{geometryType:"LineString"})}]:[]),Ge(n.map((function(e){return{type:"Feature",geometry:{type:"Point",coordinates:e},properties:{geometryType:"Point"}}}))))}),[])):[],style:{format:"geostyler",body:{name:"",rules:[{name:"",filter:["==","geometryType","LineString"],symbolizers:[{kind:"Line",color:"#ff0000",width:2,opacity:1,cap:"round",join:"round",msClampToGround:!1,dasharray:[6,6]}]},{name:"",filter:["==","geometryType","Point"],symbolizers:[{kind:"Mark",wellKnownName:"shape://plus",color:"#ffffff",fillOpacity:0,strokeColor:"#ff0000",strokeOpacity:1,strokeWidth:1,radius:8,rotate:0,msBringToFront:!0}]}]}}}),B(n)},onZoomTo:u})),U):null}));const Ye=Ue;var qe=n(623560),Ve=n.n(qe),$e=n(548403),Ke=n.n($e),Xe=n(945402),We=n(55105),Je=n(629859),Qe=n(697111),et=n(779195);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){var r;return r=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==tt(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var at=(0,Qe.Z)("onEditorStateChange","editorState")(et.Z);const lt=function(e){var t,n,r=e.preview,o=e.properties,i=void 0===o?{}:o,a=e.fields,l=void 0===a?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:a,u=e.onChange,c=void 0===u?function(){}:u,s=(t=(0,P.useState)(l.filter((function(e){return"html"===e.type})).reduce((function(e,t){return rt(rt({},e),{},ot({},t.name,(0,Je.n0)(i[t.name]||"")))}),{})),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,n)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];return r?T().createElement("div",{className:"ms-annotations-fields preview"},l.map((function(e){var t=e.showLabel;return T().createElement("div",{key:e.name,className:"ms-annotations-field"},t&&T().createElement("div",{className:"ms-annotations-field-label"},T().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),T().createElement("div",{className:"ms-annotations-field-value",dangerouslySetInnerHTML:{__html:i[e.name]}}))}))):T().createElement("form",{className:"ms-annotations-fields"},l.map((function(e){var t=Ve()(e.validator)?e.validator:null,n=t&&t(i[e.name]),r=e.validateError||"annotations.mandatory",o=e.showLabel,a=e.editable;return"text"===e.type?T().createElement(_.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&T().createElement(_.J$,null,T().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),T().createElement(_.NI,{disabled:!a,type:"text",value:i[e.name],onChange:function(t){return c(ot({},e.name,t.target.value))}}),t&&!n&&T().createElement(_.Qb,null,T().createElement(le.Z,{msgId:r}))):"html"===e.type?T().createElement(_.cw,{key:e.name,controlId:"annotations-".concat(e.name),validationState:t?n?"success":"error":null},o&&T().createElement(_.J$,null,T().createElement(le.Z,{msgId:"annotations.field.".concat(e.name)})),a?T().createElement(at,{editorState:f[e.name],onEditorStateChange:function(t){var n=(0,Je.sc)(f[e.name]);(0,Je.sc)(t)!==n&&(c(ot({},e.name,(0,Je.sc)(t))),d((function(n){return rt(rt({},n),{},ot({},e.name,t))})))}}):T().createElement("div",{dangerouslySetInnerHTML:{__html:i[e.name]}}),t&&!n&&T().createElement(_.Qb,null,T().createElement(le.Z,{msgId:r}))):null})))};var ut=n(501262),ct=n(399534),st=n(710615);function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}var dt=["fields","onEdit","onRemove","onDownload"],pt=["title","description"];function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==ft(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ot=(0,U.Z)(z.Z),Et=(0,C.connect)((function(){return{}}),{onRemove:p._x,onDownload:p.LR,onEdit:p.VR})((function(e){var t=e.fields,n=e.onEdit,r=void 0===n?function(){}:n,o=e.onRemove,i=void 0===o?function(){}:o,a=e.onDownload,l=void 0===a?function(){}:a,u=ht(e,dt),c=bt((0,P.useState)(!1),2),s=c[0],f=c[1];return T().createElement("div",null,T().createElement("div",null,T().createElement(_.hE,null,T().createElement(Ot,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.edit",onClick:function(){return r(u.id)}},T().createElement(_.gG,{glyph:"pencil"})),T().createElement(Ot,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.remove",onClick:function(){return f(!0)}},T().createElement(_.gG,{glyph:"trash"})),T().createElement(Ot,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return l([u])}},T().createElement(_.gG,{glyph:"download"})))),T().createElement(lt,{preview:!0,properties:vt({title:null==u?void 0:u.title,description:null==u?void 0:u.description},null==u?void 0:u.options),fields:t}),T().createElement(ct.Z,null,T().createElement(ut.Z,{show:s,modal:!0,onClose:function(){return f(!1)},onConfirm:function(){i(u.id),f(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:T().createElement(le.Z,{msgId:"annotations.confirm"}),closeText:T().createElement(le.Z,{msgId:"annotations.cancel"})},T().createElement(le.Z,{msgId:"annotations.undoDeleteFeature"}))))})),St=(0,C.connect)((0,A.P1)([(0,R.Yq)(m.jB),function(e){return(0,We.ic)(e,{height:!0})},y.F3,v.Od],(function(e,t,n,r){var o,i;return{enabled:e,style:t,selected:e?n:null,activeClickEventListener:null==r||null===(o=r.eventListeners)||void 0===o||null===(i=o.click)||void 0===i?void 0:i[0],projection:null==r?void 0:r.projection,zoom:null==r?void 0:r.zoom,resolutions:null==r?void 0:r.resolutions}})),{onClose:p.L0,onCancel:p.Hl,onReady:c.Xg.bind(null,m.jB,"ready"),onChange:s.tV,onDownload:p.LR})((function(e){var t=e.targetId,n=void 0===t?Te:t,r=e.selected,o=e.style,i=e.enabled,a=e.onReady,l=void 0===a?function(){}:a,u=e.onClose,c=void 0===u?function(){}:u,s=e.onChange,f=void 0===s?function(){}:s,d=e.onDownload,p=void 0===d?function(){}:d,y=e.fields,v=void 0===y?[{name:"title",type:"text",validator:function(e){return e},validateError:"annotations.mandatory",showLabel:!0,editable:!0},{name:"description",type:"html",showLabel:!0,editable:!0}]:y,b=e.closeId,g=e.onCancel,h=void 0===g?function(){}:g,O=e.activeClickEventListener,E=e.projection,S=e.resolutions,w=e.zoom,j=vt({title:null==r?void 0:r.title,description:null==r?void 0:r.description},null==r?void 0:r.options),I=bt((0,P.useState)("properties"),2),C=I[0],A=I[1],k=bt((0,P.useState)(!1),2),N=k[0],L=k[1];function R(){return!v.find((function(e){return!!Ve()(null==e?void 0:e.validator)&&!e.validator(j[e.name])}))}function x(){var e;return!(null==r||null===(e=r.features)||void 0===e||!e.length||r.invalidFeatures)}function D(e){return e.stopPropagation(),R()&&x()?c(r):L(!0)}return(0,P.useEffect)((function(){return(0,Xe.j9)(m.jB,(function(e){return T().createElement(Et,mt({},e,{fields:v}))})),function(){(0,Xe.j9)(m.jB,void 0)}}),[]),(0,P.useEffect)((function(){return L(!1),l(i),function(){l(!i)}}),[i]),(0,P.useEffect)((function(){b&&D()}),[b]),r?T().createElement("div",{className:"ms-annotations-panel",style:o},T().createElement("div",{className:"ms-annotations-panel-header"},T().createElement(Ot,{onClick:function(e){return D(e)},className:"square-button no-border"},T().createElement(_.gG,{glyph:"1-close"})),T().createElement("div",{className:"ms-annotations-title"},T().createElement(le.Z,{msgId:"annotations.title"})),T().createElement("div",{className:"square-button text-primary"},T().createElement(_.gG,{glyph:"comment"}))),T().createElement(_.JL,{bsStyle:"tabs",activeKey:C,className:"ms-annotations-panel-nav"},T().createElement(_.LY,{key:"properties",eventKey:"properties",onClick:function(){return A("properties")}},T().createElement(le.Z,{msgId:"annotations.properties"})," ",T().createElement(_.gG,{glyph:R()?"ok-sign text-success":"exclamation-mark text-danger"})),T().createElement(_.LY,{key:"geometries",eventKey:"geometries",onClick:function(){return A("geometries")}},T().createElement(le.Z,{msgId:"annotations.geometries"})," ",T().createElement(_.gG,{glyph:x()?"ok-sign text-success":"exclamation-mark text-danger"})),T().createElement(_.LY,{key:"settings",eventKey:"settings",onClick:function(){return A("settings")}},T().createElement(le.Z,{msgId:"settings"})),T().createElement(Ot,{className:"square-button-md",bsStyle:"primary",tooltipId:"annotations.downloadcurrenttooltip",disabled:!(R()&&x()),onClick:function(){return p([r])}},T().createElement(_.gG,{glyph:"download"}))),T().createElement("div",{className:"ms-annotations-panel-body"},T().createElement("div",{className:"ms-annotations-panel-content",style:"properties"===C?{}:{display:"none"}},T().createElement(lt,{fields:v,properties:j,onChange:function(e){var t=e.title,n=e.description,o=ht(e,pt);f(r.id,"layers",vt(vt(vt({},void 0!==t&&{title:t}),void 0!==n&&{description:n}),{},{options:vt(vt({},r.options),o)}))}})),T().createElement("div",{id:n,style:"geometries"===C?{}:{display:"none"}}),T().createElement("div",{className:"ms-annotations-panel-content",style:"settings"===C?{}:{display:"none"}},T().createElement(st.Z,{title:T().createElement(_.J$,null,T().createElement(le.Z,{msgId:"layerProperties.visibilityLimits.title"})),layer:r,onChange:function(e){return f(r.id,"layers",e)},projection:E,resolutions:S,zoom:w}))),O&&T().createElement(_.bZ,{bsStyle:"warning"},T().createElement(le.Z,{msgId:"annotations.deactivatedMapInteraction",msgParams:{pluginName:Ke()(O)}})),T().createElement(ct.Z,null,T().createElement(ut.Z,{show:N,modal:!0,onClose:function(){return h(),void L(!1)},onConfirm:function(){return c(r),void L(!1)},confirmButtonBSStyle:"primary",closeGlyph:"1-close",confirmButtonContent:T().createElement(le.Z,{msgId:"annotations.confirm"}),closeText:T().createElement(le.Z,{msgId:"annotations.cancel"})},T().createElement(le.Z,{msgId:"annotations.undo"})))):null}));const wt=St;var jt=["status","selectedLayers","onAdd","onDownload","onEdit","annotationLayers","statusTypes","itemComponent"];function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pt.apply(this,arguments)}const Tt=(0,C.connect)((0,A.P1)([y.Yu,(0,R.Yq)(m.jB)],(function(e,t){return{annotationLayers:e,enabled:t}})),{onAdd:p.A9,onDownload:p.LR,onEdit:p.VR})((function(e){var t=e.status,n=e.selectedLayers,r=e.onAdd,o=void 0===r?function(){}:r,i=e.onDownload,a=void 0===i?function(){}:i,l=e.onEdit,u=void 0===l?function(){}:l,c=e.annotationLayers,s=void 0===c?[]:c,f=e.statusTypes,d=e.itemComponent,p=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,jt),y=d;if(t===f.DESELECT)return T().createElement(T().Fragment,null,T().createElement(y,Pt({},p,{key:"annotations",tooltipId:"toc.addAnnotations",onClick:function(){return o()},glyph:"add-comment"})),s.length>0&&T().createElement(y,Pt({},p,{key:"annotations-download",glyph:"download-comment",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(s)}})));if(t===f.LAYER&&(0,m.cO)(n[0]))return T().createElement(T().Fragment,null,T().createElement(y,Pt({},p,{key:"annotations-edit",glyph:"pencil",tooltipId:"toc.editAnnotations",onClick:function(){return u(n[0].id)}})),T().createElement(y,Pt({},p,{key:"annotations-download",tooltipId:"annotations.downloadcurrenttooltip",onClick:function(){return a([n[0]])},glyph:"download-comment"})));var v=t===f.LAYERS?n.filter(m.cO):[];return v.length?T().createElement(T().Fragment,null,T().createElement(y,Pt({},p,{key:"annotations-download",tooltipId:"annotations.downloadtooltip",onClick:function(){return a(v)},glyph:"download-comment"}))):null})),It=(0,r.rx)("Annotations",{component:wt,containers:{TOC:{doNotHide:!0,name:"Annotations",target:"toolbar",Component:Tt,position:12},Map:{name:"Annotations",Tool:Ye,alwaysRender:!0}},reducers:{annotations:j.Z},epics:w})},79267:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(14281);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var r,i,a,l;r=e,i=t,a=n[t],l=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==o(l)?l:l+"")in r?Object.defineProperty(r,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[i]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.e7:return a(a({},e),{},{session:t.session});case r.Nd:return a(a({},e),{},{featureId:t.id});case r.CD:case r.A1:return a(a({},e),{},{editing:!0,closeId:0});case r.eY:return a(a({},e),{},{closeId:(e.closeId||0)+1});case r.bI:return a(a({},e),{},{editing:!1,closeId:0,session:null});case r.Rr:return a(a({},e),{},{closeId:0});default:return e}}},55105:(e,t,n)=>{"use strict";n.d(t,{Ss:()=>m,Nr:()=>y,QJ:()=>v,ic:()=>b,Jz:()=>g,VM:()=>h,CF:()=>O,Ju:()=>E,Fc:()=>S,gQ:()=>w});var r=n(91175),o=n.n(r),i=n(288306),a=n.n(i),l=n(800827),u=n(552259),c=n(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){return e.maplayout&&e.maplayout.layout||{}},y=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},v=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},b=a()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m(e),o=v(e);return r&&Object.keys(r).filter((function(e){return t[e]})).reduce((function(e,t){var i;return d(d({},e),{},p({},t,n&&null!==(i=o[t])&&void 0!==i?i:r[t]))}),{})||{}}),(function(e,t,n){return JSON.stringify(m(e))+JSON.stringify(v(e))+JSON.stringify(t)+(n?"_isDock":"")})),g=function(e){var t;return!(null===(t=m(e))||void 0===t||!t.rightPanel)},h=function(e){var t,n=c.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=m(e);return!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==n?void 0:n.bottom.sm)&&void 0!==t?t:0,type:"not"}])},O=function(e){var t=(0,l.Od)(e),n=y(e);return n&&t&&t.size&&{left:(0,u.pb)(n.left,t.size.width),bottom:(0,u.pb)(n.bottom,t.size.height),right:(0,u.pb)(n.right,t.size.width),top:(0,u.pb)(n.top,t.size.height)}},E=function(e){var t,n;return null!==(t=null==e||null===(n=e.maplayout)||void 0===n?void 0:n.dockPanels)&&void 0!==t?t:{left:[],right:[]}},S=function(e){return b(e,{height:!0,right:!0},!0)},w=function(e){return b(e,{right:!0},!0)}},443143:(e,t,n)=>{"use strict";n.d(t,{qH:()=>s,qj:()=>f,qq:()=>d,TM:()=>p});var r,o=n(717621),i=n.n(o),a=n(14841),l=n.n(a),u=n(264721),c=n.n(u),s=function(e,t,n,o){var i=e;isNaN(parseFloat(e))&&(i=r.hexToHsv(e)[0]);var a=.5/(n-1),l=t/(n-1),u=[];1===n&&(a=.5,l=t/2);for(var c=0;c<n;c++){var s=i+c*l-t/2,f=a*c+.3,d=f;o&&(s=o.h||s,f=o.s||f,d=o.v||d),u.push(r.hsvToHex(s,f,d,c))}return u},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},d=function(e,t,n){var r=i()(e);return e&&r.setAlpha(l()(void 0!==t?t:r.getAlpha())).toRgbString()||n},p=function e(t){var n=Math.round,o=Math.random,i=[n(255*o()),n(255*o()),n(255*o())],a=r.rgbToHex(i);if(t)for(;c()(t,a)||"#000000"===a||"#FFFFFF"===a;)e(t);return a};r={decToHex:function(e){var t="0123456789ABCDEF",n=parseInt(e,10);return n=isNaN(n)?0:n,t.charAt(((n=n>255||n<0?0:n)-n%16)/16)+t.charAt(n%16)},rgbToHex:function(e,t,n){return e instanceof Array?r.rgbToHex(e[0],e[1],e[2]):"#"+r.decToHex(e)+r.decToHex(t)+r.decToHex(n)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,n){if(e instanceof Array)return r.rgbToHsv(e[0],e[1],e[2]);var o,i,a,l,u,c=e/255,s=t/255,f=n/255;switch(o=Math.min(Math.min(c,s),f),a=(i=Math.max(Math.max(c,s),f))-o,i){case o:l=0;break;case c:l=60*(s-f)/a,s<f&&(l+=360);break;case s:l=60*(f-c)/a+120;break;case f:l=60*(c-s)/a+240}return u=0===i?0:1-o/i,[Math.round(l),u,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),n=[],o=function e(t,n,o){var i=e(t,n,o);return r.rgbToHex(i)},i=0;i<e;i++)n.push(o(t*i,.57,.63));return n},sameToneRangeColors:s,hsvToRgb:function(e,t,n){if(e instanceof Array)return r.hsvToRgb(e[0],e[1],e[2]);var o,i,a,l=Math.floor(e/60%6),u=e/60-l,c=n*(1-t),s=n*(1-u*t),f=n*(1-(1-u)*t);switch(l){case 0:o=n,i=f,a=c;break;case 1:o=s,i=n,a=c;break;case 2:o=c,i=n,a=f;break;case 3:o=c,i=s,a=n;break;case 4:o=f,i=c,a=n;break;case 5:o=n,i=c,a=s}return[r.realToDec(o),r.realToDec(i),r.realToDec(a)]},hsvToHex:function(e,t,n){var o=r.hsvToRgb(e,t,n);return r.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var n=r.hexToRgb(t);return r.rgbToHsv(n)}return null},hexToRgb:function(e){var t,n,r,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),n=o.charAt(2)+o.charAt(3),r=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]},colorToHexStr:f,colorToRgbaStr:d,generateRandomHexColor:p}},629859:(e,t,n)=>{"use strict";n.d(t,{n0:()=>s,sc:()=>f});var r=n(909041),o=n(689265),i=n.n(o),a=n(717247),l=n.n(a),u=function(e){var t=void 0;if(e instanceof HTMLAnchorElement){var n={};if(e.dataset&&void 0!==e.dataset.mention)n.url=e.href,n.text=e.innerHTML,n.value=e.dataset.value,t=r.Entity.__create("MENTION","IMMUTABLE",n);else{n.url=e.getAttribute&&e.getAttribute("href")||e.href,n.title=e.innerHTML,n.targetOption=e.target;var o=e.getAttribute&&e.getAttribute("data-geostory-interaction-type"),i=e.getAttribute&&e.getAttribute("data-geostory-interaction-params"),a=e.getAttribute&&e.getAttribute("data-geostory-interaction-name"),l={};a&&i&&o&&(l["data-geostory-interaction-type"]=o,l["data-geostory-interaction-params"]=i,l["data-geostory-interaction-name"]=a),n.attributes=l,t=r.Entity.__create("LINK","MUTABLE",n)}}return t},c=function(e,t){if("MENTION"===e.type)return'< href="'.concat(e.data.url,'" class="wysiwyg-mention" data-mention data-value="').concat(e.data.value,'">').concat(t,"</a>");if("LINK"===e.type){var n=e.data.targetOption||"_self",r=e.data.attributes;return r&&r["data-geostory-interaction-type"]?'<a data-geostory-interaction-name="'.concat(r["data-geostory-interaction-name"],'" data-geostory-interaction-type="').concat(r["data-geostory-interaction-type"],'" data-geostory-interaction-params="').concat(r["data-geostory-interaction-params"],"\" onclick=\"__geostory_interaction(type='scrollTo', '").concat(r["data-geostory-interaction-params"],"')\">").concat(t,"</a>"):'<a href="'.concat(e.data.url,'" target="').concat(n,'">').concat(t,"</a>")}if("IMAGE"===e.type){var o=e.data.alignment,i=o&&"none"!==o?"float: ".concat(o,";"):"display: block; margin: 0 auto 0 auto;";return'<img title="'.concat(e.data.src,'" src="').concat(e.data.src,'" alt="').concat(e.data.alt||" ",'" style="height: ').concat(e.data.height,"; width: ").concat(e.data.width,"; ").concat(i,'"/>')}return"EMBEDDED_LINK"===e.type?'<iframe width="'.concat(e.data.width,'" height="').concat(e.data.height,'" src="').concat(e.data.src,'" frameBorder="0"></iframe>'):t},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=l()(e,null,u),n=r.ContentState.createFromBlockArray(t.contentBlocks);return r.EditorState.createWithContent(n)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=1!==(0,r.convertToRaw)(e.getCurrentContent()).blocks.length||(0,r.convertToRaw)(e.getCurrentContent()).blocks[0].text,o=i()((0,r.convertToRaw)(e.getCurrentContent()),null,null,c);return n?o:t}return t}},577215:(e,t,n)=>{"use strict";n.d(t,{VZ:()=>m,oL:()=>y,F0:()=>v,cP:()=>b,Br:()=>g,rD:()=>h});var r=n(944908),o=n.n(r),i=n(513218),a=n.n(i),l=n(984596),u=n.n(l),c=n(945402),s=n(916651);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){var r,o,i,a;r=e,o=t,i=n[t],a=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==f(a)?a:a+"")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=["image/png","image/gif","image/jpeg","image/png8","image/png; mode=8bit","image/png; mode=24bit","image/vnd.jpeg-png","image/vnd.jpeg-png8"],y=function(){return o()(Object.values((0,c.eq)()))},v=function(e){return m.includes(e)},b=function(e){return y().includes(e)},g=function(e){var t,n,r,o,i;return a()(e)?{capabilities:e,description:e.Abstract,boundingBox:null!=e&&e.EX_GeographicBoundingBox?{minx:null===(t=e.EX_GeographicBoundingBox)||void 0===t?void 0:t.westBoundLongitude,miny:null===(n=e.EX_GeographicBoundingBox)||void 0===n?void 0:n.southBoundLatitude,maxx:null===(r=e.EX_GeographicBoundingBox)||void 0===r?void 0:r.eastBoundLongitude,maxy:null===(o=e.EX_GeographicBoundingBox)||void 0===o?void 0:o.northBoundLatitude}:null==e||null===(i=e.LatLonBoundingBox)||void 0===i?void 0:i.$,availableStyles:(null==e?void 0:e.Style)&&u()(e.Style).map((function(e){return p(p(p({name:e.Name},e.Title&&{title:e.Title}),e.Abstract&&{_abstract:e.Abstract}),e.LegendURL&&{legendURL:u()(e.LegendURL).map((function(e){var t,n,r,o,i,a;return p({width:null!=e&&null!==(t=e.$)&&void 0!==t&&t.width?parseFloat(e.$.width):void 0,height:null!=e&&null!==(n=e.$)&&void 0!==n&&n.height?parseFloat(e.$.height):void 0,format:null==e?void 0:e.Format},(null==e||null===(r=e.OnlineResource)||void 0===r||null===(o=r.$)||void 0===o?void 0:o["xlink:type"])&&(null==e||null===(i=e.OnlineResource)||void 0===i||null===(a=i.$)||void 0===a?void 0:a["xlink:href"])&&{onlineResource:{type:e.OnlineResource.$["xlink:type"],href:e.OnlineResource.$["xlink:href"]}})}))})}))}:{}},h=function(e){var t=e.tileGrids,n=void 0===t?[]:t,r=e.projection,o=e.tileSize,i=void 0===o?256:o;return n.find((function(e){var t,n,o;return(0,s.normalizeSRS)(e.crs)===(0,s.normalizeSRS)(r)&&!(((null===(t=e.tileSizes)||void 0===t||null===(n=t[0])||void 0===n?void 0:n[0])||(null===(o=e.tileSize)||void 0===o?void 0:o[0]))!==i)}))}},178598:function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},u=function(e){setTimeout((function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},s=function(t,s,f){f||(t=c(t));var d,p=this,m="application/octet-stream"===t.type,y=function(){!function(e,t,n){for(var r=(t=[].concat(t)).length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,e)}catch(e){l(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,o)return d=n().createObjectURL(t),void setTimeout((function(){var e,t;r.href=d,r.download=s,e=r,t=new MouseEvent("click"),e.dispatchEvent(t),y(),u(d),p.readyState=p.DONE}));!function(){if((a||m&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=a?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,y()},r.readAsDataURL(t),void(p.readyState=p.INIT)}d||(d=n().createObjectURL(t)),m?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),p.readyState=p.DONE,y(),u(d)}()},f=s.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(e,t,n){return new s(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=o:null!==n.amdD&&null!==n.amdO&&(void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r))}}]);