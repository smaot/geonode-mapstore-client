(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[59010,27157],{580416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>n,Zz:()=>o,ms:()=>i,ih:()=>l,OX:()=>a,sb:()=>u,K$:()=>c,k7:()=>s,cX:()=>f,x9:()=>p,vs:()=>y,oE:()=>d,Po:()=>m,qv:()=>b,cI:()=>v,g6:()=>g,I4:()=>h,l$:()=>S,Xv:()=>O,k3:()=>E,CQ:()=>w,R8:()=>P,HN:()=>j,sH:()=>A,c7:()=>T,_7:()=>C,eF:()=>_,O6:()=>N,ED:()=>R,RP:()=>L,sF:()=>k,VP:()=>D,He:()=>I,vO:()=>U,WO:()=>Z,bh:()=>x,MK:()=>M,ZF:()=>Y,tV:()=>F,Dv:()=>G,Yz:()=>V,kI:()=>z,XG:()=>H,A4:()=>J,Rp:()=>B,$o:()=>X,ct:()=>$,oh:()=>q,$h:()=>Q,ud:()=>W,Qr:()=>K,LR:()=>ee,nN:()=>te,UG:()=>re,c9:()=>ne,Xy:()=>oe});var n="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",l="TOGGLE_NODE",a="SORT_NODE",u="REMOVE_NODE",c="UPDATE_NODE",s="MOVE_NODE",f="LAYER_LOADING",p="LAYER_LOAD",y="LAYER_ERROR",d="ADD_LAYER",m="ADD_GROUP",b="REMOVE_LAYER",v="SHOW_SETTINGS",g="HIDE_SETTINGS",h="UPDATE_SETTINGS",S="REFRESH_LAYERS",O="LAYERS:UPDATE_LAYERS_DIMENSION",E="LAYERS_REFRESHED",w="LAYERS_REFRESH_ERROR",P="LAYERS:BROWSE_DATA",j="LAYERS:DOWNLOAD",A="LAYERS:CLEAR_LAYERS",T="LAYERS:SELECT_NODE",C="LAYERS:FILTER_LAYERS",_="LAYERS:SHOW_LAYER_METADATA",N="LAYERS:HIDE_LAYER_METADATA",R="LAYERS:UPDATE_SETTINGS_PARAMS";function L(e,t,r){return{type:v,node:e,nodeType:t,options:r}}function k(){return{type:g}}function D(e){return{type:h,options:e}}function I(e,t){return{type:n,newProperties:t,layer:e}}function U(e,t){return{type:o,layer:e,params:t}}function Z(e,t){return{type:i,newProperties:t,group:e}}function x(e,t,r){return{type:l,node:e,nodeType:t,status:!r}}function M(e,t){return{type:a,node:e,order:t,sortLayers:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null}}function Y(e,t){return{type:u,node:e,nodeType:t,removeEmpty:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}function F(e,t,r){return{type:c,node:e,nodeType:t,options:r}}function G(e,t,r){return{type:s,node:e,groupId:t,index:r}}function V(e){return{type:f,layerId:e}}function z(e,t){return{type:p,layerId:e,error:t}}function H(e,t,r){return{type:y,layerId:e,tilesCount:t,tilesErrorCount:r}}function J(e){return{type:d,layer:e,foreground:!(arguments.length>1&&void 0!==arguments[1])||arguments[1]}}function B(e,t,r){return{type:m,group:e,parent:t,options:r,asFirst:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}}function X(e){return{type:b,layerId:e}}function $(e,t){return{type:n,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function q(e){return{type:E,layers:e}}function Q(e,t){return{type:w,layers:e,error:t}}function W(e,t,r,n){return{type:O,dimension:e,value:t,options:r,layers:n}}function K(e){return{type:P,layer:e}}function ee(e){return{type:j,layer:e}}function te(){return{type:A}}function re(e,t,r){return{type:T,id:e,nodeType:t,ctrlKey:r}}function ne(e,t){return{type:_,metadataRecord:e,maskLoading:t}}function oe(e,t){return{type:R,newParams:e,update:t}}},362520:(e,t,r)=>{"use strict";r.d(t,{dn:()=>n,NS:()=>o,Kn:()=>i,FV:()=>l,Vd:()=>a,yS:()=>u});var n="MAP_LAYOUT:UPDATE_MAP_LAYOUT",o="MAP_LAYOUT:UPDATE_DOCK_PANELS",i="MAP_LAYOUT:FORCE_UPDATE_MAP_LAYOUT";function l(e){return{type:n,layout:e}}function a(e){return{type:o,name:e,action:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",location:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"right"}}function u(){return{type:i}}},352595:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(461365).Z)(r(480681).aV)},112346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var n=r(124852),o=r.n(n),i=r(45697),l=r.n(i),a=r(480681),u=r(145869),c=r(80717),s=r(805346);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function y(e,t,r){return t=m(t),function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],m(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this;return o().createElement(c.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:5}},buttons:[{glyph:this.props.checked?"chevron-down":"chevron-left",visible:!0,disabled:this.props.disabled,tooltip:this.props.checked?o().createElement(s.Z,{msgId:"collapse"}):o().createElement(s.Z,{msgId:"expand"}),onClick:function(){return e.props.onClick(!e.props.checked)}}]})}}])&&p(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);v(h,"propTypes",{checked:l().bool,disabled:l().bool,onClick:l().func}),v(h,"defaultProps",{checked:!1,disabled:!1,onClick:function(){}});const S=h;var O=r(38560),E=r(82110);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}function j(e,t,r){return t=T(t),function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function _(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var R=function(){return o().createElement(O.Z,{className:"square-button-sm no-border switch-error"},o().createElement(a.gG,{glyph:"exclamation-mark",className:"text-danger"}))},L=function(){return o().createElement("div",{className:"switch-loading"},o().createElement(E.Z,{size:"small"}))},k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _(e=j(this,t,[].concat(n)),"state",{}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(n=[{key:"renderHeader",value:function(){var e=this,t=this.props.useToolbar?S:u.Z;return o().createElement("div",null,o().createElement("div",{className:"pull-left"},this.props.title||this.props.header),o().createElement("div",{className:"pull-right"},this.props.locked?null:o().createElement(t,{disabled:this.props.disabled,checked:this.props.expanded,onClick:function(t){e.props.disabled||e.props.onSwitch(t)}}),this.props.error?o().createElement(R,null):null,this.props.loading?o().createElement(L,null):null,this.props.buttons.length>0&&this.props.expanded&&o().createElement(c.Z,{btnDefaultProps:{className:"square-button-sm no-border"},buttons:this.props.buttons})))}},{key:"render",value:function(){return o().createElement(a.s_,{className:"mapstore-switch-panel",collapsible:!0,expanded:this.props.expanded,defaultExpanded:this.props.defaultExpanded,header:this.renderHeader()},this.props.children)}}])&&P(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);_(k,"propTypes",{header:l().node,title:l().oneOfType([l().string,l().node]),defaultExpanded:l().string,expanded:l().bool,onSwitch:l().func,locked:l().bool,buttons:l().array,loading:l().bool,disabled:l().bool,error:l().any,useToolbar:l().bool}),_(k,"defaultProps",{title:"",disabled:!1,expanded:!1,onSwitch:function(){},locked:!1,buttons:[],useToolbar:!1});const D=k},202576:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(124852),o=r.n(n),i=r(180307),l=r.n(i),a=r(45697),u=r.n(a),c=r(480681),s=r(352595),f=r(950966);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return t=b(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function g(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"renderPopover",value:function(){return o().createElement(c.J2,{id:this.props.id,placement:this.props.placement,positionLeft:this.props.left,positionTop:this.props.top,title:this.props.title,style:this.props.popoverStyle},this.props.text)}},{key:"renderContent",value:function(){var e=this;return o().createElement(c.gG,{ref:function(t){e.target=t},className:"text-".concat(this.props.bsStyle),glyph:this.props.glyph})}},{key:"render",value:function(){var e=this,t=!0===this.props.trigger?["hover","focus"]:this.props.trigger;return o().createElement("span",{className:"mapstore-info-popover"},this.props.trigger?o().createElement(f.Z,{trigger:t,placement:this.props.placement,overlay:this.renderPopover()},this.renderContent()):[this.renderContent(),o().createElement(s.Z,{placement:this.props.placement,show:!0,target:function(){return l().findDOMNode(e.target)}},this.renderPopover())])}}])&&y(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(o().Component);g(S,"propTypes",{id:u().string,title:u().string,text:u().string,glyph:u().string,bsStyle:u().string,placement:u().string,left:u().number,top:u().number,trigger:u().oneOfType([u().array,u().bool]),popoverStyle:u().object}),g(S,"defaultProps",{id:"",title:"",text:"",placement:"right",left:200,top:50,glyph:"question-sign",bsStyle:"info",trigger:["hover","focus"]});const O=S},271609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(375875),o=r.n(n),i=r(737275),l=r(984596),a=r.n(l),u=r(692957);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){var t=e||i.ZP.getConfigProp("contextPluginsConfiguration")||"configs/pluginsConfig.json",r=a()(t);return o().all(r.map((function(e){return o().get(e).then((function(e){return e.data})).catch((function(){return null}))}))).then((function(e){var t,r=function(e){if(Array.isArray(e))return e}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=r[0],o=r.slice(1);if(!n)throw new Error("plugins configuration file is broken");return(0,u.ao)(n,o.filter((function(e){return e&&"object"===c(e)})))}))}},788113:(e,t,r)=>{"use strict";r.d(t,{b6:()=>p,PG:()=>y,_x:()=>d,Mm:()=>m,dP:()=>b,SX:()=>v,ZL:()=>g,_S:()=>h,iH:()=>S,R7:()=>O,Q7:()=>E,n7:()=>w,bA:()=>P,hm:()=>j,E2:()=>A,Cb:()=>T,eK:()=>C,Im:()=>_,e8:()=>N,JF:()=>R,kS:()=>L,y:()=>k,l2:()=>D,HN:()=>I,BM:()=>U,O8:()=>Z,am:()=>x,LV:()=>M,CK:()=>Y,jU:()=>F,Qg:()=>G,$c:()=>V});var n=r(22222),o=r(227361),i=r.n(o),l=r(800827),a=r(577215),u=r(274621);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==c(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){return i()(e,"catalog.services")},y=(0,n.P1)((function(e){return i()(e,"catalog.default.staticServices")}),p,(function(e,t){var r=null==e?void 0:e.default_map_backgrounds;return r?(r.readOnly=!0,f(f({},t),{},{default_map_backgrounds:r})):t})),d=function(e){return i()(e,"catalog.default.tileSizes",[256,512])},m=function(e){return i()(e,"controls.metadataexplorer.group")},b=function(e){return i()(e,"catalog.saving")},v=function(e){return i()(e,"catalog.result")},g=function(e){return i()(e,"catalog.openCatalogServiceList")},h=function(e){return i()(e,"catalog.newService")},S=function(e){return i()(e,"catalog.newService.type","csw")},O=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"]'))},E=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].type'),function(e){return i()(e,'catalog.default.staticServices["'.concat(i()(e,"catalog.selectedService"),'"].type'),"csw")}(e))},w=function(e){return i()(e,'catalog.services["'.concat(i()(e,"catalog.selectedService"),'"].layerOptions'),{})},P=function(e){return i()(e,"catalog.searchOptions")},j=function(e){return i()(e,"catalog.loadingError")},A=function(e){return i()(e,"catalog.loading",!1)},T=function(e){return i()(e,"catalog.selectedService")},C=function(e){return i()(e,"catalog.mode","view")},_=function(e){return i()(e,"catalog.layerError")},N=function(e){return i()(e,"catalog.searchOptions.text","")},R=function(e){return"metadataexplorer"===i()(e,"controls.toolbar.active")||i()(e,"controls.metadataexplorer.enabled")},L=function(e){return(i()(e,"localConfig.authenticationRules")||[]).filter((function(e){return"authkey"===e.method})).map((function(e){return e.authkeyParamName}))||[]},k=function(e){return i()(e,"catalog.pageSize",4)},D=function(e){return i()(e,"catalog.delayAutoSearch",1e3)},I=(0,n.zB)({projection:l.uy}),U=function(e){return i()(e,"catalog.formatsLoading",!1)},Z=function(e){return i()(e,"catalog.newService.supportedFormats.imageFormats",[])},x=function(e){var t,r;return"edit"===C(e)?Z(e):(null===(t=O(e))||void 0===t||null===(r=t.supportedFormats)||void 0===r?void 0:r.imageFormats)||[]},M=function(e){return i()(e,"catalog.newService.supportedFormats.infoFormats",(0,a.oL)())},Y=function(e){return i()(e,"catalog.newService.formatUrlUsed","")},F=function(e){return i()(e,"catalog.isNewServiceAdded",!1)},G=function(e){return i()(e,"catalog.showFormatError",!1)},V=function(e){var t=function(e){return i()(e,"catalog.editingAllowedRoles",[])}(e),r=function(e){return i()(e,"catalog.editingAllowedGroups",[])}(e);return(0,u.tv)({allowedRoles:t,allowedGroups:r})(e)}},55105:(e,t,r)=>{"use strict";r.d(t,{Ss:()=>d,Nr:()=>m,QJ:()=>b,ic:()=>v,Jz:()=>g,VM:()=>h,CF:()=>S,Ju:()=>O,Fc:()=>E,gQ:()=>w});var n=r(91175),o=r.n(n),i=r(288306),l=r.n(i),a=r(800827),u=r(552259),c=r(737275);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){var n;return n=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==s(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=function(e){return e.maplayout&&e.maplayout.layout||{}},m=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},b=function(e){return e.maplayout&&e.maplayout.boundingSidebarRect||{}},v=l()((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=d(e),o=b(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){var i;return p(p({},e),{},y({},t,r&&null!==(i=o[t])&&void 0!==i?i:n[t]))}),{})||{}}),(function(e,t,r){return JSON.stringify(d(e))+JSON.stringify(b(e))+JSON.stringify(t)+(r?"_isDock":"")})),g=function(e){var t;return!(null===(t=d(e))||void 0===t||!t.rightPanel)},h=function(e){var t,r=c.ZP.getConfigProp("mapLayout")||u.Ur;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=d(e);return!!o()(t.filter((function(e){return r[e.key]})).map((function(e){return"not"===e.type?r[e.key]!==e.value&&r[e.key]:r[e.key]===e.value})))}(e,[{key:"bottom",value:null!==(t=null==r?void 0:r.bottom.sm)&&void 0!==t?t:0,type:"not"}])},S=function(e){var t=(0,a.Od)(e),r=m(e);return r&&t&&t.size&&{left:(0,u.pb)(r.left,t.size.width),bottom:(0,u.pb)(r.bottom,t.size.height),right:(0,u.pb)(r.right,t.size.width),top:(0,u.pb)(r.top,t.size.height)}},O=function(e){var t,r;return null!==(t=null==e||null===(r=e.maplayout)||void 0===r?void 0:r.dockPanels)&&void 0!==t?t:{left:[],right:[]}},E=function(e){return v(e,{height:!0,right:!0},!0)},w=function(e){return v(e,{right:!0},!0)}},586300:(e,t,r)=>{"use strict";r.d(t,{N4:()=>u,vq:()=>c,YD:()=>s,at:()=>f});var n=r(375875),o=r.n(n),i=r(271609),l=r(55035),a={},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/static/mapstore/configs/map.json";return a.newMapConfig?new Promise((function(e){return e(a.newMapConfig)})):o().get(e).then((function(e){var t=e.data;return a.newMapConfig=t,t})).then((function(e){return window.overrideNewMapConfig?window.overrideNewMapConfig(e):e}))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/static/mapstore/configs/geostory.json";return a.newGeoStoryConfig?new Promise((function(e){return e(a.newGeoStoryConfig)})):o().get(e).then((function(e){var t=e.data;return a.newGeoStoryConfig=t,t})).then((function(e){return window.overrideNewGeoStoryConfig?window.overrideNewGeoStoryConfig(e):e}))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/static/mapstore/configs/styleTemplates.json";return a.styleTemplatesConfig?new Promise((function(e){return e(a.styleTemplatesConfig)})):o().get(e).then((function(e){var t=e.data;return a.styleTemplatesConfig=null==t?void 0:t.templates,a.styleTemplatesConfig}))},f=function(){return null!=a&&a.pluginsConfig?Promise.resolve(a.pluginsConfig):(0,i.Z)((0,l.PX)("geoNodeSettings.staticPath","/static/")+"mapstore/configs/pluginsConfig.json").then((function(e){return a.pluginsConfig=e,e}))}},567587:(e,t,r)=>{"use strict";r.d(t,{z:()=>u});var n=r(409082);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var i=["msForceVisual"];function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){var n,i,l,a;n=e,i=t,l=r[t],a=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i),(i="symbol"==o(a)?a:a+"")in n?Object.defineProperty(n,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[i]=l})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){var t=e.baseUrl,o=e.styleName;return r.e(2568).then(r.t.bind(r,402568,23)).then((function(e){var r=e.default;return(0,n.bc)({baseUrl:t,styleName:o}).then((function(e){var l=(null==e?void 0:e.metadata)||{},u=l.msForceVisual,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(l,i);if(!u||""===u)return e;var s=a(a({},c),{},{msForceVisual:"",msEditorType:"visual",msStyleJSON:"",msMD5Hash:r(null==e?void 0:e.code)});return(0,n.Uz)(a(a({},e),{},{baseUrl:t,styleName:o,metadata:s,options:{params:{raw:!0}}})).then((function(){return a(a({},e),{},{metadata:s})}))}))}))}},632247:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(124852);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const i=function(e,t){var r,i,l=function(){if("undefined"==typeof window)return t;try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(r){return console.log("Error to get item key “".concat(e,"”:"),r),t}},a=(r=(0,n.useState)(l),i=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(r,i)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(r,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],c=a[1];return(0,n.useEffect)((function(){c(l())}),[]),(0,n.useEffect)((function(){var e=function(){c(l())};return window.addEventListener("localStorage",e),function(){window.removeEventListener("localStorage",e)}}),[]),[u,function(t){try{var r=t instanceof Function?t(u):t;c(r),window.localStorage.setItem(e,JSON.stringify(r)),window.dispatchEvent(new Event("localStorage"))}catch(t){console.log("Error “".concat(e,"”:"),t)}}]}},133096:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>pe});var n=r(124852),o=r.n(n),i=r(322843),l=r(171703),a=r(22222),u=r(480681),c=r(278720),s=r(532244),f=r(394943),p=r(49977),y=r(423570),d=r.n(y),m=r(580416),b=r(396909),v=r(782904),g=r(460604),h=r(99009),S=r(409082),O=r(893222),E="GEONODE:REQUEST_DATASET_AVAILABLE_STYLES",w=r(717621),P=r.n(w),j=r(535721),A=r(567587),T=r(362520),C=r(55105),_=r(737275),N=r(226735);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==R(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){var t=e.type,r=e.title,n=P()("hsl(".concat(Math.floor(270*Math.random()),", 90%, 70%)")).toHexString();switch(t){case"raster":return"@mode 'Flat'; @styleTitle '"+r+"'; \n* {\n\traster-channels: auto;\n\traster-opacity: 1;\n}\n";case"point":default:return"@mode 'Flat'; @styleTitle '"+r+"'; \n* {\n\tmark: symbol('square');\n\t:mark {\n\t\tfill: "+n+";\n\t\tsize: 4;\n\t}\n}\n";case"linestring":return"@mode 'Flat'; @styleTitle '"+r+"'; \n* {\n\tstroke: "+n+";\n}\n";case"polygon":return"@mode 'Flat'; @styleTitle '"+r+"'; \n* {\n\tfill: "+n+";\n}\n"}}const U={gnRequestDatasetAvailableStyles:function(e,t){return e.ofType(E).switchMap((function(e){var r,n=t.getState(),o=(null==e||null===(r=e.options)||void 0===r?void 0:r.styleService)||(0,O.Z0)(n);return p.Observable.concat(p.Observable.of((0,v.Xg)("visualStyleEditor","enabled",!0),(0,b.E0)(o,{editingAllowedRoles:["ALL"],editingAllowedGroups:[]})),p.Observable.defer((function(){return function(e){var t,r,n,o,i,l,a=e.layer,u=e.styleService,c=null==a||null===(t=a.extendedParams)||void 0===t||null===(r=t.mapLayer)||void 0===r||null===(n=r.dataset)||void 0===n?void 0:n.subtype,s=(null==a?void 0:a.availableStyles)||[];return 0===s.length?function(e,t){var r,n="visual";return e?(0,A.z)({baseUrl:null==t?void 0:t.baseUrl,styleName:(0,j.UH)(e)}).then((function(e){var t=e||{},r=t.metadata,n=void 0===r?{}:r,o=t.code,i=t.format,l=t.languageVersion;return{msEditorType:null==n?void 0:n.msEditorType,msStyleJSON:null==n?void 0:n.msStyleJSON,code:o,format:i,languageVersion:l}})).catch((function(){return{msEditorType:n,msStyleJSON:null,code:r}})):new Promise((function(e){return e({msStyleJSON:null,msEditorType:n,code:r})}))}(null==a||null===(o=a.extendedParams)||void 0===o||null===(i=o.mapLayer)||void 0===i||null===(l=i.dataset)||void 0===l?void 0:l.default_style,u).then((function(e){var t,r,n,o,i=e||{},l=i.msEditorType,s=i.msStyleJSON,f=i.code,p=i.format,y=i.languageVersion,m=a.name.split(":"),b=1===m.length?m[0]:m[m.length-1],v=(o=b,"geonode:".concat(d()(),"_ms_").concat(o)),g={title:b,description:"",msStyleJSON:s,msEditorType:l,gnDatasetPk:null==a||null===(t=a.extendedParams)||void 0===t||null===(r=t.mapLayer)||void 0===r||null===(n=r.dataset)||void 0===n?void 0:n.pk};return S.ZP.createStyle(D({baseUrl:null==u?void 0:u.baseUrl,code:f||I({type:c,title:b}),format:f&&p?p:"css",styleName:v,metadata:g,options:{params:{raw:!0}}},f&&p&&{languageVersion:y})).then((function(){return[[{name:v,title:b,metadata:g,format:p}],!0]}))})):new Promise((function(e){return e([s])}))}({layer:e.layer,styleService:o})})).switchMap((function(t){var r,n,i,l,a=(i=t,l=1,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(i,l)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],u=(null==e||null===(r=e.options)||void 0===r?void 0:r.style)||(null==a||null===(n=a[0])||void 0===n?void 0:n.name);return p.Observable.concat(p.Observable.defer((function(){return S.ZP.getStylesInfo({baseUrl:null==o?void 0:o.baseUrl,styles:a})})).switchMap((function(t){return p.Observable.of((0,m.tV)(e.layer.id,"layer",{availableStyles:t}),(0,m.Xy)({style:u},!0),(0,g.W)(e.layer.id,h.s1,"override",{}),(0,b.Nf)("edit"))})))})))}))},gnUpdateStyleInfoOnSave:function(e,t){return e.ofType(b.ch).switchMap((function(){var e=t.getState(),r=(0,O.Vf)(e);return p.Observable.of((0,m.tV)(r.id,"layers",{style:r.style}))}))},gnUpdateVisualStyleEditorMapLayout:function(e,t){return e.ofType(T.dn,v.At).filter((function(){var e,r,n;return null===(e=t.getState())||void 0===e||null===(r=e.controls)||void 0===r||null===(n=r.visualStyleEditor)||void 0===n?void 0:n.enabled})).filter((function(e){return e.source!==N.O.PANEL})).map((function(e){var r=e.layout,n=(0,_.u8)("mapLayout")||{left:{sm:300,md:500,lg:600},right:{md:658},bottom:{sm:30}},o=(0,C.QJ)(t.getState()),i=(0,T.FV)(D(D(D({},(0,C.Ss)(t.getState())),r),{},{left:n.left.md,boundingMapRect:D(D({},(null==r?void 0:r.boundingMapRect)||{}),{},{left:n.left.md}),boundingSidebarRect:D(D({},o),r.boundingSidebarRect)}));return D(D({},i),{},{source:N.O.PANEL})}))}};var Z=r(805346),x=r(303744),M=r(399534),Y=r(694745),F=r(482100),G=r(815135),V=r(675110),z=r(632247),H=r(283958),J=r(290702),B=r(166287),X=r(586300);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==$(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee=(0,G.Z)(x.Z);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){return re=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},re.apply(this,arguments)}function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){var n,o,i,l;n=e,o=t,i=r[t],l=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==te(l)?l:l+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,l,a=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=(0,G.Z)(x.Z),ue=(0,l.connect)((0,a.P1)([O.QW,O.gB,O.aN,O.p,V.l2],(function(e,t,r,n,o){var i;return{isStyleChanged:void 0!==e&&void 0!==t&&e!==t,loading:r,error:!(null==n||null===(i=n.edit)||void 0===i||!i.status),layerLoading:o&&o.some((function(e){return e.loading}))}})),{onClick:b.Lc})((function(e){var t=e.variant,r=e.onClick,n=e.size,i=e.isStyleChanged,l=e.error,a=e.loading,u=e.layerLoading,c=e.msgId,s=void 0===c?"gnviewer.applyStyle":c,f=!!(a||u||l);return i?o().createElement(ae,{variant:t||"primary",className:i?"gn-pending-changes-icon":"",size:n,disabled:f,onClick:f?function(){}:function(){return r()}},o().createElement(Z.Z,{msgId:s})):null})),ce=(0,l.connect)((0,a.P1)([O.Vf,O.lC,O.Ed,O.gB,O.i7,function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.visualStyleEditor)||void 0===r?void 0:r.tmpCode}],(function(e,t,r,n,o,i){var l;return{geometryType:t,format:r,selectedStyle:null==e||null===(l=e.availableStyles)||void 0===l?void 0:l.find((function(e){return e.name===o})),code:n,tmpCode:i}})),{onSelect:b.p2,onUpdateMetadata:b.bB,onStoreTmpCode:v.Xg.bind(null,"visualStyleEditor","tmpCode")})((function(e){var t=e.code,r=e.format,i=e.geometryType,l=e.onSelect,a=e.selectedStyle,u=e.onUpdateMetadata,c=e.tmpCode,s=e.onStoreTmpCode,f=(0,n.useRef)(),p=W((0,n.useState)([]),2),y=p[0],d=p[1],m=W((0,n.useState)(),2),b=m[0],v=m[1],g=W((0,n.useState)(!1),2),h=g[0],S=g[1];(0,n.useEffect)((function(){return f.current=!0,(0,X.YD)().then((function(e){f.current&&d(e)})),function(){f.current=!1}}),[]);var O=(0,n.useRef)();O.current=function(e){e?s(t):(v(void 0),c&&l(c))},(0,n.useEffect)((function(){return function(){s("")}}),[]);var E=y.filter((function(e){return e.types.includes(i)}));return(null==E?void 0:E.length)>0?o().createElement(J.Z,{key:h,placement:"right",open:h,onOpen:function(e){S(e),O.current(e)},content:o().createElement("div",{className:"gn-visual-style-editor-templates"},o().createElement("ul",null,E.map((function(e,t){var n;return o().createElement("li",{key:t,className:"gn-visual-style-editor-template".concat(b===t?" selected":""),onClick:function(){return function(e,t){var n,o=e.code;v(t);var i=(null==a||null===(n=a.metadata)||void 0===n?void 0:n.title)||(null==a?void 0:a.label)||(null==a?void 0:a.title)||(null==a?void 0:a.name)||"";(0,B.getStyleParser)(r).then((function(e){e.writeStyle(Q(Q({},o),{},{name:i})).then((function(e){f.current&&l(e)}))}))}(e,t)}},o().createElement("div",{className:"gn-visual-style-editor-template-preview"},null!=e&&null!==(n=e.preview)&&void 0!==n&&n.config?o().createElement(H.Z,e.preview.config):null==e?void 0:e.preview),o().createElement("div",{className:"gn-visual-style-editor-template-title"},e.title))}))),o().createElement("div",{className:"gn-visual-style-editor-templates-footer"},o().createElement(ee,{size:"xs",disabled:void 0===b,variant:"primary",onClick:function(){s(t),u({styleJSON:null,editorType:"visual"}),S(!1)}},o().createElement(Z.Z,{msgId:"gnviewer.copy"}))))},o().createElement(ee,{size:"xs"},o().createElement(Z.Z,{msgId:"gnviewer.copyFrom"}))):null})),se=(0,l.connect)((0,a.P1)([O.Vf,O.gc,O.Z0,O.QW,function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.visualStyleEditor)||void 0===r?void 0:r.enabled},function(e){return(0,C.ic)(e,{height:!0})},V.Iz,O.gB,F.L4],(function(e,t,r,n,o,i,l,a,u){return{layer:e,temporaryStyleId:t,styleService:r,initialCode:n,enabled:o,style:i,originalStyle:null==l?void 0:l.style,isStyleChanged:void 0!==n&&void 0!==a&&n!==a,resourceType:u}})),{onUpdateStatus:b.Nf,onUpdateParams:m.Xy,onInit:b.E0,onReset:b.Wv.bind(null,void 0,!1),onSave:b.Lc,onClose:v.Xg.bind(null,"visualStyleEditor","enabled",!1),onUpdateNode:m.tV},(function(e,t,r){var n,o,i,l=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),a=r.styleService&&!l?oe(oe({},r.styleService),{},{isStatic:!0}):oe({},e.styleService);return oe(oe(oe(oe({},r),e),t),{},{styleService:a})}))((function(e){var t=e.layer,r=e.editorConfig,i=e.styleService,l=e.onInit,a=e.onReset,s=e.temporaryStyleId,f=e.showLayerProperties,p=e.initialCode,y=e.enabled,d=e.onClose,m=e.style,b=e.isStyleChanged,v=e.resourceType,g=ie((0,n.useState)(!1),2),h=g[0],O=g[1],E=ie((0,z.Z)("style-notifcation",!1),2),w=E[0],P=E[1],j=ie((0,n.useState)(!1),2),A=j[0],T=j[1],C=(0,n.useRef)();function _(e){e?(a(),d()):O(!0)}return C.current=function(){s&&S.ZP.deleteStyle({baseUrl:i.baseUrl,styleName:s})},(0,n.useEffect)((function(){function e(){C.current()}return l(i),window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e),a()}}),[]),y&&t.id?o().createElement("div",{className:"gn-visual-style-editor",style:m},f&&o().createElement("div",{className:"gn-visual-style-editor-layer-info"},o().createElement("div",{className:"gn-visual-style-editor-layer-title"},t.title),o().createElement(ae,{onClick:_.bind(null,!b),className:"square-button"},o().createElement(u.gG,{glyph:"1-close"}))),!A&&!w&&"map"===v&&o().createElement("div",{className:"gn-visual-style-editor-alert alert-info"},o().createElement("div",{className:"gn-visual-style-editor-alert-message"},o().createElement(Z.Z,{msgId:"gnviewer.stylesFirstClone"}),o().createElement(ae,{size:"xs",variant:"transparent",onClick:function(){P(!0)}},o().createElement("p",null,o().createElement(Z.Z,{msgId:"gnviewer.dismissMessage"})))),o().createElement(ae,{size:"xs",variant:"transparent",onClick:function(){T(!0)}},o().createElement(u.gG,{glyph:"remove"}))),o().createElement("div",{className:"gn-visual-style-editor-body"},o().createElement("div",null,o().createElement(c.m2,{key:p,config:r,header:o().createElement(o().Fragment,null,o().createElement(ce,null),o().createElement(ue,{variant:"primary",size:"xs"}))}))),o().createElement(M.Z,null,o().createElement(Y.Z,{title:o().createElement(Z.Z,{msgId:"gnviewer.styleEditorCloseTitle"}),fitContent:!0,clickOutEnabled:!1,show:h,onClose:function(){O(!1)},buttons:[{text:o().createElement(Z.Z,{msgId:"gnviewer.styleEditorCloseCancel"}),onClick:function(){O(!1)}},{text:o().createElement(Z.Z,{msgId:"gnviewer.styleEditorCloseConfirm"}),bsStyle:"primary",onClick:function(){O(!1),_(!0)}}]},o().createElement("div",{style:{padding:"1rem"}},o().createElement(Z.Z,{msgId:"gnviewer.styleEditorCloseMessage"}))))):null})),fe=(0,l.connect)((0,a.P1)([O.Vf,F.HG,F.V$],(function(e,t,r){return{layer:e,enabled:!(null==t||!t.includes("change_resourcebase")),isNew:r}})),{onClick:function(e,t){return{type:E,layer:e,options:t}}})((function(e){var t,r=e.layer,n=e.status,i=e.onClick,l=void 0===i?function(){}:i,a=e.enabled,c=e.isNew,s=e.btnProps,f=void 0===s?{}:s,p=e.hide,y=e.selectedStyle;return p||"LAYER"!==n||null==r||null===(t=r.extendedParams)||void 0===t||!t.mapLayer||!a&&!c?null:o().createElement(ae,re({variant:"primary",className:"square-button-md"},f,{onClick:function(e){e.stopPropagation(),e.preventDefault(),l(r,{style:y})},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},tooltipId:o().createElement(Z.Z,{msgId:"gnviewer.editLayerStyle"})}),o().createElement(u.gG,{glyph:"dropper"}))}));const pe=(0,i.rx)("VisualStyleEditor",{component:se,containers:{TOC:{target:"toolbar",Component:fe,position:100},LayerSettings:{target:"style-button",Component:fe}},reducers:{styleeditor:s.Z},epics:oe(oe({},f.ZP),U)})},226735:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var n={PANEL:"PANEL"}}}]);