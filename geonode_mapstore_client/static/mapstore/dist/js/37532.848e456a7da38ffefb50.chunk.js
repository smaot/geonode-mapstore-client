(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[37532],{37532:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>S});var n=i(124852),r=i(532056),o=i(888340),a=i(503939),s=i(11020),l=i(809069),c=i(271533),d=i(883900),u=i(472568),h=i(823493),f=i.n(h),v=i(433353),g=i(550172),m=i(637453),p=i(854788);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach((function(t){var n,r,o;n=e,r=t,o=i[t],(r=Z(r))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,o,a,s=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return O(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function Z(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function k(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getObjectsToExcludeOnPick,o=void 0===r?function(){return[]}:r,a=n.pickObjectsLimit,s=void 0===a?Number.MAX_VALUE:a,l=n.depthTestAgainstTerrain,c=o();void 0!==l&&(i=e.scene.globe.depthTestAgainstTerrain,e.scene.globe.depthTestAgainstTerrain=l),c.forEach((function(e){e&&(e.show=!1)})),e.scene.render();var d=(0,v.u4)(e,t,{pickObjectsLimit:s});return void 0!==l&&(e.scene.globe.depthTestAgainstTerrain=i),c.forEach((function(e){e&&(e.show=!0)})),d}function D(e,t,i){var n=i.area,o=i.areaUom,a=i.length,s=i.lengthUom,l=i.height,c=i.heightUom,d=i.terrainCoordinates,u=i.geodesic,h=u&&null!=t&&t[t.length-1]?r.Z.fromCartesian(t[t.length-1]).height:void 0;switch(e){case"Point":return{type:"Feature",properties:d?{height:l,heightUom:c,terrainCoordinates:d}:{geodesic:u},geometry:{type:"Point",coordinates:(0,m.g7)(t[t.length-1],h)}};case"LineString":return{type:"Feature",properties:{length:a,lengthUom:s,geodesic:u},geometry:{type:"LineString",coordinates:t.map((function(e){return(0,m.g7)(e,h)}))}};case"Polygon":return{type:"Feature",properties:{area:n,areaUom:o,length:a,lengthUom:s,geodesic:u},geometry:{type:"Polygon",coordinates:[t.map((function(e){return(0,m.g7)(e,h)}))]}};case"Circle":return{type:"Feature",properties:{radius:(0,m.Qk)([t[0],t[1]],u),radiusUom:"m",geodesic:u},geometry:{type:"Point",coordinates:(0,m.g7)(t[0],h)}};default:return null}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,i=arguments.length>2?arguments[2]:void 0;return new Promise((function(n){var l=i.map((function(e){return r.Z.fromCartesian(e)})).map((function(e){return new r.Z(e.longitude,e.latitude,0)}));(e.ready?Promise.resolve(!0):e.readyPromise).then((function(){var i,r,c=null!=e&&e.availability?o.Z(e,l):a.Z(e,t,l);s.Z(c)?null===(i=c.then((function(e){n(e)})))||void 0===i||null===(r=i.catch)||void 0===r||r.call(i,(function(){n()})):n()}))}))}const E=function(){return e=function e(t){var i,n,r,o,a,s,h,v,m,y=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._type=null==t?void 0:t.type,this._map=null==t?void 0:t.map,this._coordinatesLength=null==t?void 0:t.coordinatesLength,this._geodesic=null==t?void 0:t.geodesic,this._sampleTerrain=null==t?void 0:t.sampleTerrain,this._getObjectsToExcludeOnPick=function(){return[].concat(P(null!=t&&t.getObjectsToExcludeOnPick?t.getObjectsToExcludeOnPick():[]),[y._dynamicPrimitivesCollection,y._dynamicBillboardCollection])},this._depthTestAgainstTerrain=null==t?void 0:t.depthTestAgainstTerrain,this._getPositionInfo=(null==t?void 0:t.getPositionInfo)||k,this._handler=new l.Z(this._map.canvas),this._handler.setInputAction((function(e){y._handleDrawEnd(e,!0)}),c.Z.LEFT_DOUBLE_CLICK),this._handler.setInputAction((function(e){y._handleDrawing(e),y._handleDrawStart(e)}),c.Z.LEFT_CLICK),this._handler.setInputAction(f()((function(e){y._handleMouseMove(e)}),null!==(i=t.mouseMoveThrottleTime)&&void 0!==i?i:100),c.Z.MOUSE_MOVE),this._drawing=!1,this._forcedDrawEnd=!1,this._coordinates=[],this._style=(0,p.E4)(null==t?void 0:t.style),this._dynamicPrimitivesCollection=new d.Z({destroyPrimitives:!0}),this._map.scene.primitives.add(this._dynamicPrimitivesCollection),this._dynamicBillboardCollection=new u.Z({scene:this._map.scene}),this._map.scene.primitives.add(this._dynamicBillboardCollection),this._cursorImage=(0,g.xB)(2*(null===(n=this._style)||void 0===n||null===(r=n.cursor)||void 0===r?void 0:r.radius),{stroke:"#ffffff",strokeWidth:null===(o=this._style)||void 0===o||null===(a=o.cursor)||void 0===a?void 0:a.width,fill:"rgba(0, 0, 0, 0)"}),this._coordinateNodeImage=(0,g.xB)(2*(null===(s=this._style)||void 0===s||null===(h=s.coordinatesNode)||void 0===h?void 0:h.radius),{stroke:"#ffffff",strokeWidth:null===(v=this._style)||void 0===v||null===(m=v.coordinatesNode)||void 0===m?void 0:m.width,fill:"rgba(0, 0, 0, 0.1)"}),this._onMouseMove=null!=t&&t.onMouseMove?t.onMouseMove:function(){},this._onDrawStart=null!=t&&t.onDrawStart?t.onDrawStart:function(){},this._onDrawing=null!=t&&t.onDrawing?t.onDrawing:function(){},this._onDrawEnd=null!=t&&t.onDrawEnd?t.onDrawEnd:function(){}},(t=[{key:"getCoordinates",value:function(){return this._coordinates}},{key:"remove",value:function(){var e;this._handler&&(this._handler.destroy(),this._handler=null),this._coordinates=[],this._drawing=!1,null!==(e=this._map)&&void 0!==e&&e.isDestroyed&&!this._map.isDestroyed()&&((0,g.U2)(this._map,this._dynamicPrimitivesCollection),this._dynamicPrimitivesCollection=null,(0,g.U2)(this._map,this._dynamicBillboardCollection),this._dynamicBillboardCollection=null)}},{key:"_getCoordinatesLength",value:function(){return"Circle"===this._type?2:this._coordinatesLength}},{key:"_handleMouseMove",value:function(e){var t=this,i=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(i)if("Point"===this._type&&this._sampleTerrain){var n,o,a,s;j(null===(n=this._map)||void 0===n?void 0:n.terrainProvider,null!==(o=null===(a=this._map)||void 0===a||null===(s=a.terrainProvider)||void 0===s?void 0:s.sampleTerrainZoomLevel)&&void 0!==o?o:18,[i]).then((function(e){var n;if(e){var o=w(e,1)[0],a=[r.Z.toCartesian(o),i];n=(0,m.vZ)(a)*(0,m.Qk)(a),t._coordinates=a}else t._coordinates=[i];t._onMouseMove(t._drawPrimitives({distance:n,cartesian:i,coordinates:P(t._coordinates)}))}))}else{var l=this._coordinates[this._coordinates.length-1],c=[].concat(P(this._coordinates),[i]),d=(0,m.nz)(c,void 0),u=(0,m.Qk)(c,this._geodesic);this._onMouseMove(this._drawPrimitives({area:d,distance:u,previousCartesian:l,cartesian:i,coordinates:c}))}}},{key:"_handleDrawStart",value:function(e){var t,i,n=this;if(!(this._drawing||this._forcedDrawEnd||null!==(t=this._handler)&&void 0!==t&&null!==(i=t.isDestroyed)&&void 0!==i&&i.call(t))){var o=P(this._coordinates);this._coordinates=[];var a=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;a&&(this._coordinates.push(a),"Point"===this._type?((this._sampleTerrain&&2!==o.length?function(){var e,t,i,o;return j(null===(e=n._map)||void 0===e?void 0:e.terrainProvider,null!==(t=null===(i=n._map)||void 0===i||null===(o=i.terrainProvider)||void 0===o?void 0:o.sampleTerrainZoomLevel)&&void 0!==t?t:18,[a]).then((function(e){if(e){var t=w(e,1)[0];return[r.Z.toCartesian(t),a]}return[a]}))}:function(){return Promise.resolve(2===o.length?o:[a])})().then((function(e){n._onDrawStart(n._drawPrimitives({cartesian:e[e.length-1],coordinates:e,geodesicCoordinates:(0,m.Rk)(e)})),n._onDrawEnd(n._clearPrimitive({coordinates:e,geodesicCoordinates:(0,m.Rk)(e),feature:n._sampleTerrain&&2===e.length?D(n._type,e,{height:(0,m.vZ)(e)*(0,m.Qk)(e),heightUom:"m",terrainCoordinates:(0,m.g7)(e[0]),geodesic:n._geodesic}):D(n._type,e,{geodesic:n._geodesic})}))})),this._coordinates=[]):(this._onDrawStart(this._drawPrimitives({cartesian:a,coordinates:P(this._coordinates),geodesicCoordinates:(0,m.Rk)(this._coordinates)})),this._drawing=!0))}this._forcedDrawEnd&&(this._forcedDrawEnd=!1)}},{key:"_handleDrawing",value:function(e){if(this._drawing){if(this._coordinates.length+1===this._getCoordinatesLength())return this._forcedDrawEnd=!0,this._handleDrawEnd(e);var t=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(t){var i=this._coordinates[this._coordinates.length-1];this._coordinates.push(t);var n=P(this._coordinates),r=(0,m.nz)(n,void 0),o=(0,m.Qk)(n,this._geodesic);this._onDrawing(this._drawPrimitives({area:r,distance:o,previousCartesian:i,cartesian:t,coordinates:P(this._coordinates),geodesicCoordinates:(0,m.Rk)(this._coordinates)}))}}return null}},{key:"_handleDrawEnd",value:function(e,t){if(this._drawing){var i=this._getPositionInfo(this._map,e,{getObjectsToExcludeOnPick:this._getObjectsToExcludeOnPick,depthTestAgainstTerrain:this._depthTestAgainstTerrain}).cartesian;if(t&&this._coordinates.splice(this._coordinates.length-2,2),this._coordinates.push(i),!function(e,t,i){if(i&&i!==t.length)return!1;switch(e){case"Point":case"LineString":default:return!0;case"Polygon":return t.length>2}}(this._type,P(this._coordinates),this._getCoordinatesLength()))return this._onDrawEnd(this._clearPrimitive({})),this._coordinates=[],this._drawing=!1,null;var n="Polygon"===this._type?[].concat(P(this._coordinates),[this._coordinates[0]]):P(this._coordinates),r=(0,m.nz)(n,void 0),o=(0,m.Qk)(n,this._geodesic);this._onDrawEnd(this._clearPrimitive({area:r,distance:o,coordinates:n,geodesicCoordinates:(0,m.Rk)(n),feature:D(this._type,n,{area:r,areaUom:"sqm",length:o,lengthUom:"m",geodesic:this._geodesic})})),this._coordinates=[],this._drawing=!1}return null}},{key:"_drawPrimitives",value:function(e){return this._style&&this._updateDynamicCoordinates(e.coordinates),e}},{key:"_clearPrimitive",value:function(e){return this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),e}},{key:"_updateDynamicCoordinates",value:function(e){var t,i=this;switch(this._dynamicPrimitivesCollection.removeAll(),this._dynamicBillboardCollection.removeAll(),this._type){case"Point":if(this._geodesic){var n,r,o=(0,m.Rk)(e);this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(n=this._style)||void 0===n?void 0:n.wireframe),{},{coordinates:[o[0],e[0]]}))),this._dynamicBillboardCollection.add({position:o[0],image:this._coordinateNodeImage,color:(0,g.KF)(b({},null===(r=this._style)||void 0===r?void 0:r.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY})}break;case"Circle":if(e.length>1){var a=(0,m.Qk)(e,this._geodesic);if(this._geodesic){var s,l,c,d,u,h,f=(0,m.Rk)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),v=(0,m.Rk)(e);this._dynamicPrimitivesCollection.add((0,g.jy)(b(b({},null===(s=this._style)||void 0===s?void 0:s.wireframe),{},{coordinates:f[0],radius:a,geodesic:!0}))),this._dynamicPrimitivesCollection.add((0,g.jy)(b(b({},null===(l=this._style)||void 0===l?void 0:l.lineDrawing),{},{coordinates:v[0],radius:a,geodesic:!0}))),this._dynamicBillboardCollection.add({position:e[0],image:this._coordinateNodeImage,color:(0,g.KF)(b({},null===(c=this._style)||void 0===c?void 0:c.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:f[0],image:this._coordinateNodeImage,color:(0,g.KF)(b({},null===(d=this._style)||void 0===d?void 0:d.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicBillboardCollection.add({position:v[0],image:this._coordinateNodeImage,color:(0,g.KF)(b({},null===(u=this._style)||void 0===u?void 0:u.coordinatesNode)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(h=this._style)||void 0===h?void 0:h.wireframe),{},{geodesic:!0,coordinates:[e[0],v[0],v[1],f[1],f[0]]})))}else{var p,y;this._dynamicPrimitivesCollection.add((0,g.uN)(b(b({},null===(p=this._style)||void 0===p?void 0:p.lineDrawing),{},{coordinates:e[0],radius:a}))),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(y=this._style)||void 0===y?void 0:y.wireframe),{},{coordinates:P(e)})))}}break;case"LineString":if(e.length>1)if(this._geodesic){var _,w,T=(0,m.Rk)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),O=(0,m.Rk)(e);this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(_=this._style)||void 0===_?void 0:_.wireframe),{},{geodesic:this._geodesic,coordinates:P(T)}))),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(w=this._style)||void 0===w?void 0:w.lineDrawing),{},{geodesic:this._geodesic,coordinates:P(O)}))),T.forEach((function(e,t){var n;i._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(n=i._style)||void 0===n?void 0:n.wireframe),{},{geodesic:i._geodesic,coordinates:[O[t],T[t]]})))}))}else{var C;this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(C=this._style)||void 0===C?void 0:C.lineDrawing),{},{coordinates:P(e)})))}break;case"Polygon":if(e.length>1)if(this._geodesic){var Z,k,D,j=(0,m.Rk)(e,(function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.height})),E=(0,m.Rk)(e);this._dynamicPrimitivesCollection.add((0,g.XI)(b(b({},null===(Z=this._style)||void 0===Z?void 0:Z.areaDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(E),[E[0]])}))),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(k=this._style)||void 0===k?void 0:k.wireframe),{},{geodesic:this._geodesic,coordinates:[].concat(P(j),[j[0]])}))),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(D=this._style)||void 0===D?void 0:D.lineDrawing),{},{geodesic:this._geodesic,coordinates:[].concat(P(E),[E[0]])}))),j.forEach((function(e,t){var n;i._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(n=i._style)||void 0===n?void 0:n.wireframe),{},{geodesic:i._geodesic,coordinates:[E[t],j[t]]})))}))}else{var I,S;this._dynamicPrimitivesCollection.add((0,g.XI)(b(b({},null===(I=this._style)||void 0===I?void 0:I.areaDrawing),{},{coordinates:P(e)}))),this._dynamicPrimitivesCollection.add((0,g.c4)(b(b({},null===(S=this._style)||void 0===S?void 0:S.lineDrawing),{},{coordinates:P(e)})))}}e.length>0&&this._dynamicBillboardCollection.add({position:e[e.length-1],image:this._cursorImage,color:(0,g.KF)(b({},null===(t=this._style)||void 0===t?void 0:t.cursor)),disableDepthTestDistance:Number.POSITIVE_INFINITY}),this._map.scene.requestRender()}}])&&C(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}const S=function(e){var t=e.map,i=e.active,r=e.geometryType,o=void 0===r?"LineString":r,a=e.geodesic,s=void 0!==a&&a,l=e.onDrawStart,c=void 0===l?function(){}:l,d=e.onDrawing,u=void 0===d?function(){}:d,h=e.onMouseMove,f=void 0===h?function(){}:h,v=e.onDrawEnd,g=void 0===v?function(){}:v,m=e.onInit,p=void 0===m?function(){}:m,y=e.onDestroy,_=void 0===y?function(){}:y,b=e.getObjectsToExcludeOnPick,w=e.depthTestAgainstTerrain,P=e.sampleTerrain,T=e.coordinatesLength,O=e.getPositionInfo,C=e.style,Z=(0,n.useRef)();return(0,n.useEffect)((function(){return null!=t&&t.canvas&&i&&(p(),Z.current=new E({map:t,type:o,coordinatesLength:T,getPositionInfo:O,getObjectsToExcludeOnPick:b,depthTestAgainstTerrain:w,style:C,geodesic:s,sampleTerrain:P,onDrawStart:c,onDrawing:u,onMouseMove:f,onDrawEnd:g})),function(){var e;Z.current&&(_({coordinates:(e=Z.current.getCoordinates(),function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),Z.current.remove(),Z.current=null)}}),[t,i,o,P,T,s]),null}},854788:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){var r,o,a,s;r=e,o=t,a=i[t],s=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==n(s)?s:s+"")in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e){return o({wireframe:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:.5},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#ff0000",width:2,radius:4},coordinatesNode:{color:"#333333",width:2,radius:5}},e)}i.d(t,{E4:()=>a,cC:()=>l,r2:()=>c});var s=function(e){var t;return null==e||null===(t=e.geometry)||void 0===t?void 0:t.type},l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).getGeometryType,t=void 0===e?s:e;return function(e){return o(o({},null==e?void 0:e.properties),{},{geometryType:t(e)})}},c=function(e,t){return o(o({},null==t?void 0:t.properties),void 0!==(null==e?void 0:e.radius)&&{radius:e.radius})}},433353:(e,t,i)=>{"use strict";i.d(t,{u4:()=>s,ZP:()=>l});var n=i(532056),r=i(11020),o=i(604274),a=i(958913);function s(e,t){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).pickObjectsLimit,r=void 0===i?Number.MAX_VALUE:i,s=e.scene,l=e.camera,c=t.position||t.endPosition,d=s.pick(c),u=s.pickPosition(c);if(!((null==d?void 0:d.primitive)instanceof o.Z)&&!((null==d?void 0:d.primitive)instanceof a.Z)&&d&&u)return{cartesian:u,cartographic:n.Z.fromCartesian(u),feature:d};var h,f=l.getPickRay(c),v=s.drillPickFromRay(f,r).find((function(e){var t=e.exclude,i=e.object,n=e.position;return!t&&n&&i}))||null;if(v)return{cartesian:v.position,cartographic:n.Z.fromCartesian(v.position),feature:null==v||null===(h=v.object)||void 0===h?void 0:h.primitive};var g=s.globe.pick(f,s);return g?{cartesian:g,cartographic:n.Z.fromCartesian(g)}:{}}const l={getMouseXYZ:function(e,t){var i=e.scene,o=t.position||t.endPosition;if(!o)return null;if(e.scene.drillPick(o).find((function(e){var t,i,n;return!(!1===(null==e||null===(t=e.id)||void 0===t||null===(i=t.entityCollection)||void 0===i||null===(n=i.owner)||void 0===n?void 0:n.queryable))}))){var a=i.globe.depthTestAgainstTerrain,s=i.pickTranslucentDepth;i.globe.depthTestAgainstTerrain=!0,i.pickTranslucentDepth=!0;var l=i.pickPosition(o);if(i.globe.depthTestAgainstTerrain=a,i.pickTranslucentDepth=s,l)return n.Z.fromCartesian(l)}var c=e.camera.getPickRay(o),d=e.scene.globe.pick(c,e.scene),u=i._globe.ellipsoid;if(r.Z(d)){var h=u.cartesianToCartographic(d),f=function(e,t){if(null!==t.position){var i=e.scene,n=i._globe.ellipsoid;return i.camera.pickEllipsoid(t.position||t.endPosition,n)}return null}(e,t);return f&&(h.height=i._globe.getHeight(h),h.cartesian=f,h.position=d),h}return null},getMouseTile:function(e,t){var i=e.scene;if(!t.position)return null;var n=e.camera.getPickRay(t.position);return e.scene.globe.pickTile(n,i)}}},637453:(e,t,i)=>{"use strict";i.d(t,{eN:()=>f,tj:()=>v,Ys:()=>g,bj:()=>m,Qg:()=>p,nz:()=>y,Qk:()=>b,vZ:()=>w,g7:()=>P,Rk:()=>T});var n=i(660904),r=i(344485),o=i(405254),a=i(532056),s=i(835189),l=i(509187),c=i.n(l);function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){var i=n.Z.subtract(t,e,new n.Z),r=n.Z.multiplyByScalar(i,.5,new n.Z);return n.Z.add(e,r,new n.Z)}function v(e,t){var i=n.Z.normalize(e,new n.Z),o=n.Z.normalize(t,new n.Z),a=n.Z.dot(i,o);return r.Z.toDegrees(Math.acos(a))}function g(e){return e.map((function(t,i){var r=e[i-1],o=e[i+1];return r&&o?v(n.Z.subtract(r,t,new n.Z),n.Z.subtract(o,t,new n.Z)):null})).filter((function(e){return null!==e}))}function m(e){return new n.Z((e[0].x+e[1].x+e[2].x)/3,(e[0].y+e[1].y+e[2].y)/3,(e[0].z+e[1].z+e[2].z)/3)}function p(e,t){return e.map((function(i,r){var o=e[r-1],a=e[r+1];if(o&&a){var s=function(e,t){var i=n.Z.normalize(e,new n.Z),r=n.Z.normalize(t,new n.Z);return n.Z.cross(i,r,new n.Z)}(n.Z.subtract(o,i,new n.Z),n.Z.subtract(a,i,new n.Z)),l=-Math.sign(n.Z.dot(s,n.Z.subtract(i,t,new n.Z),new n.Z));return v(n.Z.multiplyByScalar(s,l,new n.Z),i)}return null})).filter((function(e){return null!==e}))}function y(e,t){if((null==e?void 0:e.length)<3)return 0;for(var i=o.Z.packArray(e),r=c()(i,t,2),a=0,s=0;s<r.length;s+=3){var l=e[r[s]],d=e[r[s+1]],u=e[r[s+2]],h=n.Z.subtract(d,l,new n.Z),f=n.Z.subtract(u,l,new n.Z),v=n.Z.cross(h,f,new n.Z);a+=n.Z.magnitude(v)/2}return a}function _(e,t){var i,n=[e,t].map((function(e){return a.Z.fromCartesian(e)}));return function(e,t,i){if(d())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var r=new(e.bind.apply(e,n));return i&&u(r,i.prototype),r}(s.Z,(i=n.map((function(e){var t=e.longitude,i=e.latitude;return new a.Z(t,i,0)})),function(e){if(Array.isArray(e))return h(e)}(i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).surfaceDistance}function b(e,t){return(null==e?void 0:e.length)<2?0:e.reduce((function(i,r,o){return e[o-1]?i+(t?_(r,e[o-1]):n.Z.distance(r,e[o-1])):i}),0)}function w(e){return Math.sign(a.Z.fromCartesian(e[1]).height-a.Z.fromCartesian(e[0]).height)}function P(e,t){var i=a.Z.fromCartesian(e),n=i.longitude,o=i.latitude,s=i.height;return[r.Z.toDegrees(n),r.Z.toDegrees(o),null!=t?t:s]}function T(e,t){var i=e.map((function(e){return a.Z.fromCartesian(e)})),n=t?t(i):0;return i.map((function(e){var t=e.longitude,i=e.latitude;return a.Z.toCartesian(new a.Z(t,i,n))}))}}}]);